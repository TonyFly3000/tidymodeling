---
title: "Basic R"
author: "Tony Duan"

execute:
  warning: false
  error: false
format:
  html:
    toc: true
    toc-location: right
    code-fold: show
    code-tools: true
    number-sections: true
    code-block-bg: true
    code-block-border-left: "#31BAE9"
---

![](images/R_logo.svg.png){width="300"}

# work with file

## get current directory

```{r}
#| eval: false
getwd()
```

## get all file name under current directory

```{r}
list.files()
```

## get file info

```{r}
#| eval: false
file.info("6 data analytic in R book.qmd")
```

## create folder

```{r}
#| eval: false
dir.create('testing_folder')
```

## delete folder/file

```{r}
#| eval: false
file.remove('testing_folder')
```

## copy file

```{r}
#| eval: false
library(fs)
file_copy('test.csv', 'test2.csv')
```

## download file from internet

```{r}
#| eval: false
url="https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-11/hotels.csv"

download.file(url = url, destfile = "hotels.csv")
```

# Condition with if/elif/else

```{r}
x <- -5
if(x > 0){
print("Non-negative number")
} else {
print("Negative number")
}
```

# Loop

## for Loop

```{r}
for (x in 1:4) {
  print(x)
}
```

## while Loop

```{r}
i <- 1
while (i < 6) {
  print(i)
  i <- i + 1
}
```

with break statement

```{r}
i <- 1
while (i < 6) {
  print(i)
  i <- i + 1
  if (i == 4) {break}
}
```

# function

## without Arguments

```{r}
my_function <- function() { 
  print("Hello World!")
}

my_function()
```

## return result

```{r}
adding_ten <- function(x) { 
  a=x+10
  return(a)
}

adding_ten(5)
```

# Package

## check R version

```{r}
version
```

## install R package


### install from Cran

99% of the time will install pacakge from The Comprehensive R Archive Network(cran).<https://cran.r-project.org/>

![](images/1_wcX2tfGe4til0PmjxhKuQA.png){width="300"}

```{r}
#| eval: false
install.packages('tidyverse')
```

### install from Github

```{r}
#| eval: false
pak::pkg_install("tidymodels/learntidymodels")
```


### install from Bioconductor

```{r}
#| eval: false
pak::pkg_install("mixOmics")
```


### install from local

```{r}
#| eval: false
pak::local_install("cli")
```

### install from Github

```{r}
#| eval: false
devtools::install_github("tidymodels/learntidymodels")
```

## check one package version

```{r}
packageVersion("tidyverse")
```

## check pacakge relationship

```{r}
pak::pkg_deps_explain("tibble", "rlang")
```
## check pacakge dependencies

```{r}
pak::pkg_deps_tree("tibble")
```

## check current loaded package

```{r}
sessionInfo()
```

## check all package version

```{r}
ip = as.data.frame(installed.packages()[,c(1,3:4)])
ip = ip[is.na(ip$Priority),1:2,drop=FALSE]
head(ip)
```

## check package install loaciton

```{r}
.libPaths()
```
