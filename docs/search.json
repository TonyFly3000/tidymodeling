[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "About",
    "section": "",
    "text": "R is based heavily on the S language, first developed in the 1960s and 1970s by researchers at Bell Laboratories in New Jersey\nR’s developers—Ross Ihaka and Robert Gentleman at the Univer- sity of Auckland in New Zealand—released it in the early 1990s under the\nGNU public license. (The software was named for Ross and Robert’s shared first initial.)\n\n1 + 1\n\n[1] 2\n\n\n\n\n\n Back to top"
  },
  {
    "objectID": "Plot/4 Financial data.html",
    "href": "Plot/4 Financial data.html",
    "title": "Financial data",
    "section": "",
    "text": "Code\nlibrary(quantmod)\nlibrary(tidyverse)\nlibrary(yahoofinancer)\nlibrary(Quandl)\nlibrary(plotly)\nlibrary(finreportr)\nlibrary(rvest)\n\n\n\n1 stock price\n\n\nCode\nnifty_50 &lt;- Index$new('^NSEI')\n\ndata001=nifty_50$get_history(start = '2023-01-01', interval = '1d') %&gt;% unnest(cols = adj_close)\n\na=head(data001$adj_close,1)[[1]]\n\ndata001b=data001 %&gt;% mutate(adj_close2=adj_close/a)\n\n\n\n\nCode\nlength(unlist(data001$adj_close))\n\n\n[1] 525\n\n\nCode\nlength(data001$adj_close)\n\n\n[1] 525\n\n\n\n\nCode\ntest=data001$adj_close %&gt;% unlist()\n\n\n\n\nCode\naapl &lt;- Ticker$new('aapl')\n\ndata002=aapl$get_history(start = '2023-01-01', interval = '1d') %&gt;% mutate(adj_close=adj_close %&gt;% as.numeric())\n\na=head(data002$adj_close,1)[[1]]\n\ndata002b=data002 %&gt;% mutate(adj_close2=adj_close/a)\n\n\n\n\nCode\n# initialize plot\nfig &lt;- plot_ly()\n\n# add data from first dataframe Df1\nfig &lt;- fig %&gt;%\n    add_lines(data=data001b, name=\"NSEI50\", x = ~date, y = ~adj_close2)\n\n# add data from second dataframe Df2\nfig &lt;- fig %&gt;%\n    add_lines(data=data002b, name=\"apple\", x = ~date, y = ~adj_close2)\n# show figure\nfig\n\n\n\n\n\n\n\n\n2 financials income statement\n\n\nCode\nlibrary(chromote)\nlibrary(httr)\n\n\n\n\nCode\nurl='https://finance.yahoo.com/quote/AMAT/financials'\n\n\n\n\nCode\nb &lt;- ChromoteSession$new()\n\n\n\n\nCode\n# In a web browser, open a viewer for the headless browser. Works best with\n# Chromium-based browsers.\n#b$view()\nb$Page$navigate(url)\n\n\n$frameId\n[1] \"6D7895FD0F79802FD8271F3608D6695B\"\n\n$loaderId\n[1] \"FFF2E0136BD581DA704EC22CDA17E7BA\"\n\n\n\n\nCode\nx &lt;- b$DOM$getDocument()\n\n\n\n\nCode\nb$screenshot(\"sidebar.png\")\n\n\n[1] \"An error occurred: Error in onRejected(...): code: -32000\\n  message: Cannot take screenshot with 0 height.\\n\"\n\n\n\n\nCode\npage=b$Runtime$evaluate(\"document.querySelector('html').outerHTML\")$result$value %&gt;% \n  read_html()\n\n\n\n\nCode\nb$close()\n\n\n[1] TRUE\n\n\n\n\nCode\ncol1=page%&gt;% \n  html_elements(\".row .column:nth-child(1)\") %&gt;% html_text2()  %&gt;% head(33)\n\n\n\n\nCode\ncol2=page%&gt;% \n  html_elements(\".row .column:nth-child(2)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol3=page%&gt;% \n  html_elements(\".row .column:nth-child(3)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol4=page%&gt;% \n  html_elements(\".row .column:nth-child(4)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol5=page%&gt;% \n  html_elements(\".row .column:nth-child(5)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol6=page%&gt;% \n  html_elements(\".row .column:nth-child(6)\") %&gt;% html_text2()\n\n\n\n\nCode\ndata001=data.frame(col1,col2,col3,col4,col5,col6)\n\n\n\n\nCode\nlibrary(janitor )\ncolnames(data001) &lt;- data001[1,]\ndata001 &lt;- data001[-1, ]  %&gt;%clean_names()\n\n\n\n\nCode\nglimpse(data001)\n\n\nRows: 32\nColumns: 6\n$ breakdown   &lt;chr&gt; \"HTML_TAG_START HTML_TAG_END\\nTotal Revenue\", \"Cost of Rev…\n$ ttm         &lt;chr&gt; \"27,635,000.00\", \"14,446,000.00\", \"13,189,000.00\", \"5,114,…\n$ x10_31_2024 &lt;chr&gt; \"27,176,000.00\", \"14,279,000.00\", \"12,897,000.00\", \"5,030,…\n$ x10_31_2023 &lt;chr&gt; \"26,517,000.00\", \"14,133,000.00\", \"12,384,000.00\", \"4,730,…\n$ x10_31_2022 &lt;chr&gt; \"25,785,000.00\", \"13,792,000.00\", \"11,993,000.00\", \"4,209,…\n$ x10_31_2021 &lt;chr&gt; \"23,063,000.00\", \"12,149,000.00\", \"10,914,000.00\", \"3,714,…\n\n\n\n\nCode\ndata002=data001 %&gt;% mutate(breakdown=breakdown %&gt;% str_remove_all('HTML_TAG_START HTML_TAG_END')\n                           ,ttm=round(as.numeric(gsub(\",\",\"\",ttm)))\n                           ,year_2024=round(as.numeric(gsub(\",\",\"\",x10_31_2024)))\n                             ,year_2022=round(as.numeric(gsub(\",\",\"\",x10_31_2022)))\n                             ,year_2021=round(as.numeric(gsub(\",\",\"\",x10_31_2021)))\n                             ,year_2023=round(as.numeric(gsub(\",\",\"\",x10_31_2023)))\n                           ) %&gt;% select(-x10_31_2023,-x10_31_2022,-x10_31_2021,-x10_31_2024)\n\n\n\n\nCode\nglimpse(data002)\n\n\nRows: 32\nColumns: 6\n$ breakdown &lt;chr&gt; \"\\nTotal Revenue\", \"Cost of Revenue\", \"Gross Profit\", \"\\nOpe…\n$ ttm       &lt;dbl&gt; 27635000, 14446000, 13189000, 5114000, 8075000, -107000, NA,…\n$ year_2024 &lt;dbl&gt; 27176000, 14279000, 12897000, 5030000, 7867000, 285000, NA, …\n$ year_2022 &lt;dbl&gt; 25785000, 13792000, 11993000, 4209000, 7784000, -189000, 400…\n$ year_2021 &lt;dbl&gt; 23063000, 12149000, 10914000, 3714000, 7200000, -118000, -31…\n$ year_2023 &lt;dbl&gt; 26517000, 14133000, 12384000, 4730000, 7654000, 62000, NA, 7…\n\n\n\n\nCode\noptions(scipen = 999)\n\nlibrary(knitr)\nkable(data002)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbreakdown\nttm\nyear_2024\nyear_2022\nyear_2021\nyear_2023\n\n\n\n\n2\nTotal Revenue\n27635000\n27176000\n25785000\n23063000\n26517000\n\n\n3\nCost of Revenue\n14446000\n14279000\n13792000\n12149000\n14133000\n\n\n4\nGross Profit\n13189000\n12897000\n11993000\n10914000\n12384000\n\n\n5\nOperating Expense\n5114000\n5030000\n4209000\n3714000\n4730000\n\n\n6\nOperating Income\n8075000\n7867000\n7784000\n7200000\n7654000\n\n\n7\nNet Non Operating Interest Income Expense\n-107000\n285000\n-189000\n-118000\n62000\n\n\n8\nOther Income Expense\nNA\nNA\n4000\n-311000\nNA\n\n\n9\nPretax Income\n7968000\n8152000\n7599000\n6771000\n7716000\n\n\n10\nTax Provision\n1625000\n975000\n1074000\n883000\n860000\n\n\n11\nNet Income Common Stockholders\n6343000\n7177000\n6525000\n5888000\n6856000\n\n\n12\nDiluted NI Available to Com Stockholders\n6343000\n7177000\n6525000\n5888000\n6856000\n\n\n13\nBasic EPS\n8\n9\n7\n6\n8\n\n\n14\nDiluted EPS\n8\n9\n7\n6\n8\n\n\n15\nBasic Average Shares\n822750\n827000\n871000\n910000\n840000\n\n\n16\nDiluted Average Shares\n829500\n834000\n877000\n919000\n845000\n\n\n17\nTotal Operating Income as Reported\n8075000\n7867000\n7788000\n6889000\n7654000\n\n\n18\nTotal Expenses\n19560000\n19309000\n18001000\n15863000\n18863000\n\n\n19\nNet Income from Continuing & Discontinued Operation\n6343000\n7177000\n6525000\n5888000\n6856000\n\n\n20\nNormalized Income\n6343000\n7177000\n6521564\n6158570\n6856000\n\n\n21\nInterest Income\n145000\n532000\n39000\n118000\n300000\n\n\n22\nInterest Expense\n252000\n247000\n228000\n236000\n238000\n\n\n23\nNet Interest Income\n-107000\n285000\n-189000\n-118000\n62000\n\n\n24\nEBIT\n8220000\n8399000\n7827000\n7007000\n7954000\n\n\n25\nEBITDA\n8626000\n8791000\n8271000\n7401000\n8469000\n\n\n26\nReconciled Cost of Revenue\n14446000\n14279000\n13792000\n12149000\n14133000\n\n\n27\nReconciled Depreciation\n406000\n392000\n444000\n394000\n515000\n\n\n28\nNet Income from Continuing Operation Net Minority Interest\n6343000\n7177000\n6525000\n5888000\n6856000\n\n\n29\nTotal Unusual Items Excluding Goodwill\nNA\nNA\n4000\n-311000\nNA\n\n\n30\nTotal Unusual Items\nNA\nNA\n4000\n-311000\nNA\n\n\n31\nNormalized EBITDA\n8626000\n8791000\n8267000\n7712000\n8469000\n\n\n32\nTax Rate for Calcs\n0\n0\n0\n0\n0\n\n\n33\nTax Effect of Unusual Items\nNA\nNA\n564\n-40430\nNA\n\n\n\n\n\n\n\n3 resource:\nhttps://github.com/rsquaredacademy/yahoofinancer\nhttps://github.com/sewardlee337/finreportr\nhttps://www.youtube.com/watch?v=uVHGgSXtQmE\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "Financial data"
    ]
  },
  {
    "objectID": "other/6 other/2 translation.html",
    "href": "other/6 other/2 translation.html",
    "title": "Translation",
    "section": "",
    "text": "Code\nlibrary(polyglotr)\n\n\n\n1 Translation word\n\n\nCode\nword_translation &lt;- linguee_word_translation(\"fruit\", source_language = \"en\", target_language = \"zh\")\n\nword_translation\n\n\n[1] \"水果\" \"果香\" \"果子\" \"果品\" \"实\"   \"檎\"  \n\n\n\n\n2 translate sentences\n\n\nCode\ngoogle_get_supported_languages()\n\n\n# A tibble: 194 × 2\n   Language  `ISO-639 code`\n   &lt;chr&gt;     &lt;chr&gt;         \n 1 Abkhaz    ab            \n 2 Acehnese  ace           \n 3 Acholi    ach           \n 4 Afrikaans af            \n 5 Albanian  sq            \n 6 Alur      alz           \n 7 Amharic   am            \n 8 Arabic    ar            \n 9 Armenian  hy            \n10 Assamese  as            \n# ℹ 184 more rows\n\n\n\n\nCode\ntexts &lt;- c(\"Hello, how are you?\", \n           \"I love programming!\", \n           \"This is a test.\")\n\nlanguages &lt;- c(\"es\", \"fr\", \"zh-CN\")\n\n\ncreate_translation_table(texts, languages)\n\n\n        original_word                           es                          fr\n1 Hello, how are you?           ¿Hola, cómo estás? Bonjour comment allez-vous?\n2 I love programming! ¡Me encanta la programación!   J'adore la programmation!\n3     This is a test.          Esta es una prueba.           Ceci est un test.\n           zh-CN\n1       你好吗？\n2   我喜欢编程！\n3 这是一个测试。\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "6 other",
      "Translation"
    ]
  },
  {
    "objectID": "other/6 other/1 chromote.html",
    "href": "other/6 other/1 chromote.html",
    "title": "chromote",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(chromote)\n\n\n\n\nCode\npackageVersion(\"chromote\")\n\n\n\n1 create view\n\n\nCode\nlibrary(chromote)\n\nb &lt;- ChromoteSession$new()\n\n# In a web browser, open a viewer for the headless browser. Works best with\n# Chromium-based browsers.\nb$view()\n\n\n\n\nCode\nb$Browser$getVersion()\n\n\n\n\n2 go to page\n\n\nCode\nb$Page$navigate(\"https://www.r-project.org/\")\n\n\n\n\n3 take picture\n\n\nCode\n# Saves to screenshot.png\nb$screenshot()\n\n\n\n\nCode\n# Takes a screenshot of elements picked out by CSS selector\nis_interactive &lt;- interactive() # Display screenshot if interactive\nb$screenshot(\"sidebar.png\", selector = \"h1\" ,show = is_interactive)\n\n\n\n\n4 take picture as pdf\n\n\nCode\nb$screenshot_pdf(filename='page.pdf')\n\n\n\n\n5 Reference:\nhttps://rstudio.github.io/chromote/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "6 other",
      "chromote"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html",
    "href": "Publish/4 email/1 email.html",
    "title": "Email",
    "section": "",
    "text": "Code\nlibrary(blastula)\nlibrary(keyring)\n\n\n\n\n\n\n\n\nCode\ncreate_smtp_creds_key(\n  id = \"gmail001_creds\",\n  provider = \"gmail\",\n  user = \"verykoala@gmail.com\",\n  overwrite = TRUE\n  )\n\n\n\n\n\n\n\nCode\n# create_smtp_creds_key(\n#   id = \"outlook001_creds\",\n#   provider = \"outlook\",\n#   user = \"jcpartner@outlook.com\",\n#   overwrite = TRUE\n#   )\n\ncreate_smtp_creds_file(file = \"ggnot_throwaway_creds\",\n                       user = \"jcpartner@outlook.com\",\n                       provider = \"outlook\")\n\n\n\n\nCode\n#delete_credential_key(\"gmail001_creds\")\n\n\n\n\nCode\nview_credential_keys()\n\n\n\n\n\n\n\n\nCode\nlibrary(blastula)\nmsg=compose_email(\n  body = md(\n  \"Hi there 👋,\n  \n  This is an email to let you now thatrunning job **finished**.\n\n  Best,&lt;br&gt;\n  Tony\"\n  )\n)\n\nmsg\n\n\n\n\n\n\n\n\n\nCode\nmsg %&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nlibrary(Microsoft365R)\noutl &lt;- get_personal_outlook()\n\n\n\n\nCode\n# list the most recent emails in your Inbox\n#outl$list_emails()\n\n\n\n\nCode\nem &lt;- outl$create_email(msg, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\n\n\n\n\nCode\nem$send()\n\n\n\n\n\n\n\n\nCode\nemail_obj=render_email('.quarto_email.Rmd')\n\n\n\n\nCode\nemail_obj\n\n\n\n\n\n\nCode\nemail_obj%&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nem &lt;- outl$create_email(email_obj, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\nem$send()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#create-smtp-credentials",
    "href": "Publish/4 email/1 email.html#create-smtp-credentials",
    "title": "Email",
    "section": "",
    "text": "Code\ncreate_smtp_creds_key(\n  id = \"gmail001_creds\",\n  provider = \"gmail\",\n  user = \"verykoala@gmail.com\",\n  overwrite = TRUE\n  )\n\n\n\n\n\n\n\nCode\n# create_smtp_creds_key(\n#   id = \"outlook001_creds\",\n#   provider = \"outlook\",\n#   user = \"jcpartner@outlook.com\",\n#   overwrite = TRUE\n#   )\n\ncreate_smtp_creds_file(file = \"ggnot_throwaway_creds\",\n                       user = \"jcpartner@outlook.com\",\n                       provider = \"outlook\")\n\n\n\n\nCode\n#delete_credential_key(\"gmail001_creds\")\n\n\n\n\nCode\nview_credential_keys()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#email-content",
    "href": "Publish/4 email/1 email.html#email-content",
    "title": "Email",
    "section": "",
    "text": "Code\nlibrary(blastula)\nmsg=compose_email(\n  body = md(\n  \"Hi there 👋,\n  \n  This is an email to let you now thatrunning job **finished**.\n\n  Best,&lt;br&gt;\n  Tony\"\n  )\n)\n\nmsg",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#send-email",
    "href": "Publish/4 email/1 email.html#send-email",
    "title": "Email",
    "section": "",
    "text": "Code\nmsg %&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nlibrary(Microsoft365R)\noutl &lt;- get_personal_outlook()\n\n\n\n\nCode\n# list the most recent emails in your Inbox\n#outl$list_emails()\n\n\n\n\nCode\nem &lt;- outl$create_email(msg, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\n\n\n\n\nCode\nem$send()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#send-email-with-quarto-content",
    "href": "Publish/4 email/1 email.html#send-email-with-quarto-content",
    "title": "Email",
    "section": "",
    "text": "Code\nemail_obj=render_email('.quarto_email.Rmd')\n\n\n\n\nCode\nemail_obj\n\n\n\n\n\n\nCode\nemail_obj%&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nem &lt;- outl$create_email(email_obj, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\nem$send()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/2 quarto/6 quarto parameters.html",
    "href": "Publish/2 quarto/6 quarto parameters.html",
    "title": "quarto parameters",
    "section": "",
    "text": "Code\nlibrary(quarto)\nquarto_render(\"_parameters in R.qmd\"\n,output_file='R.html'\n,execute_params = list(name='new me',key=9999))",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto parameters"
    ]
  },
  {
    "objectID": "Publish/2 quarto/6 quarto parameters.html#render-qmd-file-with-parameters-input",
    "href": "Publish/2 quarto/6 quarto parameters.html#render-qmd-file-with-parameters-input",
    "title": "quarto parameters",
    "section": "",
    "text": "Code\nlibrary(quarto)\nquarto_render(\"_parameters in R.qmd\"\n,output_file='R.html'\n,execute_params = list(name='new me',key=9999))",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto parameters"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html",
    "href": "Publish/2 quarto/2 quarto blog.html",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---\n\n\n\n\n\n\n\nCode\n---\ndraft: true  \n  \n---\n\n\n\n\n\n\n\nCode\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true\n\n\n\n\n\n\n\nCode\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---\n\n\n\n\n\n\n\nCode\ndraft:true",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#blog-post",
    "href": "Publish/2 quarto/2 quarto blog.html#blog-post",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#hide-post-from-main-page",
    "href": "Publish/2 quarto/2 quarto blog.html#hide-post-from-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ndraft: true  \n  \n---",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#quarto.yml",
    "href": "Publish/2 quarto/2 quarto blog.html#quarto.yml",
    "title": "quarto blog",
    "section": "",
    "text": "Code\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#index.qmd",
    "href": "Publish/2 quarto/2 quarto blog.html#index.qmd",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "href": "Publish/2 quarto/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\ndraft:true",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/3 quarto website.html",
    "href": "Publish/2 quarto/3 quarto website.html",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub\n\n\n\n\n\n\n\n\n\n_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "href": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-github-page",
    "href": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-github-page",
    "title": "quarto website",
    "section": "",
    "text": "_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Publish/1 Shiny/2 shiny photo editor.html",
    "href": "Publish/1 Shiny/2 shiny photo editor.html",
    "title": "Shiny in R:photo editor",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/photo_editor/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "1 Shiny",
      "Shiny in R:photo editor"
    ]
  },
  {
    "objectID": "Publish/3 dashboard/1 dashboard.html",
    "href": "Publish/3 dashboard/1 dashboard.html",
    "title": "Dashboard",
    "section": "",
    "text": "quarto dashboard\n\n\n\nCode\n\n_dashboard_r.qmd\n\n---\ntitle: \"First quarto dashboard\"\nformat: dashboard\n---\n\n```{r}\na=1\na\n```\n\n\n\n\n\nReference:\nhttps://www.youtube.com/watch?v=HW7QbqI4fH0\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "3 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "other/1 google analytics/1 google analytics.html",
    "href": "other/1 google analytics/1 google analytics.html",
    "title": "google analytic in R",
    "section": "",
    "text": "1 package\n\n\nCode\n# Libraries\nlibrary(googleAnalyticsR)\nlibrary(gargle)\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(lubridate)\n\n\n\n\n2 API\n\n\nCode\n# Access\nga_auth(email=\"verykoala@gmail.com\")\nga_account_list(\"ga4\")\n\n\n# A tibble: 4 × 4\n  account_name accountId property_name           propertyId\n  &lt;chr&gt;        &lt;chr&gt;     &lt;chr&gt;                   &lt;chr&gt;     \n1 verykoala    30370450  verykoala - GA4         431072878 \n2 verykoala    30370450  drinking                431975107 \n3 Demo Account 54516992  GA4 - Flood-It!         153293282 \n4 Demo Account 54516992  GA4 - Google Merch Shop 213025502 \n\n\n\n\n3 download data\n\n\nCode\nmy_property_id &lt;- 431975107\nfrom_date &lt;- \"2023-01-01\"\nto_date &lt;- \"2024-12-31\"\n           \noverall &lt;- ga_data(\n  my_property_id,\n  metrics = c(\"activeUsers\", \"newUsers\",\"sessions\", \"screenPageViews\"),\n  date_range = c(from_date, to_date)\n  )\n\n\n\n\nCode\noverall\n\n\n# A tibble: 1 × 4\n  activeUsers newUsers sessions screenPageViews\n        &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;           &lt;dbl&gt;\n1          92       99      472            2743\n\n\n\n\n4 image at the back into plotly\n\n\nCode\n# By Country\ncountry &lt;- ga_data(\n  my_property_id,\n  dimensions = c(\"country\"),\n  metrics = c(\"activeUsers\", \"newUsers\",\"sessions\", \"screenPageViews\"),\n  date_range = c(from_date, to_date)\n)\n\ncountry\n\n\n# A tibble: 18 × 5\n   country        activeUsers newUsers sessions screenPageViews\n   &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;           &lt;dbl&gt;\n 1 Hong Kong               32       23      136             631\n 2 China                   28       31      279            1814\n 3 United States           15       12       20              95\n 4 Thailand                 6        2       14              87\n 5 Ireland                  5        5        5               5\n 6 Japan                    5        4        5              13\n 7 Macao                    4        4       20              58\n 8 Sweden                   4        4        4               4\n 9 United Kingdom           3        3        3               3\n10 (not set)                2        2        2               2\n11 Malaysia                 2        2        4               9\n12 Singapore                2        0        4              11\n13 South Korea              2        2        3               2\n14 Argentina                1        1        1               1\n15 Australia                1        1        1               1\n16 Canada                   1        1        1               3\n17 Iran                     1        1        1               3\n18 Taiwan                   1        1        1               1\n\n\n\n\n5 add image at the back into plotly\n\n\nCode\nfig &lt;- plot_ly(data=country,x = ~sessions,y=~country,text=~sessions, type = \"bar\",orientation = 'h')%&gt;% \n  layout(title = 'Vistors',yaxis = list(title='Regions',categoryorder = \"total ascending\"),\n         images = list(  \n      list(  \n        source = base64enc::dataURI(file = \"images/google_analytics-ar21.webp\")\n        ,xref = \"paper\"\n        ,yref = \"paper\" \n        ,x = 0.9\n        ,y = 0.3\n        ,sizex = 0.3\n        ,sizey = 0.3\n       ,xanchor=\"right\"  \n        ,layer = \"below\"\n      )  \n         \n         )\n)\n\nfig\n\n\n\n\n\n\n\n\nCode\nsample &lt;- ga_data(\n  my_property_id,\n  dimensions = c(\"date\",\"dayOfWeek\"),\n  metrics = c(\"activeUsers\", \"newUsers\",\"sessions\", \"screenPageViews\"),\n  date_range = c(from_date, to_date)\n) %&gt;% \narrange(desc(date)) %&gt;% mutate(weekend_date=floor_date(date, \"week\")+7)\n\nsample\n\n\n# A tibble: 100 × 7\n   date       dayOfWeek activeUsers newUsers sessions screenPageViews\n   &lt;date&gt;     &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;           &lt;dbl&gt;\n 1 2024-12-31 2                   2        2        2               2\n 2 2024-12-29 0                   2        0        4              11\n 3 2024-12-27 5                   2        0        5             215\n 4 2024-12-26 4                   2        1        2              23\n 5 2024-12-25 3                   3        1       10              37\n 6 2024-12-22 0                   2        0        3              39\n 7 2024-12-21 6                   2        0        5              20\n 8 2024-12-20 5                   4        2        7              63\n 9 2024-12-19 4                   2        0       11              39\n10 2024-12-18 3                   2        0        7              13\n# ℹ 90 more rows\n# ℹ 1 more variable: weekend_date &lt;date&gt;\n\n\nCode\nsample002=sample %&gt;% group_by(weekend_date) %&gt;% summarise(activeUsers=sum(activeUsers)\n                                                          ,sessions=sum(sessions))\n\n\n\n\nCode\nfig &lt;- plot_ly(data = sample002, x = ~weekend_date, y = ~sessions,mode = 'lines')%&gt;% layout(title = 'Vistors',images = list(  \n      list(  \n        source = base64enc::dataURI(file = \"images/google_analytics-ar21.webp\")\n        ,xref = \"paper\"\n        ,yref = \"paper\" \n        ,x = 0.4\n        ,y = 0.9\n        ,sizex = 0.3\n        ,sizey = 0.3\n       ,xanchor=\"left\"  \n      )  \n    )\n    ) \nfig\n\n\n\n\n\n\n\n\n6 reference:\nhttps://www.listendata.com/2023/09/how-to-use-google-analytics-in-r.html\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "1 google analytics",
      "google analytic in R"
    ]
  },
  {
    "objectID": "other/2 web scrap/web scrap.html",
    "href": "other/2 web scrap/web scrap.html",
    "title": "web scrap",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(rvest)\n\n\n\n1 table\n\n\nCode\nlibrary(tidyverse)\ncontent &lt;- read_html(\"https://en.wikipedia.org/wiki/List_of_highest-grossing_films_in_the_United_States_and_Canada\")\ntables &lt;- content %&gt;% html_table(fill = TRUE)\nfirst_table &lt;- tables[[1]]\nfirst_table &lt;- first_table[-1,]\nfirst_table\n\n\n\n\n2 Reference:\nhttps://rvest.tidyverse.org/reference/read_html_live.html\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "2 web scrap",
      "web scrap"
    ]
  },
  {
    "objectID": "Publish/1 Shiny/1 shiny weight tracking.html",
    "href": "Publish/1 Shiny/1 shiny weight tracking.html",
    "title": "Shiny in R:weight tracking",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/weightshiny/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "1 Shiny",
      "Shiny in R:weight tracking"
    ]
  },
  {
    "objectID": "Publish/1 Shiny/3 China accident map.html",
    "href": "Publish/1 Shiny/3 China accident map.html",
    "title": "Shiny in R:China accident map",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/China_accident_map/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "1 Shiny",
      "Shiny in R:China accident map"
    ]
  },
  {
    "objectID": "Publish/2 quarto/4 quarto presentation .html",
    "href": "Publish/2 quarto/4 quarto presentation .html",
    "title": "quarto presentation",
    "section": "",
    "text": "1 revealjs YAML\n\n\nCode\n---\ntitle: \"Habits\"\nauthor: \"John Doe\"\nformat: revealjs\n---\n\n\n\n\n2 pages\n\n\nCode\n# pages\n\n# In the morning\n\n## Getting up\n\n- Turn off alarm\n- Get out of bed\n\n## Breakfast\n\n- Eat eggs\n- Drink coffee\n\n\n\n\n3 YAML format setting\n\n\nCode\nformat:\n  revealjs:\n    controls: true\n    navigation-mode: vertical\n    height: 800\n    width: 1000    \n    fontsize: 20pt\n    page-layout: full\n    logo: images/logo.jpg\n    footer: \"This is footer(https://google.com/)\"\n    slide-number: c\n    show-slide-number: all\n    menu: false\n\n\n\n\n4 Main Title Slide Background YAML setting\n\n\nCode\n---\ntitle: My Slide Show\ntitle-slide-attributes:\n    data-background-image: /path/to/title_image.png\n    data-background-size: contain\n    data-background-opacity: \"0.5\"\n---\n\n\n\n\n5 Chalkboard YAML setting\n\n\nCode\n---\ntitle: \"Presentation\"\nformat:\n  revealjs:\n    chalkboard: true\n---\n\n\n\n\n6 center whole page\n\n\nCode\n# This will be centered {.center}\n\nThis text is moved as well\n\n\n\n\n7 reference:\nhttps://quarto.org/docs/presentations/revealjs/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto presentation"
    ]
  },
  {
    "objectID": "Publish/2 quarto/5 quarto extensions.html",
    "href": "Publish/2 quarto/5 quarto extensions.html",
    "title": "quarto Extensioins",
    "section": "",
    "text": "Extensions are a powerful way to modify and extend the behavior of Quarto. Quarto v1.2 Required for Quarto Extensions.\n\n1 quarto extension： lightbox\nAn extension that uses the GLightbox javascript library to add lightbox styling and behavior to images in your HTML documents.\n\n\n2 Installation:\n\n\n\nCode\n\nTerminal\n\nquarto install extension quarto-ext/lightbox\n\n\n\n\n\n3 Usage:\nThe Lightbox extension can automatically give images in your web page a lightbox treatment. You can enable this like:\nin header yaml:\n\n\nCode\n---\ntitle: Simple Lightbox Example\nfilters:\n   - lightbox\nlightbox: auto\n---\n\n\nIn addition to simply providing a lightbox treatment for individual images, you can also group images into a ‘gallery’. When the user activates the lightbox, they will be able to page through the images in the gallery without returning to the main document.\nin content:\n\n\nCode\n![](images/image-562149792.png){group=\"my-gallery\"\ndescription=\"its a picture\"}\n\n\n\n\n4 quarto extension lightbox example:\ncode:example.qmd\nwebsite:example.qmd.\n\n\n5 list quarto extension\ngo to folder which have added quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto list extensions\n\n\n\n\n\n\n6 update quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto update quarto-ext/fontawesome\n\n\n\n\n\n7 remove quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto remove quarto-ext/fontawesome\n\n\n\nIf you run the quarto remove extension command with no extension-id, you will be presented with a list of extensions that are present and you may select which extensions to remove.\n\n\n8 Reference\nhttps://quarto.org/docs/extensions/\nhttps://github.com/quarto-ext/lightbox\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto Extensioins"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html",
    "href": "Publish/2 quarto/1 quarto tips.html",
    "title": "quarto introduction",
    "section": "",
    "text": "https://quarto.org/docs/get-started/\n\n\n\n\n\nCode\ninstall.packages(\"quarto\")",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#install-quarto-cli",
    "href": "Publish/2 quarto/1 quarto tips.html#install-quarto-cli",
    "title": "quarto introduction",
    "section": "",
    "text": "https://quarto.org/docs/get-started/",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#install-quarto-pacakge",
    "href": "Publish/2 quarto/1 quarto tips.html#install-quarto-pacakge",
    "title": "quarto introduction",
    "section": "",
    "text": "Code\ninstall.packages(\"quarto\")",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-terminal",
    "href": "Publish/2 quarto/1 quarto tips.html#in-terminal",
    "title": "quarto introduction",
    "section": "in Terminal",
    "text": "in Terminal\n\n\n\nCode\n\nTerminal\n\nquarto check",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-r",
    "href": "Publish/2 quarto/1 quarto tips.html#in-r",
    "title": "quarto introduction",
    "section": "in R",
    "text": "in R\n\n\nCode\nlibrary(quarto)\nquarto_version()\n\n\n[1] '99.9.9'\n\n\nquarto location\n\n\nCode\nquarto_path()\n\n\n[1] \"/Users/jinchaoduan/quarto-cli/package/dist/bin/quarto\"",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#r",
    "href": "Publish/2 quarto/1 quarto tips.html#r",
    "title": "quarto introduction",
    "section": "R",
    "text": "R\n```{R}\nversion\n```",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#python",
    "href": "Publish/2 quarto/1 quarto tips.html#python",
    "title": "quarto introduction",
    "section": "Python",
    "text": "Python\n```{python}\nimport sys\nprint(sys.version)\n```",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#bath",
    "href": "Publish/2 quarto/1 quarto tips.html#bath",
    "title": "quarto introduction",
    "section": "Bath",
    "text": "Bath\n```{bash}\necho \"foo\" \n```",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-yaml-header",
    "href": "Publish/2 quarto/1 quarto tips.html#in-yaml-header",
    "title": "quarto introduction",
    "section": "in YAML header",
    "text": "in YAML header\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-code-chunk",
    "href": "Publish/2 quarto/1 quarto tips.html#in-code-chunk",
    "title": "quarto introduction",
    "section": "in code chunk",
    "text": "in code chunk\n\n\nCode\n #| eval: false",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#embed-youtube",
    "href": "Publish/2 quarto/1 quarto tips.html#embed-youtube",
    "title": "quarto introduction",
    "section": "embed youtube",
    "text": "embed youtube\n\n\nCode\n&lt;iframe width=\"640\" height=\"480\" src=\"https://www.youtube.com/embed/nku5zFMZAdU\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen&gt;\n&lt;/iframe&gt;",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#embed-local-video",
    "href": "Publish/2 quarto/1 quarto tips.html#embed-local-video",
    "title": "quarto introduction",
    "section": "embed local video",
    "text": "embed local video\n\n\nCode\n{{&lt; video images/vv.mp4 height=\"600\" &gt;}}",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#render-a-folder-or-file",
    "href": "Publish/2 quarto/1 quarto tips.html#render-a-folder-or-file",
    "title": "quarto introduction",
    "section": "render a folder or file",
    "text": "render a folder or file\n\n\n\nCode\n\nTerminal\n\nquarto render introduction.qmd\nquarto render subdir/\n\n\n\nsource:https://quarto.org/docs/projects/code-execution.html",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "intro/2 probability.html",
    "href": "intro/2 probability.html",
    "title": "Probability",
    "section": "",
    "text": "Probability is the branch of mathematics concerning events and numerical descriptions of how likely they are to occur. The probability of an event is a number between 0 and 1; the larger the probability, the more likely an event is to occur.",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#draw-10-number-from-1-to-10",
    "href": "intro/2 probability.html#draw-10-number-from-1-to-10",
    "title": "Probability",
    "section": "1.1 draw 10 number from 1 to 10",
    "text": "1.1 draw 10 number from 1 to 10\n\n\nCode\na=sample(1:10,10, replace=T) \na\n\n\n [1] 7 3 4 9 8 4 6 1 8 9\n\n\neach number around 10%\n\n\nCode\nas.data.frame(table(a))\n\n\n  a Freq\n1 1    1\n2 3    1\n3 4    2\n4 6    1\n5 7    1\n6 8    2\n7 9    2",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#draw-10000-number-from-1-to-10",
    "href": "intro/2 probability.html#draw-10000-number-from-1-to-10",
    "title": "Probability",
    "section": "1.2 draw 10,000 number from 1 to 10",
    "text": "1.2 draw 10,000 number from 1 to 10\n\n\nCode\na=sample(1:10,10000, replace=T) \n\n\neach number around 10%\n\n\nCode\nas.data.frame(table(a))\n\n\n    a Freq\n1   1  993\n2   2 1044\n3   3  955\n4   4  963\n5   5  967\n6   6 1001\n7   7 1035\n8   8 1043\n9   9  977\n10 10 1022",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#permutationsorder-dose-matter-2-number-from-4-number",
    "href": "intro/2 probability.html#permutationsorder-dose-matter-2-number-from-4-number",
    "title": "Probability",
    "section": "2.1 Permutations(order dose matter), 2 number from 4 number",
    "text": "2.1 Permutations(order dose matter), 2 number from 4 number\n\n\nCode\nlibrary(gtools)\nall_num=4\nchoose=2\n\nres&lt;- permutations(n= all_num, r = choose, v = c(1:all_num))\nres\n\n\n      [,1] [,2]\n [1,]    1    2\n [2,]    1    3\n [3,]    1    4\n [4,]    2    1\n [5,]    2    3\n [6,]    2    4\n [7,]    3    1\n [8,]    3    2\n [9,]    3    4\n[10,]    4    1\n[11,]    4    2\n[12,]    4    3\n\n\n\n\nCode\nprint (nrow(res))\n\n\n[1] 12\n\n\nall_num!/choose!\n4!/2!\n\n\nCode\n(4*3*2*1)/(2*1)\n\n\n[1] 12\n\n\nor\n\n\nCode\nfactorial(4) / factorial(2)\n\n\n[1] 12",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#combinationsorder-no-matter-2-number-from-4-number",
    "href": "intro/2 probability.html#combinationsorder-no-matter-2-number-from-4-number",
    "title": "Probability",
    "section": "2.2 Combinations(order no matter), 2 number from 4 number",
    "text": "2.2 Combinations(order no matter), 2 number from 4 number\n\n\nCode\nlibrary(gtools)\nall_num=4\nchoose=2\n\nres&lt;- combinations(n= all_num, r = choose, v = c(1:all_num))\nres\n\n\n     [,1] [,2]\n[1,]    1    2\n[2,]    1    3\n[3,]    1    4\n[4,]    2    3\n[5,]    2    4\n[6,]    3    4\n\n\n\n\nCode\nprint (nrow(res))\n\n\n[1] 6\n\n\nall_num!/((all_num-choose)! * choose!\n4!/((4-2)! * 2!)\n\n\nCode\n(4*3*2*1)/((2*1)*(2*1))\n\n\n[1] 6\n\n\nor\n\n\nCode\nfactorial(4) / (factorial(4-2)*factorial(2))\n\n\n[1] 6",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#soluition-1pat-least-onep1-snoringp2-snoringp3-snoringp4-snoring",
    "href": "intro/2 probability.html#soluition-1pat-least-onep1-snoringp2-snoringp3-snoringp4-snoring",
    "title": "Probability",
    "section": "3.1 soluition 1:P(at least one)=P(1 snoring)+P(2 snoring)+P(3 snoring)+P(4 snoring)",
    "text": "3.1 soluition 1:P(at least one)=P(1 snoring)+P(2 snoring)+P(3 snoring)+P(4 snoring)\n\n3.1.1 0 snoring\n\n\nCode\np0=(0.8*0.8*0.8*0.8)\np0\n\n\n[1] 0.4096\n\n\n\n\n3.1.2 1 snoring\n\n\nCode\np1=(0.2*0.8*0.8*0.8)*4\np1\n\n\n[1] 0.4096\n\n\n\n\n3.1.3 2 snoring\nchoose 2 from 4: factorial(4) / (factorial(4-2)*factorial(2))\ntotal 6 Permutations\n\n\nCode\nfactorial(4) / (factorial(4-2)*factorial(2))\n\n\n[1] 6\n\n\n\n\nCode\np2=(0.2*0.2*0.8*0.8)*6\np2\n\n\n[1] 0.1536\n\n\n\n\n3.1.4 3 snoring\nchoose 3 from 4 Combinations(order matter),factorial(4) / (factorial(4-3)*factorial(3))\n4 Combinations:\n\n\nCode\nfactorial(4) / (factorial(4-3)*factorial(3))\n\n\n[1] 4\n\n\n\n\nCode\np3=(0.2*0.2*0.2*0.8)*4\np3\n\n\n[1] 0.0256\n\n\n\n\n3.1.5 4 snoring\n\n\nCode\np4=(0.2*0.2*0.2*0.2)\np4\n\n\n[1] 0.0016\n\n\n\n\n3.1.6 at least one:\n\n\nCode\nP_at_least_one=p1+p2+p3+p4\nP_at_least_one\n\n\n[1] 0.5904",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#solution-2pat-least-one1-pno-one-snoring",
    "href": "intro/2 probability.html#solution-2pat-least-one1-pno-one-snoring",
    "title": "Probability",
    "section": "3.2 solution 2:P(at least one)=1-P(no one snoring)",
    "text": "3.2 solution 2:P(at least one)=1-P(no one snoring)\n\n\nCode\nP_at_least_one2=1-0.8*0.8*0.8*0.8\nP_at_least_one2\n\n\n[1] 0.5904",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-1.what-is-probability-of-choose-4-number-from-4-number-and-0-correctall-wrong.",
    "href": "intro/2 probability.html#question-1.what-is-probability-of-choose-4-number-from-4-number-and-0-correctall-wrong.",
    "title": "Probability",
    "section": "4.1 Question 1.what is probability of choose 4 number from 4 number and 0 correct(all wrong).",
    "text": "4.1 Question 1.what is probability of choose 4 number from 4 number and 0 correct(all wrong).\n\n4.1.1 permutations(order matter)\n4!=432*1=24 combination\n\n\nCode\n4*3*2*1\n\n\n[1] 24\n\n\n\n\n4.1.2 Derangement\n\nor\n\nThere are 9 Derangement(all wrong)\n\n\nCode\ne=2.71828\n#D(4)=(4!+1)/e\n\nD_4=floor((4*3*2*1+1)/e)\nD_4\n\n\n[1] 9\n\n\nSo the all wrong probability of choose 4 number from 4 number is\n\n\nCode\nQ1=(floor((4*3*2*1+1)/e))/(4*3*2*1)\nQ1\n\n\n[1] 0.375",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-2.-what-is-probability-of-choose-4-number-from-4-number-and-only-1-correct",
    "href": "intro/2 probability.html#question-2.-what-is-probability-of-choose-4-number-from-4-number-and-only-1-correct",
    "title": "Probability",
    "section": "4.2 Question 2. what is probability of choose 4 number from 4 number and only 1 correct",
    "text": "4.2 Question 2. what is probability of choose 4 number from 4 number and only 1 correct\n\n4.2.1 permutations(order matter)\n4!=432*1=24 combination\n\n\nCode\n4*3*2*1\n\n\n[1] 24\n\n\n\n\n4.2.2 Derangement\nany of the 4 number can be correct, and remaining 3 number all wrong and it become the D(3) Derangement problem\n\n\nCode\ne=2.71828\n#D(3)=(3!+1)/e\n\nD_3=floor((3*2*1+1)/e)\nD_3\n\n\n[1] 2\n\n\nSo the probability of choose 4 number from 4 number and only 1 correct is\n\n\nCode\nQ2=(4*2)/(4*3*2*1)\nQ2\n\n\n[1] 0.3333333",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-3.-what-is-probability-of-choose-4-number-from-4-number-and-only-2-correct",
    "href": "intro/2 probability.html#question-3.-what-is-probability-of-choose-4-number-from-4-number-and-only-2-correct",
    "title": "Probability",
    "section": "4.3 Question 3. what is probability of choose 4 number from 4 number and only 2 correct",
    "text": "4.3 Question 3. what is probability of choose 4 number from 4 number and only 2 correct\nthe problem is same as choose 2 number from 4 number.total 6 Combinations(order no matter)\n\n\nCode\nfactorial(4) / (factorial(4-2)*factorial(2))\n\n\n[1] 6\n\n\nSo the probability of choose 4 number from 4 number and only 2 correct is\n\n\nCode\nQ3=6/(4*3*2*1)\nQ3\n\n\n[1] 0.25",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-4.what-is-probability-of-choose-4-number-from-4-number-and-only-3-correct",
    "href": "intro/2 probability.html#question-4.what-is-probability-of-choose-4-number-from-4-number-and-only-3-correct",
    "title": "Probability",
    "section": "4.4 Question 4.what is probability of choose 4 number from 4 number and only 3 correct",
    "text": "4.4 Question 4.what is probability of choose 4 number from 4 number and only 3 correct\nIts same as all correct. since 3 correct the last one will be also correct\n\n\nCode\nQ4=1/(4*3*2*1)\nQ4\n\n\n[1] 0.04166667",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-5.what-is-probability-of-choose-4-number-from-4-number-and-4-correctall-correct",
    "href": "intro/2 probability.html#question-5.what-is-probability-of-choose-4-number-from-4-number-and-4-correctall-correct",
    "title": "Probability",
    "section": "4.5 Question 5.what is probability of choose 4 number from 4 number and 4 correct(all correct)",
    "text": "4.5 Question 5.what is probability of choose 4 number from 4 number and 4 correct(all correct)\nIts same as all correct. since 3 correct the last one will be also correct\nSo all event total probability is 1\n\n\nCode\nQ1+Q2+Q3+Q4\n\n\n[1] 1",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#binomial-distribution",
    "href": "intro/2 probability.html#binomial-distribution",
    "title": "Probability",
    "section": "5.1 Binomial distribution",
    "text": "5.1 Binomial distribution\nthe binomial distribution with parameters n and p is the discrete probability distribution of the number of successes in a sequence of n independent experiments, each asking a yes–no question, and each with its own Boolean-valued outcome: success (with probability p) or failure (with probability 1-p)\nfor a single trial, i.e., n = 1, the binomial distribution is a Bernoulli distribution\n\n5.1.1 Probability density function (pdf)\n1 people snoring Probability\n\n\nCode\nn = 4 # number of people in a room\np = 0.2 # snoring\n\ndbinom(x=1, size=n, prob=p) # 1 people snoring Probability\n\n\n[1] 0.4096\n\n\n1,2,3,4 people snoring Probability\n\n\nCode\nn = 4 # number of people in a room\np = 0.2 # snoring\n\ndbinom(x=c(0,1,2,3,4), size=n, prob=p) # 1 people snoring Probability\n\n\n[1] 0.4096 0.4096 0.1536 0.0256 0.0016\n\n\nsum of all event Probability is always 1\n\n\nCode\nsum(dbinom(x=c(0,1,2,3,4), size=n, prob=p))\n\n\n[1] 1\n\n\n\n\n5.1.2 Probability function\n&lt;=1 people snoring\n\n\nCode\npbinom(q=1, size=n,prob=p, lower.tail=TRUE) \n\n\n[1] 0.8192\n\n\n\n\n5.1.3 generate 10000 number from 0 to 4 with Probability=0.2\n\n\nCode\na=rbinom(1000,size=4,0.2) \n\ntable(a)\n\n\na\n  0   1   2   3   4 \n423 387 159  30   1",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#normal-distributionalso-called-gaussian-distribution",
    "href": "intro/2 probability.html#normal-distributionalso-called-gaussian-distribution",
    "title": "Probability",
    "section": "5.2 Normal Distribution(also called Gaussian distribution)",
    "text": "5.2 Normal Distribution(also called Gaussian distribution)\nX is a random variable following a normal distribution with mean μ and variance σ2\n68% within 1 standard deviation\n95% within 2 standard deviation\n99.7% within 3 standard deviation\n\n5.2.1 Z score and standard Normal Distribution\nstandard Normal Distribution is special Normal Distribution with mean=0 and standard deviation =1\n\nZ table\n\n\n\n5.2.2 Standardization\ntransfer any normal Distribution into standard Normal Distribution\n\nformula:\n\n\n\n5.2.3 R function\n\n\n\n5.2.4 Probability Density Function (pdf)\n\ncomputes the pdf at location 0 of N(0,4),normal distribution with mean 1 and variance 4.\nsd is the standard deviation, which is the square root of the variance.\n\n\nCode\ndnorm(0, mean = 1, sd = 2)\n\n\n[1] 0.1760327\n\n\n\n\n5.2.5 cumulative distribution function(cdf)\n\nProbability of &lt;=70 from Normal Distribtion with mean=75 and sd=5\nsmaller than 1 standard deviation from the mean\n\n\nCode\npnorm(q=70,mean=75,sd=5)\n\n\n[1] 0.1586553\n\n\nProbability of &gt;=80 from Normal Distribtion with mean=75 and sd=5\nlarger than 1 standard deviation from the mean\n\n\nCode\n1-pnorm(q=80,mean=75,sd=5)\n\n\n[1] 0.1586553\n\n\n\n\n5.2.6 quantile function\n\nQ1\n\n\nCode\nqnorm(p=0.25,mean=75,sd=5)\n\n\n[1] 71.62755\n\n\nQ3\n\n\nCode\nqnorm(p=0.75,mean=75,sd=5)\n\n\n[1] 78.37245\n\n\n\n\n5.2.7 random number generator\n\n\n\n5.2.8 generate 1000 number from Normal Distribtion with mean=75 and sd=5\n\n\nCode\nnd=rnorm(n=1000,mean=75,sd=5)\nnd=sort(nd)\n\n\n\n\nCode\nmean(nd)\n\n\n[1] 75.30086\n\n\n\n\nCode\nsd(nd)\n\n\n[1] 4.987745\n\n\n\n\nCode\nhist(nd)\n\n\n\n\n\n\n\n\n\n\n\nCode\ndens=dnorm(nd,mean=mean(nd),sd=sd(nd))\n\n\n\n\nCode\nplot(nd,dens,type='l')\n\n\n\n\n\n\n\n\n\n\n\n5.2.9 check data normally distributed\n\n\nCode\nnd_data=rnorm(n=1000,mean=0,sd=2)\nnd_data=sort(nd_data)\n\n\n\n\nCode\nnon_nd_data=seq(1:1000)\nnon_nd_data=sort(non_nd_data)\n\n\n\n5.2.9.1 method 1 :histogram\n\n\nCode\n#define plotting region\npar(mfrow=c(1,2)) \n\n#create histogram for both datasets\nhist(nd_data, col='steelblue', main='Normal')\nhist(non_nd_data, col='steelblue', main='Non-normal')\n\n\n\n\n\n\n\n\n\n\n\n5.2.9.2 method 2 :Q-Q plot\n\n\nCode\n#define plotting region\npar(mfrow=c(1,2)) \n\n#create Q-Q plot for both datasets\nqqnorm(nd_data, main='Normal')\nqqline(nd_data)\n\nqqnorm(non_nd_data, main='Non-normal')\nqqline(non_nd_data)\n\n\n\n\n\n\n\n\n\n\n\n5.2.9.3 Method 3: Shapiro-Wilk Test\nnull hypothesis (H0):The data is normally distributed.\nif p-value =&gt;0.05 then normally distributed\n\n\nCode\n#perform shapiro-wilk test\nshapiro.test(nd_data)\n\n\n\n    Shapiro-Wilk normality test\n\ndata:  nd_data\nW = 0.99888, p-value = 0.8031\n\n\nif p-value &lt;0.05 then not normally distributed(reject the null hypothesis)\n\n\nCode\n#perform shapiro-wilk test\nshapiro.test(non_nd_data)\n\n\n\n    Shapiro-Wilk normality test\n\ndata:  non_nd_data\nW = 0.95481, p-value &lt; 2.2e-16",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#student-t-distribution",
    "href": "intro/2 probability.html#student-t-distribution",
    "title": "Probability",
    "section": "5.3 student t distribution",
    "text": "5.3 student t distribution\n\n\n5.3.1 one sample t test\n\n\n5.3.2 two sample t test\n\n\n5.3.3 Paired t test\n\n\n5.3.4 Pearson correlation coefficient",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#f-distribution",
    "href": "intro/2 probability.html#f-distribution",
    "title": "Probability",
    "section": "5.4 F distribution",
    "text": "5.4 F distribution\n\n5.4.1 ANOVA",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#chi-square",
    "href": "intro/2 probability.html#chi-square",
    "title": "Probability",
    "section": "5.5 Chi-square",
    "text": "5.5 Chi-square\n\n5.5.1 Chi-square goodness of fit test\n\n\n5.5.2 Chi-square test of independence",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#poisson-distribution",
    "href": "intro/2 probability.html#poisson-distribution",
    "title": "Probability",
    "section": "5.6 Poisson Distribution",
    "text": "5.6 Poisson Distribution",
    "crumbs": [
<<<<<<< HEAD
      "Intro",
      "Probability"
=======
      "house price regression model",
      "Regression model with Recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "house price regression model/0 Regression Tidy Modeling.html",
    "href": "house price regression model/0 Regression Tidy Modeling.html",
    "title": "House price data",
    "section": "",
    "text": "1 house price data\n\ndata download form kaggle\n\n\nCode\nlibrary(tidyverse)\ntrain = read_csv(\"data/train.csv\")\n\ntest=read_csv(\"data/test.csv\")\n\n\nData have 1460 record and 81 variable\n\n\nCode\noptions(scipen = 999)\nggplot(train, aes(SalePrice)) + \n  geom_histogram()\n\n\n\n\n\n\n\n\n\n\n\n2 Measurement:\n\nMean absolute error (MAE)\n\nThe MAE measures the average magnitude of the errors in a set of forecasts, without considering their direction. It measures accuracy for continuous variables. The equation is given in the library references. Expressed in words, the MAE is the average over the verification sample of the absolute values of the differences between forecast and the corresponding observation. The MAE is a linear score which means that all the individual differences are weighted equally in the average.\n\nRoot Mean Squared Error (RMSE)\n\n\nThe RMSE is a quadratic scoring rule which measures the average magnitude of the error. The equation for the RMSE is given in both of the references. Expressing the formula in words, the difference between forecast and corresponding observed values are each squared and then averaged over the sample. Finally, the square root of the average is taken. Since the errors are squared before they are averaged, the RMSE gives a relatively high weight to large errors. This means the RMSE is most useful when large errors are particularly undesirable.\nBoth the MAE and RMSE can range from 0 to ∞. They are negatively-oriented scores: Lower values are better.\n\nR^2 (Coefficient of determination): is between 0 to 1. bigger the better.\n\n\nresidual sum of squares(RSS):\n\ntotal sum of squares(TOT):\n\n\n\n3 read data\n\n\nCode\nlibrary(tidyverse)\ntrain = read_csv(\"data/train.csv\")\n\ntest=read_csv(\"data/test.csv\")\n\n\n\n\n4 plotting\n\n\nCode\noptions(scipen = 999)\nggplot(train, aes(SalePrice)) + \n  geom_histogram()\n\n\n\n\n\n\n\n\n\n\n\n5 EDA\n\n\nCode\nlibrary(skimr)\n\nskim(train)\n\n\n\nData summary\n\n\nName\ntrain\n\n\nNumber of rows\n1460\n\n\nNumber of columns\n81\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n43\n\n\nnumeric\n38\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\nMSZoning\n0\n1.00\n2\n7\n0\n5\n0\n\n\nStreet\n0\n1.00\n4\n4\n0\n2\n0\n\n\nAlley\n1369\n0.06\n4\n4\n0\n2\n0\n\n\nLotShape\n0\n1.00\n3\n3\n0\n4\n0\n\n\nLandContour\n0\n1.00\n3\n3\n0\n4\n0\n\n\nUtilities\n0\n1.00\n6\n6\n0\n2\n0\n\n\nLotConfig\n0\n1.00\n3\n7\n0\n5\n0\n\n\nLandSlope\n0\n1.00\n3\n3\n0\n3\n0\n\n\nNeighborhood\n0\n1.00\n5\n7\n0\n25\n0\n\n\nCondition1\n0\n1.00\n4\n6\n0\n9\n0\n\n\nCondition2\n0\n1.00\n4\n6\n0\n8\n0\n\n\nBldgType\n0\n1.00\n4\n6\n0\n5\n0\n\n\nHouseStyle\n0\n1.00\n4\n6\n0\n8\n0\n\n\nRoofStyle\n0\n1.00\n3\n7\n0\n6\n0\n\n\nRoofMatl\n0\n1.00\n4\n7\n0\n8\n0\n\n\nExterior1st\n0\n1.00\n5\n7\n0\n15\n0\n\n\nExterior2nd\n0\n1.00\n5\n7\n0\n16\n0\n\n\nMasVnrType\n8\n0.99\n4\n7\n0\n4\n0\n\n\nExterQual\n0\n1.00\n2\n2\n0\n4\n0\n\n\nExterCond\n0\n1.00\n2\n2\n0\n5\n0\n\n\nFoundation\n0\n1.00\n4\n6\n0\n6\n0\n\n\nBsmtQual\n37\n0.97\n2\n2\n0\n4\n0\n\n\nBsmtCond\n37\n0.97\n2\n2\n0\n4\n0\n\n\nBsmtExposure\n38\n0.97\n2\n2\n0\n4\n0\n\n\nBsmtFinType1\n37\n0.97\n3\n3\n0\n6\n0\n\n\nBsmtFinType2\n38\n0.97\n3\n3\n0\n6\n0\n\n\nHeating\n0\n1.00\n4\n5\n0\n6\n0\n\n\nHeatingQC\n0\n1.00\n2\n2\n0\n5\n0\n\n\nCentralAir\n0\n1.00\n1\n1\n0\n2\n0\n\n\nElectrical\n1\n1.00\n3\n5\n0\n5\n0\n\n\nKitchenQual\n0\n1.00\n2\n2\n0\n4\n0\n\n\nFunctional\n0\n1.00\n3\n4\n0\n7\n0\n\n\nFireplaceQu\n690\n0.53\n2\n2\n0\n5\n0\n\n\nGarageType\n81\n0.94\n6\n7\n0\n6\n0\n\n\nGarageFinish\n81\n0.94\n3\n3\n0\n3\n0\n\n\nGarageQual\n81\n0.94\n2\n2\n0\n5\n0\n\n\nGarageCond\n81\n0.94\n2\n2\n0\n5\n0\n\n\nPavedDrive\n0\n1.00\n1\n1\n0\n3\n0\n\n\nPoolQC\n1453\n0.00\n2\n2\n0\n3\n0\n\n\nFence\n1179\n0.19\n4\n5\n0\n4\n0\n\n\nMiscFeature\n1406\n0.04\n4\n4\n0\n4\n0\n\n\nSaleType\n0\n1.00\n2\n5\n0\n9\n0\n\n\nSaleCondition\n0\n1.00\n6\n7\n0\n6\n0\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nId\n0\n1.00\n730.50\n421.61\n1\n365.75\n730.5\n1095.25\n1460\n▇▇▇▇▇\n\n\nMSSubClass\n0\n1.00\n56.90\n42.30\n20\n20.00\n50.0\n70.00\n190\n▇▅▂▁▁\n\n\nLotFrontage\n259\n0.82\n70.05\n24.28\n21\n59.00\n69.0\n80.00\n313\n▇▃▁▁▁\n\n\nLotArea\n0\n1.00\n10516.83\n9981.26\n1300\n7553.50\n9478.5\n11601.50\n215245\n▇▁▁▁▁\n\n\nOverallQual\n0\n1.00\n6.10\n1.38\n1\n5.00\n6.0\n7.00\n10\n▁▂▇▅▁\n\n\nOverallCond\n0\n1.00\n5.58\n1.11\n1\n5.00\n5.0\n6.00\n9\n▁▁▇▅▁\n\n\nYearBuilt\n0\n1.00\n1971.27\n30.20\n1872\n1954.00\n1973.0\n2000.00\n2010\n▁▂▃▆▇\n\n\nYearRemodAdd\n0\n1.00\n1984.87\n20.65\n1950\n1967.00\n1994.0\n2004.00\n2010\n▅▂▂▃▇\n\n\nMasVnrArea\n8\n0.99\n103.69\n181.07\n0\n0.00\n0.0\n166.00\n1600\n▇▁▁▁▁\n\n\nBsmtFinSF1\n0\n1.00\n443.64\n456.10\n0\n0.00\n383.5\n712.25\n5644\n▇▁▁▁▁\n\n\nBsmtFinSF2\n0\n1.00\n46.55\n161.32\n0\n0.00\n0.0\n0.00\n1474\n▇▁▁▁▁\n\n\nBsmtUnfSF\n0\n1.00\n567.24\n441.87\n0\n223.00\n477.5\n808.00\n2336\n▇▅▂▁▁\n\n\nTotalBsmtSF\n0\n1.00\n1057.43\n438.71\n0\n795.75\n991.5\n1298.25\n6110\n▇▃▁▁▁\n\n\n1stFlrSF\n0\n1.00\n1162.63\n386.59\n334\n882.00\n1087.0\n1391.25\n4692\n▇▅▁▁▁\n\n\n2ndFlrSF\n0\n1.00\n346.99\n436.53\n0\n0.00\n0.0\n728.00\n2065\n▇▃▂▁▁\n\n\nLowQualFinSF\n0\n1.00\n5.84\n48.62\n0\n0.00\n0.0\n0.00\n572\n▇▁▁▁▁\n\n\nGrLivArea\n0\n1.00\n1515.46\n525.48\n334\n1129.50\n1464.0\n1776.75\n5642\n▇▇▁▁▁\n\n\nBsmtFullBath\n0\n1.00\n0.43\n0.52\n0\n0.00\n0.0\n1.00\n3\n▇▆▁▁▁\n\n\nBsmtHalfBath\n0\n1.00\n0.06\n0.24\n0\n0.00\n0.0\n0.00\n2\n▇▁▁▁▁\n\n\nFullBath\n0\n1.00\n1.57\n0.55\n0\n1.00\n2.0\n2.00\n3\n▁▇▁▇▁\n\n\nHalfBath\n0\n1.00\n0.38\n0.50\n0\n0.00\n0.0\n1.00\n2\n▇▁▅▁▁\n\n\nBedroomAbvGr\n0\n1.00\n2.87\n0.82\n0\n2.00\n3.0\n3.00\n8\n▁▇▂▁▁\n\n\nKitchenAbvGr\n0\n1.00\n1.05\n0.22\n0\n1.00\n1.0\n1.00\n3\n▁▇▁▁▁\n\n\nTotRmsAbvGrd\n0\n1.00\n6.52\n1.63\n2\n5.00\n6.0\n7.00\n14\n▂▇▇▁▁\n\n\nFireplaces\n0\n1.00\n0.61\n0.64\n0\n0.00\n1.0\n1.00\n3\n▇▇▁▁▁\n\n\nGarageYrBlt\n81\n0.94\n1978.51\n24.69\n1900\n1961.00\n1980.0\n2002.00\n2010\n▁▁▅▅▇\n\n\nGarageCars\n0\n1.00\n1.77\n0.75\n0\n1.00\n2.0\n2.00\n4\n▁▃▇▂▁\n\n\nGarageArea\n0\n1.00\n472.98\n213.80\n0\n334.50\n480.0\n576.00\n1418\n▂▇▃▁▁\n\n\nWoodDeckSF\n0\n1.00\n94.24\n125.34\n0\n0.00\n0.0\n168.00\n857\n▇▂▁▁▁\n\n\nOpenPorchSF\n0\n1.00\n46.66\n66.26\n0\n0.00\n25.0\n68.00\n547\n▇▁▁▁▁\n\n\nEnclosedPorch\n0\n1.00\n21.95\n61.12\n0\n0.00\n0.0\n0.00\n552\n▇▁▁▁▁\n\n\n3SsnPorch\n0\n1.00\n3.41\n29.32\n0\n0.00\n0.0\n0.00\n508\n▇▁▁▁▁\n\n\nScreenPorch\n0\n1.00\n15.06\n55.76\n0\n0.00\n0.0\n0.00\n480\n▇▁▁▁▁\n\n\nPoolArea\n0\n1.00\n2.76\n40.18\n0\n0.00\n0.0\n0.00\n738\n▇▁▁▁▁\n\n\nMiscVal\n0\n1.00\n43.49\n496.12\n0\n0.00\n0.0\n0.00\n15500\n▇▁▁▁▁\n\n\nMoSold\n0\n1.00\n6.32\n2.70\n1\n5.00\n6.0\n8.00\n12\n▃▆▇▃▃\n\n\nYrSold\n0\n1.00\n2007.82\n1.33\n2006\n2007.00\n2008.0\n2009.00\n2010\n▇▇▇▇▅\n\n\nSalePrice\n0\n1.00\n180921.20\n79442.50\n34900\n129975.00\n163000.0\n214000.00\n755000\n▇▅▁▁▁\n\n\n\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "house price regression model",
      "House price data"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#create-sequence-vector",
    "href": "data manipulation/2 data structure in R.html#create-sequence-vector",
    "title": "Data structure in R",
    "section": "1.1 create sequence vector",
    "text": "1.1 create sequence vector\n\n\nCode\nseq(from = 2, to = 14, by = 2) \n\n\n[1]  2  4  6  8 10 12 14",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#create-repeat-vector",
    "href": "data manipulation/2 data structure in R.html#create-repeat-vector",
    "title": "Data structure in R",
    "section": "1.2 create repeat vector",
    "text": "1.2 create repeat vector\n\n\nCode\nrep(x = 1.5, times = 4)  \n\n\n[1] 1.5 1.5 1.5 1.5",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#create-random-vector",
    "href": "data manipulation/2 data structure in R.html#create-random-vector",
    "title": "Data structure in R",
    "section": "1.3 create random vector",
    "text": "1.3 create random vector\ncreate 5 random number from 1 to 10 without replacement\n\n\nCode\nsample(1:10,5, replace=F) \n\n\n[1]  6  8  9 10  2\n\n\ncreate 5 random number from 1 to 10 with replacement\n\n\nCode\nsample(1:10,5, replace=T) \n\n\n[1] 5 4 8 4 1\n\n\ncreate 1 random number from 0 to 1 from random uniform distribution\n\n\nCode\nrunif(1, min=0, max=1)\n\n\n[1] 0.9448019\n\n\ngenerate 4 random number that follows the normal distribution with mean being 0 and standard deviation being 1\n\n\nCode\nsn1 &lt;- rnorm(4, mean=0, sd=1) # standard nromal\nsn1\n\n\n[1] -0.07484166  1.07761998  1.90462714 -0.59025621",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#create-unique-vector",
    "href": "data manipulation/2 data structure in R.html#create-unique-vector",
    "title": "Data structure in R",
    "section": "1.4 create unique vector",
    "text": "1.4 create unique vector\n\n\nCode\nv1=c(1,1,2,2,5,6)\nv1\n\n\n[1] 1 1 2 2 5 6\n\n\n\n\nCode\nunique(v1)\n\n\n[1] 1 2 5 6",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#append-vector",
    "href": "data manipulation/2 data structure in R.html#append-vector",
    "title": "Data structure in R",
    "section": "1.5 append vector",
    "text": "1.5 append vector\n\n\nCode\nx=c(1,2,3)\ny=c(4,5,6)\nz=c(x,y)\nz\n\n\n[1] 1 2 3 4 5 6",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#remove-element-in-vector",
    "href": "data manipulation/2 data structure in R.html#remove-element-in-vector",
    "title": "Data structure in R",
    "section": "1.6 remove element in vector",
    "text": "1.6 remove element in vector\n\n\nCode\nx=c(1,2,3,4,5)\nx\n\n\n[1] 1 2 3 4 5\n\n\n\n1.6.1 remove first one\n\n\nCode\nx[-1]\n\n\n[1] 2 3 4 5\n\n\n\n\n1.6.2 remove last one\n\n\nCode\nx[-length(x)]\n\n\n[1] 1 2 3 4\n\n\n\n\n1.6.3 remove from last second\n\n\nCode\nx[1:(length(x)-2)]\n\n\n[1] 1 2 3\n\n\n\n\n1.6.4 remove from from another vector\n\n\nCode\nremove=c(2,4)\nx[-remove]\n\n\n[1] 1 3 5",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#sort-vector",
    "href": "data manipulation/2 data structure in R.html#sort-vector",
    "title": "Data structure in R",
    "section": "1.7 sort vector",
    "text": "1.7 sort vector\n\n\nCode\na=c(2,4,6,1,4)\n\n\n\n\nCode\nsort(a)\n\n\n[1] 1 2 4 4 6\n\n\n\n\nCode\nsort(a,decreasing=TRUE)\n\n\n[1] 6 4 4 2 1",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#vector-length",
    "href": "data manipulation/2 data structure in R.html#vector-length",
    "title": "Data structure in R",
    "section": "1.8 vector length",
    "text": "1.8 vector length\n\n\nCode\nlength(a)\n\n\n[1] 5",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#calculate-vector",
    "href": "data manipulation/2 data structure in R.html#calculate-vector",
    "title": "Data structure in R",
    "section": "1.9 calculate vector",
    "text": "1.9 calculate vector\n\n\nCode\nx=c(1,2,3,4,5)\n\nsum(x)\n\n\n[1] 15",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#select-vector-element",
    "href": "data manipulation/2 data structure in R.html#select-vector-element",
    "title": "Data structure in R",
    "section": "1.10 select vector element",
    "text": "1.10 select vector element\n\n\nCode\nx=c(1,2,3,6,9,10)\n\n\n\n1.10.1 select first\n\n\nCode\nx[1]\n\n\n[1] 1\n\n\nor\n\n\nCode\nx %&gt;% nth(1)\n\n\n[1] 1\n\n\n\n\n1.10.2 select last\n\n\nCode\nx %&gt;% last()\n\n\n[1] 10\n\n\nor\n\n\nCode\nx %&gt;% nth(-1)\n\n\n[1] 10\n\n\n\n\n1.10.3 select second last\n\n\nCode\nx %&gt;% nth(-2)\n\n\n[1] 9\n\n\n\n\n1.10.4 select first to 3th\n\n\nCode\nx[1:3]\n\n\n[1] 1 2 3\n\n\n\n\n1.10.5 select last one to last 3th\n\n\nCode\nx[-3:-1]\n\n\n[1]  6  9 10",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#vector-converting-between-types",
    "href": "data manipulation/2 data structure in R.html#vector-converting-between-types",
    "title": "Data structure in R",
    "section": "1.12 vector Converting between types",
    "text": "1.12 vector Converting between types\n\n1.12.1 to factor\n\n\nCode\nx &lt;- c(\"a\", \"g\", \"b\")\ny=as.factor(x)\ny\n\n\n[1] a g b\nLevels: a b g\n\n\n\n\n1.12.2 to numeric\n\n\nCode\nx &lt;- c('123','44', '222')\ny=as.numeric(x)\ny\n\n\n[1] 123  44 222\n\n\n\n\n1.12.3 to character\n\n\nCode\nx &lt;- c(123123,111,5555)\ny=as.character(x)\ny\n\n\n[1] \"123123\" \"111\"    \"5555\"  \n\n\n\n\n1.12.4 to boolen\n\n\nCode\nx &lt;- c(1,0,1)\ny=as.logical(x)\ny\n\n\n[1]  TRUE FALSE  TRUE",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#vector-to-other-data-format",
    "href": "data manipulation/2 data structure in R.html#vector-to-other-data-format",
    "title": "Data structure in R",
    "section": "1.13 vector to other data format",
    "text": "1.13 vector to other data format\n\n1.13.1 vector to dataframe\n\n\nCode\nName &lt;- c(\"Jhon\", \"Lee\", \"Suzan\", \"Abhinav\", \n          \"Brain\", \"Emma\", \"David\", \"Alice\") \n\n   \nMarks &lt;- c(56, 76, 86, 96, 73, 87, 47, 98) \n    \n\ndata&lt;- data.frame(Name,Marks) \ndata\n\n\n     Name Marks\n1    Jhon    56\n2     Lee    76\n3   Suzan    86\n4 Abhinav    96\n5   Brain    73\n6    Emma    87\n7   David    47\n8   Alice    98\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"data.frame\"\n\n\n\n\n1.13.2 verctor to matrix\n\n\nCode\nv1 &lt;- c(56, 76, 86, 96, 73, 87, 47, 98) \n\n\n\n\nCode\ndata&lt;-matrix(v1,nrow=4)\ndata\n\n\n     [,1] [,2]\n[1,]   56   73\n[2,]   76   87\n[3,]   86   47\n[4,]   96   98\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"matrix\" \"array\" \n\n\nother way:\n\n\nCode\ndata&lt;-matrix(c(v1,v1),ncol = 2)\ndata\n\n\n     [,1] [,2]\n[1,]   56   56\n[2,]   76   76\n[3,]   86   86\n[4,]   96   96\n[5,]   73   73\n[6,]   87   87\n[7,]   47   47\n[8,]   98   98\n\n\n\n\n1.13.3 verctor to list\n\n\nCode\ndata=list(v1)\ndata\n\n\n[[1]]\n[1] 56 76 86 96 73 87 47 98\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"list\"\n\n\neach element in vetor as a element in list\n\n\nCode\ndata=as.list(v1)\ndata\n\n\n[[1]]\n[1] 56\n\n[[2]]\n[1] 76\n\n[[3]]\n[1] 86\n\n[[4]]\n[1] 96\n\n[[5]]\n[1] 73\n\n[[6]]\n[1] 87\n\n[[7]]\n[1] 47\n\n[[8]]\n[1] 98\n\n\n\n\n1.13.4 verctor to array\n3D array\n\n\nCode\nvec1=c(1:5) \n \nvec2=c(6:10) \n \narr=array(c(vec1,vec2),dim=c(2,5,3)) \n \n# printing the array\nclass(arr)\n\n\n[1] \"array\"\n\n\n\n\nCode\narr\n\n\n, , 1\n\n     [,1] [,2] [,3] [,4] [,5]\n[1,]    1    3    5    7    9\n[2,]    2    4    6    8   10\n\n, , 2\n\n     [,1] [,2] [,3] [,4] [,5]\n[1,]    1    3    5    7    9\n[2,]    2    4    6    8   10\n\n, , 3\n\n     [,1] [,2] [,3] [,4] [,5]\n[1,]    1    3    5    7    9\n[2,]    2    4    6    8   10",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#dataframe-to-other-data-format",
    "href": "data manipulation/2 data structure in R.html#dataframe-to-other-data-format",
    "title": "Data structure in R",
    "section": "2.1 dataframe to other data format",
    "text": "2.1 dataframe to other data format\n\n2.1.1 dataframe to matrix\n\n\nCode\nmat &lt;- as.matrix(df)\n\nclass(mat)\n\n\n[1] \"matrix\" \"array\" \n\n\n\n\nCode\nmat\n\n\n     Name    Language Age \n[1,] \"Amiya\" \"R\"      \"22\"\n[2,] \"Raj\"   \"Python\" \"25\"\n[3,] \"Asish\" \"Java\"   \"45\"\n\n\n\n\n2.1.2 dataframe to vector\n\n\nCode\nvec=df[['Name']]\n\nclass(vec)\n\n\n[1] \"character\"\n\n\n\n\nCode\nvec\n\n\n[1] \"Amiya\" \"Raj\"   \"Asish\"\n\n\n\n\n2.1.3 dataframe to list\n\n\nCode\nlist=as.list(df[['Name']])\n\nclass(list)\n\n\n[1] \"list\"\n\n\n\n\nCode\nlist\n\n\n[[1]]\n[1] \"Amiya\"\n\n[[2]]\n[1] \"Raj\"\n\n[[3]]\n[1] \"Asish\"",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#matrix-to-other-data-format",
    "href": "data manipulation/2 data structure in R.html#matrix-to-other-data-format",
    "title": "Data structure in R",
    "section": "3.1 matrix to other data format",
    "text": "3.1 matrix to other data format\n\n3.1.1 matrix to dataframe\n\n\nCode\ndf &lt;- as.data.frame(matrix003)\n\nclass(df)\n\n\n[1] \"data.frame\"\n\n\n\n\nCode\ndf\n\n\n  V1 V2 V3\n1  1  4  9\n2 16 25 36\n3 49 64 81\n\n\n\n\n3.1.2 matrix to vector\n\n\nCode\nvec=as.vector(matrix003)\n\nclass(vec)\n\n\n[1] \"numeric\"\n\n\n\n\nCode\nvec\n\n\n[1]  1 16 49  4 25 64  9 36 81\n\n\n\n\n3.1.3 matrix to list\n\n\nCode\nlist=as.list(matrix003)\n\nclass(list)\n\n\n[1] \"list\"\n\n\n\n\nCode\nlist\n\n\n[[1]]\n[1] 1\n\n[[2]]\n[1] 16\n\n[[3]]\n[1] 49\n\n[[4]]\n[1] 4\n\n[[5]]\n[1] 25\n\n[[6]]\n[1] 64\n\n[[7]]\n[1] 9\n\n[[8]]\n[1] 36\n\n[[9]]\n[1] 81",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/5 recipe.html",
    "href": "data manipulation/5 recipe.html",
    "title": "recipe",
    "section": "",
    "text": "1 create recipe step_xxx\n\n\nCode\ntree_rec &lt;- recipe(legal_status ~ ., data = trees_train) %&gt;%\n  \n # update the role for tree_id, since this is a variable we might like to keep around for convenience as an identifier for rows but is not a predictor or outcome. \n  update_role(tree_id, new_role = \"ID\") %&gt;%\n  \n# step_other() to collapse categorical levels for species, caretaker, and the site info. Before this step, there were 300+ species!\n  step_other(species, caretaker, threshold = 0.01) %&gt;%\n  \n# create dummy for nominal data exclude outcome\n  step_dummy(all_nominal(), -all_outcomes()) %&gt;%\n  \n# The date column with when each tree was planted may be useful for fitting this model, but probably not the exact date, given how slowly trees grow. Let’s create a year feature from the date, and then remove the original date variable.  \n  step_date(date, features = c(\"year\")) %&gt;%step_rm(date) %&gt;%\n  \n# There are many more DPW maintained trees than not, so let’s downsample the data for training.  \n  step_downsample(legal_status)%&gt;%\n\n# will remove all. predictor variables that contain only a single value\n    step_zv(all_numeric(all_predictors())) %&gt;% \n  \n#  normalize all numeric data\n  step_normalize(all_numeric()) %&gt;% \n\n# use KNN to impute all predictors\nstep_impute_knn(all_predictors()) \n\n\n\n\n2 check recipe check_xxx\n\n\nCode\n#&gt; [1] \"check_class\"      \"check_cols\"       \"check_missing\"   \n#&gt; [4] \"check_name\"       \"check_new_data\"   \"check_new_values\"\n#&gt; [7] \"check_range\"      \"check_type\"\n\n\n\n\n3 roles to select variables\nIn most cases, the right approach for users will be use to use the predictor-specific selectors such as all_numeric_predictors() and all_nominal_predictors().\n\n\nCode\nhas_role(match = \"predictor\")\n\nhas_type(match = \"numeric\")\n\nall_outcomes()\n\nall_predictors()\n\nall_date()\n\nall_date_predictors()\n\nall_datetime()\n\nall_datetime_predictors()\n\nall_double()\n\nall_double_predictors()\n\nall_factor()\n\nall_factor_predictors()\n\nall_integer()\n\nall_integer_predictors()\n\nall_logical()\n\nall_logical_predictors()\n\nall_nominal()\n\nall_nominal_predictors()\n\nall_numeric()\n\nall_numeric_predictors()\n\nall_ordered()\n\nall_ordered_predictors()\n\nall_string()\n\nall_string_predictors()\n\nall_unordered()\n\nall_unordered_predictors()\n\ncurrent_info()\n\n\n\n\n4 reference:\nhttps://recipes.tidymodels.org/reference/has_role.html\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "data manipulation",
      "recipe"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html",
    "href": "data manipulation/3 data manipulation with tidyverse.html",
    "title": "Data manipulation with tidyverse",
    "section": "",
    "text": "The tidyverse is an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures.\ndplyr is a grammar of data manipulation, providing a consistent set of verbs that help you solve the most common data manipulation challenges.",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#select-column",
    "href": "data manipulation/3 data manipulation with tidyverse.html#select-column",
    "title": "Data manipulation with tidyverse",
    "section": "2.1 select column",
    "text": "2.1 select column",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#get-column-names",
    "href": "data manipulation/3 data manipulation with tidyverse.html#get-column-names",
    "title": "Data manipulation with tidyverse",
    "section": "2.2 get column names",
    "text": "2.2 get column names\n\n\nCode\nnames(small_mtcars)\n\n\n[1] \"car_name\" \"cyl\"      \"mpg\"      \"hp\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#select-by-name",
    "href": "data manipulation/3 data manipulation with tidyverse.html#select-by-name",
    "title": "Data manipulation with tidyverse",
    "section": "2.3 select by name",
    "text": "2.3 select by name\n\n\nCode\nmtcars %&gt;% select(cyl, mpg,hp) \n\n\n                    cyl  mpg  hp\nMazda RX4             6 21.0 110\nMazda RX4 Wag         6 21.0 110\nDatsun 710            4 22.8  93\nHornet 4 Drive        6 21.4 110\nHornet Sportabout     8 18.7 175\nValiant               6 18.1 105\nDuster 360            8 14.3 245\nMerc 240D             4 24.4  62\nMerc 230              4 22.8  95\nMerc 280              6 19.2 123\nMerc 280C             6 17.8 123\nMerc 450SE            8 16.4 180\nMerc 450SL            8 17.3 180\nMerc 450SLC           8 15.2 180\nCadillac Fleetwood    8 10.4 205\nLincoln Continental   8 10.4 215\nChrysler Imperial     8 14.7 230\nFiat 128              4 32.4  66\nHonda Civic           4 30.4  52\nToyota Corolla        4 33.9  65\nToyota Corona         4 21.5  97\nDodge Challenger      8 15.5 150\nAMC Javelin           8 15.2 150\nCamaro Z28            8 13.3 245\nPontiac Firebird      8 19.2 175\nFiat X1-9             4 27.3  66\nPorsche 914-2         4 26.0  91\nLotus Europa          4 30.4 113\nFord Pantera L        8 15.8 264\nFerrari Dino          6 19.7 175\nMaserati Bora         8 15.0 335\nVolvo 142E            4 21.4 109",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#select-columns-by-name-match-with-p",
    "href": "data manipulation/3 data manipulation with tidyverse.html#select-columns-by-name-match-with-p",
    "title": "Data manipulation with tidyverse",
    "section": "2.4 select columns by name match with ‘p’",
    "text": "2.4 select columns by name match with ‘p’",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#select-columns-by-index",
    "href": "data manipulation/3 data manipulation with tidyverse.html#select-columns-by-index",
    "title": "Data manipulation with tidyverse",
    "section": "2.5 select columns by index",
    "text": "2.5 select columns by index\n\n2.5.1 select first and 3rd columns\n\n\n2.5.2 select first to 3rd columns",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#drop-column",
    "href": "data manipulation/3 data manipulation with tidyverse.html#drop-column",
    "title": "Data manipulation with tidyverse",
    "section": "2.6 drop column",
    "text": "2.6 drop column\n\n\nCode\nsmall_mtcars %&gt;% select(-cyl)\n\n\n           car_name  mpg  hp\n1         Mazda RX4 21.0 110\n2     Mazda RX4 Wag 21.0 110\n3        Datsun 710 22.8  93\n4    Hornet 4 Drive 21.4 110\n5 Hornet Sportabout 18.7 175\n6           Valiant 18.1 105",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#renaming-column",
    "href": "data manipulation/3 data manipulation with tidyverse.html#renaming-column",
    "title": "Data manipulation with tidyverse",
    "section": "2.7 Renaming column",
    "text": "2.7 Renaming column\n\n\nCode\nsmall_mtcars %&gt;%rename(new_cyl=cyl)\n\n\n           car_name new_cyl  mpg  hp\n1         Mazda RX4       6 21.0 110\n2     Mazda RX4 Wag       6 21.0 110\n3        Datsun 710       4 22.8  93\n4    Hornet 4 Drive       6 21.4 110\n5 Hornet Sportabout       8 18.7 175\n6           Valiant       6 18.1 105",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#create-column",
    "href": "data manipulation/3 data manipulation with tidyverse.html#create-column",
    "title": "Data manipulation with tidyverse",
    "section": "2.8 Create column",
    "text": "2.8 Create column\n\n2.8.1 Mutate\n\n\nCode\nsmall_mtcars %&gt;%mutate(new_cyl=cyl+1)\n\n\n           car_name cyl  mpg  hp new_cyl\n1         Mazda RX4   6 21.0 110       7\n2     Mazda RX4 Wag   6 21.0 110       7\n3        Datsun 710   4 22.8  93       5\n4    Hornet 4 Drive   6 21.4 110       7\n5 Hornet Sportabout   8 18.7 175       9\n6           Valiant   6 18.1 105       7\n\n\n\n\n2.8.2 if else\n\n\nCode\nsmall_mtcars %&gt;%mutate(new_cly_group=if_else(cyl&gt;6,'big','small'))\n\n\n           car_name cyl  mpg  hp new_cly_group\n1         Mazda RX4   6 21.0 110         small\n2     Mazda RX4 Wag   6 21.0 110         small\n3        Datsun 710   4 22.8  93         small\n4    Hornet 4 Drive   6 21.4 110         small\n5 Hornet Sportabout   8 18.7 175           big\n6           Valiant   6 18.1 105         small\n\n\n\n\n2.8.3 case when\n\n\nCode\nsmall_mtcars %&gt;%mutate(cly_group=case_when(\n    cyl &gt; 6 ~ \"very big\",\n    cyl &gt; 4 ~ \"big\",\n    TRUE ~ \"other\",\n  ))\n\n\n           car_name cyl  mpg  hp cly_group\n1         Mazda RX4   6 21.0 110       big\n2     Mazda RX4 Wag   6 21.0 110       big\n3        Datsun 710   4 22.8  93     other\n4    Hornet 4 Drive   6 21.4 110       big\n5 Hornet Sportabout   8 18.7 175  very big\n6           Valiant   6 18.1 105       big\n\n\n\n\n2.8.4 Transmute,create column and only keep this column\n\n\nCode\nsmall_mtcars %&gt;%transmute(new_cyl=cyl+1)\n\n\n  new_cyl\n1       7\n2       7\n3       5\n4       7\n5       9\n6       7",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#filter-rows",
    "href": "data manipulation/3 data manipulation with tidyverse.html#filter-rows",
    "title": "Data manipulation with tidyverse",
    "section": "2.9 Filter rows",
    "text": "2.9 Filter rows\n\n\nCode\nsmall_mtcars %&gt;%filter(cyl&gt;5)\n\n\n           car_name cyl  mpg  hp\n1         Mazda RX4   6 21.0 110\n2     Mazda RX4 Wag   6 21.0 110\n3    Hornet 4 Drive   6 21.4 110\n4 Hornet Sportabout   8 18.7 175\n5           Valiant   6 18.1 105\n\n\n\n2.9.1 Filters with AND conditions\n\n\nCode\nsmall_mtcars %&gt;%filter(cyl&gt;5,mpg&gt;20)\n\n\n        car_name cyl  mpg  hp\n1      Mazda RX4   6 21.0 110\n2  Mazda RX4 Wag   6 21.0 110\n3 Hornet 4 Drive   6 21.4 110\n\n\n\n\n2.9.2 Filters with OR conditions\n\n\nCode\nsmall_mtcars %&gt;%filter(cyl&gt;5|mpg&gt;20)\n\n\n           car_name cyl  mpg  hp\n1         Mazda RX4   6 21.0 110\n2     Mazda RX4 Wag   6 21.0 110\n3        Datsun 710   4 22.8  93\n4    Hornet 4 Drive   6 21.4 110\n5 Hornet Sportabout   8 18.7 175\n6           Valiant   6 18.1 105\n\n\n\n\n2.9.3 filter row with index\n\n2.9.3.1 5th rows\n\n\nCode\nsmall_mtcars %&gt;% slice(5)\n\n\n           car_name cyl  mpg  hp\n1 Hornet Sportabout   8 18.7 175\n\n\n\n\n2.9.3.2 1 and 5h rows\n\n\nCode\nsmall_mtcars %&gt;% slice(1:5)\n\n\n           car_name cyl  mpg  hp\n1         Mazda RX4   6 21.0 110\n2     Mazda RX4 Wag   6 21.0 110\n3        Datsun 710   4 22.8  93\n4    Hornet 4 Drive   6 21.4 110\n5 Hornet Sportabout   8 18.7 175\n\n\n\n\n2.9.3.3 get ramdon 5 rows\n\n\nCode\nsmall_mtcars %&gt;% sample_n(5)\n\n\n        car_name cyl  mpg  hp\n1     Datsun 710   4 22.8  93\n2        Valiant   6 18.1 105\n3  Mazda RX4 Wag   6 21.0 110\n4 Hornet 4 Drive   6 21.4 110\n5      Mazda RX4   6 21.0 110",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#append",
    "href": "data manipulation/3 data manipulation with tidyverse.html#append",
    "title": "Data manipulation with tidyverse",
    "section": "2.10 Append",
    "text": "2.10 Append\n\n2.10.1 append by row\n\n\nCode\nsmall_mtcars %&gt;% rbind(small_mtcars)\n\n\n            car_name cyl  mpg  hp\n1          Mazda RX4   6 21.0 110\n2      Mazda RX4 Wag   6 21.0 110\n3         Datsun 710   4 22.8  93\n4     Hornet 4 Drive   6 21.4 110\n5  Hornet Sportabout   8 18.7 175\n6            Valiant   6 18.1 105\n7          Mazda RX4   6 21.0 110\n8      Mazda RX4 Wag   6 21.0 110\n9         Datsun 710   4 22.8  93\n10    Hornet 4 Drive   6 21.4 110\n11 Hornet Sportabout   8 18.7 175\n12           Valiant   6 18.1 105\n\n\n\n\n2.10.2 append by column\n\n\nCode\nsmall_mtcars %&gt;% cbind(small_mtcars)\n\n\n           car_name cyl  mpg  hp          car_name cyl  mpg  hp\n1         Mazda RX4   6 21.0 110         Mazda RX4   6 21.0 110\n2     Mazda RX4 Wag   6 21.0 110     Mazda RX4 Wag   6 21.0 110\n3        Datsun 710   4 22.8  93        Datsun 710   4 22.8  93\n4    Hornet 4 Drive   6 21.4 110    Hornet 4 Drive   6 21.4 110\n5 Hornet Sportabout   8 18.7 175 Hornet Sportabout   8 18.7 175\n6           Valiant   6 18.1 105           Valiant   6 18.1 105\n\n\n\n\n2.10.3 Sepcial vales\n\n2.10.3.1 NAN\nNaN (“Not a Number”) means 0/0\n\n\nCode\nv1 &lt;- NaN\nv1\n\n\n[1] NaN\n\n\n\n\nCode\nis.na(v1)\n\n\n[1] TRUE\n\n\n\n\n2.10.3.2 NA\nNA (“Not Available”) is generally interpreted as a missing value\n\n\nCode\nv2 &lt;- NA\nv2\n\n\n[1] NA\n\n\n\n\nCode\nis.na(v2)\n\n\n[1] TRUE\n\n\n\n\n2.10.3.3 NULL\nNULL is an object and is returned when an expression or function results in an undefined value. In R language, NULL (capital letters) is a reserved word\n\n\nCode\nv3=NULL\nv3\n\n\nNULL\n\n\n\n\nCode\nis.na(v3)\n\n\nlogical(0)",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#group-by",
    "href": "data manipulation/3 data manipulation with tidyverse.html#group-by",
    "title": "Data manipulation with tidyverse",
    "section": "2.11 group by",
    "text": "2.11 group by\n\n2.11.1 average,min,max,sum\n\n\nCode\nsmall_mtcars %&gt;%group_by(cyl) %&gt;% summarise(avg_mpg=mean(mpg)\n                                            ,min_mpg=min(mpg)\n                                            ,max_mpg=max(mpg)\n                                            ,sum_mpg=sum(mpg))\n\n\n# A tibble: 3 × 5\n    cyl avg_mpg min_mpg max_mpg sum_mpg\n  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;\n1     4    22.8    22.8    22.8    22.8\n2     6    20.4    18.1    21.4    81.5\n3     8    18.7    18.7    18.7    18.7\n\n\n\n\n2.11.2 count record and count distinct record\n\n\nCode\nsmall_mtcars %&gt;%group_by(cyl) %&gt;% summarise(n_mpg=n()\n                                            ,distinct_n_mpg=n_distinct(mpg)\n                                            \n                                            )\n\n\n# A tibble: 3 × 3\n    cyl n_mpg distinct_n_mpg\n  &lt;dbl&gt; &lt;int&gt;          &lt;int&gt;\n1     4     1              1\n2     6     4              3\n3     8     1              1",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#order-rows",
    "href": "data manipulation/3 data manipulation with tidyverse.html#order-rows",
    "title": "Data manipulation with tidyverse",
    "section": "2.12 order rows",
    "text": "2.12 order rows\n\n\nCode\nsmall_mtcars %&gt;%arrange(cyl) \n\n\n           car_name cyl  mpg  hp\n1        Datsun 710   4 22.8  93\n2         Mazda RX4   6 21.0 110\n3     Mazda RX4 Wag   6 21.0 110\n4    Hornet 4 Drive   6 21.4 110\n5           Valiant   6 18.1 105\n6 Hornet Sportabout   8 18.7 175\n\n\n\n2.12.1 Sort in descending order\n\n\nCode\nsmall_mtcars %&gt;%arrange(desc(cyl) )\n\n\n           car_name cyl  mpg  hp\n1 Hornet Sportabout   8 18.7 175\n2         Mazda RX4   6 21.0 110\n3     Mazda RX4 Wag   6 21.0 110\n4    Hornet 4 Drive   6 21.4 110\n5           Valiant   6 18.1 105\n6        Datsun 710   4 22.8  93\n\n\n\n\n2.12.2 Arrange by multiple variables\n\n\nCode\nsmall_mtcars %&gt;%arrange(cyl,mpg)\n\n\n           car_name cyl  mpg  hp\n1        Datsun 710   4 22.8  93\n2           Valiant   6 18.1 105\n3         Mazda RX4   6 21.0 110\n4     Mazda RX4 Wag   6 21.0 110\n5    Hornet 4 Drive   6 21.4 110\n6 Hornet Sportabout   8 18.7 175",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#join",
    "href": "data manipulation/3 data manipulation with tidyverse.html#join",
    "title": "Data manipulation with tidyverse",
    "section": "2.13 join",
    "text": "2.13 join\n\n\nCode\nleft_data=small_mtcars %&gt;% slice(1:2)\nright_data=small_mtcars %&gt;% slice(2:4)\n\n\n\n\nCode\nleft_data\n\n\n       car_name cyl mpg  hp\n1     Mazda RX4   6  21 110\n2 Mazda RX4 Wag   6  21 110\n\n\n\n\nCode\nright_data\n\n\n        car_name cyl  mpg  hp\n1  Mazda RX4 Wag   6 21.0 110\n2     Datsun 710   4 22.8  93\n3 Hornet 4 Drive   6 21.4 110\n\n\n\n2.13.1 inner_join\n\n\nCode\ndata=left_data %&gt;% inner_join(right_data,join_by(car_name== car_name), suffix = c(\"_l\", \"._r\"))\ndata\n\n\n       car_name cyl_l mpg_l hp_l cyl._r mpg._r hp._r\n1 Mazda RX4 Wag     6    21  110      6     21   110\n\n\n\n\n2.13.2 left join\n\n\nCode\ndata=left_data %&gt;% left_join(right_data,join_by(car_name== car_name), suffix = c(\"_l\", \"._r\"))\ndata\n\n\n       car_name cyl_l mpg_l hp_l cyl._r mpg._r hp._r\n1     Mazda RX4     6    21  110     NA     NA    NA\n2 Mazda RX4 Wag     6    21  110      6     21   110\n\n\n\n\n2.13.3 full join\n\n\nCode\ndata=left_data %&gt;% full_join(right_data,join_by(car_name== car_name), suffix = c(\"_l\", \"._r\"))\ndata\n\n\n        car_name cyl_l mpg_l hp_l cyl._r mpg._r hp._r\n1      Mazda RX4     6    21  110     NA     NA    NA\n2  Mazda RX4 Wag     6    21  110      6   21.0   110\n3     Datsun 710    NA    NA   NA      4   22.8    93\n4 Hornet 4 Drive    NA    NA   NA      6   21.4   110\n\n\n\n\n2.13.4 anti join\nanti_join() return all rows from x without a match in y\n\n\nCode\ndata=left_data %&gt;% anti_join(right_data,join_by(car_name== car_name))\ndata\n\n\n   car_name cyl mpg  hp\n1 Mazda RX4   6  21 110",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#reshape-tables",
    "href": "data manipulation/3 data manipulation with tidyverse.html#reshape-tables",
    "title": "Data manipulation with tidyverse",
    "section": "2.14 Reshape tables",
    "text": "2.14 Reshape tables\n\n\nCode\nolddata_wide &lt;- read.table(header=TRUE, text='\n subject sex control cond1 cond2\n       1   M     7.9  12.3  10.7\n       2   F     6.3  10.6  11.1\n       3   F     9.5  13.1  13.8\n       4   M    11.5  13.4  12.9\n')\n\n\n\n\nCode\nolddata_wide\n\n\n  subject sex control cond1 cond2\n1       1   M     7.9  12.3  10.7\n2       2   F     6.3  10.6  11.1\n3       3   F     9.5  13.1  13.8\n4       4   M    11.5  13.4  12.9\n\n\n\n2.14.1 Gather data long(wide to long)\n\n\nCode\ndata_long=olddata_wide %&gt;%\n  pivot_longer(!c(subject,sex), names_to = 'income', values_to = 'DATA')\n\ndata_long\n\n\n# A tibble: 12 × 4\n   subject sex   income   DATA\n     &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;\n 1       1 M     control   7.9\n 2       1 M     cond1    12.3\n 3       1 M     cond2    10.7\n 4       2 F     control   6.3\n 5       2 F     cond1    10.6\n 6       2 F     cond2    11.1\n 7       3 F     control   9.5\n 8       3 F     cond1    13.1\n 9       3 F     cond2    13.8\n10       4 M     control  11.5\n11       4 M     cond1    13.4\n12       4 M     cond2    12.9\n\n\n\n\n2.14.2 Spread data wide (long to wide)\n\n\nCode\ndata_wide=data_long %&gt;%\n  pivot_wider(names_from = income, values_from = DATA)\n\ndata_wide\n\n\n# A tibble: 4 × 5\n  subject sex   control cond1 cond2\n    &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1       1 M         7.9  12.3  10.7\n2       2 F         6.3  10.6  11.1\n3       3 F         9.5  13.1  13.8\n4       4 M        11.5  13.4  12.9",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#length",
    "href": "data manipulation/3 data manipulation with tidyverse.html#length",
    "title": "Data manipulation with tidyverse",
    "section": "3.1 length",
    "text": "3.1 length\n\n\nCode\nx &lt;- \"I like horses.\"\nstr_length(x)\n\n\n[1] 14",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#upper-case",
    "href": "data manipulation/3 data manipulation with tidyverse.html#upper-case",
    "title": "Data manipulation with tidyverse",
    "section": "3.2 upper case",
    "text": "3.2 upper case\n\n\nCode\nx &lt;- \"I like horses.\"\n\nstr_to_upper(x)\n\n\n[1] \"I LIKE HORSES.\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#lower-case",
    "href": "data manipulation/3 data manipulation with tidyverse.html#lower-case",
    "title": "Data manipulation with tidyverse",
    "section": "3.3 lower case",
    "text": "3.3 lower case\n\n\nCode\nx &lt;- \"I like horses.\"\n\nstr_to_lower(x)\n\n\n[1] \"i like horses.\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#match",
    "href": "data manipulation/3 data manipulation with tidyverse.html#match",
    "title": "Data manipulation with tidyverse",
    "section": "3.4 match",
    "text": "3.4 match\n\n\nCode\nword_list=c('abc','bbc','appale','bbaa','cc')\n\n\n\n3.4.1 match with ‘a’\n\n\nCode\nword_list %&gt;% str_detect('a')\n\n\n[1]  TRUE FALSE  TRUE  TRUE FALSE\n\n\n\n\n3.4.2 match with ‘a’ count\n\n\nCode\nword_list %&gt;% str_count('a')\n\n\n[1] 1 0 2 2 0\n\n\n\n\n3.4.3 index of vector match\n\n\nCode\nword_list %&gt;% str_which('a')\n\n\n[1] 1 3 4\n\n\n\n\n3.4.4 index of each word match (first match)\n\n\nCode\nword_list %&gt;% str_locate('a')\n\n\n     start end\n[1,]     1   1\n[2,]    NA  NA\n[3,]     1   1\n[4,]     3   3\n[5,]    NA  NA\n\n\n\n\n3.4.5 index of each word match (all match)\n\n\nCode\nword_list %&gt;% str_locate_all('a')\n\n\n[[1]]\n     start end\n[1,]     1   1\n\n[[2]]\n     start end\n\n[[3]]\n     start end\n[1,]     1   1\n[2,]     4   4\n\n[[4]]\n     start end\n[1,]     3   3\n[2,]     4   4\n\n[[5]]\n     start end\n\n\n\n\nCode\ntrx='abc1993'\n\nnum=str_match(trx, \"(\\\\d)+\")\n\nnum\n\n\n     [,1]   [,2]\n[1,] \"1993\" \"3\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#concatenation",
    "href": "data manipulation/3 data manipulation with tidyverse.html#concatenation",
    "title": "Data manipulation with tidyverse",
    "section": "3.5 concatenation",
    "text": "3.5 concatenation\n\n\nCode\na='aaaa'\nb='bbbb'\n\n\n\n\nCode\npaste(a,b)\n\n\n[1] \"aaaa bbbb\"\n\n\n\n\nCode\npaste0(a,b)\n\n\n[1] \"aaaabbbb\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#replace",
    "href": "data manipulation/3 data manipulation with tidyverse.html#replace",
    "title": "Data manipulation with tidyverse",
    "section": "3.6 replace",
    "text": "3.6 replace\nstr_replace()\n\n\nCode\ntext001=\"abcb\"\ntext001 %&gt;% str_replace('b','1')\n\n\n[1] \"a1cb\"\n\n\nstr_replace_all()\n\n\nCode\ntext001=\"abcb\"\ntext001 %&gt;% str_replace_all('b','1')\n\n\n[1] \"a1c1\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#extract",
    "href": "data manipulation/3 data manipulation with tidyverse.html#extract",
    "title": "Data manipulation with tidyverse",
    "section": "3.8 extract",
    "text": "3.8 extract\n\n\nCode\ndata001=mtcars\ndata001 &lt;- cbind(names = rownames(data001), data001)\n\n\n\n3.8.1 subset string by postion\nextract 2 to 4\n\n\nCode\ndata001$new_names=data001$names %&gt;% str_sub(2,4)\nhead(data001 %&gt;% select(new_names,names))\n\n\n                  new_names             names\nMazda RX4               azd         Mazda RX4\nMazda RX4 Wag           azd     Mazda RX4 Wag\nDatsun 710              ats        Datsun 710\nHornet 4 Drive          orn    Hornet 4 Drive\nHornet Sportabout       orn Hornet Sportabout\nValiant                 ali           Valiant\n\n\n\n\n3.8.2 extracting number from a string\n\n\nCode\ntrx='abc1993 ccc'\n\nnum=str_extract(trx, \"(\\\\d)+\")\n\nnum\n\n\n[1] \"1993\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#date-format",
    "href": "data manipulation/3 data manipulation with tidyverse.html#date-format",
    "title": "Data manipulation with tidyverse",
    "section": "4.1 date format",
    "text": "4.1 date format\ninput as character\n\n\nCode\ndate1='2023-01-01'\nclass(date1)\n\n\n[1] \"character\"\n\n\n\n\nCode\ndate1\n\n\n[1] \"2023-01-01\"\n\n\nconvert into date type with as.Date()\n\n\nCode\ndate2=as.Date('2023-01-01')\nclass(date2)\n\n\n[1] \"Date\"\n\n\n\n\nCode\ndate2\n\n\n[1] \"2023-01-01\"\n\n\nconvert into date type with ymd()\n\n\nCode\ndate3=ymd('2023-01-01')\nclass(date3)\n\n\n[1] \"Date\"\n\n\n\n\nCode\ndate3\n\n\n[1] \"2023-01-01\"\n\n\nget today with today()\n\n\nCode\ntoday()\n\n\n[1] \"2024-06-18\"\n\n\nget local timezone\n\n\nCode\nSys.timezone()\n\n\n[1] \"Asia/Shanghai\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#change-date-format",
    "href": "data manipulation/3 data manipulation with tidyverse.html#change-date-format",
    "title": "Data manipulation with tidyverse",
    "section": "4.2 change date format",
    "text": "4.2 change date format\nmake multiple column character to date with make_date()\n\n\nCode\nflights %&gt;% \n  select(year, month, day, hour, minute) %&gt;% \n  mutate(departure = make_date(year, month, day))\n\n\n# A tibble: 336,776 × 6\n    year month   day  hour minute departure \n   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;date&gt;    \n 1  2013     1     1     5     15 2013-01-01\n 2  2013     1     1     5     29 2013-01-01\n 3  2013     1     1     5     40 2013-01-01\n 4  2013     1     1     5     45 2013-01-01\n 5  2013     1     1     6      0 2013-01-01\n 6  2013     1     1     5     58 2013-01-01\n 7  2013     1     1     6      0 2013-01-01\n 8  2013     1     1     6      0 2013-01-01\n 9  2013     1     1     6      0 2013-01-01\n10  2013     1     1     6      0 2013-01-01\n# ℹ 336,766 more rows\n\n\n\n\nCode\nflights %&gt;% \n  select(year, month, day, hour, minute) %&gt;% \n  mutate(departure = make_datetime(year, month, day, hour, minute))\n\n\n# A tibble: 336,776 × 6\n    year month   day  hour minute departure          \n   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             \n 1  2013     1     1     5     15 2013-01-01 05:15:00\n 2  2013     1     1     5     29 2013-01-01 05:29:00\n 3  2013     1     1     5     40 2013-01-01 05:40:00\n 4  2013     1     1     5     45 2013-01-01 05:45:00\n 5  2013     1     1     6      0 2013-01-01 06:00:00\n 6  2013     1     1     5     58 2013-01-01 05:58:00\n 7  2013     1     1     6      0 2013-01-01 06:00:00\n 8  2013     1     1     6      0 2013-01-01 06:00:00\n 9  2013     1     1     6      0 2013-01-01 06:00:00\n10  2013     1     1     6      0 2013-01-01 06:00:00\n# ℹ 336,766 more rows",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#day-differnce-between-two-dates",
    "href": "data manipulation/3 data manipulation with tidyverse.html#day-differnce-between-two-dates",
    "title": "Data manipulation with tidyverse",
    "section": "4.3 day differnce between two dates",
    "text": "4.3 day differnce between two dates\n\n\nCode\nday1=ymd('2022-01-01')\nday2=ymd('2023-02-03')\n\ndiff=day2-day1\n\n\n\n\nCode\ndiff\n\n\nTime difference of 398 days\n\n\nusing interval() find two dates gap\n\n\nCode\ninterval(day1,day2) %&gt;% as.period()\n\n\n[1] \"1y 1m 2d 0H 0M 0S\"\n\n\nfind day gap\n\n\nCode\ninterval(day1,day2)%/% days(1)\n\n\n[1] 398\n\n\nfind month gap\n\n\nCode\ninterval(day1,day2)%/% months(1)\n\n\n[1] 13\n\n\nfind year gap\n\n\nCode\ninterval(day1,day2)%/% years(1)\n\n\n[1] 1",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#day-and-time",
    "href": "data manipulation/3 data manipulation with tidyverse.html#day-and-time",
    "title": "Data manipulation with tidyverse",
    "section": "4.4 day and time",
    "text": "4.4 day and time\n\n\nCode\nnow_time=now()\nnow_time\n\n\n[1] \"2024-06-18 16:48:43 CST\"\n\n\n\n4.4.1 get year\n\n\nCode\nyear(now_time)\n\n\n[1] 2024\n\n\n\n\n4.4.2 get month\n\n\nCode\nmonth(now_time)\n\n\n[1] 6\n\n\n\n\n4.4.3 get date of the month\n\n\nCode\nmday(now_time)\n\n\n[1] 18\n\n\n\n\n4.4.4 get date of the year\n\n\nCode\nyday(now_time)\n\n\n[1] 170\n\n\n\n\n4.4.5 get date of the week\n\n\nCode\nwday(now_time)\n\n\n[1] 3\n\n\n\n4.4.5.1 get hour\n\n\nCode\nhour(now_time)\n\n\n[1] 16\n\n\n\n\n\n4.4.6 get minute\n\n\nCode\nminute(now_time)\n\n\n[1] 48\n\n\n\n\n4.4.7 get second\n\n\nCode\nsecond(now_time)\n\n\n[1] 43.39117",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#dataframe-to-other-data-format",
    "href": "data manipulation/3 data manipulation with tidyverse.html#dataframe-to-other-data-format",
    "title": "Data manipulation with tidyverse",
    "section": "4.5 dataframe to other data format",
    "text": "4.5 dataframe to other data format\n\n4.5.1 dataframe to vector\n\n\nCode\ndata=small_mtcars$cyl\ndata\n\n\n[1] 6 6 4 6 8 6\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"numeric\"\n\n\n\n\n4.5.2 dataframe to matrix\n\n\nCode\ndata=data.matrix(small_mtcars)\ndata\n\n\n     car_name cyl  mpg  hp\n[1,]        4   6 21.0 110\n[2,]        5   6 21.0 110\n[3,]        1   4 22.8  93\n[4,]        2   6 21.4 110\n[5,]        3   8 18.7 175\n[6,]        6   6 18.1 105\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"matrix\" \"array\" \n\n\n\n\n4.5.3 dataframe to list\n\n\nCode\ndata=as.list(small_mtcars)\ndata\n\n\n$car_name\n[1] \"Mazda RX4\"         \"Mazda RX4 Wag\"     \"Datsun 710\"       \n[4] \"Hornet 4 Drive\"    \"Hornet Sportabout\" \"Valiant\"          \n\n$cyl\n[1] 6 6 4 6 8 6\n\n$mpg\n[1] 21.0 21.0 22.8 21.4 18.7 18.1\n\n$hp\n[1] 110 110  93 110 175 105\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"list\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
>>>>>>> 034811f3eac1a90f3f85df84c1be595d29b7f8d6
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html",
    "href": "Plot/1 ggplot2.html",
    "title": "ggplot2 in R",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(gapminder)\nlibrary(ggpubr)\nlibrary(ggthemr)\n\nlibrary(ggplot2)\nlibrary(plotly)\n\nlibrary(magick)\npackageVersion(\"ggplot2\")\n\n\n[1] '3.5.1'\nCode\nlibrary(reshape2)\ntips=tips\nhead(tips)\n\n\n  total_bill  tip    sex smoker day   time size\n1      16.99 1.01 Female     No Sun Dinner    2\n2      10.34 1.66   Male     No Sun Dinner    3\n3      21.01 3.50   Male     No Sun Dinner    3\n4      23.68 3.31   Male     No Sun Dinner    2\n5      24.59 3.61 Female     No Sun Dinner    4\n6      25.29 4.71   Male     No Sun Dinner    4\nCode\ndata001=gapminder\nhead(data001)\n\n\n# A tibble: 6 × 6\n  country     continent  year lifeExp      pop gdpPercap\n  &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;\n1 Afghanistan Asia       1952    28.8  8425333      779.\n2 Afghanistan Asia       1957    30.3  9240934      821.\n3 Afghanistan Asia       1962    32.0 10267083      853.\n4 Afghanistan Asia       1967    34.0 11537966      836.\n5 Afghanistan Asia       1972    36.1 13079460      740.\n6 Afghanistan Asia       1977    38.4 14880372      786.",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#color-by-group",
    "href": "Plot/1 ggplot2.html#color-by-group",
    "title": "ggplot2 in R",
    "section": "1.1 color by group",
    "text": "1.1 color by group\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#size-by-group",
    "href": "Plot/1 ggplot2.html#size-by-group",
    "title": "ggplot2 in R",
    "section": "1.2 size by group",
    "text": "1.2 size by group\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,colour = sex,size=size)) + geom_point()\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#line-plot",
    "href": "Plot/1 ggplot2.html#line-plot",
    "title": "ggplot2 in R",
    "section": "1.3 line Plot",
    "text": "1.3 line Plot\n\n\nCode\ndata002= data001 %&gt;% group_by(continent,year) %&gt;% summarise(pop=sum(pop))\n\n\n\n\nCode\np=ggplot(data002 %&gt;%filter(continent=='Asia'), aes(year, pop)) + geom_line()\np\n\n\n\n\n\n\n\n\n\n\n1.3.1 change line size\n\n\nCode\np=ggplot(data002 %&gt;%filter(continent=='Asia'), aes(year, pop)) + geom_line(size=5)\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#color-by-group-1",
    "href": "Plot/1 ggplot2.html#color-by-group-1",
    "title": "ggplot2 in R",
    "section": "1.4 color by group",
    "text": "1.4 color by group\n\n\nCode\np=ggplot(data002, aes(year, pop,colour = continent)) + geom_line()\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#color-by-group-2",
    "href": "Plot/1 ggplot2.html#color-by-group-2",
    "title": "ggplot2 in R",
    "section": "2.1 color by group",
    "text": "2.1 color by group\n\n\nCode\nggplot(data002, aes(gdpPercap,,fill = continent)) +geom_histogram(position = 'dodge')",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#show-number",
    "href": "Plot/1 ggplot2.html#show-number",
    "title": "ggplot2 in R",
    "section": "3.1 show number",
    "text": "3.1 show number\n\n\nCode\nggplot(data002, aes(x=continent, y=pop)) +\n  geom_bar(stat=\"identity\")+scale_y_continuous(labels = scales::comma)+geom_text(aes(label = pop), vjust = -0.2)",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#change-bar-color",
    "href": "Plot/1 ggplot2.html#change-bar-color",
    "title": "ggplot2 in R",
    "section": "3.2 change bar color",
    "text": "3.2 change bar color\n\n\nCode\nggplot(data002, aes(x=continent, y=pop)) +\n  geom_bar(stat=\"identity\",fill='red')+scale_y_continuous(labels = scales::comma)+geom_text(aes(label = pop), vjust = -0.2)\n\n\n\n\n\n\n\n\n\nCode\n# box plot",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#bar-plot-order",
    "href": "Plot/1 ggplot2.html#bar-plot-order",
    "title": "ggplot2 in R",
    "section": "3.3 bar plot order",
    "text": "3.3 bar plot order\n\n\nCode\nggplot(data002, aes(x=reorder(continent,pop), y=pop)) +\n  geom_bar(stat=\"identity\",fill='red')+scale_y_continuous(labels = scales::comma)+geom_text(aes(label = pop), vjust = -0.2)\n\n\n\n\n\n\n\n\n\nCode\n# box plot\n\n\n\n\nCode\nggplot(data002, aes(x=reorder(continent,-pop), y=pop)) +\n  geom_bar(stat=\"identity\",fill='red')+scale_y_continuous(labels = scales::comma)+geom_text(aes(label = pop), vjust = -0.2)\n\n\n\n\n\n\n\n\n\nCode\n# box plot",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#horizontal-barplot",
    "href": "Plot/1 ggplot2.html#horizontal-barplot",
    "title": "ggplot2 in R",
    "section": "3.4 Horizontal Barplot",
    "text": "3.4 Horizontal Barplot\n` ::: {.cell}\n\nCode\nggplot(data002, aes(x=reorder(continent,pop), y=pop)) +\n  geom_bar(stat=\"identity\",fill='red')+scale_y_continuous(labels = scales::comma)+geom_text(aes(label = pop), vjust = -0.2)+coord_flip()\n\n\n\n\n\n\n\n\n\nCode\n# box plot\n\n:::",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#make-bar-transparency",
    "href": "Plot/1 ggplot2.html#make-bar-transparency",
    "title": "ggplot2 in R",
    "section": "3.5 make bar transparency",
    "text": "3.5 make bar transparency\n\n\nCode\nggplot(data002, aes(x=reorder(continent,pop), y=pop)) +\n  geom_bar(stat=\"identity\",fill='red' ,alpha=0.2)+coord_flip()",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#make-bar-close-to-axis",
    "href": "Plot/1 ggplot2.html#make-bar-close-to-axis",
    "title": "ggplot2 in R",
    "section": "3.6 make bar close to axis",
    "text": "3.6 make bar close to axis\n\n\nCode\nggplot(data002, aes(x=reorder(continent,pop), y=pop)) +\n  geom_bar(stat=\"identity\",alpha=0.2,fill='red')+coord_flip()+scale_y_continuous(expand = expansion(mult = c(0, .1)))",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#change-one-bar-color",
    "href": "Plot/1 ggplot2.html#change-one-bar-color",
    "title": "ggplot2 in R",
    "section": "3.7 change one bar color",
    "text": "3.7 change one bar color\n\n\nCode\nggplot(data002, aes(x=reorder(continent,pop), y=pop,fill=factor(ifelse(continent==\"Asia\",\"Highlighted\",\"Normal\")))) +\n  geom_bar(stat=\"identity\",alpha=0.2,show.legend = FALSE)+scale_fill_manual(name = \"continent\", values=c(\"red\",\"grey50\"))+coord_flip()+scale_y_continuous(expand = expansion(mult = c(0, .1)))",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#color-by-group-3",
    "href": "Plot/1 ggplot2.html#color-by-group-3",
    "title": "ggplot2 in R",
    "section": "3.8 color by group",
    "text": "3.8 color by group",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#color-by-group-4",
    "href": "Plot/1 ggplot2.html#color-by-group-4",
    "title": "ggplot2 in R",
    "section": "5.1 color by group",
    "text": "5.1 color by group\n\n\nCode\np=ggplot(tips, aes(day,tip,color=sex)) + geom_jitter(position=position_jitterdodge())\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-title",
    "href": "Plot/1 ggplot2.html#add-title",
    "title": "ggplot2 in R",
    "section": "7.1 add title",
    "text": "7.1 add title\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\")\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-subtitle",
    "href": "Plot/1 ggplot2.html#add-subtitle",
    "title": "ggplot2 in R",
    "section": "7.2 add subtitle",
    "text": "7.2 add subtitle\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\",subtitle = \"Subtitle of the plot\")\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-footnote",
    "href": "Plot/1 ggplot2.html#add-footnote",
    "title": "ggplot2 in R",
    "section": "7.3 add footnote",
    "text": "7.3 add footnote\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\")+labs(caption = \"this is footnote\")\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#adjust-plot-size",
    "href": "Plot/1 ggplot2.html#adjust-plot-size",
    "title": "ggplot2 in R",
    "section": "7.4 adjust plot size",
    "text": "7.4 adjust plot size\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\")+theme(\n  plot.margin = margin(2, 2, 5, 5, \"cm\"))\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#adjust-text-size-and-center-title",
    "href": "Plot/1 ggplot2.html#adjust-text-size-and-center-title",
    "title": "ggplot2 in R",
    "section": "7.5 adjust text size and center title",
    "text": "7.5 adjust text size and center title\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\")+labs(caption = \"this is footnote\")\n\np+theme(plot.title = element_text(hjust = 0.5),text = element_text(size = 30))",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#change-x-y-name",
    "href": "Plot/1 ggplot2.html#change-x-y-name",
    "title": "ggplot2 in R",
    "section": "7.6 change x y name",
    "text": "7.6 change x y name\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+xlab(\"new x name\") + ylab(\"new y name\")\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-chinese",
    "href": "Plot/1 ggplot2.html#add-chinese",
    "title": "ggplot2 in R",
    "section": "7.7 add chinese",
    "text": "7.7 add chinese\n\n\nCode\nlibrary(showtext)\nshowtext_auto()\n\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name=\"新的 x name\")+ scale_y_continuous(name=\"新的 y name\")\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#x-y-break-and-scales-limit",
    "href": "Plot/1 ggplot2.html#x-y-break-and-scales-limit",
    "title": "ggplot2 in R",
    "section": "7.8 x y break and scales limit",
    "text": "7.8 x y break and scales limit\n\n7.8.1 x scales limit\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name=\"new x name\")+ scale_y_continuous(name=\"new y name\")\np+ xlim(min=0, 20)\n\n\n\n\n\n\n\n\n\n\n\n7.8.2 y scales limit\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name=\"new x name\")+ scale_y_continuous(name=\"new y name\")\np+ ylim(0, 100)\n\n\n\n\n\n\n\n\n\n\n\n7.8.3 adding second aix\n\n\nCode\ndata002= data001%&gt;% group_by(year,continent) %&gt;% summarise(pop=sum(pop),lifeExp=mean(lifeExp))%&gt;%filter(continent=='Asia')\n\n\nremove scientific notation ::: {.cell}\n\nCode\ncoeff=1/40000000\n\n\np=ggplot(data002, aes(year, pop)) + geom_col() +\n  geom_line(aes(year,lifeExp/ coeff),size=2, color = \"red\") +scale_y_continuous(\"pop\", sec.axis = sec_axis(~.*coeff, name = \"lifeExp\"),labels = scales::comma)\np\n\n\n\n\n\n\n\n\n:::",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-logo",
    "href": "Plot/1 ggplot2.html#add-logo",
    "title": "ggplot2 in R",
    "section": "11.1 add logo",
    "text": "11.1 add logo\n\n\nCode\n# Add your company's logo to the graph you created\nlogo &lt;- image_read(\"logo.png\")\np\ngrid::grid.raster(logo, x = 0.1, y = 0, just = c('left', 'bottom'), width = unit(0.4, 'inches'))",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-background-image",
    "href": "Plot/1 ggplot2.html#add-background-image",
    "title": "ggplot2 in R",
    "section": "11.2 add background image",
    "text": "11.2 add background image\n\n\nCode\nimg4=image_read(\"bee.png\")\n\n\"bee.png\"\n\n\n[1] \"bee.png\"\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + background_image(img4) +geom_point()+ scale_x_continuous(name=\"new x name\")+ scale_y_continuous(name=\"new y name\")\n\n\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
<<<<<<< HEAD
=======
  },
  {
    "objectID": "Plot/5 China accident map.html",
    "href": "Plot/5 China accident map.html",
    "title": "Shiny in R:China accident map",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/China_accident_map/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "Shiny in R:China accident map"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#get-current-directory",
    "href": "intro/1 basic R.html#get-current-directory",
    "title": "Basic R",
    "section": "1.1 get current directory",
    "text": "1.1 get current directory\n\n\nCode\ngetwd()",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#get-all-file-name-under-current-directory",
    "href": "intro/1 basic R.html#get-all-file-name-under-current-directory",
    "title": "Basic R",
    "section": "1.2 get all file name under current directory",
    "text": "1.2 get all file name under current directory\n\n\nCode\nlist.files()\n\n\n [1] \"1 basic R.qmd\"                 \"1 basic R.rmarkdown\"          \n [3] \"1-basic-R.rmarkdown\"           \"2 probability.qmd\"            \n [5] \"3 Statistics.qmd\"              \"5 R boook.qmd\"                \n [7] \"6 data analytic in R book.qmd\" \"7 error handling.qmd\"         \n [9] \"hotels.csv\"                    \"images\"",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#get-all-file-name-under-currrents-parent-directory",
    "href": "intro/1 basic R.html#get-all-file-name-under-currrents-parent-directory",
    "title": "Basic R",
    "section": "1.3 get all file name under currrents parent directory",
    "text": "1.3 get all file name under currrents parent directory\n\n\nCode\nlist.files(\"../\")\n\n\n [1] \"_freeze\"                      \"_publish.yml\"                \n [3] \"_quarto.yml\"                  \"_site\"                       \n [5] \"clustering\"                   \"data manipulation\"           \n [7] \"docs\"                         \"foldableCodeBlcok.lua\"       \n [9] \"hotel classification model\"   \"house price regression model\"\n[11] \"images\"                       \"index_files\"                 \n[13] \"index.qmd\"                    \"intro\"                       \n[15] \"logo.jpg\"                     \"model type\"                  \n[17] \"Multiclass classification\"    \"other\"                       \n[19] \"Plot\"                         \"styles.css\"                  \n[21] \"tensorflow\"                   \"tidymodeling.Rproj\"          \n[23] \"titanic classification model\"",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#get-file-info",
    "href": "intro/1 basic R.html#get-file-info",
    "title": "Basic R",
    "section": "1.4 get file info",
    "text": "1.4 get file info\n\n\nCode\nfile.info(\"6 data analytic in R book.qmd\")",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#create-folder",
    "href": "intro/1 basic R.html#create-folder",
    "title": "Basic R",
    "section": "1.5 create folder",
    "text": "1.5 create folder\n\n\nCode\ndir.create('testing_folder')",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#delete-folderfile",
    "href": "intro/1 basic R.html#delete-folderfile",
    "title": "Basic R",
    "section": "1.6 delete folder/file",
    "text": "1.6 delete folder/file\n\n\nCode\nfile.remove('testing_folder')",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#copy-file",
    "href": "intro/1 basic R.html#copy-file",
    "title": "Basic R",
    "section": "1.7 copy file",
    "text": "1.7 copy file\n\n\nCode\nlibrary(fs)\nfile_copy('test.csv', 'test2.csv')",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#download-file-from-internet",
    "href": "intro/1 basic R.html#download-file-from-internet",
    "title": "Basic R",
    "section": "1.8 download file from internet",
    "text": "1.8 download file from internet\n\n\nCode\nurl=\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-11/hotels.csv\"\n\ndownload.file(url = url, destfile = \"hotels.csv\")",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#for-loop",
    "href": "intro/1 basic R.html#for-loop",
    "title": "Basic R",
    "section": "4.1 for Loop",
    "text": "4.1 for Loop\n\n\nCode\nfor (x in 1:4) {\n  print(x)\n}\n\n\n[1] 1\n[1] 2\n[1] 3\n[1] 4\n\n\nwith break statement\n\n\nCode\nfor (x in 1:6) {\n  if (x == 4) {break}\n  print(x)\n}\n\n\n[1] 1\n[1] 2\n[1] 3\n\n\nwith next statement\n\n\nCode\nfor (x in 1:6) {\n  if (x == 4) {next}\n  print(x)\n}\n\n\n[1] 1\n[1] 2\n[1] 3\n[1] 5\n[1] 6",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#error-handling-on-for-loopprint-out-error",
    "href": "intro/1 basic R.html#error-handling-on-for-loopprint-out-error",
    "title": "Basic R",
    "section": "4.2 Error handling on for Loop:print out error",
    "text": "4.2 Error handling on for Loop:print out error\n\n\nCode\nstuff &lt;- list(12, 9, 2, \"cat\", 25, 10, \"bird\")\n#stuff\n\n\n\n\nCode\nloop_num=0\n\nfor (i in 1:6) {\n  loop_num=loop_num+1\n  tryCatch (print(1+i),\n           \n           error = function(e){\n           message(paste(\"An error occurred for loop num\", loop_num,\":\\n\"), e)\n             \n         })\n}\n\n\n[1] 2\n[1] 3\n[1] 4\n[1] 5\n[1] 6\n[1] 7",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#while-loop",
    "href": "intro/1 basic R.html#while-loop",
    "title": "Basic R",
    "section": "4.3 while Loop",
    "text": "4.3 while Loop\n\n\nCode\ni &lt;- 1\nwhile (i &lt; 6) {\n  print(i)\n  i &lt;- i + 1\n}\n\n\n[1] 1\n[1] 2\n[1] 3\n[1] 4\n[1] 5\n\n\nwith break statement\n\n\nCode\ni &lt;- 1\nwhile (i &lt; 6) {\n  print(i)\n  i &lt;- i + 1\n  if (i == 4) {break}\n}\n\n\n[1] 1\n[1] 2\n[1] 3\n\n\nwith next statement\n\n\nCode\ni =1\n\nwhile (i &lt; 6) {\n  i &lt;- i + 1\n  if (i == 4){next}\n  print(i)\n}\n\n\n[1] 2\n[1] 3\n[1] 5\n[1] 6",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#error-handling-on-whie-loop-try-when-the-error-gone",
    "href": "intro/1 basic R.html#error-handling-on-whie-loop-try-when-the-error-gone",
    "title": "Basic R",
    "section": "4.4 Error handling on whie Loop: try when the error gone",
    "text": "4.4 Error handling on whie Loop: try when the error gone\n\n\nCode\ni=0\na=0\nwhile (i &lt; 4) {\n  a=a+1\n  print(i)\n  tryCatch({\n  asdfgaergae5gh5hae5h\n    i=i+1\n  },error = function(msg){print('eeeeeeee')\n    i=i-1\n    print(paste0(\"new i : \",i))\n   \n    })\n   if(a&gt;10){break}\n  }\n\n\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#without-arguments",
    "href": "intro/1 basic R.html#without-arguments",
    "title": "Basic R",
    "section": "5.1 without Arguments",
    "text": "5.1 without Arguments\n\n\nCode\nmy_function &lt;- function() { \n  print(\"Hello World!\")\n}\n\nmy_function()\n\n\n[1] \"Hello World!\"",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#with-arguments",
    "href": "intro/1 basic R.html#with-arguments",
    "title": "Basic R",
    "section": "5.2 with Arguments",
    "text": "5.2 with Arguments\n\n\nCode\nadding_ten &lt;- function(x) { \n  a=x+10\n  return(a)\n}\n\nadding_ten(5)\n\n\n[1] 15",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#with-default-arguments",
    "href": "intro/1 basic R.html#with-default-arguments",
    "title": "Basic R",
    "section": "5.3 with default Arguments",
    "text": "5.3 with default Arguments\n\n\nCode\nadding_ten &lt;- function(x=10) { \n  a=x+10\n  return(a)\n}\n\n#if not define x, then x=10\n\nadding_ten()\n\n\n[1] 20",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-function-arguments",
    "href": "intro/1 basic R.html#check-function-arguments",
    "title": "Basic R",
    "section": "5.4 check function Arguments",
    "text": "5.4 check function Arguments\n\n\nCode\nargs(adding_ten)\n\n\nfunction (x = 10) \nNULL\n\n\nMany functions exhibit variadic behavior. That is, they can accept any num- ber of arguments, and it’s up to the user to decide how many arguments to provide. The functions c, data.frame, and list are all like this. When you call a function like data.frame, you can specify any number of members as arguments.\n\n\nCode\nargs(data.frame)\n\n\nfunction (..., row.names = NULL, check.rows = FALSE, check.names = TRUE, \n    fix.empty.names = TRUE, stringsAsFactors = FALSE) \nNULL",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#warning-in-function",
    "href": "intro/1 basic R.html#warning-in-function",
    "title": "Basic R",
    "section": "5.5 warning in function",
    "text": "5.5 warning in function\nprint out warning\n\n\nCode\nadding_ten &lt;- function(x=10) { \n  a=x+10\n  if(a&gt;50){\n    warning('its better than 50')\n  }\n  return(a)\n}\n\n\n\n\nCode\nadding_ten(100)\n\n\n[1] 110",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#stop-in-function",
    "href": "intro/1 basic R.html#stop-in-function",
    "title": "Basic R",
    "section": "5.6 stop in function",
    "text": "5.6 stop in function\nprint out stop error message\n\n\nCode\nadding_ten &lt;- function(x=10) { \n  a=x+10\n  if(a&gt;50){\n    stop('its better than 50')\n  }\n  return(a)\n}\n\n\n\n\nCode\nadding_ten(100)",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#use-try-to-by-pass-error",
    "href": "intro/1 basic R.html#use-try-to-by-pass-error",
    "title": "Basic R",
    "section": "5.7 use try to by pass error",
    "text": "5.7 use try to by pass error\n\n\nCode\ntry(adding_ten(100))\n\n\n[1] 110\n\n\nCode\n5+10\n\n\n[1] 15",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-r-version",
    "href": "intro/1 basic R.html#check-r-version",
    "title": "Basic R",
    "section": "7.1 check R version",
    "text": "7.1 check R version\n\n\nCode\nversion\n\n\n               _                           \nplatform       aarch64-apple-darwin20      \narch           aarch64                     \nos             darwin20                    \nsystem         aarch64, darwin20           \nstatus                                     \nmajor          4                           \nminor          4.1                         \nyear           2024                        \nmonth          06                          \nday            14                          \nsvn rev        86737                       \nlanguage       R                           \nversion.string R version 4.4.1 (2024-06-14)\nnickname       Race for Your Life",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#install-r-package",
    "href": "intro/1 basic R.html#install-r-package",
    "title": "Basic R",
    "section": "7.2 install R package",
    "text": "7.2 install R package\n\n7.2.1 install from Cran\n99% of the time will install pacakge from The Comprehensive R Archive Network(cran).https://cran.r-project.org/\n\n\n\nCode\ninstall.packages('tidyverse')\n\n\n\n\n7.2.2 install from Github\n\n\nCode\npak::pkg_install(\"tidymodels/learntidymodels\")\n\n\n\n\n7.2.3 install from .tar.gz\n\n\nCode\ninstall.packages(\"https://cran.r-project.org/src/contrib/Archive/maptools/maptools_1.1-8.tar.gz\")\n\n\n\n\n7.2.4 install from Bioconductor\n\n\nCode\npak::pkg_install(\"text2vec\")\n\n\n\n\n7.2.5 install from local\n\n\nCode\npak::local_install(\"cli\")",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-one-package-version",
    "href": "intro/1 basic R.html#check-one-package-version",
    "title": "Basic R",
    "section": "7.3 check one package version",
    "text": "7.3 check one package version\n\n\nCode\npackageVersion(\"tidyverse\")\n\n\n[1] '2.0.0'",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-pacakge-relationship",
    "href": "intro/1 basic R.html#check-pacakge-relationship",
    "title": "Basic R",
    "section": "7.4 check pacakge relationship",
    "text": "7.4 check pacakge relationship\n\n\nCode\npak::pkg_deps_explain(\"tibble\", \"rlang\")\n\n\ntibble -&gt; lifecycle -&gt; rlang\ntibble -&gt; pillar -&gt; lifecycle -&gt; rlang\ntibble -&gt; pillar -&gt; rlang\ntibble -&gt; pillar -&gt; vctrs -&gt; lifecycle -&gt; rlang\ntibble -&gt; pillar -&gt; vctrs -&gt; rlang\ntibble -&gt; rlang\ntibble -&gt; vctrs -&gt; lifecycle -&gt; rlang\ntibble -&gt; vctrs -&gt; rlang",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-pacakge-dependencies",
    "href": "intro/1 basic R.html#check-pacakge-dependencies",
    "title": "Basic R",
    "section": "7.5 check pacakge dependencies",
    "text": "7.5 check pacakge dependencies\n\n\nCode\npak::pkg_deps_tree(\"tibble\")\n\n\ntibble 3.2.1 ✨ ⬇ (688.89 kB)\n├─fansi 1.0.6 ✨ ⬇ (383.06 kB)\n├─lifecycle 1.0.4 ✨ ⬇ (124.78 kB)\n│ ├─cli 3.6.3 ✨ ⬇ (1.39 MB)\n│ ├─glue 1.8.0 ✨ ⬇ (173.70 kB)\n│ └─rlang 1.1.4 ✨ ⬇ (1.90 MB)\n├─magrittr 2.0.3 ✨ ⬇ (233.52 kB)\n├─pillar 1.10.0 ✨ ⬇ (429.92 kB)\n│ ├─cli\n│ ├─glue\n│ ├─lifecycle\n│ ├─rlang\n│ ├─utf8 1.2.4 ✨ ⬇ (206.91 kB)\n│ └─vctrs 0.6.5 ✨ ⬇ (1.89 MB)\n│   ├─cli\n│   ├─glue\n│   ├─lifecycle\n│   └─rlang\n├─pkgconfig 2.0.3 ✨ ⬇ (18.45 kB)\n├─rlang\n└─vctrs\n\nKey:  ✨ new |  ⬇ download",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-current-loaded-package",
    "href": "intro/1 basic R.html#check-current-loaded-package",
    "title": "Basic R",
    "section": "7.6 check current loaded package",
    "text": "7.6 check current loaded package\n\n\nCode\nsessionInfo()\n\n\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] janitor_2.2.0   rvest_1.0.4     lubridate_1.9.4 forcats_1.0.0  \n [5] stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2     readr_2.1.5    \n [9] tidyr_1.3.1     tibble_3.2.1    ggplot2_3.5.1   tidyverse_2.0.0\n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6      jsonlite_1.8.9    compiler_4.4.1    tidyselect_1.2.1 \n [5] xml2_1.3.6        snakecase_0.11.1  callr_3.7.6       scales_1.3.0     \n [9] yaml_2.3.10       fastmap_1.2.0     R6_2.5.1          pak_0.8.0        \n[13] generics_0.1.3    curl_6.0.0        knitr_1.48        htmlwidgets_1.6.4\n[17] munsell_0.5.1     pillar_1.10.0     tzdb_0.4.0        rlang_1.1.4      \n[21] utf8_1.2.4        stringi_1.8.4     xfun_0.48         timechange_0.3.0 \n[25] cli_3.6.3         withr_3.0.2       magrittr_2.0.3    ps_1.8.1         \n[29] processx_3.8.4    digest_0.6.37     grid_4.4.1        hms_1.1.3        \n[33] lifecycle_1.0.4   vctrs_0.6.5       evaluate_1.0.1    glue_1.8.0       \n[37] colorspace_2.1-1  httr_1.4.7        rmarkdown_2.28    tools_4.4.1      \n[41] pkgconfig_2.0.3   htmltools_0.5.8.1",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-all-package-version",
    "href": "intro/1 basic R.html#check-all-package-version",
    "title": "Basic R",
    "section": "7.7 check all package version",
    "text": "7.7 check all package version\n\n\nCode\nip = as.data.frame(installed.packages()[,c(1,3:4)])\nip = ip[is.na(ip$Priority),1:2,drop=FALSE]\nhead(ip)\n\n\n              Package  Version\nabind           abind    1.4-8\nannotater   annotater    0.2.3\nanytime       anytime    0.3.9\narrow           arrow 17.0.0.1\naskpass       askpass    1.2.1\nassertthat assertthat    0.2.1",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-package-install-loaciton",
    "href": "intro/1 basic R.html#check-package-install-loaciton",
    "title": "Basic R",
    "section": "7.8 check package install loaciton",
    "text": "7.8 check package install loaciton\n\n\nCode\n.libPaths()\n\n\n[1] \"/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library\"",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#uninstall-pacakge",
    "href": "intro/1 basic R.html#uninstall-pacakge",
    "title": "Basic R",
    "section": "7.9 uninstall pacakge",
    "text": "7.9 uninstall pacakge\n\n\nCode\nremove.packages('xxxxx')",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#centrality-mean-median-mode",
    "href": "intro/1 basic R.html#centrality-mean-median-mode",
    "title": "Basic R",
    "section": "10.1 Centrality: Mean, Median, Mode",
    "text": "10.1 Centrality: Mean, Median, Mode",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#spread-variance-standard-deviation-and-the-interquartile-range",
    "href": "intro/1 basic R.html#spread-variance-standard-deviation-and-the-interquartile-range",
    "title": "Basic R",
    "section": "10.2 Spread: Variance, Standard Deviation, and the Interquartile Range",
    "text": "10.2 Spread: Variance, Standard Deviation, and the Interquartile Range",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#covariance-and-correlation",
    "href": "intro/1 basic R.html#covariance-and-correlation",
    "title": "Basic R",
    "section": "10.3 Covariance and Correlation",
    "text": "10.3 Covariance and Correlation\nWhen analyzing data, it’s often useful to be able to investigate the rela- tionship between two numeric variables to assess trends. For example, you might expect height and weight observations to have a noticeable positive relationship—taller people tend to weigh more. Conversely, you might imag- ine that handspan and length of hair would have less of an association. One of the simplest and most common ways such associations are quantified and compared is through the idea of correlation, for which you need the covariance. The covariance expresses how much two numeric variables “change together” and the nature of that relationship,",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#correlationpearsons-product-moment-correlation-coefficient",
    "href": "intro/1 basic R.html#correlationpearsons-product-moment-correlation-coefficient",
    "title": "Basic R",
    "section": "10.4 Correlation,Pearson’s product-moment correlation coefficient",
    "text": "10.4 Correlation,Pearson’s product-moment correlation coefficient\nPearson’s sample correlation coef- ficient ρxy is computed by dividing the sample covariance by the product of the standard deviation of each data set\n\nSome Correlation Example:\n\n\n\nCode\nsessionInfo()\n\n\nsessionInfo()\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] janitor_2.2.0   rvest_1.0.4     lubridate_1.9.4 forcats_1.0.0  \n [5] stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2     readr_2.1.5    \n [9] tidyr_1.3.1     tibble_3.2.1    ggplot2_3.5.1   tidyverse_2.0.0\n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6      jsonlite_1.8.9    compiler_4.4.1    tidyselect_1.2.1 \n [5] xml2_1.3.6        snakecase_0.11.1  callr_3.7.6       scales_1.3.0     \n [9] yaml_2.3.10       fastmap_1.2.0     R6_2.5.1          pak_0.8.0        \n[13] generics_0.1.3    curl_6.0.0        knitr_1.48        htmlwidgets_1.6.4\n[17] munsell_0.5.1     pillar_1.10.0     tzdb_0.4.0        rlang_1.1.4      \n[21] utf8_1.2.4        stringi_1.8.4     xfun_0.48         timechange_0.3.0 \n[25] cli_3.6.3         withr_3.0.2       magrittr_2.0.3    ps_1.8.1         \n[29] processx_3.8.4    digest_0.6.37     grid_4.4.1        hms_1.1.3        \n[33] lifecycle_1.0.4   vctrs_0.6.5       evaluate_1.0.1    glue_1.8.0       \n[37] colorspace_2.1-1  httr_1.4.7        rmarkdown_2.28    tools_4.4.1      \n[41] pkgconfig_2.0.3   htmltools_0.5.8.1",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/5 R boook.html",
    "href": "intro/5 R boook.html",
    "title": "R book",
    "section": "",
    "text": "The Art of R Programming\nby Norman Matloff 2011\n\n\n\nThe book of R\nby Tilman M. Davie 2016\n\n\n\nR in action\nby Robert I. Kabacoff 2011\n\n\n\nR Packages\nby Hadley Wickham Jennifer Bryan\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Intro",
      "R book"
    ]
  },
  {
    "objectID": "other/4 Map/1 China accident map with mapview.html",
    "href": "other/4 Map/1 China accident map with mapview.html",
    "title": "China accident map",
    "section": "",
    "text": "1 data\ndata source :https://github.com/percent4/chinese_incident_tracker\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(jsonlite)\nlibrary(curl)\nlibrary(lubridate)\nlibrary(plotly)\nlibrary(ggplot2)\nlibrary(openxlsx)\nlibrary(readxl)\n\n\n\n\n2 one file\n\n\nCode\n#url &lt;- \"https://raw.githubusercontent.com/percent4/chinese_incident_tracker/main/elk/data/00105670-df53-4be8-9039-8a07fe2d2b4d.json\"\n#download.file(url,\"./data/SAFI.json\", mode = \"wb\")\n\n\n\n\nCode\ndata001 &lt;- read_json(\"./data/SAFI.json\")\n\n\n\n\nCode\ndata002=data001 %&gt;% as.data.frame()\ncolnames(data002)[14] = \"latitude\"\ncolnames(data002)[15] = \"longitude\"\nglimpse(data002)\n\n\nRows: 1\nColumns: 22\n$ item_id            &lt;chr&gt; \"00105670-df53-4be8-9039-8a07fe2d2b4d\"\n$ news_channel       &lt;chr&gt; \"新闻坊\"\n$ title              &lt;chr&gt; \"一养老院突发火灾，已致3死10伤！\"\n$ report             &lt;chr&gt; \"4月4日\\n\\n“东莞应急管理”\\n\\n发布情况通报\\n\\n↓↓↓\\n\\…\n$ original_websites  &lt;chr&gt; \"https://mp.weixin.qq.com/s/xUZR8gZ_N0UqGj0GvH6L8A\"\n$ start_date         &lt;chr&gt; \"2024-04-04\"\n$ start_time         &lt;chr&gt; \"2024-04-04 04:21:00\"\n$ update_time        &lt;chr&gt; \"2024-05-03 10:50:01\"\n$ incident_type      &lt;chr&gt; \"火灾\"\n$ incident_reason    &lt;chr&gt; \"该建筑为一栋11层楼房，起火部位为第三层303房，过火…\n$ person_death_num   &lt;int&gt; 3\n$ person_injury_num  &lt;int&gt; 10\n$ person_missing_num &lt;int&gt; 0\n$ latitude           &lt;dbl&gt; 113.6952\n$ longitude          &lt;dbl&gt; 23.07464\n$ place              &lt;chr&gt; \"东莞万江街道康怡护理院（公助民办养老院）\"\n$ province           &lt;chr&gt; \"广东省\"\n$ city               &lt;chr&gt; \"东莞市\"\n$ county             &lt;chr&gt; \"\"\n$ town               &lt;chr&gt; \"万江街道\"\n$ village            &lt;chr&gt; \"\"\n$ is_final           &lt;lgl&gt; TRUE\n\n\n\n\n3 all file\n\n\nCode\n#url=\"https://github.com/percent4/chinese_incident_tracker/archive/refs/heads/main.zip\"\n#download.file(url,\"./data/data.zip\", mode = \"wb\")\n\n\n\n\nCode\n#unzip(\"./data/data.zip\",exdir=\"./data/out\")\n\n\n\n\nCode\nfrom &lt;- \"./data/out/chinese_incident_tracker-main/elk/data\"\nto   &lt;- \"./data/json_folder\"\nfile.copy(list.files(from, full.names = TRUE), \n          to, \n          recursive = TRUE)\n\n\n [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n\n\n\n\nCode\n#list.files(\"./data/json_folder\")\n\n\n\n\nCode\nall_data=tibble()\n\nfor (i in list.files(\"./data/json_folder\")) {\n  #print(i)\n  data001=read_json(paste0(\"./data/json_folder/\",i))\n  data002=data001 %&gt;% as.data.frame()\n  colnames(data002)[14] = \"Longitude\"\n  colnames(data002)[15] = \"Latitude\"\n  #print(data002)\n  \n  all_data=rbind(all_data,data002)\n}\n\n\n\n\nCode\nall_data=all_data %&gt;% mutate(text=paste0(incident_type,\" \",\"死亡人数:\",person_death_num,\" 受伤人数:\",person_injury_num)\n                             ,month_year= format_ISO8601(ymd(start_date), precision = \"ym\")\n                             )\n\n\n\n\nCode\nglimpse(all_data)\n\n\nRows: 60\nColumns: 24\n$ item_id            &lt;chr&gt; \"00105670-df53-4be8-9039-8a07fe2d2b4d\", \"0683ba1e-7…\n$ news_channel       &lt;chr&gt; \"新闻坊\", \"中国新闻网\", \"凤凰网\", \"搜狐网\", \"每日经…\n$ title              &lt;chr&gt; \"一养老院突发火灾，已致3死10伤！\", \"江西于都一矿企…\n$ report             &lt;chr&gt; \"4月4日\\n\\n“东莞应急管理”\\n\\n发布情况通报\\n\\n↓↓↓\\n\\…\n$ original_websites  &lt;chr&gt; \"https://mp.weixin.qq.com/s/xUZR8gZ_N0UqGj0GvH6L8A\"…\n$ start_date         &lt;chr&gt; \"2024-04-04\", \"2024-04-24\", \"2024-01-22\", \"2024-02-…\n$ start_time         &lt;chr&gt; \"2024-04-04 04:21:00\", \"2024-04-24 00:08:48\", \"2024…\n$ update_time        &lt;chr&gt; \"2024-05-03 10:50:01\", \"2024-05-03 00:08:48\", \"2024…\n$ incident_type      &lt;chr&gt; \"火灾\", \"溃水\", \"山体滑坡\", \"房屋坍塌\", \"燃气爆炸\",…\n$ incident_reason    &lt;chr&gt; \"该建筑为一栋11层楼房，起火部位为第三层303房，过火…\n$ person_death_num   &lt;int&gt; 3, 3, 44, 1, 7, 4, 1, 1, 7, 1, 18, 4, 5, 1, 15, 12,…\n$ person_injury_num  &lt;int&gt; 10, 2, 2, 0, 27, 4, 0, 0, 0, 11, 1155, 0, 3, 2, 44,…\n$ person_missing_num &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 6, 0, …\n$ Longitude          &lt;dbl&gt; 113.69524, 115.32158, 104.95514, 113.28304, 116.808…\n$ Latitude           &lt;dbl&gt; 23.07464, 25.72126, 27.49063, 32.22574, 39.95258, 4…\n$ place              &lt;chr&gt; \"东莞万江街道康怡护理院（公助民办养老院）\", \"于都县…\n$ province           &lt;chr&gt; \"广东省\", \"江西省\", \"云南省\", \"湖北省\", \"河北省\", \"…\n$ city               &lt;chr&gt; \"东莞市\", \"赣州市\", \"昭通市\", \"随州市\", \"廊坊市\", \"…\n$ county             &lt;chr&gt; \"\", \"于都县\", \"镇雄县\", \"随县\", \"三河市\", \"新城区\",…\n$ town               &lt;chr&gt; \"万江街道\", \"祁禄山镇\", \"塘房镇\", \"万和镇\", \"燕郊镇…\n$ village            &lt;chr&gt; \"\", \"金沙村\", \"\", \"\", \"小张各庄\", \"\", \"\", \"\", \"乔家…\n$ is_final           &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…\n$ text               &lt;chr&gt; \"火灾 死亡人数:3 受伤人数:10\", \"溃水 死亡人数:3 受…\n$ month_year         &lt;chr&gt; \"2024-04\", \"2024-04\", \"2024-01\", \"2024-02\", \"2024-0…\n\n\n\n\nCode\n#write.xlsx(all_data,'all_data.xlsx')\n\n\n\n\n4 chart\ngroup to month\n\n\nCode\nchartdata001=all_data %&gt;% group_by(month_year)  %&gt;%  summarise(person_death_num=sum(person_death_num)\n                                                           ,person_injury_num=sum(person_injury_num)\n                                                           )\n\n\nwide to long\n\n\nCode\nchartdata002=chartdata001 %&gt;%select(month_year,person_death_num,person_injury_num) %&gt;% \n  pivot_longer(!c(month_year), names_to = 'type', values_to = 'DATA')\n\n\n\n\nCode\ngg=ggplot(chartdata001, aes(x=month_year, y=person_death_num,label = person_death_num))+\n  geom_bar(stat=\"identity\",fill='red')+ geom_text(vjust = -1,\n              position = position_dodge(width = 0.9))+ theme_bw()\n\n\nggplotly(gg)\n\n\n\n\n\n\n\n\nCode\ngg=ggplot(chartdata002, aes(fill=type, y=DATA, x=month_year)) +\n    geom_col(position = \"dodge\") +\n    geom_text(aes(label = DATA), vjust = 1.5,\n              position = position_dodge(width = 0.9))+scale_y_log10()+ theme_light()\n\npp=ggplotly(gg)\n\npp\n\n\n\n\n\n\n\n\n5 map\n\n\nCode\nall_data2 =all_data %&gt;%  mutate(report=report %&gt;% str_trunc(100))\n\n\n\n\nCode\n#write.xlsx(all_data2,'all_data2.xlsx')\n\n\n\n\nCode\nlibrary(mapview)\nlibrary(sf)\nlibrary(stringr)\n\nmapview(all_data2, map.types='OpenStreetMap',label='text',xcol = \"Longitude\", ycol = \"Latitude\", zcol='incident_type',cex=\"person_death_num\",crs = 4269, grid = FALSE)\n\n\n\n\n\n\n\n\n6 resouce:\nhttps://github.com/percent4/chinese_incident_tracker\nhttps://github.com/r-spatial/mapview\nhttps://maps.clb.org.hk/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "4 Map",
      "China accident map"
    ]
  },
  {
    "objectID": "other/5 other/4 quarto blog.html",
    "href": "other/5 other/4 quarto blog.html",
    "title": "quarto block",
    "section": "",
    "text": "1 add a output folder bottom\n\nadd foldableCodeBlcok.lua into blog root folder\nadd in _quarto.yml\n\nfilters: - fold_results.lua\n\nput following on code chunk\n\n{r, attr.output=‘.details summary=“sessionInfo()”’} #| echo: false sessionInfo()\nreferece:\nhttps://github.com/quarto-dev/quarto-cli/issues/341\nhttps://gist.github.com/atusy/f2b5b992e45c68ab6823499f2339c6e6\n\n\nCode\nsessionInfo()\n\n\nsessionInfo()\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Sonoma 14.1.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.4 compiler_4.3.1    fastmap_1.1.1     cli_3.6.2        \n [5] tools_4.3.1       htmltools_0.5.8.1 rstudioapi_0.16.0 yaml_2.3.8       \n [9] rmarkdown_2.26    knitr_1.45        jsonlite_1.8.8    xfun_0.43        \n[13] digest_0.6.35     rlang_1.1.3       evaluate_0.23    \n\n\n\n\n\n2 resource:\nhttps://themockup.blog/posts/2021-01-28-removing-image-backgrounds-with-magick/\nhttps://cran.r-project.org/web/packages/magick/vignettes/intro.html\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "5 other",
      "quarto block"
    ]
  },
  {
    "objectID": "other/5 other/2 translation.html",
    "href": "other/5 other/2 translation.html",
    "title": "Translation",
    "section": "",
    "text": "Code\nlibrary(polyglotr)\n\n\n\n1 Translation word\n\n\nCode\nword_translation &lt;- linguee_word_translation(\"fruit\", source_language = \"en\", target_language = \"zh\")\n\nword_translation\n\n\n[1] \"水果\" \"果香\" \"果子\" \"果品\" \"实\"   \"檎\"  \n\n\n\n\n2 translate sentences\n\n\nCode\ngoogle_get_supported_languages()\n\n\n# A tibble: 134 × 2\n   Language    `ISO-639 code`\n   &lt;chr&gt;       &lt;chr&gt;         \n 1 Afrikaans   af            \n 2 Albanian    sq            \n 3 Amharic     am            \n 4 Arabic      ar            \n 5 Armenian    hy            \n 6 Assamese    as            \n 7 Aymara      ay            \n 8 Azerbaijani az            \n 9 Bambara     bm            \n10 Basque      eu            \n# ℹ 124 more rows\n\n\n\n\nCode\ntexts &lt;- c(\"Hello, how are you?\", \n           \"I love programming!\", \n           \"This is a test.\")\n\nlanguages &lt;- c(\"es\", \"fr\", \"zh-CN\")\n\n\ncreate_translation_table(texts, languages)\n\n\n        original_word                     es                          fr\n1 Hello, how are you?     ¿Hola, cómo estás? Bonjour comment allez-vous?\n2 I love programming! ¡Me encanta programar!  J'adore la programmation !\n3     This is a test.    Esto es una prueba.              C'est un test.\n           zh-CN\n1       你好吗？\n2   我喜欢编程！\n3 这是一个测试。\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "5 other",
      "Translation"
    ]
  },
  {
    "objectID": "other/2 Web scraping on whiskybase.com/2 one bottle review.html",
    "href": "other/2 Web scraping on whiskybase.com/2 one bottle review.html",
    "title": "on bottle review",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(stringr)\nlibrary(openxlsx)\nlibrary(readxl)\n\n\n\n\nCode\nurl='https://www.whiskybase.com/whiskies/whisky/147142/macallan-12-year-old'\npage=read_html(url)\nelement=page %&gt;% \n  html_nodes(\"*\") %&gt;% \n  html_attr(\"class\") %&gt;% \n  unique()\n\n\n\n\nCode\ntext=page%&gt;% html_nodes(\"*\")%&gt;% html_text2()\n\n\n\n\nCode\nhead(text)\n\n\n[1] \"document.documentElement.className += 'js' Macallan 12-year-old - Ratings and reviews - Whiskybase {\\\"@context\\\":\\\"https:\\\\/\\\\/schema.org\\\\/\\\",\\\"@type\\\":\\\"Product\\\",\\\"name\\\":\\\"Macallan 12-year-old\\\",\\\"sku\\\":147142,\\\"brand\\\":{\\\"@type\\\":\\\"Brand\\\",\\\"name\\\":\\\"Macallan\\\"},\\\"gtin\\\":\\\"5010314017408\\\",\\\"gtin13\\\":\\\"5010314017408\\\",\\\"image\\\":\\\"https:\\\\/\\\\/static.whiskybase.com\\\\/storage\\\\/whiskies\\\\/1\\\\/4\\\\/7142\\\\/304090-normal.png\\\",\\\"offers\\\":{\\\"@type\\\":\\\"AggregateOffer\\\",\\\"lowPrice\\\":68.5799999999999982946974341757595539093017578125,\\\"highPrice\\\":288.41000000000002501110429875552654266357421875,\\\"priceCurrency\\\":\\\"EUR\\\",\\\"offerCount\\\":26},\\\"aggregateRating\\\":{\\\"@type\\\":\\\"AggregateRating\\\",\\\"bestRating\\\":100,\\\"worstRating\\\":0,\\\"ratingValue\\\":84.5499999999999971578290569595992565155029296875,\\\"reviewCount\\\":238},\\\"description\\\":\\\"Macallan 12-year-old 12 yr. The strength of this whisky is 40.0 % Vol. A bottle from Macallan\\\"}window.__exc = { e: [], a: function(e) { return window.application ? window.application.exec(e) : __exc.e.push(e) } } (function(c, l, a, r, i, t, y) { c[a] = c[a] || function() { (c[a].q = c[a].q || []).push(arguments) }; t = l.createElement(r); t.async = 1; t.src = \\\"https://www.clarity.ms/tag/\\\" + i; y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y); })(window, document, \\\"clarity\\\", \\\"script\\\", \\\"cdpmv56i88\\\");\"\n[2] \"\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \n[3] \"\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \n[4] \"document.documentElement.className += 'js'\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \n[5] \"\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \n[6] \"\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \n\n\n\n\nCode\nwrite_delim(tibble(text), \"./data/text.txt\")\n\n\n\n\nCode\nrating_people_num_list=c()\navg_price_list=c()\nlowest_price_list=c()\ncask_type_list=c() \npic_link_list=c()\nwb_id=c()\nstart_time=now()\ncask_number_list=c()\nnumber_of_bottle_list=c()\nscore_list=c()\nbottler_list=c()\nbottle_list=c()\nstrength_list=c()\n\norder_num=1\n\n\n\n\nCode\n###################### score\nbottle=(page%&gt;% html_nodes('h1')%&gt;% html_text())[1]\nbottle=bottle %&gt;% str_remove_all('\\n') %&gt;% str_remove_all('\\t')\nprint(paste0(\"bottle: \",(bottle)[1]))\n\n\n[1] \"bottle: Macallan12-year-old\"\n\n\nCode\nbottle_list=c(bottle_list,bottle)\n\n\n###################### score\nscore=(page%&gt;% html_nodes('.votes-rating-current')%&gt;% html_text())[1]\nprint(paste0(\"score: \",score))\n\n\n[1] \"score: 84.55\"\n\n\nCode\nscore_list=c(score_list,score)\n\n####################### rating_people_num\nrating_people_num=page%&gt;% html_nodes('.votes-count')%&gt;% html_text()\nprint(rating_people_num)[1]\n\n\n[1] \"238\" \"238\"\n\n\n[1] \"238\"\n\n\nCode\nrating_people_num_list=c(rating_people_num_list,rating_people_num[1])\n\n\n##################### lowest price\nlowest_price=page%&gt;% html_nodes('.wb--shop-links-panel--price')%&gt;% html_text()\nlowest_price2=if(identical(lowest_price, character(0))==TRUE){0}else{lowest_price}\nprint(lowest_price2)\n\n\n[1] \"€ 78.00\"\n\n\nCode\nlowest_price_list=c(lowest_price_list,lowest_price2)\n\n############################# average price\navg_price=page%&gt;% html_nodes('p+ p')%&gt;% html_text()\navg_price6=case_when(str_detect(avg_price, \"[0-9]\")==TRUE~avg_price,.default='')\nprint(paste('price is :',avg_price6[1]))\n\n\n[1] \"price is : € 128.49\"\n\n\nCode\navg_price_list=c(avg_price_list,avg_price6[1])\n\n################################## cask type\nbottle_name=page%&gt;% html_nodes('#whisky-details dt')%&gt;% html_text()\nbottle_value=page%&gt;% html_nodes('#whisky-details dt+ dd')%&gt;% html_text()\nbottle_name_value=data.frame(bottle_name,bottle_value)\ncask=bottle_name_value%&gt;% filter(bottle_name=='Cask Type') %&gt;% select(bottle_value)\ncask2=if(nrow(cask)==0){'unknow cask'}else{ unname(unlist(cask[1,]))}\nprint(cask2)\n\n\n[1] \"Sherry Seasoned Oak casks from Jerez\"\n\n\nCode\ncask_type_list=c(cask_type_list,cask2)\n\n################################## Bottler\n#bottle_name=page%&gt;% html_nodes('#whisky-details dt')%&gt;% html_text()\n#bottle_value=page%&gt;% html_nodes('#whisky-details dt+ dd')%&gt;% html_text()\n#bottle_name_value=data.frame(bottle_name,bottle_value)\nbottler=bottle_name_value%&gt;% filter(bottle_name=='Bottler') %&gt;% select(bottle_value)\nbottler=if(nrow(bottler)==0){'unknow Bottler'}else{ unname(unlist(bottler[1,]))}\nprint(bottler)\n\n\n[1] \"Distillery Bottling\"\n\n\nCode\nbottler_list=c(bottler_list,bottler)\n\n################################## strength\n#bottle_name=page%&gt;% html_nodes('#whisky-details dt')%&gt;% html_text()\n#bottle_value=page%&gt;% html_nodes('#whisky-details dt+ dd')%&gt;% html_text()\n#bottle_name_value=data.frame(bottle_name,bottle_value)\nstrength=bottle_name_value%&gt;% filter(bottle_name=='Strength') %&gt;% select(bottle_value)\nstrength=if(nrow(strength)==0){'unknow strength'}else{ unname(unlist(strength[1,]))}\nprint(strength)\n\n\n[1] \"40.0 % Vol.\"\n\n\nCode\nstrength_list=c(strength_list,strength)\n\n\n  \n##################### number_of_bottle \nnumber_of_bottle1=bottle_name_value%&gt;% filter(bottle_name=='Number of bottles') %&gt;% select(bottle_value)\nnumber_of_bottle2=if(nrow(number_of_bottle1)==0){'unknow Number of bottles'}else{ unname(unlist(number_of_bottle1[1,]))}\n  \nprint(number_of_bottle2)\n\n\n[1] \"unknow Number of bottles\"\n\n\nCode\nnumber_of_bottle_list=c(number_of_bottle_list,number_of_bottle2)\n  \n##################### Casknumber \ncask_number1=bottle_name_value%&gt;% filter(bottle_name=='Casknumber') %&gt;% select(bottle_value)\ncask_number2=if(nrow(cask_number1)==0){'unknow Casknumber'}else{ unname(unlist(cask_number1[1,]))}\n  \nprint(paste('casknumber:',cask_number2))\n\n\n[1] \"casknumber: unknow Casknumber\"\n\n\nCode\ncask_number_list=c(cask_number_list,cask_number2)\n  \n  \n########################################### wb id \nid_name=page%&gt;% html_nodes(' #whisky-details dd:nth-child(2)')%&gt;% html_text()\nprint(id_name)\n\n\n[1] \"WB147142\"\n\n\nCode\nwb_id=c(wb_id,id_name)\n  \n####### check \n  \nid_num=as.numeric(str_replace(id_name,'WB',''))\nprint(id_num)\n\n\n[1] 147142\n\n\nCode\na=(str_split(url,'/')[[1]])\nb=as.numeric(a[length(a)-1])\nprint(paste(\"wb id from link\",b))\n\n\n[1] \"wb id from link 147142\"\n\n\nCode\nprint(paste(\"wb id from page\",id_num))\n\n\n[1] \"wb id from page 147142\"\n\n\nCode\nif(id_num!=b){\n    print(i)\n    print('############## error !!!!!!!!##################')\n    break\n}\n##################     pic link   #######################\npic_link=(page%&gt;% html_nodes('.photo')%&gt;% html_attr('href'))[1]\npic_link2=if(identical(pic_link, character(0))==TRUE){0}else{pic_link}\n  \nprint(pic_link2)\n\n\n[1] \"https://static.whiskybase.com/storage/whiskies/1/4/7142/304090-big.jpg\"\n\n\nCode\npic_link_list=c(pic_link_list,pic_link2)\n#########################################################  \n\n\n\n\nCode\ndata=cbind(bottle_list,score_list,rating_people_num_list,lowest_price_list,avg_price_list,cask_type_list,number_of_bottle_list,bottler_list,strength_list,cask_number_list,wb_id,pic_link_list,url) %&gt;% as_tibble()\n\n\n\n\nCode\nglimpse(data)\n\n\nRows: 1\nColumns: 13\n$ bottle_list            &lt;chr&gt; \"Macallan12-year-old\"\n$ score_list             &lt;chr&gt; \"84.55\"\n$ rating_people_num_list &lt;chr&gt; \"238\"\n$ lowest_price_list      &lt;chr&gt; \"€ 78.00\"\n$ avg_price_list         &lt;chr&gt; \"€ 128.49\"\n$ cask_type_list         &lt;chr&gt; \"Sherry Seasoned Oak casks from Jerez\"\n$ number_of_bottle_list  &lt;chr&gt; \"unknow Number of bottles\"\n$ bottler_list           &lt;chr&gt; \"Distillery Bottling\"\n$ strength_list          &lt;chr&gt; \"40.0 % Vol.\"\n$ cask_number_list       &lt;chr&gt; \"unknow Casknumber\"\n$ wb_id                  &lt;chr&gt; \"WB147142\"\n$ pic_link_list          &lt;chr&gt; \"https://static.whiskybase.com/storage/whiskies…\n$ url                    &lt;chr&gt; \"https://www.whiskybase.com/whiskies/whisky/147…\n\n\n\n1 output\n\n\nCode\nwrite.xlsx(data,'./output/one_page_review.xlsx')\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "2 Web scraping on whiskybase.com",
      "on bottle review"
    ]
  },
  {
    "objectID": "other/2 Web scraping on whiskybase.com/5 all bottle from a distillery.html",
    "href": "other/2 Web scraping on whiskybase.com/5 all bottle from a distillery.html",
    "title": "All bottle from a distillery review",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(stringr)\nlibrary(openxlsx)\nlibrary(readxl)\nlibrary(janitor)\nlibrary(writexl)\n\n\n\n\nCode\nurl='https://www.whiskybase.com/whiskies/distillery/257/kawasaki'\npage=read_html(url)\nelement=page %&gt;% \n  html_nodes(\"*\") %&gt;% \n  html_attr(\"class\") %&gt;% \n  unique()\n\n\n\n\nCode\ndata=page%&gt;% html_nodes(\"table\")%&gt;%html_table(fill = TRUE) %&gt;% as.data.frame() %&gt;% clean_names()\n\n\n\n\nCode\nbottle_link= page%&gt;%html_nodes(\".clickable\")%&gt;% html_attr('href')\n\n\n\n\nCode\nnames(data)\n\n\n\n\nCode\ndata2=data %&gt;% mutate(var_2=str_trim(var_2),l=ifelse(var_2=='',1,0)) %&gt;% filter(l==1) %&gt;% mutate(bottle_link=bottle_link) %&gt;% select(name,stated_age,strength,bottled,casknumber,rating,bottle_link)\n\n\noutput\n\n\nCode\nwrite.xlsx(data2,'./output/all bottler under one distillery.xlsx')\n\n\n\n1 add detail\n\n\nCode\ndata002=read_excel('./output/all bottler under one distillery.xlsx')\n\n\n\n\nCode\nrating_people_num_list=c()\navg_price_list=c()\nlowest_price_list=c()\ncask_type_list=c() \npic_link_list=c()\nwb_id=c()\nstart_time=now()\ncask_number_list=c()\nnumber_of_bottle_list=c()\nscore_list=c()\nbottler_list=c()\nbottle_list=c()\nstrength_list=c()\nbottle_link_list=c()\norder_num=0\n\n\n\n\nCode\nfor (i in data002$bottle_link){\n    Sys.sleep(runif(n=1, min=0.1, max=0.5))\n    order_num=order_num+1\n    tryCatch({\n    \n    print(paste('#############',order_num,'bottle ######################################## '))\n    print(i)\n    url=i\n    page = read_html(url)\n  }, error=function(e){cat(\"ERROR :\",conditionMessage(e), \"\\n\")})\n    #################### bottle_link_list\n    \n    bottle_link_list=c(bottle_link_list,i)\n      \n    ###################### score\n    bottle=(page%&gt;% html_nodes('h1')%&gt;% html_text())[1]\n    bottle=bottle %&gt;% str_remove_all('\\n') %&gt;% str_remove_all('\\t')\n    print(paste0(\"bottle: \",(bottle)[1]))\n    bottle_list=c(bottle_list,bottle)\n    \n    \n    ###################### score\n    score=(page%&gt;% html_nodes('.votes-rating-current')%&gt;% html_text())[1]\n    print(paste0(\"score: \",score))\n    score_list=c(score_list,score)\n    \n    ####################### rating_people_num\n    rating_people_num=page%&gt;% html_nodes('.votes-count')%&gt;% html_text()\n    print(rating_people_num)[1]\n    rating_people_num_list=c(rating_people_num_list,rating_people_num[1])\n    \n    \n    ##################### lowest price\n    lowest_price=page%&gt;% html_nodes('.wb--shop-links-panel--price')%&gt;% html_text()\n    lowest_price2=if(identical(lowest_price, character(0))==TRUE){0}else{lowest_price}\n    print(lowest_price2)\n    lowest_price_list=c(lowest_price_list,lowest_price2)\n    \n    ############################# average price\n    avg_price=page%&gt;% html_nodes('p+ p')%&gt;% html_text()\n    avg_price6=case_when(str_detect(avg_price, \"[0-9]\")==TRUE~avg_price,.default='')\n    print(paste('price is :',avg_price6[1]))\n    avg_price_list=c(avg_price_list,avg_price6[1])\n    \n    ################################## cask type\n    bottle_name=page%&gt;% html_nodes('#whisky-details dt')%&gt;% html_text()\n    bottle_value=page%&gt;% html_nodes('#whisky-details dt+ dd')%&gt;% html_text()\n    bottle_name_value=data.frame(bottle_name,bottle_value)\n    cask=bottle_name_value%&gt;% filter(bottle_name=='Cask Type') %&gt;% select(bottle_value)\n    cask2=if(nrow(cask)==0){'unknow cask'}else{ unname(unlist(cask[1,]))}\n    print(cask2)\n    cask_type_list=c(cask_type_list,cask2)\n    \n    ################################## Bottler\n    #bottle_name=page%&gt;% html_nodes('#whisky-details dt')%&gt;% html_text()\n    #bottle_value=page%&gt;% html_nodes('#whisky-details dt+ dd')%&gt;% html_text()\n    #bottle_name_value=data.frame(bottle_name,bottle_value)\n    bottler=bottle_name_value%&gt;% filter(bottle_name=='Bottler') %&gt;% select(bottle_value)\n    bottler=if(nrow(bottler)==0){'unknow Bottler'}else{ unname(unlist(bottler[1,]))}\n    print(bottler)\n    bottler_list=c(bottler_list,bottler)\n    \n    ################################## strength\n    #bottle_name=page%&gt;% html_nodes('#whisky-details dt')%&gt;% html_text()\n    #bottle_value=page%&gt;% html_nodes('#whisky-details dt+ dd')%&gt;% html_text()\n    #bottle_name_value=data.frame(bottle_name,bottle_value)\n    strength=bottle_name_value%&gt;% filter(bottle_name=='Strength') %&gt;% select(bottle_value)\n    strength=if(nrow(strength)==0){'unknow strength'}else{ unname(unlist(strength[1,]))}\n    print(strength)\n    strength_list=c(strength_list,strength)\n    \n    \n      \n    ##################### number_of_bottle \n    number_of_bottle1=bottle_name_value%&gt;% filter(bottle_name=='Number of bottles') %&gt;% select(bottle_value)\n    number_of_bottle2=if(nrow(number_of_bottle1)==0){'unknow Number of bottles'}else{ unname(unlist(number_of_bottle1[1,]))}\n      \n    print(number_of_bottle2)\n    number_of_bottle_list=c(number_of_bottle_list,number_of_bottle2)\n      \n    ##################### Casknumber \n    cask_number1=bottle_name_value%&gt;% filter(bottle_name=='Casknumber') %&gt;% select(bottle_value)\n    cask_number2=if(nrow(cask_number1)==0){'unknow Casknumber'}else{ unname(unlist(cask_number1[1,]))}\n      \n    print(paste('casknumber:',cask_number2))\n    cask_number_list=c(cask_number_list,cask_number2)\n      \n      \n    ########################################### wb id \n    id_name=page%&gt;% html_nodes(' #whisky-details dd:nth-child(2)')%&gt;% html_text()\n    print(id_name)\n    wb_id=c(wb_id,id_name)\n      \n    ####### check \n      \n    id_num=as.numeric(str_replace(id_name,'WB',''))\n    print(id_num)\n      \n    a=(str_split(url,'/')[[1]])\n    b=as.numeric(a[length(a)-1])\n    #print(paste(\"wb id from link\",b))\n    #print(paste(\"wb id from page\",id_num))\n    if(id_num!=b){\n        print(i)\n        print('############## error !!!!!!!!##################')\n        break\n    }\n    ##################     pic link   #######################\n    pic_link=(page%&gt;% html_nodes('.photo')%&gt;% html_attr('href'))[1]\n    pic_link2=if(identical(pic_link, character(0))==TRUE){0}else{pic_link}\n      \n    print(pic_link2)\n    pic_link_list=c(pic_link_list,pic_link2)\n    \n ######### output to excel on every 10 bottle\n  if(order_num%%10==0){\n    data003=cbind((data002[1:order_num,]),bottle_list,score_list,rating_people_num_list,lowest_price_list,avg_price_list,cask_type_list,number_of_bottle_list,bottler_list,strength_list,cask_number_list,wb_id,pic_link_list,bottle_link_list)%&gt;% as_tibble()\n    \n    \n    write_xlsx(data003,'./output/all bottel under one distillery with detail.xlsx')\n  }\n}\n#########################################################  \n\n\n\n\nCode\ndata003=cbind(data002,bottle_list,score_list,rating_people_num_list,lowest_price_list,avg_price_list,cask_type_list,number_of_bottle_list,bottler_list,strength_list,cask_number_list,wb_id,pic_link_list,bottle_link_list) %&gt;% as_tibble()\n\nwrite_xlsx(data003,'./output/all bottel under one distillery with detail.xlsx')\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "2 Web scraping on whiskybase.com",
      "All bottle from a distillery review"
    ]
  },
  {
    "objectID": "other/2 Web scraping on whiskybase.com/1 whiskybase data.html",
    "href": "other/2 Web scraping on whiskybase.com/1 whiskybase data.html",
    "title": "Whiskybase data",
    "section": "",
    "text": "1 whiskybase data\nhttps://www.whiskybase.com/\n\nFounded in the Netherlands in 2007, we’re the world’s premier provider of whisky data, shopping, and whisky-related services. We reach whisky enthusiasts and whisky professionals in nearly every country at all stages of their whisky journey.\nMillions of people use Whiskybase.com to look up their whisky bottles, organize a collection, plan a whisky event, or document their whisky experiences by adding ratings, reviews, and more to our whisky database, the world’s largest.\n\n\n2 package\nrvest chromote selenium selenider\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "2 Web scraping on whiskybase.com",
      "Whiskybase data"
    ]
  },
  {
    "objectID": "other/3 Web scraping on whiskyfun.com/2 whiskyfun one page.html",
    "href": "other/3 Web scraping on whiskyfun.com/2 whiskyfun one page.html",
    "title": "on page",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(stringr)\n\n\n\n\nCode\npackageVersion(\"rvest\")\n\n\n\n1 review page\n\n\nCode\nreview_url='https://www.whiskyfun.com/archivemarch24-2-Port-Ellen-Glen-Grant.html'\n\n#review_url='https://www.whiskynotes.be/2011/port-ellen/port-ellen-10th-release-1978/'\n\n\n\n\n2 read in html\n\n\nCode\nreview_page &lt;- read_html(review_url)\n\n\n\n\n3 bottle_review\n\n\nCode\nbottle_review=review_page  %&gt;% html_elements(\"p , .textegrandfoncegras , .textegrandfoncegras .TextenormalNEW , .Textenormal .textenormalgras , .Textenormal .TextenormalNEW , td.TextenormalNEW\") %&gt;% html_text2()\n# remove space element\n\nbottle_review1=bottle_review[bottle_review %&gt;% str_detect('SGP:')] \n\nbottle_review2=bottle_review1[bottle_review1 %&gt;% str_detect('Nose:')] \n\nbottle_review2=bottle_review2%&gt;% str_replace(\"Palate:\", \"Mouth\")%&gt;% str_replace(\"–\", \"-\")\n\n\nss=head(bottle_review2)\n\n\n\n\n4 bottle_name\n\n\nCode\nbottle_name=str_extract(bottle_review2, \n regex( \"[^)]+\")\n    )\nbottle_name=paste0(bottle_name,\")\")\nlength(bottle_name)\n\n\n\n\n5 bottle_score\n\n\nCode\nres &lt;- str_match(bottle_review2, \"SGP:\\\\s*(.*?)\\\\s*points\")\n\nbottle_score=paste(\"SGP:\",res[,2],\" points\")\n\nlength(bottle_score)\n\n\n\n\n6 bottle__final_score\n\n\nCode\nres &lt;- str_match(bottle_score, \" - \\\\s*(.*?)\\\\s*points\")\n\nbottle_final_score=res[,2]\n\nlength(bottle_final_score)\n\n\n\n\nCode\nbottle_score[91]\nbottle_final_score[91]\n\n\n\n\nCode\nbottle_score[92]\nbottle_final_score[92]\n\n\n\n\n7 Nose\n\n\nCode\nres &lt;- str_match(bottle_review2, \"Nose:\\\\s*(.*?)\\\\s*Mouth\")\n\nbottle_name_nose=paste(\"Nose:\",res[,2])\n\nlength(bottle_name_nose)\n\n\n\n\n8 Mouth\n\n\nCode\nres &lt;- str_match(bottle_review2, \"Mouth\\\\s*(.*?)\\\\s*Finish:\")\n\nbottle_name_mouth=paste(\"Mouth:\",res[,2])\n\nlength(bottle_name_mouth)\n\n\n\n\n9 Colour\n\n\nCode\nres &lt;- str_match(bottle_review2, \"Colour\\\\s*(.*?)\\\\s*\\\\.\")\n\nbottle_name_colour=paste(\"Colour \",res[,2])\n\nlength(bottle_name_colour)\n\n\n\n\n10 bottle_name_finish\n\n\nCode\nres &lt;- str_match(bottle_review2, \"Finish:\\\\s*(.*?)\\\\s*Comments:\")\nbottle_name_finish=paste(\"Finish:\",res[,2])\n\nlength(bottle_name_finish)\n\n\n\n\n11 bottle_name_comments\n\n\nCode\nres &lt;- str_match(bottle_review2, \"Comments:\\\\s*(.*?)\\\\s*SGP:\")\nbottle_name_comments=paste(\"Comments:\",res[,2])\n\nlength(bottle_name_comments)\n\n\n\n\n12 combine\n\n\nCode\ndata=tibble(bottle_name,bottle_name_nose,bottle_name_mouth,bottle_name_finish,bottle_name_colour,bottle_name_comments,bottle_score,bottle_final_score,review_url)\n\nhead(data)\n\n\n\n\n13 output\n\n\nCode\nlibrary(openxlsx)\nwrite.xlsx(data, file = \"./output/whiskyfun one page.xlsx\")\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "3 Web scraping on whiskyfun.com",
      "on page"
    ]
  },
  {
    "objectID": "other/3 Web scraping on whiskyfun.com/3 whiskyfun all page link.html",
    "href": "other/3 Web scraping on whiskyfun.com/3 whiskyfun all page link.html",
    "title": "All page link frist time",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(curl)\nlibrary(stringr)\n\n\n\n\nCode\npackageVersion(\"rvest\")\n\n\n\n1 all review page\n\n\n2 first page\n\n\nCode\nfirst_url='https://www.whiskyfun.com'\nfirst_page=read_html(first_url)\n\n\n\n\nCode\nlast_page &lt;- first_page %&gt;%\n  html_elements(css = \"a.textegrandfoncegras\")%&gt;% html_attr(\"href\")\n\nlast_page\n\n\n\n\n3 start to download 500 pages\n\n\nCode\n#last_page='https://www.whiskyfun.com/archivemarch24-2-Port-Ellen-Glen-Grant.html'\nlast_page='https://www.whiskyfun.com'\nlast_page=\"https://www.whiskyfun.com/ArchiveOctober04-2.html\"\npage_list=c()\na=0\n  \nfor (i in seq(1:500)){\n  print(i)\n  ###################### each page max try 10 times \n  tryCatch({\n    #page=read_html(last_page)\n    page=read_html(curl(last_page, handle = curl::new_handle(\"useragent\" = \"Mozilla/5.0\")))\n    i=i+1\n    \n  Sys.sleep(runif(n=1, min=0.1, max=0.3))\n },error = function(msg){print('eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee')\n    i=i-1\n    print(paste0(\"new i : \",i))\n    a=a+1\n    })\n   if(a&gt;10){break}\n  \n  ##############################################\n  #if (last_page %&gt;% is.na()==TRUE){break}\n\n  ### first page\n   if(last_page=='https://www.whiskyfun.com'){\n    last_page &lt;- (page %&gt;%html_elements(css = \"a.textegrandfoncegras\")%&gt;%html_attr(\"href\"))[1]\n    \n  #### all other     \n    }else {\n  last_page &lt;- (page %&gt;%html_elements(css = \"font:nth-child(1) strong a\")%&gt;%html_attr(\"href\"))[1]\n   ###  before 2004 oct\n  if(last_page %&gt;% is.na()==TRUE){\n    last_page &lt;- (page %&gt;%html_elements(css = \"font:nth-child(1) b a\")%&gt;%html_attr(\"href\"))[1]\n  }\n    }\n  \n  if(last_page%&gt;% str_sub(1,26)=='https://www.whiskyfun.com/'){\n    last_page=last_page}else{\n  last_page=paste0('https://www.whiskyfun.com/',last_page)\n    }\n  \n  print(last_page)\n  if (last_page %in% page_list|last_page==\"https://www.whiskyfun.com/http://www.lambchop.net/\"){break}\n  page_list=c(page_list,last_page)\n  Sys.sleep(runif(n=1, min=0.1, max=0.8))\n  \n  \n  }\n\n\n\n\n4 add first page\n\n\nCode\npage_list_data=page_list %&gt;% tibble()\n\n\n\n\n5 ouput\n\n\nCode\nlibrary(openxlsx)\nwrite.xlsx(page_list_data, file = \"./output/wf_all_page_review_v2.xlsx\")\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "3 Web scraping on whiskyfun.com",
      "All page link frist time"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/7 clean up.html",
    "href": "other/1 Web scraping on www.whiskynotes.be/7 clean up.html",
    "title": "clean up",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(stringr)\nlibrary(openxlsx)\nlibrary(readxl)\nlibrary(janitor)\nlibrary(writexl)\nlibrary(lubridate)\n\n\n\n1 input data\n\n\nCode\ndata001=read_excel('./output/all_page_bottle_list_all.xlsx')\n\n\n\n\n2 clean data\n\n\nCode\ndata002=data001 %&gt;% clean_names()\n\n\n\n\nCode\nglimpse(data002)\n\n\n\n\nCode\ndata003=data002 %&gt;%  mutate(published_date=dmy(page_published_date)\n                            ,year=year(published_date)\n                            ,score=as.numeric(all_page_score)\n                            ,high_score=if_else(score&gt;=90,1,0)\n                             ,score_group=case_when(\n                                        score &gt;= 90 ~ \"1.&gt;=90\",\n                                        score &gt; 85 ~ \"2. &gt;=85\",\n                                          TRUE ~ \"3. &lt;85\")\n                            ,bottle_name=bottle_name%&gt;% str_replace('allt-à-bhainne','Allt-a-Bhainne')%&gt;% str_replace('Allt-a-Bhaine','Allt-a-Bhainne') %&gt;% str_to_lower()\n                            )%&gt;% filter(score&gt;0\n                                        ,score&lt;=100\n                                        ,!page_class %in% c(\"* Armagnac\",\"* Cognac\",\"* Rum\",\"* Armagnac-* Cognac\",\"* Other spirits\",\"* Distillery visits\",\"\")\n                                        ,bottle_review_nose!='no comment'\n                                        ,bottle_review_mouth!='no comment'\n                                        ,bottle_review_finish!='no comment')%&gt;% arrange(score)\n\n\n\nglimpse(data003)\n\n\n\n\nCode\np=ggplot(data003, aes(year,score,group=year)) + geom_boxplot()\np\n\n\n\n\nCode\nsummary001=data003 %&gt;% group_by(year) %&gt;% summarise(bottles=n(),avg_score=mean(score),high=sum(high_score)\n                                                 \n                                                 ,high_pct=sum(high_score)/n()\n                                                 )\nsummary001\n\n\n\n\nCode\nall_distrillery_from_wb=read_xlsx('data/all distrillery from wb.xlsx') %&gt;% mutate(name=Name %&gt;% str_replace('Isle of Jura','jura')  %&gt;% str_replace('Teeling Whiskey Distillery','Teeling') %&gt;% str_replace('Distillery','')%&gt;% str_replace('(Closed)','') %&gt;% str_replace('St. Magdalene','St Magdalene') %&gt;% str_trim()%&gt;% str_to_lower()\n                                                                              ) \n\n\n\n\nCode\nkeywords &lt;- as.character(all_distrillery_from_wb$name)\n\n\n\n\nCode\ndata004=data003[grepl(paste(keywords, collapse=\"|\"), data003$bottle_name),]\n\n\n\n\nCode\ndata005=str_extract_all(tolower(data003$bottle_name),paste(keywords,collapse  = \"|\"))\n\n\nkeep first match\n\n\nCode\ndata006=lapply(data005, `[`, 1)\n\n\n\n\nCode\ndata006[lengths(data006)==0] &lt;- NA\ndata007=unlist(data006)\n\n\n\n\nCode\ndata008=data003 %&gt;% mutate(distillery_name=data007)\n\n\n\n\nCode\nlibrary(\"ggthemes\")\nlibrary(\"scales\")\nlibrary(showtext)\nshowtext_auto()\n\ncoeff &lt;- 5\n\np=ggplot(summary001, aes(year,avg_score)) + geom_line(size=2) +\n  geom_col(aes(year,bottles/ coeff), fill = \"blue\")+scale_y_continuous(\"平均分\",limits=c(0,100), sec.axis = sec_axis(~.*coeff, name = \"评分酒款数量\",breaks = seq(0, 500, by = 100)))+labs(caption = \"2010-01 to 2024-04\")+ ggtitle(\"whiskynote.be\")+ xlim(min=2009, 2025)\np+theme_economist()+scale_x_continuous(breaks=pretty_breaks(n = 20))+scale_y_continuous(breaks=pretty_breaks(n = 20))\n\n\n\n\nCode\nsummary002=data003 %&gt;% group_by(year,score_group) %&gt;% \n  summarise(bottles=n())%&gt;% \n  mutate(score_group=score_group %&gt;% as.factor()) %&gt;% group_by(year) %&gt;% mutate(share=round(bottles/sum(bottles),2))\n\nsummary002\n\n\n\n\nCode\nlibrary(\"ggthemes\")\nlibrary(\"scales\")\nlibrary(showtext)\nshowtext_auto()\n\n\np=ggplot(summary002, aes(y=share, x=year,colour=score_group)) + \n    geom_line()\n\np+theme_economist()+scale_x_continuous(breaks=pretty_breaks(n = 20))+scale_y_continuous(breaks=pretty_breaks(n = 10))\n\n\n\n\n3 reference:\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "clean up"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/1 whiskynote data.html",
    "href": "other/1 Web scraping on www.whiskynotes.be/1 whiskynote data.html",
    "title": "Whiskynotes.be data",
    "section": "",
    "text": "1 whiskynotes.be data\nhttps://www.whiskynotes.be/\n\nWhiskyNotes is a personal collection of impressions, written while searching for the ultimate single malt whisky. A work in progress, and a continuous exercise for the senses.\nI started it in 2008 while living in Spain for a couple of years. I had discovered whisky a few years earlier but suddenly I was cut off from festivals, shops and whisky friends in my home country. A whisky blog seemed a good way of keeping in touch. It quickly gained a following, first in Belgium but now from all over the world.\n\n\n2 rvest package\nrvest helps you scrape (or harvest) data from web pages. It is designed to work with magrittr to make it easy to express common web scraping tasks, inspired by libraries like beautiful soup and RoboBrowser.\nIf you’re scraping multiple pages, I highly recommend using rvest in concert with polite. The polite package ensures that you’re respecting the robots.txt and not hammering the site with too many requests.\n\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\n\n\n\n\nCode\npackageVersion(\"rvest\")\n\n\n[1] '1.0.4'\n\n\n\n\n3 reference:\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "Whiskynotes.be data"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html",
    "title": "Keras regression model",
    "section": "",
    "text": "Code\nimport tensorflow as tf\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pylab as plt\nimport seaborn as sns\n\nfrom siuba.siu import call\nfrom siuba import _, mutate, filter, group_by, summarize,show_query\nfrom siuba import *\n\nfrom siuba.data import mtcars,penguins",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "Keras regression model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#total",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#total",
    "title": "Keras regression model",
    "section": "4.1 total",
    "text": "4.1 total\n\n\nCode\nlen(padded)\nlen(review_flag_final)\n\n\n4633",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "Keras regression model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#train",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#train",
    "title": "Keras regression model",
    "section": "4.2 train",
    "text": "4.2 train\n\n\nCode\nlen(padded_train)\nlen(review_flag_final_train)\n\n\n4000",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "Keras regression model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#test",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#test",
    "title": "Keras regression model",
    "section": "4.3 test",
    "text": "4.3 test\n\n\nCode\nlen(padded_test)\nlen(review_flag_final_test)\n\n\n633\n\n\n\n\nCode\nsum(review_flag_final_test)\n\n\n158",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "Keras regression model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#if-all-guess-lower-than-90-points-then-0.72-accuracy",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#if-all-guess-lower-than-90-points-then-0.72-accuracy",
    "title": "Keras regression model",
    "section": "4.4 if all guess lower than 90 points then 0.72 accuracy",
    "text": "4.4 if all guess lower than 90 points then 0.72 accuracy\n\n\nCode\n(len(review_flag_final_test)-sum(review_flag_final_test))/len(review_flag_final_test)\n\n\n0.7503949447077409",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "Keras regression model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#train-model",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#train-model",
    "title": "Keras regression model",
    "section": "6.1 train model",
    "text": "6.1 train model\n\n\nCode\n# Train the model\nhistory = model_dnn.fit(x=padded_train, y=review_socre_final_train,validation_data=(padded_test, review_socre_final_test),epochs=200,verbose=0 )\n\n#history = model_dnn.fit(x=padded_train, y=review_socre_final_train,validation_split=0.2,epochs=20)\n\n\n\n\nCode\nloss = history.history['loss']\nval_loss = history.history['val_loss']\n\nmae = history.history['mae']\nval_mae = history.history['val_mae']\n\nepochs = range(len(val_loss))\n\n\n\n\nCode\nimport matplotlib.image as mpimg\nimport matplotlib.pyplot as plt\n#------------------------------------------------\n# Plot training and validation loss per epoch\n#------------------------------------------------\n\nplt.plot(epochs, loss, 'r', label='Training Loss')\nplt.plot(epochs, val_loss, 'b', label='Validation Loss')\nplt.title('DNN model Training and validation loss')\nplt.legend()\n\nplt.show()\n\n\n\n\n\n\n\n\n\n\n\nCode\n# import matplotlib.image as mpimg\n# import matplotlib.pyplot as plt\n# #------------------------------------------------\n# # Plot training and validation loss per epoch\n# #------------------------------------------------\n# \n# plt.plot(epochs, mae, 'r', label='Training mae')\n# plt.plot(epochs, val_mae, 'b', label='Validation mae')\n# plt.title('DNN model Training and validation mae')\n# plt.legend()\n# \n# plt.show()\n\n\n\n\nCode\n# Only plot the last 80% of the epochs\nzoom_split = int(epochs[-1] * 0.2)\nepochs_zoom = epochs[zoom_split:]\nval_loss_zoom = val_loss[zoom_split:]\nloss_zoom = loss[zoom_split:]\n\n# Plot zoomed mae and loss\nplt.plot(epochs_zoom, loss_zoom, 'r', label='Training Loss')\nplt.plot(epochs_zoom, val_loss_zoom, 'b', label='Validation Loss')\nplt.title('DNN model Training and validation loss')\nplt.legend()\n\nplt.show()",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "Keras regression model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#predication",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#predication",
    "title": "Keras regression model",
    "section": "6.2 predication",
    "text": "6.2 predication\n\n\nCode\nx = padded_test\ny = model_dnn.predict(x)\n\n\n 1/20 ━━━━━━━━━━━━━━━━━━━━ 0s 27ms/step\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b20/20 ━━━━━━━━━━━━━━━━━━━━ 0s 1ms/step \n\n\n\n\nCode\nlen(padded_test)\nlen(y)\nlen(review_socre_final_test)\n\n\n633\n\n\n\n\nCode\nreview_socre_final_test.shape\n\n\n(633,)\n\n\n\n\nCode\ny.shape\n\n\n(633, 1)\n\n\n\n\nCode\ny2 = y.flatten()\n\n\n\n\nCode\ny2.shape\n\n\n(633,)\n\n\n\n\nCode\ndataset = pd.DataFrame({'real': review_socre_final_test, 'predic': list(y2)}, columns=['real', 'predic'])\n\n\n\n\nCode\ndataset['predic']=round(dataset['predic'])\ndataset['predic']=round(dataset['predic'])\n\n\n\n\nCode\ndataset=dataset&gt;&gt; mutate(predic=if_else(_.predic &lt;70, 70, _.predic)\n                          ,dummy_pred=86\n                         ,diff=_.predic-_.real \n                         ,dummy_diff=_.dummy_pred-_.real\n                          )&gt;&gt; mutate(predic=if_else(_.predic &gt;100,100, _.predic)\n                                     ,predic_class=if_else(_.predic &gt;=90,1, 0)\n                                    ,real_class=if_else(_.real&gt;=90,1, 0)\n                                    ,dummy_class=0\n                          )\n                          \ndataset002 = pd.concat([data002[4000:].reset_index(drop=True),dataset.reset_index(drop=True)], axis=1)                    \n\n\n\n\nCode\ndataset002.to_excel('pred.xlsx')",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "Keras regression model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#load-model",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 Keras regression model.html#load-model",
    "title": "Keras regression model",
    "section": "8.1 load model",
    "text": "8.1 load model\n\n\nCode\nnew_model = tf.keras.models.load_model('whiskynote_score_dnn.keras')\n\n\n\n\nCode\nnew_model.summary()\n\n\nModel: \"sequential_2\"\n\n\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━┓\n┃ Layer (type)                    ┃ Output Shape           ┃       Param # ┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━┩\n│ embedding_2 (Embedding)         │ (32, 300, 32)          │       224,000 │\n├─────────────────────────────────┼────────────────────────┼───────────────┤\n│ global_average_pooling1d_2      │ (32, 32)               │             0 │\n│ (GlobalAveragePooling1D)        │                        │               │\n├─────────────────────────────────┼────────────────────────┼───────────────┤\n│ dense_8 (Dense)                 │ (32, 32)               │         1,056 │\n├─────────────────────────────────┼────────────────────────┼───────────────┤\n│ dense_9 (Dense)                 │ (32, 24)               │           792 │\n├─────────────────────────────────┼────────────────────────┼───────────────┤\n│ dense_10 (Dense)                │ (32, 24)               │           600 │\n├─────────────────────────────────┼────────────────────────┼───────────────┤\n│ dense_11 (Dense)                │ (32, 1)                │            25 │\n└─────────────────────────────────┴────────────────────────┴───────────────┘\n\n\n\n Total params: 679,421 (2.59 MB)\n\n\n\n Trainable params: 226,473 (884.66 KB)\n\n\n\n Non-trainable params: 0 (0.00 B)\n\n\n\n Optimizer params: 452,948 (1.73 MB)",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "Keras regression model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/8 summary in python.html",
    "href": "other/1 Web scraping on www.whiskynotes.be/8 summary in python.html",
    "title": "Summary in Python",
    "section": "",
    "text": "Code\nimport tensorflow as tf\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pylab as plt\nimport seaborn as sns\n\nfrom siuba.siu import call\nfrom siuba import _, mutate, filter, group_by, summarize,show_query\nfrom siuba import *\n\nfrom siuba.data import mtcars,penguins\n\n\n\n1 read in data\n\n\nCode\nimport pandas as pd\ndata=pd.read_excel('./output/all_page_bottle_list_all.xlsx')\n\n\n\n\nCode\nlist(data)\n\n\n['bottle_name',\n 'bottle_review_Nose',\n 'bottle_review_Mouth',\n 'bottle_review_Finish',\n 'all_page_score',\n 'page_class',\n 'page_published_date',\n 'page_title',\n 'review_url']\n\n\n\n\nCode\ndata.info()\n\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 4934 entries, 0 to 4933\nData columns (total 9 columns):\n #   Column                Non-Null Count  Dtype \n---  ------                --------------  ----- \n 0   bottle_name           4934 non-null   object\n 1   bottle_review_Nose    4934 non-null   object\n 2   bottle_review_Mouth   4934 non-null   object\n 3   bottle_review_Finish  4934 non-null   object\n 4   all_page_score        4934 non-null   int64 \n 5   page_class            4934 non-null   object\n 6   page_published_date   4934 non-null   object\n 7   page_title            4934 non-null   object\n 8   review_url            4934 non-null   object\ndtypes: int64(1), object(8)\nmemory usage: 347.1+ KB\n\n\n\n\nCode\nimport re\ndata001=data&gt;&gt; filter(_.all_page_score &gt;0\n                      ,_.all_page_score &lt;100\n                      ,_.bottle_review_Nose !='no comment'\n                      ,_.bottle_review_Mouth !='no comment'\n                      ,_.bottle_review_Finish !='no comment'\n                      ) &gt;&gt;mutate(\n                      review=_.bottle_review_Nose+_.bottle_review_Mouth+_.bottle_review_Finish\n                      )&gt;&gt;mutate(review=_.review.str.lower().str.replace('nose:','').str.replace('mouth:','').str.replace('finish:','').str.replace('.','').str.replace(',','').str.replace('(','').str.replace(')','').str.replace('-','').str.replace('apples','apple').str.replace('oranges','orange').str.replace('sweetness','sweet').str.replace('fruits','fruit'))&gt;&gt;mutate(review_len=_.review.str.count(' ') + 1)\n\n\n\n\nCode\ndata001['review_flag']= np.where(data001['all_page_score']&gt;=90, 1, 0)\n\n\n\n\n2 shuffle data\n\n\nCode\ndata002=data001.sample(frac=1)\n\n\n\n\nCode\ndata002.to_excel('data002.xlsx')\n\n\n\n\nCode\ndata002.info()\n\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nIndex: 4668 entries, 1260 to 2222\nData columns (total 12 columns):\n #   Column                Non-Null Count  Dtype \n---  ------                --------------  ----- \n 0   bottle_name           4668 non-null   object\n 1   bottle_review_Nose    4668 non-null   object\n 2   bottle_review_Mouth   4668 non-null   object\n 3   bottle_review_Finish  4668 non-null   object\n 4   all_page_score        4668 non-null   int64 \n 5   page_class            4668 non-null   object\n 6   page_published_date   4668 non-null   object\n 7   page_title            4668 non-null   object\n 8   review_url            4668 non-null   object\n 9   review                4668 non-null   object\n 10  review_len            4668 non-null   int64 \n 11  review_flag           4668 non-null   int64 \ndtypes: int64(3), object(9)\nmemory usage: 474.1+ KB\n\n\n\n\n3 Removing stop words with SkLearn\n\n\nCode\nimport nltk\nimport ssl\n\ntry:\n    _create_unverified_https_context = ssl._create_unverified_context\nexcept AttributeError:\n    pass\nelse:\n    ssl._create_default_https_context = _create_unverified_https_context\n\nnltk.download('stopwords')\n\n\nTrue\n\n\n\n\nCode\nfrom stop_words import get_stop_words\nfrom nltk.corpus import stopwords\n\nstop_words = list(get_stop_words('en'))         #About 900 stopwords\nnltk_words = list(stopwords.words('english')) #About 150 stopwords\nstop_words.extend(nltk_words)\n\n\n\n\nCode\nfrom nltk.corpus import stopwords\nimport string\n\nreview=data002[\"review\"]\n#stop_words = set(stopwords.words(\"english\"))\nexclude = set(string.punctuation)\n\ndef remove_stopwords(data):\n    output_array=[]\n    for sentence in data:\n        temp_list=[]\n        for word in sentence.split():\n            if word.lower() not in stop_words and word.lower() not in exclude :\n                temp_list.append(word)\n        output_array.append(' '.join(temp_list))\n    return output_array\n\nreview_remove_stop_word=remove_stopwords(review)\n\n\n\n\nCode\ntemp_list=[]\nfor sentence in review_remove_stop_word:\n        for word in sentence.split():\n          temp_list.append(word)\n\n\n\n\nCode\nfrom collections import Counter\ncounts = Counter(temp_list)\ndf = pd.DataFrame(list(counts.items()), columns=['Key', 'Values'])\n\n\n\n\nCode\ndf.to_excel('res.xlsx')\n\n\n\n\nCode\ndf002=df&gt;&gt;arrange(-_.Values) &gt;&gt;filter(_.Key!='notes'\n,_.Key!='well'\n,_.Key!='long'\n,_.Key!='quite'\n,_.Key!='hints'\n,_.Key!='hint'\n,_.Key!='light'\n,_.Key!='little'\n,_.Key!='slightly'\n,_.Key!='nice'\n,_.Key!='still'\n,_.Key!='medium'\n,_.Key!='subtle'\n,_.Key!='rather'\n,_.Key!='note'\n,_.Key!='also'\n,_.Key!='there’s'\n,_.Key!='background'\n,_.Key!='end'\n,_.Key!='side'\n,_.Key!='plenty'\n,_.Key!='towards'\n,_.Key!='bit'\n,_.Key!='dark'\n,_.Key!='really'\n,_.Key!='even'\n,_.Key!='like'\n,_.Key!='it’s'\n)\n\ndf003=df002[0:30]\n\n\n\n\n4 Word cloud 1 from data frame english\n\n\nCode\nd = {}\nfor a, x in df003.values:\n    d[a] = x\n\nimport matplotlib.pyplot as plt\nfrom wordcloud import WordCloud\n\nwordcloud = WordCloud(background_color = \"#FFFFFF\", contour_width = 2,\n     contour_color = '#FFFFFF')\nwordcloud.generate_from_frequencies(frequencies=d)\nplt.figure()\nplt.imshow(wordcloud, interpolation=\"bilinear\")\nplt.axis(\"off\")\nplt.show()\n\nwordcloud.to_file('wordcloud_en.png')\n\n\n\n\n\n\n\n\n\n\n\n5 translate to chinese\n\n\nCode\n#from translate import Translator\nfrom deep_translator import GoogleTranslator\n\nen=df003['Key'].tolist()\n\n\ncn_list=[]\nfor word in en:\n  result = GoogleTranslator(source='auto', target='zh-CN').translate(word) \n  cn_list.append(result)\n  \ncn_list\n\n\n['甜的',\n '水果',\n '橡木',\n '香草',\n '苹果',\n '橙子',\n '胡椒',\n '果味的',\n '蜂蜜',\n '草药的',\n '巧克力',\n '姜',\n '柠檬',\n '木头',\n '抽烟',\n '甘草',\n '薄荷',\n '烟草',\n '绿色的',\n '茶',\n '柚子',\n '肉桂',\n '新鲜的',\n '柑橘',\n '干的',\n '香料',\n '雪莉酒',\n '菠萝',\n '葡萄干',\n '长满青草的']\n\n\n\n\nCode\ndf003.to_excel('df003.xlsx',index=False)\ndf004_cn=df003.copy()\ndf004_cn['Key']=cn_list\ndf004_cn.to_excel('df004_cn.xlsx',index=False)\n\n\n\n\n6 word cloud 2 chinese\n\n\nCode\nd = {}\nfor a, x in df004_cn.values:\n    d[a] = x\n\nimport matplotlib.pyplot as plt\nfrom wordcloud import WordCloud\n\nwordcloud = WordCloud(font_path='simfang.ttf',background_color = \"#FFFFFF\", contour_width = 2,\n     contour_color = '#FFFFFF')\nwordcloud.generate_from_frequencies(frequencies=d)\nplt.figure()\nplt.imshow(wordcloud, interpolation=\"bilinear\")\nplt.axis(\"off\")\nplt.show()\nwordcloud.to_file('wordcloud_cn.png')\n\n\n\n\n\n\n\n\n\n\n\n7 word cloud 3 chinese glass\n\n\nCode\nimport cv2\n\nfrom siuba.siu import call\nfrom siuba import _, mutate, filter, group_by, summarize,show_query\nfrom siuba import *\nimport numpy as np\nfrom sklearn.cluster import KMeans\nfrom skimage.io import imread, imsave\nfrom skimage import util, data, transform\nfrom skimage.transform import rescale, resize, downscale_local_mean\n\n\nsample_img = imread('Glencairn.png')\nsample_img_resize=util.img_as_ubyte(transform.rescale(sample_img, 3))\nsample_img.shape\n\nsample_img_resize.shape\n\n\n(2328, 2892, 12)\n\n\n\n\nCode\n#image = Image.open('glass.png')\n#new_image = image.resize((3000, 3000))\n#meta_mask = np.array(new_image)\n\nsample_img_resize[sample_img_resize&gt;240] = 255\n\n\n#imsave(\"glass_new.png\", sample_img_resize)\n\n\n\n\nCode\nd = {}\nfor a, x in df004_cn.values:\n    d[a] = x\n\nimport matplotlib.pyplot as plt\nfrom wordcloud import WordCloud\n\nwordcloud = WordCloud(font_path='simfang.ttf',background_color = \"white\", contour_width = 2,mask = sample_img_resize)\n\n\n\nwordcloud.generate_from_frequencies(frequencies=d)\n\nplt.figure()\nplt.imshow(wordcloud, interpolation=\"bilinear\")\nplt.axis(\"off\")\nplt.show()\n\nwordcloud.to_file('wordcloud_cn_bottle.png')\n\n\n\n\n\n\n\n\n\n\n\n8 word cloud 4 English glass\n\n\nCode\nd = {}\nfor a, x in df003.values:\n    d[a] = x\n\nimport matplotlib.pyplot as plt\nfrom wordcloud import WordCloud\n\nwordcloud = WordCloud(font_path='simfang.ttf',background_color = \"white\", contour_width = 2,mask = sample_img_resize)\n\n\n\nwordcloud.generate_from_frequencies(frequencies=d)\n\nplt.figure()\nplt.imshow(wordcloud, interpolation=\"bilinear\")\nplt.axis(\"off\")\nplt.show()\n\nwordcloud.to_file('wordcloud_en_bottle.png')\n\n\n\n\n\n\n\n\n\n\n\n9 Chart 1\nusing seaborn\n\n\nCode\nplt.figure(figsize=(10, 6))\n\nplt.rcParams['font.family'] = ['Arial Unicode MS'] #用来正常显示中文标签\nplt.rcParams['axes.unicode_minus'] = False #用来正常显示负号\n \nsns.set_style('whitegrid',{'font.sans-serif':['Arial Unicode MS','Arial']})\n\nax=sns.barplot(df004_cn, x=\"Values\", y=\"Key\", legend=False,orient = 'h')\n\nax.set_title(\"各风味出现频率\")\nax.set(xlabel='出现次数', ylabel='风味')\nfor i in ax.containers:\n    ax.bar_label(i,)\nplt.show()\n\n\n\n\n\n\n\n\n\n\n\n10 Chart 2 combine image and seaborn\nusing plotly\n\n\nCode\nimport plotly.express as px\nfrom PIL import Image\npyLogo = Image.open(\"en_glass.png\")\n\n\nfig=px.bar(df004_cn,x=\"Values\", y=\"Key\",orientation='h',text=\"Values\",title=\"各风味出现频率\"\n,labels={\"Values\": \"出现次数\",\n         \"Key\": \"风味\"\n         }\n)\n\n\n# Add images\nfig.add_layout_image(\n        dict(\n            source=pyLogo \n            ,x=0.6\n            ,y=0.8\n            ,sizex=1\n            ,sizey=0.8\n            #,sizing=\"stretch\"\n            ,opacity=0.8\n            ,layer=\"above\")\n)\n\n# # Set templates\nfig.update_layout(template=\"plotly_white\")\nfig.update_layout(yaxis=dict(autorange=\"reversed\"),height=600)\n\n\nfig.show()\n\n\n                                                \n\n\n\n\n11 resource:\nhttps://medium.com/@m3redithw/wordclouds-with-python-c287887acc8b\nhttps://github.com/nidhaloff/deep-translator\nhttps://cran.r-project.org/web/packages/polyglotr/vignettes/polyglotr.html\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "Summary in Python"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 XGboost classification model.html",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 XGboost classification model.html",
    "title": "XGboost classification model",
    "section": "",
    "text": "Code\nimport tensorflow as tf\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pylab as plt\nimport seaborn as sns\n\nfrom siuba.siu import call\nfrom siuba import _, mutate, filter, group_by, summarize,show_query\nfrom siuba import *\n\nfrom siuba.data import mtcars,penguins",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "XGboost classification model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 XGboost classification model.html#total",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 XGboost classification model.html#total",
    "title": "XGboost classification model",
    "section": "4.1 total",
    "text": "4.1 total\n\n\nCode\nlen(padded)\nlen(review_flag_final)",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "XGboost classification model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 XGboost classification model.html#train",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 XGboost classification model.html#train",
    "title": "XGboost classification model",
    "section": "4.2 train",
    "text": "4.2 train\n\n\nCode\nlen(padded_train)\nlen(review_flag_final_train)",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "XGboost classification model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 XGboost classification model.html#test",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 XGboost classification model.html#test",
    "title": "XGboost classification model",
    "section": "4.3 test",
    "text": "4.3 test\n\n\nCode\nlen(padded_test)\nlen(review_flag_final_test)\n\n\n\n\nCode\nsum(review_flag_final_test)",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "XGboost classification model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 XGboost classification model.html#if-all-guess-lower-than-90-points-then-0.75-accuracy",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 XGboost classification model.html#if-all-guess-lower-than-90-points-then-0.75-accuracy",
    "title": "XGboost classification model",
    "section": "4.4 if all guess lower than 90 points then 0.75 accuracy",
    "text": "4.4 if all guess lower than 90 points then 0.75 accuracy\n\n\nCode\n(len(review_flag_final_test)-sum(review_flag_final_test))/len(review_flag_final_test)",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "XGboost classification model"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/5 web scraping with rvest all first time.html",
    "href": "other/1 Web scraping on www.whiskynotes.be/5 web scraping with rvest all first time.html",
    "title": "All year all topic first time",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(rvest)\n\n\n\n1 one page function\n\n\nCode\nsource('one_page.r')\n\n\n\n\n2 read in all link\n\n\nCode\nlibrary(readxl)\ntopic_link=read_excel('./output/all year page2.xlsx',sheet='topic')\n\n\n\n\nCode\nglimpse(topic_link)\n\n\nexclude news\n\n\nCode\nnews=topic_link$topic_link_list %&gt;% str_detect('/whisky-news/')\n\n\n\n\nCode\ntopic_link002=topic_link$topic_link_list[!news]\n\n\n\n\nCode\nlength(topic_link002)\n\n\n\n\n3 start downlaod all page on first first try\n\n\nCode\n#test=one_page_function('https://www.whiskynotes.be/2020/irish-whiskey/teeling-1996-fill-your-own-teeling-chinkapin-oak-single-pot-still-distillery-exclusive/')%&gt;% mutate(loop_num=3)\n\n\n\n\nCode\nsink(\"log3.txt\", append=FALSE, split=TRUE)  # for screen and log\n\nlibrary(openxlsx)\n\npage=topic_link002\n\n\nall_page_review_list=data.frame()\n\nstart_time=Sys.time()\nprint(paste0(\"Start time: \", start_time))\n\nloop_num=0\n\nfor (i in page){\n   tryCatch({\n#############################     \n   loop_num=loop_num+1\n   print(paste0(\"################ Running loop No.\",which(page==i)))\n         \n   print(paste0(\"current time: \", Sys.time()))\n   \n   output=one_page_function(i) %&gt;% mutate(loop_num=loop_num)\n\n   all_page_review_list=rbind(all_page_review_list,output)\n   \n   print(paste0(\"Used time: \", Sys.time()-start_time))\n   # ouput every 20 page\n   if (loop_num%%20==0){\n      print(paste0(\"############################## output to excel: \", loop_num))\n      write.xlsx(all_page_review_list,'./output/all_page_bottle_list3.xlsx')\n     }\n    \n   \n#############################        \n    }, error=function(e){cat(\"ERROR :\",conditionMessage(e), \"\\n\")})\n}\n\nend_time=Sys.time()\nprint(paste0(\"End time: \", end_time))\nprint(paste0(\"total used time: \", end_time-start_time))\n\nwrite.xlsx(all_page_review_list,'./output/all_page_bottle_list3.xlsx')\n\nsink()\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "All year all topic first time"
    ]
  },
  {
    "objectID": "other/1 Web scraping on www.whiskynotes.be/9 Keras classification n model.html",
    "href": "other/1 Web scraping on www.whiskynotes.be/9 Keras classification n model.html",
    "title": "Keras classification model",
    "section": "",
    "text": "Code\nimport tensorflow as tf\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pylab as plt\nimport seaborn as sns\n\nfrom siuba.siu import call\nfrom siuba import _, mutate, filter, group_by, summarize,show_query\nfrom siuba import *\n\nfrom siuba.data import mtcars,penguins\n\n\n\n\nCode\nimport tensorflow as tf\ntf.__version__\n\n\n\n\nCode\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nimport tensorflow as tf\nimport tensorflow_hub as hub\n\n\n\n\nCode\nimport pandas as pd\ndf_raw=pd.read_excel('./output/all_page_bottle_list_all.xlsx')\n\n\n\n\nCode\nimport re\ndf=df_raw&gt;&gt; filter(_.all_page_score &gt;=70\n                      ,_.all_page_score &lt;100\n                      ,_.bottle_review_Nose !='no comment'\n                      ,_.bottle_review_Mouth !='no comment'\n                      ,_.bottle_review_Finish !='no comment'\n                      ) &gt;&gt;mutate(\n                         label=if_else(_.all_page_score&gt;=90,1,0)\n                      ,review=_.bottle_review_Nose+_.bottle_review_Mouth+_.bottle_review_Finish\n                      )&gt;&gt;mutate(review=_.bottle_name+_.review.str.lower().str.replace('nose:','').str.replace('mouth:','').str.replace('finish:','').str.replace('.','').str.replace(',','').str.replace('(','').str.replace(')','').str.replace('-','').str.replace('apples','apple').str.replace('oranges','orange').str.replace('sweetness','sweet').str.replace('fruits','fruit'))&gt;&gt;mutate(review_len=_.review.str.count(' ')+1) &gt;&gt;mutate(description=_.review)\n\n\n\n\nCode\ndf = df[[\"description\", \"label\"]]\n\n\n\n\nCode\ndf = df.dropna(subset=[\"description\", \"label\"])\n\n\n\n\nCode\ndf.label = df.label.astype(int)\n\n\n\n\nCode\ndf.head()\n\n\n\n\nCode\ndf.info()\n\n\n\n1 split data\n\n\nCode\ntrain, val, test = np.split(df.sample(frac=1), [int(0.8*len(df)), int(0.9*len(df))])\n\n\n\n\nCode\ndef df_to_dataset(dataframe, shuffle=True, batch_size=1024):\n  df = dataframe.copy()\n  labels = df.pop('label')\n  df = df[\"description\"]\n  ds = tf.data.Dataset.from_tensor_slices((df, labels))\n  if shuffle:\n    ds = ds.shuffle(buffer_size=len(dataframe))\n  ds = ds.batch(batch_size)\n  ds = ds.prefetch(tf.data.AUTOTUNE)\n  return ds\n\n\n\n\nCode\ntrain_data = df_to_dataset(train)\nvalid_data = df_to_dataset(val)\ntest_data = df_to_dataset(test)\n\n\n\n\nCode\nembedding = \"https://tfhub.dev/google/nnlm-en-dim50/2\"\nhub_layer = hub.KerasLayer(embedding, dtype=tf.string, trainable=True)\n\n\n\n\nCode\nhub_layer(list(train_data)[0][0])\n\n\n\n\nCode\nfrom keras import models\n\nmodel = models.Sequential()\nmodel.add(hub_layer)\nmodel.add(tf.keras.layers.Dense(16, activation='relu'))\nmodel.add(tf.keras.layers.Dropout(0.4))\nmodel.add(tf.keras.layers.Dense(16, activation='relu'))\nmodel.add(tf.keras.layers.Dropout(0.4))\nmodel.add(tf.keras.layers.Dense(1, activation='sigmoid'))\n\n\n\n\nCode\nmodel.compile(optimizer=tf.keras.optimizers.Adam(learning_rate=0.001),\n              loss=tf.keras.losses.BinaryCrossentropy(),\n              metrics=['accuracy'])\n\n\n\n\nCode\nmodel.evaluate(train_data)\n\n\n\n\n2 resource:\nhttps://colab.research.google.com/drive/1yO7EgCYSN3KW8hzDTz809nzNmacjBBXX?usp=sharing#scrollTo=7nYrbpVd96kr\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "1 Web scraping on www.whiskynotes.be",
      "Keras classification model"
    ]
  },
  {
    "objectID": "clustering/1 k mean Clustering.html#download-data",
    "href": "clustering/1 k mean Clustering.html#download-data",
    "title": "K mean Clustering",
    "section": "2.1 download data",
    "text": "2.1 download data\nhttps://www.kaggle.com/datasets/shwetabh123/mall-customer",
    "crumbs": [
      "Clustering",
      "K mean Clustering"
    ]
  },
  {
    "objectID": "clustering/1 k mean Clustering.html#input-data",
    "href": "clustering/1 k mean Clustering.html#input-data",
    "title": "K mean Clustering",
    "section": "2.2 input data",
    "text": "2.2 input data\n\n\nCode\ndf_train=read.csv('./data/Mall_Customers.csv')\n\n\n\n\nCode\nnames(df_train)\n\n\n[1] \"CustomerID\"             \"Genre\"                  \"Age\"                   \n[4] \"Annual.Income..k..\"     \"Spending.Score..1.100.\"\n\n\n\n\nCode\ndf_train=df_train %&gt;% clean_names()\n\n\n\n\nCode\nnames(df_train)\n\n\n[1] \"customer_id\"          \"genre\"                \"age\"                 \n[4] \"annual_income_k\"      \"spending_score_1_100\"",
    "crumbs": [
      "Clustering",
      "K mean Clustering"
    ]
  },
  {
    "objectID": "clustering/1 k mean Clustering.html#data-eda",
    "href": "clustering/1 k mean Clustering.html#data-eda",
    "title": "K mean Clustering",
    "section": "2.3 data EDA",
    "text": "2.3 data EDA",
    "crumbs": [
      "Clustering",
      "K mean Clustering"
    ]
  },
  {
    "objectID": "clustering/1 k mean Clustering.html#annual_income_k",
    "href": "clustering/1 k mean Clustering.html#annual_income_k",
    "title": "K mean Clustering",
    "section": "6.1 ‘annual_income_k’",
    "text": "6.1 ‘annual_income_k’\n\n\nCode\np=ggplot(df_train3, aes(cluster,annual_income_k,fill=cluster)) + geom_boxplot()\np",
    "crumbs": [
      "Clustering",
      "K mean Clustering"
    ]
  },
  {
    "objectID": "clustering/1 k mean Clustering.html#spending_score_1_100",
    "href": "clustering/1 k mean Clustering.html#spending_score_1_100",
    "title": "K mean Clustering",
    "section": "6.2 ‘spending_score_1_100’",
    "text": "6.2 ‘spending_score_1_100’\n\n\nCode\np=ggplot(df_train3, aes(cluster,spending_score_1_100,fill=cluster)) + geom_boxplot()\np",
    "crumbs": [
      "Clustering",
      "K mean Clustering"
    ]
  },
  {
    "objectID": "clustering/1 k mean Clustering.html#age",
    "href": "clustering/1 k mean Clustering.html#age",
    "title": "K mean Clustering",
    "section": "6.3 Age",
    "text": "6.3 Age",
    "crumbs": [
      "Clustering",
      "K mean Clustering"
    ]
  },
  {
    "objectID": "clustering/0 Mall Customers.html#download-data",
    "href": "clustering/0 Mall Customers.html#download-data",
    "title": "Mall Customers Dataset",
    "section": "2.1 download data",
    "text": "2.1 download data\nhttps://www.kaggle.com/datasets/shwetabh123/mall-customer",
    "crumbs": [
      "Clustering",
      "Mall Customers Dataset"
    ]
  },
  {
    "objectID": "clustering/0 Mall Customers.html#input-data",
    "href": "clustering/0 Mall Customers.html#input-data",
    "title": "Mall Customers Dataset",
    "section": "2.2 input data",
    "text": "2.2 input data\n\n\nCode\ndf_train=read.csv('./data/Mall_Customers.csv')\n\n\n\n\nCode\nhead(df_train)\n\n\n  CustomerID  Genre Age Annual.Income..k.. Spending.Score..1.100.\n1          1   Male  19                 15                     39\n2          2   Male  21                 15                     81\n3          3 Female  20                 16                      6\n4          4 Female  23                 16                     77\n5          5 Female  31                 17                     40\n6          6 Female  22                 17                     76",
    "crumbs": [
      "Clustering",
      "Mall Customers Dataset"
    ]
  },
  {
    "objectID": "clustering/0 Mall Customers.html#data-eda",
    "href": "clustering/0 Mall Customers.html#data-eda",
    "title": "Mall Customers Dataset",
    "section": "2.3 data EDA",
    "text": "2.3 data EDA\n\n\nCode\nglimpse(df_train)\n\n\nRows: 200\nColumns: 5\n$ CustomerID             &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, …\n$ Genre                  &lt;chr&gt; \"Male\", \"Male\", \"Female\", \"Female\", \"Female\", \"…\n$ Age                    &lt;int&gt; 19, 21, 20, 23, 31, 22, 35, 23, 64, 30, 67, 35,…\n$ Annual.Income..k..     &lt;int&gt; 15, 15, 16, 16, 17, 17, 18, 18, 19, 19, 19, 19,…\n$ Spending.Score..1.100. &lt;int&gt; 39, 81, 6, 77, 40, 76, 6, 94, 3, 72, 14, 99, 15…\n\n\n\n\nCode\nlibrary(skimr)\n\nskim(df_train)\n\n\n\nData summary\n\n\nName\ndf_train\n\n\nNumber of rows\n200\n\n\nNumber of columns\n5\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n1\n\n\nnumeric\n4\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\nGenre\n0\n1\n4\n6\n0\n2\n0\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nCustomerID\n0\n1\n100.50\n57.88\n1\n50.75\n100.5\n150.25\n200\n▇▇▇▇▇\n\n\nAge\n0\n1\n38.85\n13.97\n18\n28.75\n36.0\n49.00\n70\n▆▇▅▃▂\n\n\nAnnual.Income..k..\n0\n1\n60.56\n26.26\n15\n41.50\n61.5\n78.00\n137\n▆▇▇▂▁\n\n\nSpending.Score..1.100.\n0\n1\n50.20\n25.82\n1\n34.75\n50.0\n73.00\n99\n▃▃▇▃▃",
    "crumbs": [
      "Clustering",
      "Mall Customers Dataset"
    ]
  },
  {
    "objectID": "clustering/3 k mode Clustering.html",
    "href": "clustering/3 k mode Clustering.html",
    "title": "k mode Clustering",
    "section": "",
    "text": "Coming soon\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Clustering",
      "k mode Clustering"
    ]
  },
  {
    "objectID": "titanic classification model/5 classification Tidy Modeling.html",
    "href": "titanic classification model/5 classification Tidy Modeling.html",
    "title": "Multiple classification model with Recipe,workflow set,fast tunning",
    "section": "",
    "text": "Level 6 classification Tidy Modeling:",
    "crumbs": [
      "titanic classification model",
      "Multiple classification model with Recipe,workflow set,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/5 classification Tidy Modeling.html#read-data",
    "href": "titanic classification model/5 classification Tidy Modeling.html#read-data",
    "title": "Multiple classification model with Recipe,workflow set,fast tunning",
    "section": "2.1 read data",
    "text": "2.1 read data\nhttps://www.kaggle.com/competitions/titanic/data\n\n\nCode\nlibrary(tidyverse)\ntrain = read_csv(\"data/train.csv\")\n\ntest=read_csv(\"data/test.csv\")",
    "crumbs": [
      "titanic classification model",
      "Multiple classification model with Recipe,workflow set,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/5 classification Tidy Modeling.html#data-split",
    "href": "titanic classification model/5 classification Tidy Modeling.html#data-split",
    "title": "Multiple classification model with Recipe,workflow set,fast tunning",
    "section": "2.2 data split",
    "text": "2.2 data split\n\n\nPrepare & Split Data\ntrain_df &lt;- train %&gt;%mutate(Survived=as.factor(Survived)) %&gt;% select(-Name) %&gt;% \n\n  mutate_if(is.character, factor) %&gt;% rename(target_variable=Survived)\n\n\n\n\nCode\nset.seed(1234)\n\ndata_split &lt;- initial_validation_split(data=train_df, prop = c(0.7,0.1))\n\ndata_train=training(data_split)  \n\ndata_test=testing(data_split)  \n\ndata_valid=validation(data_split)\n\n\n\n\nCode\ndim(data_train)\n\n\n[1] 623  11\n\n\n\n\nCode\ndim(data_test)\n\n\n[1] 179  11\n\n\n\n\nCode\ndim(data_valid)\n\n\n[1] 89 11",
    "crumbs": [
      "titanic classification model",
      "Multiple classification model with Recipe,workflow set,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/5 classification Tidy Modeling.html#recipe",
    "href": "titanic classification model/5 classification Tidy Modeling.html#recipe",
    "title": "Multiple classification model with Recipe,workflow set,fast tunning",
    "section": "3.1 recipe",
    "text": "3.1 recipe\n\n\nCode\ndata_rec &lt;- recipe(target_variable ~ ., data = data_train) %&gt;%\n  step_impute_knn(all_predictors(), neighbors = 5) %&gt;%\n  #step_downsample(target_variable) %&gt;%\n  #step_novel(Ticket) %&gt;%\n  step_rm(Ticket) %&gt;% \n  step_dummy(all_nominal(), -all_outcomes()) %&gt;%\n  step_zv(all_numeric()) %&gt;%\n  step_normalize(all_numeric())",
    "crumbs": [
      "titanic classification model",
      "Multiple classification model with Recipe,workflow set,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/5 classification Tidy Modeling.html#model",
    "href": "titanic classification model/5 classification Tidy Modeling.html#model",
    "title": "Multiple classification model with Recipe,workflow set,fast tunning",
    "section": "3.2 model",
    "text": "3.2 model\n\n3.2.1 decision tree model with cost_complexity and tree_depth to tune\n\n\nCode\ntune_spec &lt;- \n  decision_tree(\n    cost_complexity = tune(),\n    tree_depth = tune()\n  ) %&gt;% \n  set_engine(\"rpart\") %&gt;% \n  set_mode(\"classification\")\n\n\n\n\nCode\ntune_spec |&gt; \n  extract_parameter_set_dials()\n\n\nCollection of 2 parameters for tuning\n\n      identifier            type    object\n cost_complexity cost_complexity nparam[+]\n      tree_depth      tree_depth nparam[+]\n\n\n\n\nCode\ndecision_tree_tune_grid &lt;- \n  tune_spec |&gt; \n  extract_parameter_set_dials() |&gt; \n  grid_latin_hypercube(size = 100)\n\n\n\n\n3.2.2 logistic glm model\n\n\nCode\nglm_spec &lt;-\n  logistic_reg(penalty = 1) |&gt;\n  set_engine(\"glm\")\n\n\n\n\n3.2.3 KNN model\n\n\nCode\nknn_spec &lt;- nearest_neighbor() %&gt;%\n  set_engine(\"kknn\") %&gt;%\n  set_mode(\"classification\")\n\nknn_spec\n\n\nK-Nearest Neighbor Model Specification (classification)\n\nComputational engine: kknn \n\n\n\n\n3.2.4 XG Boost tree\n\n\nCode\nxgb_spec &lt;- boost_tree(\n  trees = 10,\n  tree_depth = tune(), min_n = tune(),\n  loss_reduction = tune(),                     ## first three: model complexity\n  sample_size = tune(),  mtry=tune(),       ## randomness\n  learn_rate = tune()                          ## step size\n) %&gt;%\n  set_engine(\"xgboost\") %&gt;%\n  set_mode(\"classification\")\n\nxgb_spec\n\n\nBoosted Tree Model Specification (classification)\n\nMain Arguments:\n  mtry = tune()\n  trees = 10\n  min_n = tune()\n  tree_depth = tune()\n  learn_rate = tune()\n  loss_reduction = tune()\n  sample_size = tune()\n\nComputational engine: xgboost \n\n\nxgb tunning grid\n\n\nCode\nxgb_tune_grid= grid_latin_hypercube(\n  tree_depth(),learn_rate(),loss_reduction(),min_n(),\n  sample_size=sample_prop(),finalize(mtry(),data_train),\n  size=50)\n\nhead(xgb_tune_grid)\n\n\n# A tibble: 6 × 6\n  tree_depth learn_rate loss_reduction min_n sample_size  mtry\n       &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt; &lt;int&gt;\n1          6   3.33e- 5       2.32e+ 1    34       0.746     2\n2          6   6.19e- 4       2.32e- 2    22       0.580     5\n3          5   3.66e- 2       4.50e-10    24       0.949     1\n4          9   9.47e-10       2.06e- 5     2       0.340    11\n5          9   9.81e- 2       5.39e- 8     7       0.787     3\n6         12   2.50e- 6       6.99e- 3    16       0.151     5\n\n\n\n\n3.2.5 lightGBM Boost tree\n\n\nCode\nlightgbm_spec &lt;- boost_tree(\n  trees = 10,\n  tree_depth = tune(), min_n = tune(),\n  loss_reduction = tune(),                     ## first three: model complexity\n  sample_size = tune(),   mtry=tune(),     ## randomness\n  learn_rate = tune()                          ## step size\n) %&gt;%\n  set_engine(\"lightgbm\") %&gt;%\n  set_mode(\"classification\")\n\nlightgbm_spec\n\n\nBoosted Tree Model Specification (classification)\n\nMain Arguments:\n  mtry = tune()\n  trees = 10\n  min_n = tune()\n  tree_depth = tune()\n  learn_rate = tune()\n  loss_reduction = tune()\n  sample_size = tune()\n\nComputational engine: lightgbm \n\n\n\n\nCode\nlightgbm_grid= grid_latin_hypercube(\n  tree_depth(),learn_rate(),loss_reduction(),min_n(),\n  sample_size=sample_prop(),finalize(mtry(),data_train),\n  size=50)\n\nhead(lightgbm_grid)\n\n\n# A tibble: 6 × 6\n  tree_depth   learn_rate loss_reduction min_n sample_size  mtry\n       &lt;int&gt;        &lt;dbl&gt;          &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt; &lt;int&gt;\n1         12 0.00000156         6.09e-10    14       0.917     6\n2          3 0.0134             5.25e- 6    22       0.151     1\n3          2 0.0000000634       1.79e-10    15       0.132     5\n4          6 0.0206             1.84e- 5    19       0.863     9\n5          6 0.00000358         4.57e- 1    38       0.818     8\n6          4 0.00384            3.55e- 4    15       0.552     4",
    "crumbs": [
      "titanic classification model",
      "Multiple classification model with Recipe,workflow set,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/5 classification Tidy Modeling.html#workflow-set",
    "href": "titanic classification model/5 classification Tidy Modeling.html#workflow-set",
    "title": "Multiple classification model with Recipe,workflow set,fast tunning",
    "section": "3.3 workflow set",
    "text": "3.3 workflow set\nusing control_race instead of control_grid\n\n\nCode\nlibrary(finetune)\ncntl   &lt;- control_race(save_pred     = TRUE,\n                       save_workflow = TRUE)\n\n\nusing workflow set instead of workflow to combine many models.\n\n\nCode\nworkflow_set &lt;-\n  workflow_set(\n    preproc = list(data_rec),\n    models = list(glm   = glm_spec,\n                  tree  = tune_spec,\n                  knn=knn_spec,\n                  xgb=xgb_spec,\n                  lightgbm=lightgbm_spec\n                  )\n  ) %&gt;% option_add(grid = decision_tree_tune_grid, id = \"recipe_tree\")  %&gt;% \n  option_add(grid = xgb_tune_grid, id = \"recipe_xgb\")  %&gt;% \n  option_add(grid = lightgbm_grid, id = \"recipe_lightgbm\") \n\n\n\n\nCode\nworkflow_set %&gt;%\n  option_add_parameters()\n\n\n# A workflow set/tibble: 5 × 4\n  wflow_id        info             option    result    \n  &lt;chr&gt;           &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    \n1 recipe_glm      &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;\n2 recipe_tree     &lt;tibble [1 × 4]&gt; &lt;opts[2]&gt; &lt;list [0]&gt;\n3 recipe_knn      &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;\n4 recipe_xgb      &lt;tibble [1 × 4]&gt; &lt;opts[2]&gt; &lt;list [0]&gt;\n5 recipe_lightgbm &lt;tibble [1 × 4]&gt; &lt;opts[2]&gt; &lt;list [0]&gt;\n\n\n10 fold for tunning\n\n\nCode\nset.seed(234)\nfolds &lt;- vfold_cv(data_train)",
    "crumbs": [
      "titanic classification model",
      "Multiple classification model with Recipe,workflow set,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/5 classification Tidy Modeling.html#training-and-tunning",
    "href": "titanic classification model/5 classification Tidy Modeling.html#training-and-tunning",
    "title": "Multiple classification model with Recipe,workflow set,fast tunning",
    "section": "3.4 training and tunning",
    "text": "3.4 training and tunning\n\n\nCode\nlibrary(finetune)\ndoParallel::registerDoParallel()\n\nmodel_set_res = workflow_set  %&gt;% \n  workflow_map(\n              grid = 20,\n               resamples = folds,\n               control = cntl\n  )\n\n\n\n\nCode\nrank_results(model_set_res,\n             rank_metric = \"roc_auc\",\n             select_best = TRUE)  %&gt;% \n  gt()\n\n\n\n\n\n\n\n\n\nwflow_id\n.config\n.metric\nmean\nstd_err\nn\npreprocessor\nmodel\nrank\n\n\n\n\nrecipe_lightgbm\nPreprocessor1_Model11\naccuracy\n0.7301587\nNA\n1\nrecipe\nboost_tree\n1\n\n\nrecipe_lightgbm\nPreprocessor1_Model11\nroc_auc\n0.8858093\nNA\n1\nrecipe\nboost_tree\n1\n\n\nrecipe_xgb\nPreprocessor1_Model09\naccuracy\n0.7704813\n0.01220734\n10\nrecipe\nboost_tree\n2\n\n\nrecipe_xgb\nPreprocessor1_Model09\nroc_auc\n0.8316034\n0.01125249\n10\nrecipe\nboost_tree\n2\n\n\nrecipe_tree\nPreprocessor1_Model20\naccuracy\n0.7721710\n0.01523136\n10\nrecipe\ndecision_tree\n3\n\n\nrecipe_tree\nPreprocessor1_Model20\nroc_auc\n0.8284261\n0.01503274\n10\nrecipe\ndecision_tree\n3\n\n\nrecipe_knn\nPreprocessor1_Model1\naccuracy\n0.7063236\n0.01911126\n10\nrecipe\nnearest_neighbor\n4\n\n\nrecipe_knn\nPreprocessor1_Model1\nroc_auc\n0.7420401\n0.01885929\n10\nrecipe\nnearest_neighbor\n4\n\n\nrecipe_glm\nPreprocessor1_Model1\naccuracy\n0.7398105\n0.01844242\n10\nrecipe\nlogistic_reg\n5\n\n\nrecipe_glm\nPreprocessor1_Model1\nroc_auc\n0.7301929\n0.03339075\n10\nrecipe\nlogistic_reg\n5\n\n\n\n\n\n\n\n\n\n\nCode\nmodel_set_res |&gt; autoplot()\n\n\n\n\n\n\n\n\n\n\n\nCode\nmodel_set_res |&gt; autoplot( id= 'recipe_xgb')\n\n\n\n\n\n\n\n\n\n\n\nCode\nxgb_model_set_res=model_set_res %&gt;% extract_workflow_set_result(id= 'recipe_xgb')\n\n\n\n\nCode\nglimpse(xgb_model_set_res)\n\n\nRows: 10\nColumns: 5\n$ splits       &lt;list&gt; [&lt;vfold_split[560 x 63 x 623 x 11]&gt;], [&lt;vfold_split[560 …\n$ id           &lt;chr&gt; \"Fold01\", \"Fold02\", \"Fold03\", \"Fold04\", \"Fold05\", \"Fold06…\n$ .metrics     &lt;list&gt; [&lt;tbl_df[40 x 10]&gt;], [&lt;tbl_df[40 x 10]&gt;], [&lt;tbl_df[40 x …\n$ .notes       &lt;list&gt; [&lt;tbl_df[0 x 3]&gt;], [&lt;tbl_df[0 x 3]&gt;], [&lt;tbl_df[0 x 3]&gt;],…\n$ .predictions &lt;list&gt; [&lt;tbl_df[1260 x 12]&gt;], [&lt;tbl_df[1260 x 12]&gt;], [&lt;tbl_df[1…\n\n\n\n\nCode\n#xgb_model_set_res %&gt;% plot_race()\n\n\nselect best model:logistic glm model\n\n\nCode\nbest_model_id &lt;- \"recipe_xgb\"\n\n\nselect best parameters\n\n\nCode\nbest_fit &lt;-\n  model_set_res |&gt;\n  extract_workflow_set_result(best_model_id) |&gt;\n  select_best(metric = \"accuracy\")\n\n\n\n\nCode\n# create workflow for best model\nfinal_workflow &lt;-\n  model_set_res |&gt;\n  extract_workflow(best_model_id) |&gt;\n  finalize_workflow(best_fit)",
    "crumbs": [
      "titanic classification model",
      "Multiple classification model with Recipe,workflow set,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/5 classification Tidy Modeling.html#last-fit",
    "href": "titanic classification model/5 classification Tidy Modeling.html#last-fit",
    "title": "Multiple classification model with Recipe,workflow set,fast tunning",
    "section": "3.5 last fit",
    "text": "3.5 last fit\n\n\nCode\nfinal_fit &lt;-\n  final_workflow |&gt;\n  last_fit(data_split)",
    "crumbs": [
      "titanic classification model",
      "Multiple classification model with Recipe,workflow set,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/5 classification Tidy Modeling.html#evaluate",
    "href": "titanic classification model/5 classification Tidy Modeling.html#evaluate",
    "title": "Multiple classification model with Recipe,workflow set,fast tunning",
    "section": "4.1 Evaluate",
    "text": "4.1 Evaluate\n\n\nCode\nfinal_fit %&gt;%\n  collect_metrics()\n\n\n# A tibble: 2 × 4\n  .metric  .estimator .estimate .config             \n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               \n1 accuracy binary         0.827 Preprocessor1_Model1\n2 roc_auc  binary         0.915 Preprocessor1_Model1\n\n\nAccuracy = (TN + TP)/(TN+TP+FN+FP) = (Number of correct assessments)/Number of all assessments)\nSensitivity = TP/(TP + FN) = (Number of true positive assessment)/(Number of all positive assessment)\nSpecificity = TN/(TN + FP) = (Number of true negative assessment)/(Number of all negative assessment)\n\n\nCode\nall_metrics &lt;- metric_set(accuracy, recall, precision, f_meas, kap, sens, spec)\n\na=final_fit %&gt;% collect_predictions()\n\nall_metrics(a, truth = target_variable,estimate = .pred_class)\n\n\n# A tibble: 7 × 3\n  .metric   .estimator .estimate\n  &lt;chr&gt;     &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy  binary         0.827\n2 recall    binary         0.982\n3 precision binary         0.793\n4 f_meas    binary         0.877\n5 kap       binary         0.593\n6 sens      binary         0.982\n7 spec      binary         0.561\n\n\n\n\nCode\nfinal_fit %&gt;%\n  collect_predictions() %&gt;% rename(.pred_T = 2, .pred_F = 3) %&gt;% \n  roc_curve(target_variable, .pred_T) %&gt;% \n  autoplot()\n\n\n\n\n\n\n\n\n\n\n\nCode\nfinal_tree &lt;- extract_workflow(final_fit)\nfinal_tree\n\n\n══ Workflow [trained] ══════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: boost_tree()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n5 Recipe Steps\n\n• step_impute_knn()\n• step_rm()\n• step_dummy()\n• step_zv()\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\n##### xgb.Booster\nraw: 14.8 Kb \ncall:\n  xgboost::xgb.train(params = list(eta = 0.080098505877286, max_depth = 12L, \n    gamma = 5.39858008778608e-07, colsample_bytree = 1, colsample_bynode = 0.645669291338583, \n    min_child_weight = 9L, subsample = 0.771166819442296), data = x$data, \n    nrounds = 10, watchlist = x$watchlist, verbose = 0, nthread = 1, \n    objective = \"binary:logistic\")\nparams (as set within xgb.train):\n  eta = \"0.080098505877286\", max_depth = \"12\", gamma = \"5.39858008778608e-07\", colsample_bytree = \"1\", colsample_bynode = \"0.645669291338583\", min_child_weight = \"9\", subsample = \"0.771166819442296\", nthread = \"1\", objective = \"binary:logistic\", validate_parameters = \"TRUE\"\nxgb.attributes:\n  niter\ncallbacks:\n  cb.evaluation.log()\n# of features: 127 \nniter: 10\nnfeatures : 127 \nevaluation_log:\n     iter training_logloss\n    &lt;num&gt;            &lt;num&gt;\n        1        0.6633661\n        2        0.6379807\n---                       \n        9        0.5294025\n       10        0.5201621\n\n\n\n\nCode\nlibrary(vip)\n\nfinal_tree %&gt;% \n  extract_fit_parsnip() %&gt;% \n  vip()",
    "crumbs": [
      "titanic classification model",
      "Multiple classification model with Recipe,workflow set,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/5 classification Tidy Modeling.html#save-model",
    "href": "titanic classification model/5 classification Tidy Modeling.html#save-model",
    "title": "Multiple classification model with Recipe,workflow set,fast tunning",
    "section": "4.2 save model",
    "text": "4.2 save model\ncheck model size\n\n\nCode\nlibrary(lobstr)\nobj_size(final_tree)\n\n\n1.04 MB\n\n\nbundle and save model\n\n\nCode\nlibrary(bundle)\nmodel_bundle &lt;- bundle(final_tree)\n\n\n\n\nCode\nsaveRDS(model_bundle,'level 6 classification decision tree hotel model.RDS')",
    "crumbs": [
      "titanic classification model",
      "Multiple classification model with Recipe,workflow set,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/5 classification Tidy Modeling.html#make-predication",
    "href": "titanic classification model/5 classification Tidy Modeling.html#make-predication",
    "title": "Multiple classification model with Recipe,workflow set,fast tunning",
    "section": "4.3 make predication",
    "text": "4.3 make predication\nload model and unbundle\n\n\nCode\nmodel=readRDS('level 6 classification decision tree hotel model.RDS')\n\nmodel &lt;- unbundle(model)\n\n\n\n\nCode\nfinal_prediction=predict(model,data_valid)\n\nhead(final_prediction)\n\n\n# A tibble: 6 × 1\n  .pred_class\n  &lt;fct&gt;      \n1 0          \n2 0          \n3 1          \n4 0          \n5 0          \n6 0          \n\n\n\n\nCode\nfinal_prediction_data=cbind(data_valid,final_prediction)\n\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction  0  1\n         0 53 14\n         1  4 18\n\n\n\n\nCode\naccuracy(final_prediction_data, truth = target_variable, estimate = .pred_class)\n\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy binary         0.798\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(target_variable)%&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   target_variable [2]\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 0                  57\n2 1                  32\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(.pred_class) %&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   .pred_class [2]\n  .pred_class     n\n  &lt;fct&gt;       &lt;int&gt;\n1 0              67\n2 1              22\n\n\n\n\nCode\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction  0  1\n         0 53 14\n         1  4 18",
    "crumbs": [
      "titanic classification model",
      "Multiple classification model with Recipe,workflow set,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html",
    "href": "titanic classification model/2 classification Tidy Modeling.html",
    "title": "Classification model with Recipe",
    "section": "",
    "text": "Level 3 classification Tidy Modeling:",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#read-data",
    "href": "titanic classification model/2 classification Tidy Modeling.html#read-data",
    "title": "Classification model with Recipe",
    "section": "2.1 read data",
    "text": "2.1 read data\nhttps://www.kaggle.com/competitions/titanic/data\n\n\nCode\nlibrary(tidyverse)\ntrain = read_csv(\"data/train.csv\")\n\ntest=read_csv(\"data/test.csv\")",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#eda",
    "href": "titanic classification model/2 classification Tidy Modeling.html#eda",
    "title": "Classification model with Recipe",
    "section": "2.2 EDA",
    "text": "2.2 EDA\n\n\nCode\nglimpse(train)\n\n\nRows: 891\nColumns: 12\n$ PassengerId &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,…\n$ Survived    &lt;dbl&gt; 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1…\n$ Pclass      &lt;dbl&gt; 3, 1, 3, 1, 3, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3, 2, 3, 3…\n$ Name        &lt;chr&gt; \"Braund, Mr. Owen Harris\", \"Cumings, Mrs. John Bradley (Fl…\n$ Sex         &lt;chr&gt; \"male\", \"female\", \"female\", \"female\", \"male\", \"male\", \"mal…\n$ Age         &lt;dbl&gt; 22, 38, 26, 35, 35, NA, 54, 2, 27, 14, 4, 58, 20, 39, 14, …\n$ SibSp       &lt;dbl&gt; 1, 1, 0, 1, 0, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4, 0, 1, 0…\n$ Parch       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1, 0, 0, 0…\n$ Ticket      &lt;chr&gt; \"A/5 21171\", \"PC 17599\", \"STON/O2. 3101282\", \"113803\", \"37…\n$ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 8.4583, 51.8625,…\n$ Cabin       &lt;chr&gt; NA, \"C85\", NA, \"C123\", NA, NA, \"E46\", NA, NA, NA, \"G6\", \"C…\n$ Embarked    &lt;chr&gt; \"S\", \"C\", \"S\", \"S\", \"S\", \"Q\", \"S\", \"S\", \"S\", \"C\", \"S\", \"S\"…\n\n\n\n\nCode\nglimpse(test)\n\n\nRows: 418\nColumns: 11\n$ PassengerId &lt;dbl&gt; 892, 893, 894, 895, 896, 897, 898, 899, 900, 901, 902, 903…\n$ Pclass      &lt;dbl&gt; 3, 3, 2, 3, 3, 3, 3, 2, 3, 3, 3, 1, 1, 2, 1, 2, 2, 3, 3, 3…\n$ Name        &lt;chr&gt; \"Kelly, Mr. James\", \"Wilkes, Mrs. James (Ellen Needs)\", \"M…\n$ Sex         &lt;chr&gt; \"male\", \"female\", \"male\", \"male\", \"female\", \"male\", \"femal…\n$ Age         &lt;dbl&gt; 34.5, 47.0, 62.0, 27.0, 22.0, 14.0, 30.0, 26.0, 18.0, 21.0…\n$ SibSp       &lt;dbl&gt; 0, 1, 0, 0, 1, 0, 0, 1, 0, 2, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0…\n$ Parch       &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ Ticket      &lt;chr&gt; \"330911\", \"363272\", \"240276\", \"315154\", \"3101298\", \"7538\",…\n$ Fare        &lt;dbl&gt; 7.8292, 7.0000, 9.6875, 8.6625, 12.2875, 9.2250, 7.6292, 2…\n$ Cabin       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, \"B45\", NA,…\n$ Embarked    &lt;chr&gt; \"Q\", \"S\", \"Q\", \"S\", \"S\", \"S\", \"Q\", \"S\", \"C\", \"S\", \"S\", \"S\"…\n\n\n\n\nCode\ntrain %&gt;%\n  count(Survived)\n\n\n# A tibble: 2 × 2\n  Survived     n\n     &lt;dbl&gt; &lt;int&gt;\n1        0   549\n2        1   342",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#plotting",
    "href": "titanic classification model/2 classification Tidy Modeling.html#plotting",
    "title": "Classification model with Recipe",
    "section": "2.3 plotting",
    "text": "2.3 plotting\n\n\nCode\nlibrary(skimr)\n\nskim(train)\n\n\n\nData summary\n\n\nName\ntrain\n\n\nNumber of rows\n891\n\n\nNumber of columns\n12\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n5\n\n\nnumeric\n7\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\nName\n0\n1.00\n12\n82\n0\n891\n0\n\n\nSex\n0\n1.00\n4\n6\n0\n2\n0\n\n\nTicket\n0\n1.00\n3\n18\n0\n681\n0\n\n\nCabin\n687\n0.23\n1\n15\n0\n147\n0\n\n\nEmbarked\n2\n1.00\n1\n1\n0\n3\n0\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nPassengerId\n0\n1.0\n446.00\n257.35\n1.00\n223.50\n446.00\n668.5\n891.00\n▇▇▇▇▇\n\n\nSurvived\n0\n1.0\n0.38\n0.49\n0.00\n0.00\n0.00\n1.0\n1.00\n▇▁▁▁▅\n\n\nPclass\n0\n1.0\n2.31\n0.84\n1.00\n2.00\n3.00\n3.0\n3.00\n▃▁▃▁▇\n\n\nAge\n177\n0.8\n29.70\n14.53\n0.42\n20.12\n28.00\n38.0\n80.00\n▂▇▅▂▁\n\n\nSibSp\n0\n1.0\n0.52\n1.10\n0.00\n0.00\n0.00\n1.0\n8.00\n▇▁▁▁▁\n\n\nParch\n0\n1.0\n0.38\n0.81\n0.00\n0.00\n0.00\n0.0\n6.00\n▇▁▁▁▁\n\n\nFare\n0\n1.0\n32.20\n49.69\n0.00\n7.91\n14.45\n31.0\n512.33\n▇▁▁▁▁",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#data-split",
    "href": "titanic classification model/2 classification Tidy Modeling.html#data-split",
    "title": "Classification model with Recipe",
    "section": "2.4 data split",
    "text": "2.4 data split\n\n\nPrepare & Split Data\ntrain_df &lt;- train %&gt;%mutate(Survived=as.factor(Survived)) %&gt;% select(-Name) %&gt;% \n\n  mutate_if(is.character, factor) %&gt;% rename(target_variable=Survived)\n\n\n\n\nCode\nset.seed(1234)\n\ndata_split &lt;- initial_validation_split(data=train_df, prop = c(0.7,0.1))\n\ndata_train=training(data_split)  \n\ndata_test=testing(data_split)  \n\ndata_valid=validation(data_split)\n\n\n\n\nCode\ndim(data_train)\n\n\n[1] 623  11\n\n\n\n\nCode\ndim(data_test)\n\n\n[1] 179  11\n\n\n\n\nCode\ndim(data_valid)\n\n\n[1] 89 11",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#recipe",
    "href": "titanic classification model/2 classification Tidy Modeling.html#recipe",
    "title": "Classification model with Recipe",
    "section": "3.1 recipe",
    "text": "3.1 recipe\n\n\nCode\ndata_rec &lt;- recipe(target_variable ~ ., data = data_train) %&gt;%\n  step_impute_knn(all_predictors(), neighbors = 5) %&gt;%\n  #step_downsample(target_variable) %&gt;%\n  #step_novel(Ticket) %&gt;%\n  step_rm(Ticket) %&gt;% \n  step_dummy(all_nominal(), -all_outcomes()) %&gt;%\n  step_zv(all_numeric()) %&gt;%\n  step_normalize(all_numeric())",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#prep-the-recipe",
    "href": "titanic classification model/2 classification Tidy Modeling.html#prep-the-recipe",
    "title": "Classification model with Recipe",
    "section": "3.2 prep the recipe",
    "text": "3.2 prep the recipe\n\n\nCode\ndata_rec=data_rec %&gt;% prep()\n\n\n\n\nCode\ndata_rec",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#bake-the-train-data-with-preded-recipe",
    "href": "titanic classification model/2 classification Tidy Modeling.html#bake-the-train-data-with-preded-recipe",
    "title": "Classification model with Recipe",
    "section": "3.3 bake the train data with preded recipe",
    "text": "3.3 bake the train data with preded recipe\n\n\nCode\ntrain_proc &lt;- bake(data_rec, new_data = data_train)\n\n\n\n\nCode\ntrain_proc2 &lt;- bake(data_rec, new_data = NULL)\n\n\n\n\nCode\ntrain_juice &lt;-juice(data_rec)\n\n\nthe difference between train_proc and train_juice is that the train_juice is been down sample.\n\n\nCode\ndim(train_proc)\n\n\n[1] 623 128\n\n\n\n\nCode\ndim(train_proc2)\n\n\n[1] 623 128\n\n\n\n\nCode\ndim(train_juice)\n\n\n[1] 623 128\n\n\n\n\nCode\ntrain_proc %&gt;%\n  count(target_variable)\n\n\n# A tibble: 2 × 2\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 0                 379\n2 1                 244\n\n\nthe juice and train_proc2 target is down sample to 1:1\n\n\nCode\ntrain_proc2 %&gt;%\n  count(target_variable)\n\n\n# A tibble: 2 × 2\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 0                 379\n2 1                 244\n\n\n\n\nCode\ntrain_juice %&gt;%\n  count(target_variable)\n\n\n# A tibble: 2 × 2\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 0                 379\n2 1                 244",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#bake-the-test-data-with-preded-recipe",
    "href": "titanic classification model/2 classification Tidy Modeling.html#bake-the-test-data-with-preded-recipe",
    "title": "Classification model with Recipe",
    "section": "3.4 bake the test data with preded recipe",
    "text": "3.4 bake the test data with preded recipe\n\n\nCode\ntest_proc &lt;- bake(data_rec, new_data = data_test)\n\n\n\n\nCode\ntest_proc %&gt;%count(target_variable)\n\n\n# A tibble: 2 × 2\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 0                 113\n2 1                  66\n\n\n\n\nCode\ndata_valid %&gt;%count(target_variable)\n\n\n# A tibble: 2 × 2\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 0                  57\n2 1                  32\n\n\n\n\nCode\nvalid_proc &lt;- bake(data_rec, new_data = data_valid)\n\n\njuice(pre_recipe,data=NULL) is same as bake(pre_recipe,data=hotel_train) for training data (excepted down sample)",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#model",
    "href": "titanic classification model/2 classification Tidy Modeling.html#model",
    "title": "Classification model with Recipe",
    "section": "3.5 model",
    "text": "3.5 model\ntree model\n\n\nCode\ntree_spec &lt;- decision_tree() %&gt;%\n  set_engine(\"rpart\") %&gt;%\n  set_mode(\"classification\")\n\n\nKNN model\n\n\nCode\nknn_spec &lt;- nearest_neighbor() %&gt;%\n  set_engine(\"kknn\") %&gt;%\n  set_mode(\"classification\")",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#trainning",
    "href": "titanic classification model/2 classification Tidy Modeling.html#trainning",
    "title": "Classification model with Recipe",
    "section": "3.6 trainning",
    "text": "3.6 trainning\n\n\nCode\nknn_fit &lt;- knn_spec %&gt;%\n  fit(target_variable ~ ., data = train_juice)\n\nknn_fit\n\n\nparsnip model object\n\n\nCall:\nkknn::train.kknn(formula = target_variable ~ ., data = data,     ks = min_rows(5, data, 5))\n\nType of response variable: nominal\nMinimal misclassification: 0.2536116\nBest kernel: optimal\nBest k: 5\n\n\n\n\nCode\ntree_fit &lt;- tree_spec %&gt;%\n  fit(target_variable ~ ., data = train_juice)\n\ntree_fit\n\n\nparsnip model object\n\nn= 623 \n\nnode), split, n, loss, yval, (yprob)\n      * denotes terminal node\n\n  1) root 623 244 0 (0.60834671 0.39165329)  \n    2) Sex_male&gt;=-0.3181194 406  84 0 (0.79310345 0.20689655)  \n      4) Age&gt;=-1.700165 388  70 0 (0.81958763 0.18041237) *\n      5) Age&lt; -1.700165 18   4 1 (0.22222222 0.77777778) *\n    3) Sex_male&lt; -0.3181194 217  57 1 (0.26267281 0.73732719)  \n      6) Pclass&gt;=0.2640325 91  42 0 (0.53846154 0.46153846)  \n       12) Fare&gt;=-0.1653079 16   1 0 (0.93750000 0.06250000) *\n       13) Fare&lt; -0.1653079 75  34 1 (0.45333333 0.54666667)  \n         26) Embarked_S&gt;=-0.4915368 42  18 0 (0.57142857 0.42857143)  \n           52) Fare&gt;=-0.3321481 9   2 0 (0.77777778 0.22222222) *\n           53) Fare&lt; -0.3321481 33  16 0 (0.51515152 0.48484848)  \n            106) Fare&lt; -0.4658063 23   8 0 (0.65217391 0.34782609) *\n            107) Fare&gt;=-0.4658063 10   2 1 (0.20000000 0.80000000) *\n         27) Embarked_S&lt; -0.4915368 33  10 1 (0.30303030 0.69696970) *\n      7) Pclass&lt; 0.2640325 126   8 1 (0.06349206 0.93650794) *",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#evaluate",
    "href": "titanic classification model/2 classification Tidy Modeling.html#evaluate",
    "title": "Classification model with Recipe",
    "section": "4.1 Evaluate",
    "text": "4.1 Evaluate\n\n\nCode\n#mc_cv default is 25\nset.seed(1234)\nvalidation_splits &lt;- mc_cv(train_juice, prop = 0.9, strata = target_variable\n                           #,times=3\n                           )\nvalidation_splits\n\n\n# Monte Carlo cross-validation (0.9/0.1) with 25 resamples  using stratification \n# A tibble: 25 × 2\n   splits           id        \n   &lt;list&gt;           &lt;chr&gt;     \n 1 &lt;split [560/63]&gt; Resample01\n 2 &lt;split [560/63]&gt; Resample02\n 3 &lt;split [560/63]&gt; Resample03\n 4 &lt;split [560/63]&gt; Resample04\n 5 &lt;split [560/63]&gt; Resample05\n 6 &lt;split [560/63]&gt; Resample06\n 7 &lt;split [560/63]&gt; Resample07\n 8 &lt;split [560/63]&gt; Resample08\n 9 &lt;split [560/63]&gt; Resample09\n10 &lt;split [560/63]&gt; Resample10\n# ℹ 15 more rows\n\n\nKKN:\n\n\nCode\nknn_res &lt;- knn_spec %&gt;% fit_resamples(\n  target_variable ~ .,\n  validation_splits,\n  control = control_resamples(save_pred = TRUE)\n)\n\nknn_res %&gt;%collect_metrics()\n\n\n# A tibble: 2 × 6\n  .metric  .estimator  mean     n std_err .config             \n  &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               \n1 accuracy binary     0.726    25 0.0118  Preprocessor1_Model1\n2 roc_auc  binary     0.773    25 0.00998 Preprocessor1_Model1\n\n\nTree model:\n\n\nCode\ntree_res &lt;- tree_spec %&gt;% fit_resamples(\n  target_variable ~ .,\n  validation_splits,\n  control = control_resamples(save_pred = TRUE)\n)\n\ntree_res %&gt;%collect_metrics()\n\n\n# A tibble: 2 × 6\n  .metric  .estimator  mean     n std_err .config             \n  &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               \n1 accuracy binary     0.788    25  0.0115 Preprocessor1_Model1\n2 roc_auc  binary     0.815    25  0.0117 Preprocessor1_Model1\n\n\n\n\nCode\nknn_res %&gt;%\n  unnest(.predictions) %&gt;%\n  mutate(model = \"kknn\") %&gt;%\n  bind_rows(tree_res %&gt;%\n    unnest(.predictions) %&gt;%\n    mutate(model = \"rpart\")) %&gt;%\n  group_by(model) %&gt;%\n  roc_curve(target_variable, .pred_0) %&gt;%\n  ggplot(aes(x = 1 - specificity, y = sensitivity, color = model)) +\n  geom_line(size = 1.5) +\n  geom_abline(\n    lty = 2, alpha = 0.5,\n    color = \"gray50\",\n    size = 1.2\n  )",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#save-model",
    "href": "titanic classification model/2 classification Tidy Modeling.html#save-model",
    "title": "Classification model with Recipe",
    "section": "4.2 save model",
    "text": "4.2 save model\ncheck model size\n\n\nCode\nlibrary(lobstr)\nobj_size(tree_fit)\n\n\n847.94 kB\n\n\nCode\nobj_size(knn_fit)\n\n\n817.13 kB\n\n\nbundle and save model\n\n\nCode\nlibrary(bundle)\nmodel_bundle &lt;- bundle(knn_fit)\n\n\n\n\nCode\nsaveRDS(model_bundle,'level 2 classification KNN hotel model.RDS')",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/2 classification Tidy Modeling.html#make-predication",
    "href": "titanic classification model/2 classification Tidy Modeling.html#make-predication",
    "title": "Classification model with Recipe",
    "section": "4.3 make predication",
    "text": "4.3 make predication\nload model and unbundle\n\n\nCode\nmodel=readRDS('level 2 classification KNN hotel model.RDS')\n\nmodel &lt;- unbundle(model)\n\n\n\n\nCode\nfinal_prediction=predict(model,valid_proc)\n\nhead(final_prediction)\n\n\n# A tibble: 6 × 1\n  .pred_class\n  &lt;fct&gt;      \n1 0          \n2 0          \n3 1          \n4 0          \n5 1          \n6 0          \n\n\n\n\nCode\nfinal_prediction_data=cbind(valid_proc,final_prediction)\n\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction  0  1\n         0 43 10\n         1 14 22\n\n\n\n\nCode\naccuracy(final_prediction_data, truth = target_variable, estimate = .pred_class)\n\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy binary         0.730\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(target_variable)%&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   target_variable [2]\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 0                  57\n2 1                  32\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(.pred_class) %&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   .pred_class [2]\n  .pred_class     n\n  &lt;fct&gt;       &lt;int&gt;\n1 0              53\n2 1              36\n\n\n\n\nCode\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction  0  1\n         0 43 10\n         1 14 22",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html",
    "href": "titanic classification model/4 classification Tidy Modeling.html",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "",
    "text": "Level 5 classification Tidy Modeling:",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#read-data",
    "href": "titanic classification model/4 classification Tidy Modeling.html#read-data",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "2.1 read data",
    "text": "2.1 read data\nhttps://www.kaggle.com/competitions/titanic/data\n\n\nCode\nlibrary(tidyverse)\ntrain = read_csv(\"data/train.csv\")\n\ntest=read_csv(\"data/test.csv\")",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#eda",
    "href": "titanic classification model/4 classification Tidy Modeling.html#eda",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "2.2 EDA",
    "text": "2.2 EDA\n\n\nCode\nglimpse(train)\n\n\nRows: 891\nColumns: 12\n$ PassengerId &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,…\n$ Survived    &lt;dbl&gt; 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1…\n$ Pclass      &lt;dbl&gt; 3, 1, 3, 1, 3, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3, 2, 3, 3…\n$ Name        &lt;chr&gt; \"Braund, Mr. Owen Harris\", \"Cumings, Mrs. John Bradley (Fl…\n$ Sex         &lt;chr&gt; \"male\", \"female\", \"female\", \"female\", \"male\", \"male\", \"mal…\n$ Age         &lt;dbl&gt; 22, 38, 26, 35, 35, NA, 54, 2, 27, 14, 4, 58, 20, 39, 14, …\n$ SibSp       &lt;dbl&gt; 1, 1, 0, 1, 0, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4, 0, 1, 0…\n$ Parch       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1, 0, 0, 0…\n$ Ticket      &lt;chr&gt; \"A/5 21171\", \"PC 17599\", \"STON/O2. 3101282\", \"113803\", \"37…\n$ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 8.4583, 51.8625,…\n$ Cabin       &lt;chr&gt; NA, \"C85\", NA, \"C123\", NA, NA, \"E46\", NA, NA, NA, \"G6\", \"C…\n$ Embarked    &lt;chr&gt; \"S\", \"C\", \"S\", \"S\", \"S\", \"Q\", \"S\", \"S\", \"S\", \"C\", \"S\", \"S\"…\n\n\n\n\nCode\nglimpse(test)\n\n\nRows: 418\nColumns: 11\n$ PassengerId &lt;dbl&gt; 892, 893, 894, 895, 896, 897, 898, 899, 900, 901, 902, 903…\n$ Pclass      &lt;dbl&gt; 3, 3, 2, 3, 3, 3, 3, 2, 3, 3, 3, 1, 1, 2, 1, 2, 2, 3, 3, 3…\n$ Name        &lt;chr&gt; \"Kelly, Mr. James\", \"Wilkes, Mrs. James (Ellen Needs)\", \"M…\n$ Sex         &lt;chr&gt; \"male\", \"female\", \"male\", \"male\", \"female\", \"male\", \"femal…\n$ Age         &lt;dbl&gt; 34.5, 47.0, 62.0, 27.0, 22.0, 14.0, 30.0, 26.0, 18.0, 21.0…\n$ SibSp       &lt;dbl&gt; 0, 1, 0, 0, 1, 0, 0, 1, 0, 2, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0…\n$ Parch       &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ Ticket      &lt;chr&gt; \"330911\", \"363272\", \"240276\", \"315154\", \"3101298\", \"7538\",…\n$ Fare        &lt;dbl&gt; 7.8292, 7.0000, 9.6875, 8.6625, 12.2875, 9.2250, 7.6292, 2…\n$ Cabin       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, \"B45\", NA,…\n$ Embarked    &lt;chr&gt; \"Q\", \"S\", \"Q\", \"S\", \"S\", \"S\", \"Q\", \"S\", \"C\", \"S\", \"S\", \"S\"…\n\n\n\n\nCode\ntrain %&gt;%\n  count(Survived)\n\n\n# A tibble: 2 × 2\n  Survived     n\n     &lt;dbl&gt; &lt;int&gt;\n1        0   549\n2        1   342",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#plotting",
    "href": "titanic classification model/4 classification Tidy Modeling.html#plotting",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "2.3 plotting",
    "text": "2.3 plotting\n\n\nCode\nlibrary(skimr)\n\nskim(train)\n\n\n\nData summary\n\n\nName\ntrain\n\n\nNumber of rows\n891\n\n\nNumber of columns\n12\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n5\n\n\nnumeric\n7\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\nName\n0\n1.00\n12\n82\n0\n891\n0\n\n\nSex\n0\n1.00\n4\n6\n0\n2\n0\n\n\nTicket\n0\n1.00\n3\n18\n0\n681\n0\n\n\nCabin\n687\n0.23\n1\n15\n0\n147\n0\n\n\nEmbarked\n2\n1.00\n1\n1\n0\n3\n0\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nPassengerId\n0\n1.0\n446.00\n257.35\n1.00\n223.50\n446.00\n668.5\n891.00\n▇▇▇▇▇\n\n\nSurvived\n0\n1.0\n0.38\n0.49\n0.00\n0.00\n0.00\n1.0\n1.00\n▇▁▁▁▅\n\n\nPclass\n0\n1.0\n2.31\n0.84\n1.00\n2.00\n3.00\n3.0\n3.00\n▃▁▃▁▇\n\n\nAge\n177\n0.8\n29.70\n14.53\n0.42\n20.12\n28.00\n38.0\n80.00\n▂▇▅▂▁\n\n\nSibSp\n0\n1.0\n0.52\n1.10\n0.00\n0.00\n0.00\n1.0\n8.00\n▇▁▁▁▁\n\n\nParch\n0\n1.0\n0.38\n0.81\n0.00\n0.00\n0.00\n0.0\n6.00\n▇▁▁▁▁\n\n\nFare\n0\n1.0\n32.20\n49.69\n0.00\n7.91\n14.45\n31.0\n512.33\n▇▁▁▁▁",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#data-split",
    "href": "titanic classification model/4 classification Tidy Modeling.html#data-split",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "2.4 data split",
    "text": "2.4 data split\n\n\nPrepare & Split Data\ntrain_df &lt;- train %&gt;%mutate(Survived=as.factor(Survived)) %&gt;% select(-Name) %&gt;% \n\n  mutate_if(is.character, factor) %&gt;% rename(target_variable=Survived)\n\n\n\n\nCode\nset.seed(1234)\n\ndata_split &lt;- initial_validation_split(data=train_df, prop = c(0.7,0.1))\n\ndata_train=training(data_split)  \n\ndata_test=testing(data_split)  \n\ndata_valid=validation(data_split)\n\n\n\n\nCode\ndim(data_train)\n\n\n[1] 623  11\n\n\n\n\nCode\ndim(data_test)\n\n\n[1] 179  11\n\n\n\n\nCode\ndim(data_valid)\n\n\n[1] 89 11",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#recipe",
    "href": "titanic classification model/4 classification Tidy Modeling.html#recipe",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "3.1 recipe",
    "text": "3.1 recipe\n\n\nCode\ndata_rec &lt;- recipe(target_variable ~ ., data = data_train) %&gt;%\n  step_impute_knn(all_predictors(), neighbors = 5) %&gt;%\n  #step_downsample(target_variable) %&gt;%\n  #step_novel(Ticket) %&gt;%\n  step_rm(Ticket) %&gt;% \n  step_dummy(all_nominal(), -all_outcomes()) %&gt;%\n  step_zv(all_numeric()) %&gt;%\n  step_normalize(all_numeric())",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#model",
    "href": "titanic classification model/4 classification Tidy Modeling.html#model",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "3.2 model",
    "text": "3.2 model\ntree model with cost_complexity and tree_depth to tune\n\n\nCode\ntune_spec &lt;- \n  decision_tree(\n    cost_complexity = tune(),\n    tree_depth = tune()\n  ) %&gt;% \n  set_engine(\"rpart\") %&gt;% \n  set_mode(\"classification\")\n\n\n\n\nCode\ntune_spec\n\n\nDecision Tree Model Specification (classification)\n\nMain Arguments:\n  cost_complexity = tune()\n  tree_depth = tune()\n\nComputational engine: rpart \n\n\n\n\nCode\ntune_spec |&gt; \n  extract_parameter_set_dials()\n\n\nCollection of 2 parameters for tuning\n\n      identifier            type    object\n cost_complexity cost_complexity nparam[+]\n      tree_depth      tree_depth nparam[+]\n\n\n\n\nCode\nnum_leaves()\n\n\nNumber of Leaves (quantitative)\nRange: [5, 100]\n\n\ntunning grid\n\n\nCode\ngrid_tune &lt;- \n  tune_spec |&gt; \n  extract_parameter_set_dials() |&gt; \n  grid_latin_hypercube(size = 200)\n\n\n\n\nCode\ngrid_tune |&gt; glimpse(width = 200)\n\n\nRows: 200\nColumns: 2\n$ cost_complexity &lt;dbl&gt; 1.604226e-02, 1.240402e-07, 2.627129e-08, 9.554920e-09, 4.573048e-07, 4.382004e-07, 7.226307e-10, 5.853203e-03, 3.898687e-03, 6.021893e-02, 2.083316e-02, 1.088783e-05, 5.4962…\n$ tree_depth      &lt;int&gt; 8, 7, 6, 4, 12, 4, 11, 5, 3, 11, 15, 1, 5, 13, 8, 12, 10, 11, 9, 4, 7, 10, 3, 6, 15, 4, 9, 10, 4, 2, 1, 4, 14, 4, 11, 8, 12, 6, 10, 12, 13, 13, 7, 7, 2, 12, 4, 3, 2, 8, 13, 3…\n\n\n\n\nCode\ngrid_tune %&gt;% count(tree_depth)\n\n\n# A tibble: 15 × 2\n   tree_depth     n\n        &lt;int&gt; &lt;int&gt;\n 1          1     7\n 2          2    15\n 3          3    13\n 4          4    15\n 5          5    14\n 6          6    15\n 7          7    14\n 8          8    14\n 9          9    14\n10         10    15\n11         11    14\n12         12    15\n13         13    14\n14         14    14\n15         15     7",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#workflow",
    "href": "titanic classification model/4 classification Tidy Modeling.html#workflow",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "3.3 workflow",
    "text": "3.3 workflow\nusing control_race instead of control_grid\n\n\nCode\nlibrary(finetune)\ncntl &lt;- control_race(save_pred     = TRUE,\n                          save_workflow = TRUE)\n\n\n\n\nCode\nmodel_workflow =\n  workflow() %&gt;% \n  add_model(tune_spec) %&gt;% \n  add_recipe(data_rec)\n\n\n10 fold for tunning\n\n\nCode\nset.seed(234)\nfolds &lt;- vfold_cv(data_train)",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#training-and-tunning",
    "href": "titanic classification model/4 classification Tidy Modeling.html#training-and-tunning",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "3.4 training and tunning",
    "text": "3.4 training and tunning\nusing tune_race_anova() instead of tune_grid()\n\n\nCode\nlibrary(finetune)\ndoParallel::registerDoParallel()\n\ntree_res = model_workflow %&gt;% \n  tune_race_anova(\n    resamples = folds,\n    grid = grid_tune,\n    control   = cntl\n    )\n\n\n\n\nCode\nautoplot(tree_res)\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot_race(tree_res)\n\n\n\n\n\n\n\n\n\n\n\nCode\ntree_res %&gt;% \n  collect_metrics()\n\n\n# A tibble: 352 × 8\n   cost_complexity tree_depth .metric  .estimator  mean     n std_err .config   \n             &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;     \n 1   0.0160                 8 accuracy binary     0.774    10  0.0160 Preproces…\n 2   0.0160                 8 roc_auc  binary     0.799    10  0.0139 Preproces…\n 3   0.000000124            7 accuracy binary     0.772    10  0.0137 Preproces…\n 4   0.000000124            7 roc_auc  binary     0.821    10  0.0177 Preproces…\n 5   0.00000000955          4 accuracy binary     0.788    10  0.0179 Preproces…\n 6   0.00000000955          4 roc_auc  binary     0.818    10  0.0150 Preproces…\n 7   0.000000457           12 accuracy binary     0.771    10  0.0136 Preproces…\n 8   0.000000457           12 roc_auc  binary     0.817    10  0.0202 Preproces…\n 9   0.000000438            4 accuracy binary     0.785    10  0.0164 Preproces…\n10   0.000000438            4 roc_auc  binary     0.817    10  0.0149 Preproces…\n# ℹ 342 more rows\n\n\n\n\nCode\ntree_res %&gt;%\n  collect_metrics() %&gt;%\n  mutate(tree_depth = factor(tree_depth)) %&gt;%\n  ggplot(aes(cost_complexity, mean, color = tree_depth)) +\n  geom_line(size = 1.5, alpha = 0.6) +\n  geom_point(size = 2) +\n  facet_wrap(~ .metric, scales = \"free\", nrow = 2) +\n  scale_x_log10(labels = scales::label_number()) +\n  scale_color_viridis_d(option = \"plasma\", begin = .9, end = 0)\n\n\n\n\n\n\n\n\n\n\n\nCode\ntree_res %&gt;%\n  show_best()\n\n\n# A tibble: 5 × 8\n  cost_complexity tree_depth .metric .estimator  mean     n std_err .config     \n            &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;       \n1        2.38e- 8         12 roc_auc binary     0.829    10  0.0144 Preprocesso…\n2        5.87e- 7         12 roc_auc binary     0.827    10  0.0156 Preprocesso…\n3        1.61e- 6         12 roc_auc binary     0.827    10  0.0154 Preprocesso…\n4        1.50e- 5         15 roc_auc binary     0.826    10  0.0151 Preprocesso…\n5        8.95e-10         13 roc_auc binary     0.826    10  0.0164 Preprocesso…\n\n\n\n\nCode\nbest_tree &lt;- tree_res %&gt;%\n  select_best()\n\nbest_tree\n\n\n# A tibble: 1 × 3\n  cost_complexity tree_depth .config               \n            &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;                 \n1    0.0000000238         12 Preprocessor1_Model040\n\n\n\n\nCode\nfinal_wf &lt;- \n  model_workflow %&gt;% \n  finalize_workflow(best_tree)\n\n\nfinal_wf\n\n\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: decision_tree()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n5 Recipe Steps\n\n• step_impute_knn()\n• step_rm()\n• step_dummy()\n• step_zv()\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\nDecision Tree Model Specification (classification)\n\nMain Arguments:\n  cost_complexity = 2.37513046201816e-08\n  tree_depth = 12\n\nComputational engine: rpart",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#last-fit",
    "href": "titanic classification model/4 classification Tidy Modeling.html#last-fit",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "3.5 last fit",
    "text": "3.5 last fit\n\n\nCode\nfinal_fit &lt;- \n  final_wf %&gt;%\n  last_fit(data_split)",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#evaluate",
    "href": "titanic classification model/4 classification Tidy Modeling.html#evaluate",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "4.1 Evaluate",
    "text": "4.1 Evaluate\n\n\nCode\nfinal_fit %&gt;%\n  collect_metrics()\n\n\n# A tibble: 2 × 4\n  .metric  .estimator .estimate .config             \n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               \n1 accuracy binary         0.816 Preprocessor1_Model1\n2 roc_auc  binary         0.885 Preprocessor1_Model1\n\n\nAccuracy = (TN + TP)/(TN+TP+FN+FP) = (Number of correct assessments)/Number of all assessments)\nSensitivity = TP/(TP + FN) = (Number of true positive assessment)/(Number of all positive assessment)\nSpecificity = TN/(TN + FP) = (Number of true negative assessment)/(Number of all negative assessment)\n\n\nCode\nall_metrics &lt;- metric_set(accuracy, recall, precision, f_meas, kap, sens, spec)\n\na=final_fit %&gt;% collect_predictions()\n\nall_metrics(a, truth = target_variable,estimate = .pred_class)\n\n\n# A tibble: 7 × 3\n  .metric   .estimator .estimate\n  &lt;chr&gt;     &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy  binary         0.816\n2 recall    binary         0.903\n3 precision binary         0.823\n4 f_meas    binary         0.861\n5 kap       binary         0.590\n6 sens      binary         0.903\n7 spec      binary         0.667\n\n\n\n\nCode\nfinal_fit %&gt;%\n  collect_predictions() %&gt;% rename(.pred_T = 2, .pred_F = 3) %&gt;% \n  roc_curve(target_variable, .pred_T) %&gt;% \n  autoplot()\n\n\n\n\n\n\n\n\n\n\n\nCode\nfinal_tree &lt;- extract_workflow(final_fit)\nfinal_tree\n\n\n══ Workflow [trained] ══════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: decision_tree()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n5 Recipe Steps\n\n• step_impute_knn()\n• step_rm()\n• step_dummy()\n• step_zv()\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\nn= 623 \n\nnode), split, n, loss, yval, (yprob)\n      * denotes terminal node\n\n   1) root 623 244 0 (0.60834671 0.39165329)  \n     2) Sex_male&gt;=-0.3181194 406  84 0 (0.79310345 0.20689655)  \n       4) Age&gt;=-1.700165 388  70 0 (0.81958763 0.18041237)  \n         8) Pclass&gt;=-0.9236371 305  39 0 (0.87213115 0.12786885)  \n          16) Fare&lt; 0.4362002 295  35 0 (0.88135593 0.11864407)  \n            32) Cabin_E121&gt;=1.925855 26   0 0 (1.00000000 0.00000000) *\n            33) Cabin_E121&lt; 1.925855 269  35 0 (0.86988848 0.13011152)  \n              66) Age&gt;=-0.6289231 209  23 0 (0.88995215 0.11004785) *\n              67) Age&lt; -0.6289231 60  12 0 (0.80000000 0.20000000)  \n               134) Embarked_S&gt;=-0.4915368 49   7 0 (0.85714286 0.14285714)  \n                 268) PassengerId&gt;=0.8547689 16   0 0 (1.00000000 0.00000000) *\n                 269) PassengerId&lt; 0.8547689 33   7 0 (0.78787879 0.21212121)  \n                   538) Fare&lt; -0.543308 8   0 0 (1.00000000 0.00000000) *\n                   539) Fare&gt;=-0.543308 25   7 0 (0.72000000 0.28000000)  \n                    1078) Fare&gt;=-0.5171166 18   3 0 (0.83333333 0.16666667) *\n                    1079) Fare&lt; -0.5171166 7   3 1 (0.42857143 0.57142857) *\n               135) Embarked_S&lt; -0.4915368 11   5 0 (0.54545455 0.45454545) *\n          17) Fare&gt;=0.4362002 10   4 0 (0.60000000 0.40000000) *\n         9) Pclass&lt; -0.9236371 83  31 0 (0.62650602 0.37349398)  \n          18) PassengerId&lt; -1.024023 15   1 0 (0.93333333 0.06666667) *\n          19) PassengerId&gt;=-1.024023 68  30 0 (0.55882353 0.44117647)  \n            38) Age&gt;=0.4276941 48  17 0 (0.64583333 0.35416667)  \n              76) SibSp&lt; -0.03494193 34   9 0 (0.73529412 0.26470588)  \n               152) Fare&gt;=0.01793593 7   0 0 (1.00000000 0.00000000) *\n               153) Fare&lt; 0.01793593 27   9 0 (0.66666667 0.33333333)  \n                 306) Fare&lt; -0.05252826 20   5 0 (0.75000000 0.25000000) *\n                 307) Fare&gt;=-0.05252826 7   3 1 (0.42857143 0.57142857) *\n              77) SibSp&gt;=-0.03494193 14   6 1 (0.42857143 0.57142857) *\n            39) Age&lt; 0.4276941 20   7 1 (0.35000000 0.65000000) *\n       5) Age&lt; -1.700165 18   4 1 (0.22222222 0.77777778) *\n     3) Sex_male&lt; -0.3181194 217  57 1 (0.26267281 0.73732719)  \n       6) Pclass&gt;=0.2640325 91  42 0 (0.53846154 0.46153846)  \n        12) Fare&gt;=-0.1653079 16   1 0 (0.93750000 0.06250000) *\n        13) Fare&lt; -0.1653079 75  34 1 (0.45333333 0.54666667)  \n          26) Embarked_S&gt;=-0.4915368 42  18 0 (0.57142857 0.42857143)  \n            52) Fare&gt;=-0.3321481 9   2 0 (0.77777778 0.22222222) *\n            53) Fare&lt; -0.3321481 33  16 0 (0.51515152 0.48484848)  \n             106) Fare&lt; -0.4658063 23   8 0 (0.65217391 0.34782609)  \n               212) PassengerId&lt; 0.1220595 14   3 0 (0.78571429 0.21428571) *\n               213) PassengerId&gt;=0.1220595 9   4 1 (0.44444444 0.55555556) *\n             107) Fare&gt;=-0.4658063 10   2 1 (0.20000000 0.80000000) *\n          27) Embarked_S&lt; -0.4915368 33  10 1 (0.30303030 0.69696970)  \n            54) Cabin_G6&lt; 1.120627 13   6 0 (0.53846154 0.46153846) *\n            55) Cabin_G6&gt;=1.120627 20   3 1 (0.15000000 0.85000000) *\n       7) Pclass&lt; 0.2640325 126   8 1 (0.06349206 0.93650794) *\n\n...\nand 0 more lines.\n\n\n\n\nCode\nlibrary(vip)\n\nfinal_tree %&gt;% \n  extract_fit_parsnip() %&gt;% \n  vip()",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#save-model",
    "href": "titanic classification model/4 classification Tidy Modeling.html#save-model",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "4.2 save model",
    "text": "4.2 save model\ncheck model size\n\n\nCode\nlibrary(lobstr)\nobj_size(final_tree)\n\n\n1.14 MB\n\n\nbundle and save model\n\n\nCode\nlibrary(bundle)\nmodel_bundle &lt;- bundle(final_tree)\n\n\n\n\nCode\nsaveRDS(model_bundle,'level 5 classification decision tree hotel model.RDS')",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "titanic classification model/4 classification Tidy Modeling.html#make-predication",
    "href": "titanic classification model/4 classification Tidy Modeling.html#make-predication",
    "title": "Classification model with Recipe,workflow,fast tunning",
    "section": "4.3 make predication",
    "text": "4.3 make predication\nload model and unbundle\n\n\nCode\nmodel=readRDS('level 5 classification decision tree hotel model.RDS')\n\nmodel &lt;- unbundle(model)\n\n\n\n\nCode\nfinal_prediction=predict(model,data_valid)\n\nhead(final_prediction)\n\n\n# A tibble: 6 × 1\n  .pred_class\n  &lt;fct&gt;      \n1 0          \n2 1          \n3 1          \n4 0          \n5 0          \n6 0          \n\n\n\n\nCode\nfinal_prediction_data=cbind(data_valid,final_prediction)\n\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction  0  1\n         0 47 13\n         1 10 19\n\n\n\n\nCode\naccuracy(final_prediction_data, truth = target_variable, estimate = .pred_class)\n\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy binary         0.742\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(target_variable)%&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   target_variable [2]\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 0                  57\n2 1                  32\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(.pred_class) %&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   .pred_class [2]\n  .pred_class     n\n  &lt;fct&gt;       &lt;int&gt;\n1 0              60\n2 1              29\n\n\n\n\nCode\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction  0  1\n         0 47 13\n         1 10 19",
    "crumbs": [
      "titanic classification model",
      "Classification model with Recipe,workflow,fast tunning"
    ]
  },
  {
    "objectID": "hotel classification model/5 classification Tidy Modeling.html",
    "href": "hotel classification model/5 classification Tidy Modeling.html",
    "title": "Classification Model with recipe,workflow,fast tuning",
    "section": "",
    "text": "Level 5 classification Tidy Modeling with 1 tuning model and 1 recipe :\ntuning decision tree model with rpart engine(tunning:cost_complexity,tree_depth)",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/5 classification Tidy Modeling.html#read-data",
    "href": "hotel classification model/5 classification Tidy Modeling.html#read-data",
    "title": "Classification Model with recipe,workflow,fast tuning",
    "section": "2.1 read data",
    "text": "2.1 read data\n\n\nCode\nlibrary(tidyverse)\n\nhotels &lt;- readr::read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-11/hotels.csv\")\n\n\nhotel_stays &lt;- hotels %&gt;%\n  filter(is_canceled == 0) %&gt;%\n  mutate(\n    children = case_when(\n      children + babies &gt; 0 ~ \"children\",\n      TRUE ~ \"none\"\n    ),\n    required_car_parking_spaces = case_when(\n      required_car_parking_spaces &gt; 0 ~ \"parking\",\n      TRUE ~ \"none\"\n    )\n  ) %&gt;%\n  select(-is_canceled, -reservation_status, -babies)",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/5 classification Tidy Modeling.html#data-split",
    "href": "hotel classification model/5 classification Tidy Modeling.html#data-split",
    "title": "Classification Model with recipe,workflow,fast tuning",
    "section": "2.2 data split",
    "text": "2.2 data split\n\n\nPrepare & Split Data\nall_hotels_df &lt;- hotel_stays %&gt;%\n  select(\n    children, hotel, arrival_date_month, meal, adr, adults,\n    required_car_parking_spaces, total_of_special_requests,\n    stays_in_week_nights, stays_in_weekend_nights\n  ) %&gt;%\n  mutate_if(is.character, factor) %&gt;% rename(target_variable=children) %&gt;% mutate(rownum= row_number())\n\nhotels_df=all_hotels_df%&gt;% sample_n(50000) \n\nhold_hotels_df &lt;- anti_join(all_hotels_df, hotels_df, by='rownum')\n\n\n#all_hotels_df=all_hotels_df %&gt;% select(-rownum)\n#hotels_df=hotels_df %&gt;% select(-rownum)\n#all_hotels_df=all_hotels_df %&gt;% select(-rownum)\n\n\n\n\nCode\nset.seed(1234)\n\ndata_split &lt;- initial_validation_split(data=hotels_df, prop = c(0.7,0.2))\n\ndata_train=training(data_split)  \n\ndata_test=testing(data_split)  \n\ndata_valid=validation(data_split)\n\n\n\n\nCode\ndim(data_train)\n\n\n[1] 35000    11\n\n\n\n\nCode\ndim(data_test)\n\n\n[1] 5000   11\n\n\n\n\nCode\ndim(data_valid)\n\n\n[1] 10000    11\n\n\n10 fold for tunning\n\n\nCode\nset.seed(234)\nfolds &lt;- vfold_cv(data_train)",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/5 classification Tidy Modeling.html#recipe",
    "href": "hotel classification model/5 classification Tidy Modeling.html#recipe",
    "title": "Classification Model with recipe,workflow,fast tuning",
    "section": "3.1 recipe",
    "text": "3.1 recipe\nbecasue the target class is not balance so using downsample\n\n\nCode\ndata_rec &lt;- recipe(target_variable ~ ., data = data_train) %&gt;%\n  step_rm(rownum) %&gt;% \n  step_downsample(target_variable) %&gt;%\n  step_dummy(all_nominal(), -all_outcomes()) %&gt;%\n  step_zv(all_numeric()) %&gt;%\n  step_normalize(all_numeric())",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/5 classification Tidy Modeling.html#model",
    "href": "hotel classification model/5 classification Tidy Modeling.html#model",
    "title": "Classification Model with recipe,workflow,fast tuning",
    "section": "3.2 model",
    "text": "3.2 model\ndecision tree model with cost_complexity and tree_depth to tune\n\n\nCode\ntune_spec &lt;- \n  decision_tree(\n    cost_complexity = tune(),\n    tree_depth = tune()\n  ) %&gt;% \n  set_engine(\"rpart\") %&gt;% \n  set_mode(\"classification\")\n\n\n\n\nCode\ntune_spec\n\n\nDecision Tree Model Specification (classification)\n\nMain Arguments:\n  cost_complexity = tune()\n  tree_depth = tune()\n\nComputational engine: rpart \n\n\n\n\nCode\ntune_spec |&gt; \n  extract_parameter_set_dials()\n\n\nCollection of 2 parameters for tuning\n\n      identifier            type    object\n cost_complexity cost_complexity nparam[+]\n      tree_depth      tree_depth nparam[+]\n\n\n\n\nCode\nnum_leaves()\n\n\nNumber of Leaves (quantitative)\nRange: [5, 100]\n\n\ntunning grid\n\n\nCode\ngrid_tune &lt;- \n  tune_spec |&gt; \n  extract_parameter_set_dials() |&gt; \n  grid_latin_hypercube(size = 200)\n\n\n\n\nCode\ngrid_tune |&gt; glimpse(width = 200)\n\n\nRows: 200\nColumns: 2\n$ cost_complexity &lt;dbl&gt; 1.261316e-07, 1.039957e-04, 5.167414e-03, 3.694176e-04, 2.289054e-09, 1.567029e-04, 3.242447e-03, 4.373541e-09, 1.341326e-07, 5.984753e-03, 2.577958e-03, 1.130172e-09, 8.8965…\n$ tree_depth      &lt;int&gt; 7, 10, 3, 6, 3, 4, 13, 11, 15, 1, 11, 7, 4, 12, 8, 8, 9, 14, 10, 5, 4, 4, 7, 12, 2, 7, 13, 2, 14, 10, 13, 5, 14, 10, 13, 9, 15, 11, 14, 2, 8, 11, 5, 2, 11, 3, 1, 13, 10, 4, 1…\n\n\n\n\nCode\ngrid_tune %&gt;% count(tree_depth)\n\n\n# A tibble: 15 × 2\n   tree_depth     n\n        &lt;int&gt; &lt;int&gt;\n 1          1     7\n 2          2    15\n 3          3    14\n 4          4    14\n 5          5    15\n 6          6    14\n 7          7    14\n 8          8    14\n 9          9    14\n10         10    15\n11         11    14\n12         12    14\n13         13    15\n14         14    14\n15         15     7",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/5 classification Tidy Modeling.html#workflow",
    "href": "hotel classification model/5 classification Tidy Modeling.html#workflow",
    "title": "Classification Model with recipe,workflow,fast tuning",
    "section": "3.3 workflow",
    "text": "3.3 workflow\n\n\nCode\nlibrary(finetune)\ncntl &lt;- control_race(save_pred     = TRUE,\n                          save_workflow = TRUE)\n\n\n\n\nCode\nmodel_workflow =\n  workflow() %&gt;% \n  add_model(tune_spec) %&gt;% \n  add_recipe(data_rec)",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/5 classification Tidy Modeling.html#training-and-tunning",
    "href": "hotel classification model/5 classification Tidy Modeling.html#training-and-tunning",
    "title": "Classification Model with recipe,workflow,fast tuning",
    "section": "3.4 training and tunning",
    "text": "3.4 training and tunning\nusing tune_race_anova() instead of tune_grid()\n\n\nCode\nlibrary(finetune)\ndoParallel::registerDoParallel()\n\ntree_res = model_workflow %&gt;% \n  tune_race_anova(\n    resamples = folds,\n    grid = grid_tune,\n    control   = cntl\n    )\n\n\n\n\nCode\nautoplot(tree_res)\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot_race(tree_res)\n\n\n\n\n\n\n\n\n\n\n\nCode\ntree_res %&gt;% \n  collect_metrics()\n\n\n# A tibble: 220 × 8\n   cost_complexity tree_depth .metric  .estimator  mean     n std_err .config   \n             &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;     \n 1   0.000000126            7 accuracy binary     0.754    10 0.00567 Preproces…\n 2   0.000000126            7 roc_auc  binary     0.806    10 0.00583 Preproces…\n 3   0.000104              10 accuracy binary     0.762    10 0.00753 Preproces…\n 4   0.000104              10 roc_auc  binary     0.815    10 0.00545 Preproces…\n 5   0.000369               6 accuracy binary     0.745    10 0.00758 Preproces…\n 6   0.000369               6 roc_auc  binary     0.804    10 0.00577 Preproces…\n 7   0.00000000437         11 accuracy binary     0.756    10 0.00610 Preproces…\n 8   0.00000000437         11 roc_auc  binary     0.817    10 0.00538 Preproces…\n 9   0.000000134           15 accuracy binary     0.751    10 0.00305 Preproces…\n10   0.000000134           15 roc_auc  binary     0.815    10 0.00499 Preproces…\n# ℹ 210 more rows\n\n\n\n\nCode\ntree_res %&gt;%\n  collect_metrics() %&gt;%\n  mutate(tree_depth = factor(tree_depth)) %&gt;%\n  ggplot(aes(cost_complexity, mean, color = tree_depth)) +\n  geom_line(size = 1.5, alpha = 0.6) +\n  geom_point(size = 2) +\n  facet_wrap(~ .metric, scales = \"free\", nrow = 2) +\n  scale_x_log10(labels = scales::label_number()) +\n  scale_color_viridis_d(option = \"plasma\", begin = .9, end = 0)\n\n\n\n\n\n\n\n\n\n\n\nCode\ntree_res %&gt;%\n  show_best()\n\n\n# A tibble: 5 × 8\n  cost_complexity tree_depth .metric .estimator  mean     n std_err .config     \n            &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;       \n1        4.37e- 9         11 roc_auc binary     0.817    10 0.00538 Preprocesso…\n2        4.32e- 5         11 roc_auc binary     0.817    10 0.00538 Preprocesso…\n3        1.09e-10         11 roc_auc binary     0.817    10 0.00538 Preprocesso…\n4        1.45e- 9         11 roc_auc binary     0.817    10 0.00538 Preprocesso…\n5        7.52e- 8         11 roc_auc binary     0.817    10 0.00538 Preprocesso…\n\n\n\n\nCode\nbest_tree &lt;- tree_res %&gt;%\n  select_best()\n\nbest_tree\n\n\n# A tibble: 1 × 3\n  cost_complexity tree_depth .config               \n            &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;                 \n1   0.00000000437         11 Preprocessor1_Model008\n\n\n\n\nCode\nfinal_wf &lt;- \n  model_workflow %&gt;% \n  finalize_workflow(best_tree)\n\n\nfinal_wf\n\n\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: decision_tree()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n5 Recipe Steps\n\n• step_rm()\n• step_downsample()\n• step_dummy()\n• step_zv()\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\nDecision Tree Model Specification (classification)\n\nMain Arguments:\n  cost_complexity = 4.37354062320283e-09\n  tree_depth = 11\n\nComputational engine: rpart",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/5 classification Tidy Modeling.html#last-fit",
    "href": "hotel classification model/5 classification Tidy Modeling.html#last-fit",
    "title": "Classification Model with recipe,workflow,fast tuning",
    "section": "3.5 last fit",
    "text": "3.5 last fit\n\n\nCode\nfinal_fit &lt;- \n  final_wf %&gt;%\n  last_fit(data_split)",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/5 classification Tidy Modeling.html#evaluate",
    "href": "hotel classification model/5 classification Tidy Modeling.html#evaluate",
    "title": "Classification Model with recipe,workflow,fast tuning",
    "section": "4.1 Evaluate",
    "text": "4.1 Evaluate\n\n\nCode\nfinal_fit %&gt;%\n  collect_metrics()\n\n\n# A tibble: 2 × 4\n  .metric  .estimator .estimate .config             \n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               \n1 accuracy binary         0.765 Preprocessor1_Model1\n2 roc_auc  binary         0.811 Preprocessor1_Model1\n\n\n\n\nCode\nall_metrics &lt;- metric_set(accuracy, recall, precision, f_meas, kap, sens, spec)\n\na=final_fit %&gt;% collect_predictions()\n\nall_metrics(a, truth = target_variable,estimate = .pred_class)\n\n\n# A tibble: 7 × 3\n  .metric   .estimator .estimate\n  &lt;chr&gt;     &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy  binary         0.765\n2 recall    binary         0.701\n3 precision binary         0.208\n4 f_meas    binary         0.320\n5 kap       binary         0.226\n6 sens      binary         0.701\n7 spec      binary         0.770\n\n\n\n\nCode\nfinal_fit %&gt;%\n  collect_predictions() %&gt;% \n  roc_curve(target_variable, .pred_children) %&gt;% \n  autoplot()\n\n\n\n\n\n\n\n\n\n\n\nCode\nfinal_tree &lt;- extract_workflow(final_fit)\nfinal_tree\n\n\n══ Workflow [trained] ══════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: decision_tree()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n5 Recipe Steps\n\n• step_rm()\n• step_downsample()\n• step_dummy()\n• step_zv()\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\nn= 5708 \n\nnode), split, n, loss, yval, (yprob)\n      * denotes terminal node\n\n   1) root 5708 2854 children (0.500000000 0.500000000)  \n     2) adr&gt;=0.1217285 2186  515 children (0.764409881 0.235590119)  \n       4) adr&gt;=0.795892 1118  149 children (0.866726297 0.133273703)  \n         8) adults&lt; 1.258765 992  110 children (0.889112903 0.110887097)  \n          16) hotel_Resort.Hotel&lt; 0.2015753 489   29 children (0.940695297 0.059304703)  \n            32) arrival_date_month_September&lt; 1.809553 451   20 children (0.955654102 0.044345898)  \n              64) adr&gt;=1.310769 220    2 children (0.990909091 0.009090909) *\n              65) adr&lt; 1.310769 231   18 children (0.922077922 0.077922078)  \n               130) adr&lt; 1.227981 210   12 children (0.942857143 0.057142857) *\n               131) adr&gt;=1.227981 21    6 children (0.714285714 0.285714286)  \n                 262) arrival_date_month_August&gt;=0.8845497 10    0 children (1.000000000 0.000000000) *\n                 263) arrival_date_month_August&lt; 0.8845497 11    5 none (0.454545455 0.545454545) *\n            33) arrival_date_month_September&gt;=1.809553 38    9 children (0.763157895 0.236842105)  \n              66) total_of_special_requests&gt;=-0.4338162 29    3 children (0.896551724 0.103448276) *\n              67) total_of_special_requests&lt; -0.4338162 9    3 none (0.333333333 0.666666667) *\n          17) hotel_Resort.Hotel&gt;=0.2015753 503   81 children (0.838966203 0.161033797)  \n            34) adr&gt;=1.806699 184   13 children (0.929347826 0.070652174) *\n            35) adr&lt; 1.806699 319   68 children (0.786833856 0.213166144)  \n              70) arrival_date_month_August&lt; 0.8845497 189   28 children (0.851851852 0.148148148)  \n               140) arrival_date_month_July&lt; 1.00281 69    4 children (0.942028986 0.057971014) *\n               141) arrival_date_month_July&gt;=1.00281 120   24 children (0.800000000 0.200000000)  \n                 282) adr&gt;=1.003498 96   16 children (0.833333333 0.166666667) *\n                 283) adr&lt; 1.003498 24    8 children (0.666666667 0.333333333)  \n                   566) adr&lt; 0.8813067 9    0 children (1.000000000 0.000000000) *\n                   567) adr&gt;=0.8813067 15    7 none (0.466666667 0.533333333) *\n              71) arrival_date_month_August&gt;=0.8845497 130   40 children (0.692307692 0.307692308)  \n               142) required_car_parking_spaces_parking&gt;=1.047041 45    9 children (0.800000000 0.200000000) *\n               143) required_car_parking_spaces_parking&lt; 1.047041 85   31 children (0.635294118 0.364705882)  \n                 286) stays_in_weekend_nights&gt;=0.53872 54   16 children (0.703703704 0.296296296)  \n                   572) adr&gt;=0.9636965 40    9 children (0.775000000 0.225000000)  \n                    1144) stays_in_week_nights&lt; 1.62789 33    5 children (0.848484848 0.151515152) *\n                    1145) stays_in_week_nights&gt;=1.62789 7    3 none (0.428571429 0.571428571) *\n                   573) adr&lt; 0.9636965 14    7 children (0.500000000 0.500000000) *\n                 287) stays_in_weekend_nights&lt; 0.53872 31   15 children (0.516129032 0.483870968)  \n                   574) adr&gt;=1.17385 21    8 children (0.619047619 0.380952381)  \n                    1148) adr&lt; 1.37684 7    0 children (1.000000000 0.000000000) *\n                    1149) adr&gt;=1.37684 14    6 none (0.428571429 0.571428571) *\n                   575) adr&lt; 1.17385 10    3 none (0.300000000 0.700000000) *\n         9) adults&gt;=1.258765 126   39 children (0.690476190 0.309523810)  \n          18) adr&gt;=1.235145 83   14 children (0.831325301 0.168674699)  \n            36) adr&gt;=1.476344 62    7 children (0.887096774 0.112903226)  \n              72) arrival_date_month_August&lt; 0.8845497 40    2 children (0.950000000 0.050000000) *\n              73) arrival_date_month_August&gt;=0.8845497 22    5 children (0.772727273 0.227272727)  \n               146) stays_in_week_nights&lt; 0.5290259 13    0 children (1.000000000 0.000000000) *\n               147) stays_in_week_nights&gt;=0.5290259 9    4 none (0.444444444 0.555555556) *\n\n...\nand 200 more lines.\n\n\n\n\nCode\nlibrary(vip)\n\nfinal_tree %&gt;% \n  extract_fit_parsnip() %&gt;% \n  vip()",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/5 classification Tidy Modeling.html#save-model",
    "href": "hotel classification model/5 classification Tidy Modeling.html#save-model",
    "title": "Classification Model with recipe,workflow,fast tuning",
    "section": "4.2 save model",
    "text": "4.2 save model\ncheck model size\n\n\nCode\nlibrary(lobstr)\nobj_size(final_tree)\n\n\n3.53 MB\n\n\nbundle and save model\n\n\nCode\nlibrary(bundle)\nmodel_bundle &lt;- bundle(final_tree)\n\n\n\n\nCode\nsaveRDS(model_bundle,'level 5 classification decision tree hotel model.RDS')",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/5 classification Tidy Modeling.html#make-predication",
    "href": "hotel classification model/5 classification Tidy Modeling.html#make-predication",
    "title": "Classification Model with recipe,workflow,fast tuning",
    "section": "4.3 make predication",
    "text": "4.3 make predication\nload model and unbundle\n\n\nCode\nmodel=readRDS('level 5 classification decision tree hotel model.RDS')\n\nmodel &lt;- unbundle(model)\n\n\n\n\nCode\nfinal_prediction=predict(model,data_valid)\n\nhead(final_prediction)\n\n\n# A tibble: 6 × 1\n  .pred_class\n  &lt;fct&gt;      \n1 none       \n2 none       \n3 none       \n4 none       \n5 none       \n6 none       \n\n\n\n\nCode\nfinal_prediction_data=cbind(data_valid,final_prediction)\n\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction children none\n  children      574 2043\n  none          247 7136\n\n\n\n\nCode\naccuracy(final_prediction_data, truth = target_variable, estimate = .pred_class)\n\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy binary         0.771\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(target_variable)%&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   target_variable [2]\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 children          821\n2 none             9179\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(.pred_class) %&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   .pred_class [2]\n  .pred_class     n\n  &lt;fct&gt;       &lt;int&gt;\n1 children     2617\n2 none         7383\n\n\n\n\nCode\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction children none\n  children      574 2043\n  none          247 7136",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/6 classification Tidy Modeling.html",
    "href": "hotel classification model/6 classification Tidy Modeling.html",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "",
    "text": "Level 6 classification Tidy Modeling:\nlogistic glm model\ntuning decision tree model with rpart engine(tunning:cost_complexity,tree_depth)\nKNN model with knn engine(knn_spec)\ntuning XG boost model (tunning:tree_depth , min_n,loss_reduction ,sample_size , mtry,learn_rate)\ntuning light gbm boost model(tunning:tree_depth , min_n,loss_reduction ,sample_size , mtry,learn_rate)",
    "crumbs": [
      "hotel classification model",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/6 classification Tidy Modeling.html#read-data",
    "href": "hotel classification model/6 classification Tidy Modeling.html#read-data",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "2.1 read data",
    "text": "2.1 read data\n\n\nCode\nlibrary(tidyverse)\n\nhotels &lt;- readr::read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-11/hotels.csv\")\n\n\nhotel_stays &lt;- hotels %&gt;%\n  filter(is_canceled == 0) %&gt;%\n  mutate(\n    children = case_when(\n      children + babies &gt; 0 ~ \"children\",\n      TRUE ~ \"none\"\n    ),\n    required_car_parking_spaces = case_when(\n      required_car_parking_spaces &gt; 0 ~ \"parking\",\n      TRUE ~ \"none\"\n    )\n  ) %&gt;%\n  select(-is_canceled, -reservation_status, -babies)",
    "crumbs": [
      "hotel classification model",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/6 classification Tidy Modeling.html#data-split",
    "href": "hotel classification model/6 classification Tidy Modeling.html#data-split",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "2.2 data split",
    "text": "2.2 data split\n\n\nPrepare & Split Data\nall_hotels_df &lt;- hotel_stays %&gt;%\n  select(\n    children, hotel, arrival_date_month, meal, adr, adults,\n    required_car_parking_spaces, total_of_special_requests,\n    stays_in_week_nights, stays_in_weekend_nights\n  ) %&gt;%\n  mutate_if(is.character, factor) %&gt;% rename(target_variable=children) %&gt;% mutate(rownum= row_number())\n\nhotels_df=all_hotels_df%&gt;% sample_n(50000) \n\nhold_hotels_df &lt;- anti_join(all_hotels_df, hotels_df, by='rownum')\n\n\n#all_hotels_df=all_hotels_df %&gt;% select(-rownum)\n#hotels_df=hotels_df %&gt;% select(-rownum)\n#all_hotels_df=all_hotels_df %&gt;% select(-rownum)\n\n\n\n\nCode\nset.seed(1234)\n\ndata_split &lt;- initial_validation_split(data=hotels_df, prop = c(0.7,0.2))\n\ndata_train=training(data_split)  \n\ndata_test=testing(data_split)  \n\ndata_valid=validation(data_split)\n\n\n\n\nCode\ndim(data_train)\n\n\n[1] 35000    11\n\n\n\n\nCode\ndim(data_test)\n\n\n[1] 5000   11\n\n\n\n\nCode\ndim(data_valid)\n\n\n[1] 10000    11\n\n\n10 fold for tunning\n\n\nCode\nset.seed(234)\nfolds &lt;- vfold_cv(data_train)",
    "crumbs": [
      "hotel classification model",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/6 classification Tidy Modeling.html#recipe",
    "href": "hotel classification model/6 classification Tidy Modeling.html#recipe",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "3.1 recipe",
    "text": "3.1 recipe\nbecasue the target class is not balance so using downsample\n\n\nCode\ndata_rec &lt;- recipe(target_variable ~ ., data = data_train) %&gt;%\n  step_rm(rownum) %&gt;% \n  step_downsample(target_variable) %&gt;%\n  step_dummy(all_nominal(), -all_outcomes()) %&gt;%\n  step_zv(all_numeric()) %&gt;%\n  step_normalize(all_numeric())",
    "crumbs": [
      "hotel classification model",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/6 classification Tidy Modeling.html#model",
    "href": "hotel classification model/6 classification Tidy Modeling.html#model",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "3.2 model",
    "text": "3.2 model\n\n3.2.1 decision tree model with cost_complexity and tree_depth to tune\n\n\nCode\ntune_spec &lt;- \n  decision_tree(\n    cost_complexity = tune(),\n    tree_depth = tune()\n  ) %&gt;% \n  set_engine(\"rpart\") %&gt;% \n  set_mode(\"classification\")\n\n\n\n\nCode\ntune_spec |&gt; \n  extract_parameter_set_dials()\n\n\nCollection of 2 parameters for tuning\n\n      identifier            type    object\n cost_complexity cost_complexity nparam[+]\n      tree_depth      tree_depth nparam[+]\n\n\n\n\nCode\ndecision_tree_tune_grid &lt;- \n  tune_spec |&gt; \n  extract_parameter_set_dials() |&gt; \n  grid_latin_hypercube(size = 100)\n\n\n\n\n3.2.2 logistic glm model\n\n\nCode\nglm_spec &lt;-\n  logistic_reg(penalty = 1) |&gt;\n  set_engine(\"glm\")\n\n\n\n\n3.2.3 KNN model\n\n\nCode\nknn_spec &lt;- nearest_neighbor() %&gt;%\n  set_engine(\"kknn\") %&gt;%\n  set_mode(\"classification\")\n\nknn_spec\n\n\nK-Nearest Neighbor Model Specification (classification)\n\nComputational engine: kknn \n\n\n\n\n3.2.4 XG Boost tree\n\n\nCode\nxgb_spec &lt;- boost_tree(\n  trees = 10,\n  tree_depth = tune(), min_n = tune(),\n  loss_reduction = tune(),                     ## first three: model complexity\n  sample_size = tune(),  mtry=tune(),       ## randomness\n  learn_rate = tune()                          ## step size\n) %&gt;%\n  set_engine(\"xgboost\") %&gt;%\n  set_mode(\"classification\")\n\nxgb_spec\n\n\nBoosted Tree Model Specification (classification)\n\nMain Arguments:\n  mtry = tune()\n  trees = 10\n  min_n = tune()\n  tree_depth = tune()\n  learn_rate = tune()\n  loss_reduction = tune()\n  sample_size = tune()\n\nComputational engine: xgboost \n\n\nxgb tunning grid\n\n\nCode\nxgb_tune_grid= grid_latin_hypercube(\n  tree_depth(),learn_rate(),loss_reduction(),min_n(),\n  sample_size=sample_prop(),finalize(mtry(),data_train),\n  size=50)\n\nhead(xgb_tune_grid)\n\n\n# A tibble: 6 × 6\n  tree_depth learn_rate loss_reduction min_n sample_size  mtry\n       &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt; &lt;int&gt;\n1          2   3.42e- 6       8.02e- 9    32       0.734     3\n2          7   4.05e- 5       2.42e- 1    25       0.393     7\n3         14   4.98e- 4       5.17e-10     4       0.465     3\n4         12   4.33e- 8       8.46e- 7     8       0.485     9\n5         10   4.00e-10       2.81e- 5    14       0.387     9\n6          7   7.24e- 5       8.03e- 2     9       0.105    11\n\n\n\n\n3.2.5 lightGBM Boost tree\n\n\nCode\nlightgbm_spec &lt;- boost_tree(\n  trees = 10,\n  tree_depth = tune(), min_n = tune(),\n  loss_reduction = tune(),                     ## first three: model complexity\n  sample_size = tune(),   mtry=tune(),     ## randomness\n  learn_rate = tune()                          ## step size\n) %&gt;%\n  set_engine(\"lightgbm\") %&gt;%\n  set_mode(\"classification\")\n\nlightgbm_spec\n\n\nBoosted Tree Model Specification (classification)\n\nMain Arguments:\n  mtry = tune()\n  trees = 10\n  min_n = tune()\n  tree_depth = tune()\n  learn_rate = tune()\n  loss_reduction = tune()\n  sample_size = tune()\n\nComputational engine: lightgbm \n\n\n\n\nCode\nlightgbm_grid= grid_latin_hypercube(\n  tree_depth(),learn_rate(),loss_reduction(),min_n(),\n  sample_size=sample_prop(),finalize(mtry(),data_train),\n  size=50)\n\nhead(lightgbm_grid)\n\n\n# A tibble: 6 × 6\n  tree_depth learn_rate loss_reduction min_n sample_size  mtry\n       &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt; &lt;int&gt;\n1         10   1.14e-10       1.09e- 3    13       0.682     1\n2          6   1.25e- 5       1.81e+ 1    19       0.265     6\n3          2   3.59e- 6       1.55e- 5    18       0.860     8\n4          3   5.01e- 8       2.34e-10    20       0.108     6\n5         15   2.98e- 2       2.05e- 6    21       0.341     5\n6         13   2.28e- 3       2.52e- 7    34       0.124     4",
    "crumbs": [
      "hotel classification model",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/6 classification Tidy Modeling.html#workflow-set",
    "href": "hotel classification model/6 classification Tidy Modeling.html#workflow-set",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "3.3 workflow set",
    "text": "3.3 workflow set\n\n\nCode\nlibrary(finetune)\ncntl   &lt;- control_grid(save_pred     = TRUE,\n                       save_workflow = TRUE)\n\n\nusing workflow set instead of workflow to combine many models.\n\n\nCode\nworkflow_set &lt;-\n  workflow_set(\n    preproc = list(data_rec),\n    models = list(glm   = glm_spec,\n                  tree  = tune_spec,\n                  knn=knn_spec,\n                  xgb=xgb_spec,\n                  lightgbm=lightgbm_spec\n                  )\n  ) %&gt;% option_add(grid = decision_tree_tune_grid, id = \"recipe_tree\")  %&gt;% \n  option_add(grid = xgb_tune_grid, id = \"recipe_xgb\")  %&gt;% \n  option_add(grid = lightgbm_grid, id = \"recipe_lightgbm\") \n\n\n\n\nCode\nworkflow_set %&gt;%\n  option_add_parameters()\n\n\n# A workflow set/tibble: 5 × 4\n  wflow_id        info             option    result    \n  &lt;chr&gt;           &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    \n1 recipe_glm      &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;\n2 recipe_tree     &lt;tibble [1 × 4]&gt; &lt;opts[2]&gt; &lt;list [0]&gt;\n3 recipe_knn      &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;\n4 recipe_xgb      &lt;tibble [1 × 4]&gt; &lt;opts[2]&gt; &lt;list [0]&gt;\n5 recipe_lightgbm &lt;tibble [1 × 4]&gt; &lt;opts[2]&gt; &lt;list [0]&gt;",
    "crumbs": [
      "hotel classification model",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/6 classification Tidy Modeling.html#training-and-tunning",
    "href": "hotel classification model/6 classification Tidy Modeling.html#training-and-tunning",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "3.4 training and tunning",
    "text": "3.4 training and tunning\n\n\nCode\nlibrary(finetune)\ndoParallel::registerDoParallel()\n\nmodel_set_res = workflow_set  %&gt;% \n  workflow_map(\n              grid = 20,\n               resamples = folds,\n               control = cntl\n  )\n\n\n\n\nCode\nrank_results(model_set_res,\n             rank_metric = \"roc_auc\",\n             select_best = TRUE)  %&gt;% \n  gt()\n\n\n\n\n\n\n\n\n\nwflow_id\n.config\n.metric\nmean\nstd_err\nn\npreprocessor\nmodel\nrank\n\n\n\n\nrecipe_xgb\nPreprocessor1_Model19\naccuracy\n0.7659429\n0.002672714\n10\nrecipe\nboost_tree\n1\n\n\nrecipe_xgb\nPreprocessor1_Model19\nroc_auc\n0.8351222\n0.003292009\n10\nrecipe\nboost_tree\n1\n\n\nrecipe_lightgbm\nPreprocessor1_Model05\naccuracy\n0.7679429\n0.003942857\n10\nrecipe\nboost_tree\n2\n\n\nrecipe_lightgbm\nPreprocessor1_Model05\nroc_auc\n0.8328707\n0.003144983\n10\nrecipe\nboost_tree\n2\n\n\nrecipe_tree\nPreprocessor1_Model02\naccuracy\n0.7465143\n0.007227285\n10\nrecipe\ndecision_tree\n3\n\n\nrecipe_tree\nPreprocessor1_Model02\nroc_auc\n0.8179011\n0.004984221\n10\nrecipe\ndecision_tree\n3\n\n\nrecipe_glm\nPreprocessor1_Model1\naccuracy\n0.7581714\n0.001141428\n10\nrecipe\nlogistic_reg\n4\n\n\nrecipe_glm\nPreprocessor1_Model1\nroc_auc\n0.7979514\n0.004063108\n10\nrecipe\nlogistic_reg\n4\n\n\nrecipe_knn\nPreprocessor1_Model1\naccuracy\n0.7366857\n0.001567354\n10\nrecipe\nnearest_neighbor\n5\n\n\nrecipe_knn\nPreprocessor1_Model1\nroc_auc\n0.7849985\n0.004460053\n10\nrecipe\nnearest_neighbor\n5\n\n\n\n\n\n\n\n\n\n\nCode\nmodel_set_res |&gt; autoplot()\n\n\n\n\n\n\n\n\n\n\n\nCode\nmodel_set_res |&gt; autoplot( id= 'recipe_xgb')\n\n\n\n\n\n\n\n\n\nselect best model:logistic glm model\n\n\nCode\nbest_model_id &lt;- \"recipe_xgb\"\n\n\nselect best parameters\n\n\nCode\nbest_fit &lt;-\n  model_set_res |&gt;\n  extract_workflow_set_result(best_model_id) |&gt;\n  select_best(metric = \"accuracy\")\n\n\n\n\nCode\n# create workflow for best model\nfinal_workflow &lt;-\n  model_set_res |&gt;\n  extract_workflow(best_model_id) |&gt;\n  finalize_workflow(best_fit)",
    "crumbs": [
      "hotel classification model",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/6 classification Tidy Modeling.html#last-fit",
    "href": "hotel classification model/6 classification Tidy Modeling.html#last-fit",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "3.5 last fit",
    "text": "3.5 last fit\n\n\nCode\nfinal_fit &lt;-\n  final_workflow |&gt;\n  last_fit(data_split)",
    "crumbs": [
      "hotel classification model",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/6 classification Tidy Modeling.html#evaluate",
    "href": "hotel classification model/6 classification Tidy Modeling.html#evaluate",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "4.1 Evaluate",
    "text": "4.1 Evaluate\n\n\nCode\nfinal_fit %&gt;%\n  collect_metrics()\n\n\n# A tibble: 2 × 4\n  .metric  .estimator .estimate .config             \n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               \n1 accuracy binary         0.754 Preprocessor1_Model1\n2 roc_auc  binary         0.774 Preprocessor1_Model1\n\n\n\n\nCode\nall_metrics &lt;- metric_set(accuracy, recall, precision, f_meas, kap, sens, spec)\n\na=final_fit %&gt;% collect_predictions()\n\nall_metrics(a, truth = target_variable,estimate = .pred_class)\n\n\n# A tibble: 7 × 3\n  .metric   .estimator .estimate\n  &lt;chr&gt;     &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy  binary         0.754\n2 recall    binary         0.690\n3 precision binary         0.201\n4 f_meas    binary         0.311\n5 kap       binary         0.213\n6 sens      binary         0.690\n7 spec      binary         0.760\n\n\n\n\nCode\nfinal_fit %&gt;%\n  collect_predictions() %&gt;% \n  roc_curve(target_variable, .pred_children) %&gt;% \n  autoplot()\n\n\n\n\n\n\n\n\n\n\n\nCode\nfinal_tree &lt;- extract_workflow(final_fit)\nfinal_tree\n\n\n══ Workflow [trained] ══════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: boost_tree()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n5 Recipe Steps\n\n• step_rm()\n• step_downsample()\n• step_dummy()\n• step_zv()\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\n##### xgb.Booster\nraw: 11.6 Kb \ncall:\n  xgboost::xgb.train(params = list(eta = 0.00470774296245284, max_depth = 1L, \n    gamma = 5.1538567202903, colsample_bytree = 1, colsample_bynode = 0.454545454545455, \n    min_child_weight = 18L, subsample = 0.133142875451595), data = x$data, \n    nrounds = 10, watchlist = x$watchlist, verbose = 0, nthread = 1, \n    objective = \"binary:logistic\")\nparams (as set within xgb.train):\n  eta = \"0.00470774296245284\", max_depth = \"1\", gamma = \"5.1538567202903\", colsample_bytree = \"1\", colsample_bynode = \"0.454545454545455\", min_child_weight = \"18\", subsample = \"0.133142875451595\", nthread = \"1\", objective = \"binary:logistic\", validate_parameters = \"TRUE\"\nxgb.attributes:\n  niter\ncallbacks:\n  cb.evaluation.log()\n# of features: 22 \nniter: 10\nnfeatures : 22 \nevaluation_log:\n     iter training_logloss\n    &lt;num&gt;            &lt;num&gt;\n        1        0.6924354\n        2        0.6924197\n---                       \n        9        0.6891105\n       10        0.6889369\n\n\n\n\nCode\nlibrary(vip)\n\nfinal_tree %&gt;% \n  extract_fit_parsnip() %&gt;% \n  vip()",
    "crumbs": [
      "hotel classification model",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/6 classification Tidy Modeling.html#save-model",
    "href": "hotel classification model/6 classification Tidy Modeling.html#save-model",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "4.2 save model",
    "text": "4.2 save model\ncheck model size\n\n\nCode\nlibrary(lobstr)\nobj_size(final_tree)\n\n\n3.44 MB\n\n\nbundle and save model\n\n\nCode\nlibrary(bundle)\nmodel_bundle &lt;- bundle(final_tree)\n\n\n\n\nCode\nsaveRDS(model_bundle,'level 6 classification decision tree hotel model.RDS')",
    "crumbs": [
      "hotel classification model",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/6 classification Tidy Modeling.html#make-predication",
    "href": "hotel classification model/6 classification Tidy Modeling.html#make-predication",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "4.3 make predication",
    "text": "4.3 make predication\nload model and unbundle\n\n\nCode\nmodel=readRDS('level 6 classification decision tree hotel model.RDS')\n\nmodel &lt;- unbundle(model)\n\n\n\n\nCode\nfinal_prediction=predict(model,data_valid)\n\nhead(final_prediction)\n\n\n# A tibble: 6 × 1\n  .pred_class\n  &lt;fct&gt;      \n1 none       \n2 children   \n3 children   \n4 none       \n5 children   \n6 none       \n\n\n\n\nCode\nfinal_prediction_data=cbind(data_valid,final_prediction)\n\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction children none\n  children      541 2217\n  none          244 6998\n\n\n\n\nCode\naccuracy(final_prediction_data, truth = target_variable, estimate = .pred_class)\n\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy binary         0.754\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(target_variable)%&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   target_variable [2]\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 children          785\n2 none             9215\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(.pred_class) %&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   .pred_class [2]\n  .pred_class     n\n  &lt;fct&gt;       &lt;int&gt;\n1 children     2758\n2 none         7242\n\n\n\n\nCode\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction children none\n  children      541 2217\n  none          244 6998",
    "crumbs": [
      "hotel classification model",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "hotel classification model/4 classification Tidy Modeling.html",
    "href": "hotel classification model/4 classification Tidy Modeling.html",
    "title": "Classification Model with recipe,workflow,tuning",
    "section": "",
    "text": "Level 4 classification Tidy Modeling with 1 tuning model and 1 recipe :\ntuning decision tree model with rpart engine(tunning:cost_complexity,tree_depth) with tune_grid()",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,tuning"
    ]
  },
  {
    "objectID": "hotel classification model/4 classification Tidy Modeling.html#read-data",
    "href": "hotel classification model/4 classification Tidy Modeling.html#read-data",
    "title": "Classification Model with recipe,workflow,tuning",
    "section": "2.1 read data",
    "text": "2.1 read data\n\n\nCode\nlibrary(tidyverse)\n\nhotels &lt;- readr::read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-11/hotels.csv\")\n\n\nhotel_stays &lt;- hotels %&gt;%\n  filter(is_canceled == 0) %&gt;%\n  mutate(\n    children = case_when(\n      children + babies &gt; 0 ~ \"children\",\n      TRUE ~ \"none\"\n    ),\n    required_car_parking_spaces = case_when(\n      required_car_parking_spaces &gt; 0 ~ \"parking\",\n      TRUE ~ \"none\"\n    )\n  ) %&gt;%\n  select(-is_canceled, -reservation_status, -babies)",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,tuning"
    ]
  },
  {
    "objectID": "hotel classification model/4 classification Tidy Modeling.html#data-split",
    "href": "hotel classification model/4 classification Tidy Modeling.html#data-split",
    "title": "Classification Model with recipe,workflow,tuning",
    "section": "2.2 data split",
    "text": "2.2 data split\n\n\nPrepare & Split Data\nall_hotels_df &lt;- hotel_stays %&gt;%\n  select(\n    children, hotel, arrival_date_month, meal, adr, adults,\n    required_car_parking_spaces, total_of_special_requests,\n    stays_in_week_nights, stays_in_weekend_nights\n  ) %&gt;%\n  mutate_if(is.character, factor) %&gt;% rename(target_variable=children) %&gt;% mutate(rownum= row_number())\n\nhotels_df=all_hotels_df%&gt;% sample_n(50000) \n\nhold_hotels_df &lt;- anti_join(all_hotels_df, hotels_df, by='rownum')\n\n\n#all_hotels_df=all_hotels_df %&gt;% select(-rownum)\n#hotels_df=hotels_df %&gt;% select(-rownum)\n#all_hotels_df=all_hotels_df %&gt;% select(-rownum)\n\n\n\n\nCode\nset.seed(1234)\n\ndata_split &lt;- initial_validation_split(data=hotels_df, prop = c(0.7,0.2))\n\ndata_train=training(data_split)  \n\ndata_test=testing(data_split)  \n\ndata_valid=validation(data_split)\n\n\n\n\nCode\ndim(data_train)\n\n\n[1] 35000    11\n\n\n\n\nCode\ndim(data_test)\n\n\n[1] 5000   11\n\n\n\n\nCode\ndim(data_valid)\n\n\n[1] 10000    11\n\n\n10 fold for tunning\n\n\nCode\nset.seed(234)\nfolds &lt;- vfold_cv(data_train,v=10)",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,tuning"
    ]
  },
  {
    "objectID": "hotel classification model/4 classification Tidy Modeling.html#recipe",
    "href": "hotel classification model/4 classification Tidy Modeling.html#recipe",
    "title": "Classification Model with recipe,workflow,tuning",
    "section": "3.1 recipe",
    "text": "3.1 recipe\nbecasue the target class is not balance so using downsample\n\n\nCode\ndata_rec &lt;- recipe(target_variable ~ ., data = data_train) %&gt;%\n  step_rm(rownum) %&gt;% \n  step_downsample(target_variable) %&gt;%\n  step_dummy(all_nominal(), -all_outcomes()) %&gt;%\n  step_zv(all_numeric()) %&gt;%\n  step_normalize(all_numeric())",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,tuning"
    ]
  },
  {
    "objectID": "hotel classification model/4 classification Tidy Modeling.html#model",
    "href": "hotel classification model/4 classification Tidy Modeling.html#model",
    "title": "Classification Model with recipe,workflow,tuning",
    "section": "3.2 model",
    "text": "3.2 model\ntree model with cost_complexity and tree_depth to tune\n\n\nCode\ntune_spec &lt;- \n  decision_tree(\n    cost_complexity = tune(),\n    tree_depth = tune()\n  ) %&gt;% \n  set_engine(\"rpart\") %&gt;% \n  set_mode(\"classification\")\n\n\n\n\nCode\ntune_spec\n\n\nDecision Tree Model Specification (classification)\n\nMain Arguments:\n  cost_complexity = tune()\n  tree_depth = tune()\n\nComputational engine: rpart \n\n\n\n\nCode\ntree_grid &lt;- grid_regular(cost_complexity(),\n                          tree_depth(),\n                          levels = 5)\n\ntree_grid\n\n\n# A tibble: 25 × 2\n   cost_complexity tree_depth\n             &lt;dbl&gt;      &lt;int&gt;\n 1    0.0000000001          1\n 2    0.0000000178          1\n 3    0.00000316            1\n 4    0.000562              1\n 5    0.1                   1\n 6    0.0000000001          4\n 7    0.0000000178          4\n 8    0.00000316            4\n 9    0.000562              4\n10    0.1                   4\n# ℹ 15 more rows\n\n\n\n\nCode\ntree_grid %&gt;% count(tree_depth)\n\n\n# A tibble: 5 × 2\n  tree_depth     n\n       &lt;int&gt; &lt;int&gt;\n1          1     5\n2          4     5\n3          8     5\n4         11     5\n5         15     5",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,tuning"
    ]
  },
  {
    "objectID": "hotel classification model/4 classification Tidy Modeling.html#workflow",
    "href": "hotel classification model/4 classification Tidy Modeling.html#workflow",
    "title": "Classification Model with recipe,workflow,tuning",
    "section": "3.3 workflow",
    "text": "3.3 workflow\n\n\nCode\nmodel_workflow =\n  workflow() %&gt;% \n  add_model(tune_spec) %&gt;% \n  add_recipe(data_rec)\n\n\n\n\nCode\ncntl   &lt;- control_grid(save_pred     = TRUE,\n                       save_workflow = TRUE)",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,tuning"
    ]
  },
  {
    "objectID": "hotel classification model/4 classification Tidy Modeling.html#training-and-tunning",
    "href": "hotel classification model/4 classification Tidy Modeling.html#training-and-tunning",
    "title": "Classification Model with recipe,workflow,tuning",
    "section": "3.4 training and tunning",
    "text": "3.4 training and tunning\n\n\nCode\ntree_res = model_workflow %&gt;% \n  tune_grid(\n    resamples = folds,\n    grid = tree_grid,\n    control   = cntl,\n    )\n\n\n\n\nCode\ntree_res\n\n\n# Tuning results\n# 10-fold cross-validation \n# A tibble: 10 × 5\n   splits               id     .metrics          .notes           .predictions\n   &lt;list&gt;               &lt;chr&gt;  &lt;list&gt;            &lt;list&gt;           &lt;list&gt;      \n 1 &lt;split [31500/3500]&gt; Fold01 &lt;tibble [50 × 6]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    \n 2 &lt;split [31500/3500]&gt; Fold02 &lt;tibble [50 × 6]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    \n 3 &lt;split [31500/3500]&gt; Fold03 &lt;tibble [50 × 6]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    \n 4 &lt;split [31500/3500]&gt; Fold04 &lt;tibble [50 × 6]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    \n 5 &lt;split [31500/3500]&gt; Fold05 &lt;tibble [50 × 6]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    \n 6 &lt;split [31500/3500]&gt; Fold06 &lt;tibble [50 × 6]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    \n 7 &lt;split [31500/3500]&gt; Fold07 &lt;tibble [50 × 6]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    \n 8 &lt;split [31500/3500]&gt; Fold08 &lt;tibble [50 × 6]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    \n 9 &lt;split [31500/3500]&gt; Fold09 &lt;tibble [50 × 6]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    \n10 &lt;split [31500/3500]&gt; Fold10 &lt;tibble [50 × 6]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    \n\n\n\n\nCode\ntree_res %&gt;% \n  collect_metrics()\n\n\n# A tibble: 50 × 8\n   cost_complexity tree_depth .metric  .estimator  mean     n std_err .config   \n             &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;     \n 1    0.0000000001          1 accuracy binary     0.806    10 0.0108  Preproces…\n 2    0.0000000001          1 roc_auc  binary     0.686    10 0.00390 Preproces…\n 3    0.0000000178          1 accuracy binary     0.806    10 0.0108  Preproces…\n 4    0.0000000178          1 roc_auc  binary     0.686    10 0.00390 Preproces…\n 5    0.00000316            1 accuracy binary     0.806    10 0.0108  Preproces…\n 6    0.00000316            1 roc_auc  binary     0.686    10 0.00390 Preproces…\n 7    0.000562              1 accuracy binary     0.806    10 0.0108  Preproces…\n 8    0.000562              1 roc_auc  binary     0.686    10 0.00390 Preproces…\n 9    0.1                   1 accuracy binary     0.806    10 0.0108  Preproces…\n10    0.1                   1 roc_auc  binary     0.686    10 0.00390 Preproces…\n# ℹ 40 more rows\n\n\n\n\nCode\ntree_res %&gt;%\n  collect_metrics() %&gt;%\n  mutate(tree_depth = factor(tree_depth)) %&gt;%\n  ggplot(aes(cost_complexity, mean, color = tree_depth)) +\n  geom_line(size = 1.5, alpha = 0.6) +\n  geom_point(size = 2) +\n  facet_wrap(~ .metric, scales = \"free\", nrow = 2) +\n  scale_x_log10(labels = scales::label_number()) +\n  scale_color_viridis_d(option = \"plasma\", begin = .9, end = 0)\n\n\n\n\n\n\n\n\n\n\n\nCode\ntree_res %&gt;%\n  show_best(\"accuracy\")\n\n\n# A tibble: 5 × 8\n  cost_complexity tree_depth .metric  .estimator  mean     n std_err .config    \n            &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;      \n1    0.0000000001          1 accuracy binary     0.806    10  0.0108 Preprocess…\n2    0.0000000178          1 accuracy binary     0.806    10  0.0108 Preprocess…\n3    0.00000316            1 accuracy binary     0.806    10  0.0108 Preprocess…\n4    0.000562              1 accuracy binary     0.806    10  0.0108 Preprocess…\n5    0.1                   1 accuracy binary     0.806    10  0.0108 Preprocess…\n\n\n\n\nCode\nbest_tree &lt;- tree_res %&gt;%\n  select_best(\"accuracy\")\n\nbest_tree\n\n\n# A tibble: 1 × 3\n  cost_complexity tree_depth .config              \n            &lt;dbl&gt;      &lt;int&gt; &lt;chr&gt;                \n1    0.0000000001          1 Preprocessor1_Model01\n\n\n\n\nCode\nfinal_wf &lt;- \n  model_workflow %&gt;% \n  finalize_workflow(best_tree)\n\n\nfinal_wf\n\n\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: decision_tree()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n5 Recipe Steps\n\n• step_rm()\n• step_downsample()\n• step_dummy()\n• step_zv()\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\nDecision Tree Model Specification (classification)\n\nMain Arguments:\n  cost_complexity = 1e-10\n  tree_depth = 1\n\nComputational engine: rpart",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,tuning"
    ]
  },
  {
    "objectID": "hotel classification model/4 classification Tidy Modeling.html#last-fit",
    "href": "hotel classification model/4 classification Tidy Modeling.html#last-fit",
    "title": "Classification Model with recipe,workflow,tuning",
    "section": "3.5 last fit",
    "text": "3.5 last fit\n\n\nCode\nfinal_fit &lt;- \n  final_wf %&gt;%\n  last_fit(data_split)",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,tuning"
    ]
  },
  {
    "objectID": "hotel classification model/4 classification Tidy Modeling.html#evaluate",
    "href": "hotel classification model/4 classification Tidy Modeling.html#evaluate",
    "title": "Classification Model with recipe,workflow,tuning",
    "section": "4.1 Evaluate",
    "text": "4.1 Evaluate\n\n\nCode\nfinal_fit %&gt;%\n  collect_metrics()\n\n\n# A tibble: 2 × 4\n  .metric  .estimator .estimate .config             \n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               \n1 accuracy binary         0.789 Preprocessor1_Model1\n2 roc_auc  binary         0.701 Preprocessor1_Model1\n\n\n\n\nCode\nfinal_fit %&gt;%\n  collect_predictions() %&gt;% \n  roc_curve(target_variable, .pred_children) %&gt;% \n  autoplot()\n\n\n\n\n\n\n\n\n\n\n\nCode\nfinal_tree &lt;- extract_workflow(final_fit)\nfinal_tree\n\n\n══ Workflow [trained] ══════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: decision_tree()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n5 Recipe Steps\n\n• step_rm()\n• step_downsample()\n• step_dummy()\n• step_zv()\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\nn= 5754 \n\nnode), split, n, loss, yval, (yprob)\n      * denotes terminal node\n\n1) root 5754 2877 children (0.5000000 0.5000000)  \n  2) adr&gt;=0.1165396 2235  553 children (0.7525727 0.2474273) *\n  3) adr&lt; 0.1165396 3519 1195 none (0.3395851 0.6604149) *\n\n\n\n\nCode\nlibrary(vip)\n\nfinal_tree %&gt;% \n  extract_fit_parsnip() %&gt;% \n  vip()",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,tuning"
    ]
  },
  {
    "objectID": "hotel classification model/4 classification Tidy Modeling.html#save-model",
    "href": "hotel classification model/4 classification Tidy Modeling.html#save-model",
    "title": "Classification Model with recipe,workflow,tuning",
    "section": "4.2 save model",
    "text": "4.2 save model\ncheck model size\n\n\nCode\nlibrary(lobstr)\nobj_size(final_tree)\n\n\n3.48 MB\n\n\nbundle and save model\n\n\nCode\nlibrary(bundle)\nmodel_bundle &lt;- bundle(final_tree)\n\n\n\n\nCode\nsaveRDS(model_bundle,'level 4 classification decision tree hotel model.RDS')",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,tuning"
    ]
  },
  {
    "objectID": "hotel classification model/4 classification Tidy Modeling.html#make-predication",
    "href": "hotel classification model/4 classification Tidy Modeling.html#make-predication",
    "title": "Classification Model with recipe,workflow,tuning",
    "section": "4.3 make predication",
    "text": "4.3 make predication\nload model and unbundle\n\n\nCode\nmodel=readRDS('level 4 classification decision tree hotel model.RDS')\n\nmodel &lt;- unbundle(model)\n\n\n\n\nCode\nfinal_prediction=predict(model,data_valid)\n\nhead(final_prediction)\n\n\n# A tibble: 6 × 1\n  .pred_class\n  &lt;fct&gt;      \n1 children   \n2 none       \n3 none       \n4 none       \n5 children   \n6 children   \n\n\n\n\nCode\nfinal_prediction_data=cbind(data_valid,final_prediction)\n\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction children none\n  children      467 1879\n  none          288 7366\n\n\n\n\nCode\naccuracy(final_prediction_data, truth = target_variable, estimate = .pred_class)\n\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy binary         0.783\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(target_variable)%&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   target_variable [2]\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 children          755\n2 none             9245\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(.pred_class) %&gt;% count()\n\n\n# A tibble: 2 × 2\n# Groups:   .pred_class [2]\n  .pred_class     n\n  &lt;fct&gt;       &lt;int&gt;\n1 children     2346\n2 none         7654\n\n\n\n\nCode\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction children none\n  children      467 1879\n  none          288 7366",
    "crumbs": [
      "hotel classification model",
      "Classification Model with recipe,workflow,tuning"
    ]
  },
  {
    "objectID": "tensorflow/Level 1 Regression tensorflow.html",
    "href": "tensorflow/Level 1 Regression tensorflow.html",
    "title": "Level 1 Regression Tensorflow model",
    "section": "",
    "text": "Code\nimport tensorflow_decision_forests as tfdf\nimport pandas as pd\n\nimport tensorflow as tf\nimport tensorflow_decision_forests as tfdf\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n\n\n\nCode\nprint(\"TensorFlow v\" + tf.__version__)\nprint(\"TensorFlow Decision Forests v\" + tfdf.__version__)\n\n\nTensorFlow v2.16.1\nTensorFlow Decision Forests v1.9.0"
  },
  {
    "objectID": "tensorflow/Level 1 Regression tensorflow.html#read-data",
    "href": "tensorflow/Level 1 Regression tensorflow.html#read-data",
    "title": "Level 1 Regression Tensorflow model",
    "section": "2.1 read data",
    "text": "2.1 read data\n\n\nCode\ntrain_file_path = \"data/train.csv\"\ndataset_df = pd.read_csv(train_file_path)\nprint(\"Full train dataset shape is {}\".format(dataset_df.shape))\n\n\nFull train dataset shape is (1460, 81)\n\n\n\n\nCode\ndataset_df.head(3)\n\n\n\n\n\n\n\n\n\n\nId\nMSSubClass\nMSZoning\nLotFrontage\nLotArea\nStreet\nAlley\nLotShape\nLandContour\nUtilities\n...\nPoolArea\nPoolQC\nFence\nMiscFeature\nMiscVal\nMoSold\nYrSold\nSaleType\nSaleCondition\nSalePrice\n\n\n\n\n0\n1\n60\nRL\n65.0\n8450\nPave\nNaN\nReg\nLvl\nAllPub\n...\n0\nNaN\nNaN\nNaN\n0\n2\n2008\nWD\nNormal\n208500\n\n\n1\n2\n20\nRL\n80.0\n9600\nPave\nNaN\nReg\nLvl\nAllPub\n...\n0\nNaN\nNaN\nNaN\n0\n5\n2007\nWD\nNormal\n181500\n\n\n2\n3\n60\nRL\n68.0\n11250\nPave\nNaN\nIR1\nLvl\nAllPub\n...\n0\nNaN\nNaN\nNaN\n0\n9\n2008\nWD\nNormal\n223500\n\n\n\n\n3 rows × 81 columns\n\n\n\n\n\n\nCode\ndataset_df = dataset_df.drop('Id', axis=1)\ndataset_df.head(3)\n\n\n\n\n\n\n\n\n\n\nMSSubClass\nMSZoning\nLotFrontage\nLotArea\nStreet\nAlley\nLotShape\nLandContour\nUtilities\nLotConfig\n...\nPoolArea\nPoolQC\nFence\nMiscFeature\nMiscVal\nMoSold\nYrSold\nSaleType\nSaleCondition\nSalePrice\n\n\n\n\n0\n60\nRL\n65.0\n8450\nPave\nNaN\nReg\nLvl\nAllPub\nInside\n...\n0\nNaN\nNaN\nNaN\n0\n2\n2008\nWD\nNormal\n208500\n\n\n1\n20\nRL\n80.0\n9600\nPave\nNaN\nReg\nLvl\nAllPub\nFR2\n...\n0\nNaN\nNaN\nNaN\n0\n5\n2007\nWD\nNormal\n181500\n\n\n2\n60\nRL\n68.0\n11250\nPave\nNaN\nIR1\nLvl\nAllPub\nInside\n...\n0\nNaN\nNaN\nNaN\n0\n9\n2008\nWD\nNormal\n223500\n\n\n\n\n3 rows × 80 columns\n\n\n\n\n\n\nCode\ndataset_df.info()\n\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 1460 entries, 0 to 1459\nData columns (total 80 columns):\n #   Column         Non-Null Count  Dtype  \n---  ------         --------------  -----  \n 0   MSSubClass     1460 non-null   int64  \n 1   MSZoning       1460 non-null   object \n 2   LotFrontage    1201 non-null   float64\n 3   LotArea        1460 non-null   int64  \n 4   Street         1460 non-null   object \n 5   Alley          91 non-null     object \n 6   LotShape       1460 non-null   object \n 7   LandContour    1460 non-null   object \n 8   Utilities      1460 non-null   object \n 9   LotConfig      1460 non-null   object \n 10  LandSlope      1460 non-null   object \n 11  Neighborhood   1460 non-null   object \n 12  Condition1     1460 non-null   object \n 13  Condition2     1460 non-null   object \n 14  BldgType       1460 non-null   object \n 15  HouseStyle     1460 non-null   object \n 16  OverallQual    1460 non-null   int64  \n 17  OverallCond    1460 non-null   int64  \n 18  YearBuilt      1460 non-null   int64  \n 19  YearRemodAdd   1460 non-null   int64  \n 20  RoofStyle      1460 non-null   object \n 21  RoofMatl       1460 non-null   object \n 22  Exterior1st    1460 non-null   object \n 23  Exterior2nd    1460 non-null   object \n 24  MasVnrType     588 non-null    object \n 25  MasVnrArea     1452 non-null   float64\n 26  ExterQual      1460 non-null   object \n 27  ExterCond      1460 non-null   object \n 28  Foundation     1460 non-null   object \n 29  BsmtQual       1423 non-null   object \n 30  BsmtCond       1423 non-null   object \n 31  BsmtExposure   1422 non-null   object \n 32  BsmtFinType1   1423 non-null   object \n 33  BsmtFinSF1     1460 non-null   int64  \n 34  BsmtFinType2   1422 non-null   object \n 35  BsmtFinSF2     1460 non-null   int64  \n 36  BsmtUnfSF      1460 non-null   int64  \n 37  TotalBsmtSF    1460 non-null   int64  \n 38  Heating        1460 non-null   object \n 39  HeatingQC      1460 non-null   object \n 40  CentralAir     1460 non-null   object \n 41  Electrical     1459 non-null   object \n 42  1stFlrSF       1460 non-null   int64  \n 43  2ndFlrSF       1460 non-null   int64  \n 44  LowQualFinSF   1460 non-null   int64  \n 45  GrLivArea      1460 non-null   int64  \n 46  BsmtFullBath   1460 non-null   int64  \n 47  BsmtHalfBath   1460 non-null   int64  \n 48  FullBath       1460 non-null   int64  \n 49  HalfBath       1460 non-null   int64  \n 50  BedroomAbvGr   1460 non-null   int64  \n 51  KitchenAbvGr   1460 non-null   int64  \n 52  KitchenQual    1460 non-null   object \n 53  TotRmsAbvGrd   1460 non-null   int64  \n 54  Functional     1460 non-null   object \n 55  Fireplaces     1460 non-null   int64  \n 56  FireplaceQu    770 non-null    object \n 57  GarageType     1379 non-null   object \n 58  GarageYrBlt    1379 non-null   float64\n 59  GarageFinish   1379 non-null   object \n 60  GarageCars     1460 non-null   int64  \n 61  GarageArea     1460 non-null   int64  \n 62  GarageQual     1379 non-null   object \n 63  GarageCond     1379 non-null   object \n 64  PavedDrive     1460 non-null   object \n 65  WoodDeckSF     1460 non-null   int64  \n 66  OpenPorchSF    1460 non-null   int64  \n 67  EnclosedPorch  1460 non-null   int64  \n 68  3SsnPorch      1460 non-null   int64  \n 69  ScreenPorch    1460 non-null   int64  \n 70  PoolArea       1460 non-null   int64  \n 71  PoolQC         7 non-null      object \n 72  Fence          281 non-null    object \n 73  MiscFeature    54 non-null     object \n 74  MiscVal        1460 non-null   int64  \n 75  MoSold         1460 non-null   int64  \n 76  YrSold         1460 non-null   int64  \n 77  SaleType       1460 non-null   object \n 78  SaleCondition  1460 non-null   object \n 79  SalePrice      1460 non-null   int64  \ndtypes: float64(3), int64(34), object(43)\nmemory usage: 912.6+ KB"
  },
  {
    "objectID": "tensorflow/Level 1 Regression tensorflow.html#data-pre",
    "href": "tensorflow/Level 1 Regression tensorflow.html#data-pre",
    "title": "Level 1 Regression Tensorflow model",
    "section": "2.2 data pre",
    "text": "2.2 data pre\n\n\nCode\nimport numpy as np\ndef split_dataset(dataset, test_ratio=0.30):\n  test_indices = np.random.rand(len(dataset)) &lt; test_ratio\n  return dataset[~test_indices], dataset[test_indices]\n\ntrain_ds_pd, valid_ds_pd = split_dataset(dataset_df)\nprint(\"{} examples in training, {} examples in testing.\".format(\n    len(train_ds_pd), len(valid_ds_pd)))\n\n\n1012 examples in training, 448 examples in testing.\n\n\n\n\nCode\nlabel = 'SalePrice'\ntrain_ds = tfdf.keras.pd_dataframe_to_tf_dataset(train_ds_pd, label=label, task = tfdf.keras.Task.REGRESSION)\nvalid_ds = tfdf.keras.pd_dataframe_to_tf_dataset(valid_ds_pd, label=label, task = tfdf.keras.Task.REGRESSION)"
  },
  {
    "objectID": "tensorflow/Level 1 Regression tensorflow.html#define-model-keras-random-forest",
    "href": "tensorflow/Level 1 Regression tensorflow.html#define-model-keras-random-forest",
    "title": "Level 1 Regression Tensorflow model",
    "section": "3.1 define model Keras random forest",
    "text": "3.1 define model Keras random forest\n\n\nCode\ntfdf.keras.get_all_models()\n\n\n[tensorflow_decision_forests.keras.RandomForestModel,\n tensorflow_decision_forests.keras.GradientBoostedTreesModel,\n tensorflow_decision_forests.keras.CartModel,\n tensorflow_decision_forests.keras.DistributedGradientBoostedTreesModel]\n\n\n\n\nCode\nrf = tfdf.keras.RandomForestModel(task = tfdf.keras.Task.REGRESSION)\nrf.compile(metrics=[\"mse\"]) # Optional, you can use this to include a list of eval metrics\n\n\nUse /var/folders/v3/pzt9c47n1nbcsmybsg_w0lhw0000gn/T/tmpfvd0haib as temporary training directory"
  },
  {
    "objectID": "tensorflow/Level 1 Regression tensorflow.html#train-model",
    "href": "tensorflow/Level 1 Regression tensorflow.html#train-model",
    "title": "Level 1 Regression Tensorflow model",
    "section": "3.2 train model",
    "text": "3.2 train model\n\n\nCode\nrf.fit(x=train_ds)\n\n\nReading training dataset...\nTraining dataset read in 0:00:01.592298. Found 1012 examples.\nTraining model...\nModel trained in 0:00:00.488444\nCompiling model...\nModel compiled.\n\n\n&lt;tf_keras.src.callbacks.History at 0x10572d850&gt;\n\n\n\n\nCode\ntfdf.model_plotter.plot_model_in_colab(rf, tree_idx=0, max_depth=3)\n\n\n\n\n\n\n\n\n\n\nCode\nimport matplotlib.pyplot as plt\nlogs = rf.make_inspector().training_logs()\nplt.plot([log.num_trees for log in logs], [log.evaluation.rmse for log in logs])\nplt.xlabel(\"Number of trees\")\nplt.ylabel(\"RMSE (out-of-bag)\")\nplt.show()\n\n\n\n\n\n\n\n\n\n\n\nCode\ninspector = rf.make_inspector()\ninspector.evaluation()\n\n\nEvaluation(num_examples=1012, accuracy=None, loss=None, rmse=29144.798502788246, ndcg=None, aucs=None, auuc=None, qini=None)\n\n\n\n\nCode\nevaluation = rf.evaluate(x=valid_ds,return_dict=True)\n\nfor name, value in evaluation.items():\n  print(f\"{name}: {value:.4f}\")\n\n\n1/1 [==============================] - ETA: 0s - loss: 0.0000e+00 - mse: 912837952.0000\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b1/1 [==============================] - 2s 2s/step - loss: 0.0000e+00 - mse: 912837952.0000\nloss: 0.0000\nmse: 912837952.0000\n\n\n\n\nCode\nfor name, value in evaluation.items():\n  mse=value\n\n\nRMSE\n\n\nCode\nimport math\nmath.sqrt(mse)\n\n\n30213.208237458002"
  },
  {
    "objectID": "tensorflow/Level 1 Regression tensorflow.html#variable-importances",
    "href": "tensorflow/Level 1 Regression tensorflow.html#variable-importances",
    "title": "Level 1 Regression Tensorflow model",
    "section": "3.3 Variable importances",
    "text": "3.3 Variable importances\n\n\nCode\nprint(f\"Available variable importances:\")\nfor importance in inspector.variable_importances().keys():\n  print(\"\\t\", importance)\n\n\nAvailable variable importances:\n     INV_MEAN_MIN_DEPTH\n     NUM_NODES\n     NUM_AS_ROOT\n     SUM_SCORE"
  },
  {
    "objectID": "Multiclass classification/6 multclass classification.html",
    "href": "Multiclass classification/6 multclass classification.html",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "",
    "text": "Level 6 classification Tidy Modeling:\nlogistic glm model\ntuning decision tree model with rpart engine(tunning:cost_complexity,tree_depth)\nKNN model with knn engine(knn_spec)\ntuning XG boost model (tunning:tree_depth , min_n,loss_reduction ,sample_size , mtry,learn_rate)\ntuning light gbm boost model(tunning:tree_depth , min_n,loss_reduction ,sample_size , mtry,learn_rate)",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/6 multclass classification.html#read-data",
    "href": "Multiclass classification/6 multclass classification.html#read-data",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "2.1 read data",
    "text": "2.1 read data\n\n\nCode\nlibrary(tidyverse)\n\ndf_train_raw &lt;- readr::read_csv(\"data/Train.csv\")\n\ndf_test_raw&lt;- readr::read_csv(\"data/Test.csv\")\n\n\n\n\nCode\ndf_train=df_train_raw %&gt;% mutate(target_variable=as.factor(Segmentation)) %&gt;% select(-Segmentation)\n#%&gt;% filter(target_variable %in% c('A','B'))\ndf_test=df_test_raw\n\n\n\n\nCode\nglimpse(df_train)\n\n\nRows: 8,068\nColumns: 11\n$ ID              &lt;dbl&gt; 462809, 462643, 466315, 461735, 462669, 461319, 460156…\n$ Gender          &lt;chr&gt; \"Male\", \"Female\", \"Female\", \"Male\", \"Female\", \"Male\", …\n$ Ever_Married    &lt;chr&gt; \"No\", \"Yes\", \"Yes\", \"Yes\", \"Yes\", \"Yes\", \"No\", \"No\", \"…\n$ Age             &lt;dbl&gt; 22, 38, 67, 67, 40, 56, 32, 33, 61, 55, 26, 19, 19, 70…\n$ Graduated       &lt;chr&gt; \"No\", \"Yes\", \"Yes\", \"Yes\", \"Yes\", \"No\", \"Yes\", \"Yes\", …\n$ Profession      &lt;chr&gt; \"Healthcare\", \"Engineer\", \"Engineer\", \"Lawyer\", \"Enter…\n$ Work_Experience &lt;dbl&gt; 1, NA, 1, 0, NA, 0, 1, 1, 0, 1, 1, 4, 0, NA, 0, 1, 9, …\n$ Spending_Score  &lt;chr&gt; \"Low\", \"Average\", \"Low\", \"High\", \"High\", \"Average\", \"L…\n$ Family_Size     &lt;dbl&gt; 4, 3, 1, 2, 6, 2, 3, 3, 3, 4, 3, 4, NA, 1, 1, 2, 5, 6,…\n$ Var_1           &lt;chr&gt; \"Cat_4\", \"Cat_4\", \"Cat_6\", \"Cat_6\", \"Cat_6\", \"Cat_6\", …\n$ target_variable &lt;fct&gt; D, A, B, B, A, C, C, D, D, C, A, D, D, A, B, C, D, B, …",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/6 multclass classification.html#data-split",
    "href": "Multiclass classification/6 multclass classification.html#data-split",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "2.2 data split",
    "text": "2.2 data split\n\n\nCode\nset.seed(1234)\n\ndata_split &lt;- initial_validation_split(data=df_train, prop = c(0.7,0.2))\n\ndata_train=training(data_split)  \n\ndata_test=testing(data_split)  \n\ndata_valid=validation(data_split)\n\n\n\n\nCode\ndim(data_train)\n\n\n[1] 5647   11\n\n\n\n\nCode\ndim(data_test)\n\n\n[1] 807  11\n\n\n\n\nCode\ndim(data_valid)\n\n\n[1] 1614   11\n\n\n10 fold for tunning\n\n\nCode\nset.seed(234)\nfolds &lt;- vfold_cv(data_train)",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/6 multclass classification.html#recipe",
    "href": "Multiclass classification/6 multclass classification.html#recipe",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "3.1 recipe",
    "text": "3.1 recipe\nbecasue the target class is not balance so using downsample\n\n\nCode\ndata_rec &lt;- recipe(target_variable ~ ., data = data_train) %&gt;%\n  step_rm(ID) %&gt;% \n  #step_downsample(target_variable) %&gt;%\n  step_impute_median(all_numeric(), -all_outcomes())%&gt;% \n  step_impute_mode(all_nominal(), -all_outcomes())%&gt;% \n  step_dummy(all_nominal(), -all_outcomes()) %&gt;%\n  step_zv(all_numeric()) %&gt;%\n  step_normalize(all_numeric())",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/6 multclass classification.html#model",
    "href": "Multiclass classification/6 multclass classification.html#model",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "3.2 model",
    "text": "3.2 model\n\n3.2.1 decision tree model with cost_complexity and tree_depth to tune\n\n\nCode\ntune_spec &lt;- \n  decision_tree(\n    cost_complexity = tune(),\n    tree_depth = tune()\n  ) %&gt;% \n  set_engine(\"rpart\") %&gt;% \n  set_mode(\"classification\")\n\n\n\n\nCode\ntune_spec |&gt; \n  extract_parameter_set_dials()\n\n\nCollection of 2 parameters for tuning\n\n      identifier            type    object\n cost_complexity cost_complexity nparam[+]\n      tree_depth      tree_depth nparam[+]\n\n\n\n\nCode\ndecision_tree_tune_grid &lt;- \n  tune_spec |&gt; \n  extract_parameter_set_dials() |&gt; \n  grid_latin_hypercube(size = 100)\n\n\n\n\n3.2.2 logistic glm model\nusing multinom_reg() since its multiclass classification\n\n\nCode\nglm_spec &lt;-\n  multinom_reg() |&gt;\n  set_engine(\"nnet\")\n\n\n\n\n3.2.3 KNN model\n\n\nCode\nknn_spec &lt;- nearest_neighbor() %&gt;%\n  set_engine(\"kknn\") %&gt;%\n  set_mode(\"classification\")\n\nknn_spec\n\n\nK-Nearest Neighbor Model Specification (classification)\n\nComputational engine: kknn \n\n\n\n\n3.2.4 XG Boost tree\n\n\nCode\nxgb_spec &lt;- boost_tree(\n  trees = 10,\n  tree_depth = tune(), min_n = tune(),\n  loss_reduction = tune(),                     ## first three: model complexity\n  sample_size = tune(),  mtry=tune(),       ## randomness\n  learn_rate = tune()                          ## step size\n) %&gt;%\n  set_engine(\"xgboost\") %&gt;%\n  set_mode(\"classification\")\n\nxgb_spec\n\n\nBoosted Tree Model Specification (classification)\n\nMain Arguments:\n  mtry = tune()\n  trees = 10\n  min_n = tune()\n  tree_depth = tune()\n  learn_rate = tune()\n  loss_reduction = tune()\n  sample_size = tune()\n\nComputational engine: xgboost \n\n\nxgb tunning grid\n\n\nCode\nxgb_tune_grid= grid_latin_hypercube(\n  tree_depth(),learn_rate(),loss_reduction(),min_n(),\n  sample_size=sample_prop(),finalize(mtry(),data_train),\n  size=10)\n\nhead(xgb_tune_grid)\n\n\n# A tibble: 6 × 6\n  tree_depth learn_rate loss_reduction min_n sample_size  mtry\n       &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt; &lt;int&gt;\n1          1   2.47e- 6       4.50e- 4    20       0.398    11\n2         15   1.41e- 7       1.35e-10     5       0.219     9\n3          7   1.51e- 8       1.89e- 3    27       0.942     2\n4         13   1.59e- 4       2.10e- 8    36       0.319     4\n5          8   2.73e- 2       5.16e- 1    33       0.183     6\n6          9   1.93e-10       5.17e- 5    10       0.905     3\n\n\n\n\n3.2.5 lightGBM Boost tree\n\n\nCode\nlightgbm_spec &lt;- boost_tree(\n  trees = 10,\n  tree_depth = tune(), min_n = tune(),\n  loss_reduction = tune(),                     ## first three: model complexity\n  sample_size = tune(),   mtry=tune(),     ## randomness\n  learn_rate = tune()                          ## step size\n) %&gt;%\n  set_engine(\"lightgbm\") %&gt;%\n  set_mode(\"classification\")\n\nlightgbm_spec\n\n\nBoosted Tree Model Specification (classification)\n\nMain Arguments:\n  mtry = tune()\n  trees = 10\n  min_n = tune()\n  tree_depth = tune()\n  learn_rate = tune()\n  loss_reduction = tune()\n  sample_size = tune()\n\nComputational engine: lightgbm \n\n\n\n\nCode\nlightgbm_grid= grid_latin_hypercube(\n  tree_depth(),learn_rate(),loss_reduction(),min_n(),\n  sample_size=sample_prop(),finalize(mtry(),data_train),\n  size=10)\n\nhead(lightgbm_grid)\n\n\n# A tibble: 6 × 6\n  tree_depth    learn_rate loss_reduction min_n sample_size  mtry\n       &lt;int&gt;         &lt;dbl&gt;          &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt; &lt;int&gt;\n1         13 0.00297         0.0000286       32       0.737     6\n2         11 0.00000110      0.0119          24       0.982     9\n3          5 0.00000671      0.0000000109    11       0.709     2\n4          4 0.00000000266   0.00140         34       0.619     9\n5          5 0.0000000602   24.2              6       0.432     4\n6          7 0.000112        0.000470         3       0.257     6",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/6 multclass classification.html#workflow-set",
    "href": "Multiclass classification/6 multclass classification.html#workflow-set",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "3.3 workflow set",
    "text": "3.3 workflow set\n\n\nCode\nlibrary(finetune)\ncntl   &lt;- control_grid(save_pred     = TRUE,\n                       save_workflow = TRUE)\n\n\nusing workflow set instead of workflow to combine many models.\n\n\nCode\nworkflow_set &lt;-\n  workflow_set(\n    preproc = list(data_rec),\n    models = list(glm   = glm_spec,\n                  tree  = tune_spec,\n                  knn=knn_spec,\n                  xgb=xgb_spec,\n                  lightgbm=lightgbm_spec\n                  )\n  ) %&gt;%\n  #option_add(grid = decision_tree_tune_grid, id = \"recipe_tree\")  %&gt;% \n  option_add(grid = xgb_tune_grid, id = \"recipe_xgb\")  %&gt;% \n  option_add(grid = lightgbm_grid, id = \"recipe_lightgbm\") \n\n\n\n\nCode\nworkflow_set %&gt;%\n  option_add_parameters()\n\n\n# A workflow set/tibble: 5 × 4\n  wflow_id        info             option    result    \n  &lt;chr&gt;           &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    \n1 recipe_glm      &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;\n2 recipe_tree     &lt;tibble [1 × 4]&gt; &lt;opts[1]&gt; &lt;list [0]&gt;\n3 recipe_knn      &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;\n4 recipe_xgb      &lt;tibble [1 × 4]&gt; &lt;opts[2]&gt; &lt;list [0]&gt;\n5 recipe_lightgbm &lt;tibble [1 × 4]&gt; &lt;opts[2]&gt; &lt;list [0]&gt;",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/6 multclass classification.html#training-and-tunning",
    "href": "Multiclass classification/6 multclass classification.html#training-and-tunning",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "3.4 training and tunning",
    "text": "3.4 training and tunning\n\n\nCode\nlibrary(finetune)\ndoParallel::registerDoParallel()\n\nmodel_set_res = workflow_set  %&gt;% \n  workflow_map(\n              grid = 10,\n               resamples = folds,\n               control = cntl\n  )\n\n\n\n\nCode\nrank_results(model_set_res,\n             rank_metric = \"accuracy\",\n             select_best = TRUE)  %&gt;% \n  gt()\n\n\n\n\n\n\n\n\n\nwflow_id\n.config\n.metric\nmean\nstd_err\nn\npreprocessor\nmodel\nrank\n\n\n\n\nrecipe_xgb\nPreprocessor1_Model06\naccuracy\n0.5082270\n8.273046e-03\n10\nrecipe\nboost_tree\n1\n\n\nrecipe_xgb\nPreprocessor1_Model06\nbrier_class\n0.3732666\n3.222901e-05\n10\nrecipe\nboost_tree\n1\n\n\nrecipe_xgb\nPreprocessor1_Model06\nroc_auc\n0.7630375\n3.825994e-03\n10\nrecipe\nboost_tree\n1\n\n\nrecipe_tree\nPreprocessor1_Model02\naccuracy\n0.5080500\n6.889790e-03\n10\nrecipe\ndecision_tree\n2\n\n\nrecipe_tree\nPreprocessor1_Model02\nbrier_class\n0.3078043\n2.744968e-03\n10\nrecipe\ndecision_tree\n2\n\n\nrecipe_tree\nPreprocessor1_Model02\nroc_auc\n0.7479156\n5.425592e-03\n10\nrecipe\ndecision_tree\n2\n\n\nrecipe_glm\nPreprocessor1_Model1\naccuracy\n0.5032753\n8.839371e-03\n10\nrecipe\nmultinom_reg\n3\n\n\nrecipe_glm\nPreprocessor1_Model1\nbrier_class\n0.3048293\n2.551260e-03\n10\nrecipe\nmultinom_reg\n3\n\n\nrecipe_glm\nPreprocessor1_Model1\nroc_auc\n0.7542779\n5.770592e-03\n10\nrecipe\nmultinom_reg\n3\n\n\nrecipe_lightgbm\nPreprocessor1_Model05\naccuracy\n0.4779517\n9.344905e-03\n10\nrecipe\nboost_tree\n4\n\n\nrecipe_lightgbm\nPreprocessor1_Model05\nbrier_class\n0.3417080\n1.534749e-03\n10\nrecipe\nboost_tree\n4\n\n\nrecipe_lightgbm\nPreprocessor1_Model05\nroc_auc\n0.7263411\n6.250417e-03\n10\nrecipe\nboost_tree\n4\n\n\nrecipe_knn\nPreprocessor1_Model1\naccuracy\n0.4521041\n5.486483e-03\n10\nrecipe\nnearest_neighbor\n5\n\n\nrecipe_knn\nPreprocessor1_Model1\nbrier_class\n0.3802044\n2.918211e-03\n10\nrecipe\nnearest_neighbor\n5\n\n\nrecipe_knn\nPreprocessor1_Model1\nroc_auc\n0.7039305\n3.245546e-03\n10\nrecipe\nnearest_neighbor\n5\n\n\n\n\n\n\n\n\n\n\nCode\nmodel_set_res |&gt; autoplot()\n\n\n\n\n\n\n\n\n\n\n\nCode\nmodel_set_res |&gt; autoplot( id= 'recipe_xgb')\n\n\n\n\n\n\n\n\n\nselect best model:logistic glm model\n\n\nCode\nbest_model_id &lt;- \"recipe_xgb\"\n\n\nselect best parameters\n\n\nCode\nbest_fit &lt;-\n  model_set_res |&gt;\n  extract_workflow_set_result(best_model_id) |&gt;\n  select_best(metric = \"accuracy\")\n\n\n\n\nCode\n# create workflow for best model\nfinal_workflow &lt;-\n  model_set_res |&gt;\n  extract_workflow(best_model_id) |&gt;\n  finalize_workflow(best_fit)",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/6 multclass classification.html#last-fit",
    "href": "Multiclass classification/6 multclass classification.html#last-fit",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "3.5 last fit",
    "text": "3.5 last fit\n\n\nCode\nfinal_fit &lt;-\n  final_workflow |&gt;\n  last_fit(data_split)",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/6 multclass classification.html#evaluate",
    "href": "Multiclass classification/6 multclass classification.html#evaluate",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "4.1 Evaluate",
    "text": "4.1 Evaluate\n\n\nCode\nfinal_fit %&gt;%\n  collect_metrics()\n\n\n# A tibble: 3 × 4\n  .metric     .estimator .estimate .config             \n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               \n1 accuracy    multiclass     0.550 Preprocessor1_Model1\n2 roc_auc     hand_till      0.787 Preprocessor1_Model1\n3 brier_class multiclass     0.373 Preprocessor1_Model1\n\n\n\n\nCode\nall_metrics &lt;- metric_set(accuracy, recall, precision, f_meas, kap, sens, spec)\n\na=final_fit %&gt;% collect_predictions()\n\nall_metrics(a, truth = target_variable,estimate = .pred_class)\n\n\n# A tibble: 7 × 3\n  .metric   .estimator .estimate\n  &lt;chr&gt;     &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy  multiclass     0.550\n2 recall    macro          0.536\n3 precision macro          0.533\n4 f_meas    macro          0.530\n5 kap       multiclass     0.396\n6 sens      macro          0.536\n7 spec      macro          0.850\n\n\n\n\nCode\n#final_fit %&gt;%\n#  collect_predictions() %&gt;% \n # roc_curve(target_variable, .pred_children) %&gt;% \n # autoplot()\n\n\n\n\nCode\nfinal_tree &lt;- extract_workflow(final_fit)\nfinal_tree\n\n\n══ Workflow [trained] ══════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: boost_tree()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n6 Recipe Steps\n\n• step_rm()\n• step_impute_median()\n• step_impute_mode()\n• step_dummy()\n• step_zv()\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\n##### xgb.Booster\nraw: 187.5 Kb \ncall:\n  xgboost::xgb.train(params = list(eta = 0.00188744903053763, max_depth = 14L, \n    gamma = 1.47066004807873, colsample_bytree = 1, colsample_bynode = 0.545454545454545, \n    min_child_weight = 5L, subsample = 0.300618941169232), data = x$data, \n    nrounds = 10, watchlist = x$watchlist, verbose = 0, nthread = 1, \n    objective = \"multi:softprob\", num_class = 4L)\nparams (as set within xgb.train):\n  eta = \"0.00188744903053763\", max_depth = \"14\", gamma = \"1.47066004807873\", colsample_bytree = \"1\", colsample_bynode = \"0.545454545454545\", min_child_weight = \"5\", subsample = \"0.300618941169232\", nthread = \"1\", objective = \"multi:softprob\", num_class = \"4\", validate_parameters = \"TRUE\"\nxgb.attributes:\n  niter\ncallbacks:\n  cb.evaluation.log()\n# of features: 22 \nniter: 10\nnfeatures : 22 \nevaluation_log:\n     iter training_mlogloss\n    &lt;num&gt;             &lt;num&gt;\n        1          1.385471\n        2          1.384689\n---                        \n        9          1.379286\n       10          1.378525\n\n\n\n\nCode\nlibrary(vip)\n\nfinal_tree %&gt;% \n  extract_fit_parsnip() %&gt;% \n  vip()",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/6 multclass classification.html#save-model",
    "href": "Multiclass classification/6 multclass classification.html#save-model",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "4.2 save model",
    "text": "4.2 save model\ncheck model size\n\n\nCode\nlibrary(lobstr)\nobj_size(final_tree)\n\n\n1.84 MB\n\n\nbundle and save model\n\n\nCode\nlibrary(bundle)\nmodel_bundle &lt;- bundle(final_tree)\n\n\n\n\nCode\nsaveRDS(model_bundle,'level 6 multclass classification model.RDS')",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/6 multclass classification.html#make-predication",
    "href": "Multiclass classification/6 multclass classification.html#make-predication",
    "title": "Multiple Classification Model with recipe,workflow set,fast tuning",
    "section": "4.3 make predication",
    "text": "4.3 make predication\nload model and unbundle\n\n\nCode\nmodel=readRDS('level 6 multclass classification model.RDS')\n\nmodel &lt;- unbundle(model)\n\n\n\n\nCode\nfinal_prediction=predict(model,data_valid)\n\nhead(final_prediction)\n\n\n# A tibble: 6 × 1\n  .pred_class\n  &lt;fct&gt;      \n1 B          \n2 C          \n3 D          \n4 D          \n5 D          \n6 C          \n\n\n\n\nCode\nfinal_prediction %&gt;%group_by(.pred_class) %&gt;% count()\n\n\n# A tibble: 4 × 2\n# Groups:   .pred_class [4]\n  .pred_class     n\n  &lt;fct&gt;       &lt;int&gt;\n1 A             448\n2 B             229\n3 C             399\n4 D             538\n\n\n\n\nCode\nfinal_prediction_data=cbind(data_valid,final_prediction)\n\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction   A   B   C   D\n         A 185 100  58 105\n         B  54  91  60  24\n         C  57 115 217  10\n         D  96  56  65 321\n\n\n\n\nCode\naccuracy(final_prediction_data, truth = target_variable, estimate = .pred_class)\n\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy multiclass     0.504\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(target_variable)%&gt;% count()\n\n\n# A tibble: 4 × 2\n# Groups:   target_variable [4]\n  target_variable     n\n  &lt;fct&gt;           &lt;int&gt;\n1 A                 392\n2 B                 362\n3 C                 400\n4 D                 460\n\n\n\n\nCode\nfinal_prediction_data %&gt;% group_by(.pred_class) %&gt;% count()\n\n\n# A tibble: 4 × 2\n# Groups:   .pred_class [4]\n  .pred_class     n\n  &lt;fct&gt;       &lt;int&gt;\n1 A             448\n2 B             229\n3 C             399\n4 D             538\n\n\n\n\nCode\nconf_mat(final_prediction_data, truth = target_variable,\n    estimate = .pred_class)\n\n\n          Truth\nPrediction   A   B   C   D\n         A 185 100  58 105\n         B  54  91  60  24\n         C  57 115 217  10\n         D  96  56  65 321",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow set,fast tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/3 multclass classification.html",
    "href": "Multiclass classification/3 multclass classification.html",
    "title": "Multiple Classification Model with recipe,workflow, tuning",
    "section": "",
    "text": "classification Tidy Modeling with 2 model and 1 recipe:\ndecision tree model with rpart engine(tree_spec)\nKNN model with knn engine(knn_spec)",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow, tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/3 multclass classification.html#read-data",
    "href": "Multiclass classification/3 multclass classification.html#read-data",
    "title": "Multiple Classification Model with recipe,workflow, tuning",
    "section": "2.1 read data",
    "text": "2.1 read data\n\n\nCode\nlibrary(tidyverse)\n\ndf_train_raw &lt;- readr::read_csv(\"data/Train.csv\")\n\ndf_test_raw&lt;- readr::read_csv(\"data/Test.csv\")\n\n\n\n\nCode\ndf_train=df_train_raw %&gt;% mutate(target_variable=as.factor(Segmentation)) %&gt;% select(-Segmentation)\ndf_test=df_test_raw\n\n\n\n\nCode\nglimpse(df_train)\n\n\nRows: 8,068\nColumns: 11\n$ ID              &lt;dbl&gt; 462809, 462643, 466315, 461735, 462669, 461319, 460156…\n$ Gender          &lt;chr&gt; \"Male\", \"Female\", \"Female\", \"Male\", \"Female\", \"Male\", …\n$ Ever_Married    &lt;chr&gt; \"No\", \"Yes\", \"Yes\", \"Yes\", \"Yes\", \"Yes\", \"No\", \"No\", \"…\n$ Age             &lt;dbl&gt; 22, 38, 67, 67, 40, 56, 32, 33, 61, 55, 26, 19, 19, 70…\n$ Graduated       &lt;chr&gt; \"No\", \"Yes\", \"Yes\", \"Yes\", \"Yes\", \"No\", \"Yes\", \"Yes\", …\n$ Profession      &lt;chr&gt; \"Healthcare\", \"Engineer\", \"Engineer\", \"Lawyer\", \"Enter…\n$ Work_Experience &lt;dbl&gt; 1, NA, 1, 0, NA, 0, 1, 1, 0, 1, 1, 4, 0, NA, 0, 1, 9, …\n$ Spending_Score  &lt;chr&gt; \"Low\", \"Average\", \"Low\", \"High\", \"High\", \"Average\", \"L…\n$ Family_Size     &lt;dbl&gt; 4, 3, 1, 2, 6, 2, 3, 3, 3, 4, 3, 4, NA, 1, 1, 2, 5, 6,…\n$ Var_1           &lt;chr&gt; \"Cat_4\", \"Cat_4\", \"Cat_6\", \"Cat_6\", \"Cat_6\", \"Cat_6\", …\n$ target_variable &lt;fct&gt; D, A, B, B, A, C, C, D, D, C, A, D, D, A, B, C, D, B, …",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow, tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/3 multclass classification.html#data-split",
    "href": "Multiclass classification/3 multclass classification.html#data-split",
    "title": "Multiple Classification Model with recipe,workflow, tuning",
    "section": "2.2 data split",
    "text": "2.2 data split\n\n\nCode\nset.seed(1234)\n\ndata_split &lt;- initial_validation_split(data=df_train, prop = c(0.7,0.2))\n\ndata_train=training(data_split)  \n\ndata_test=testing(data_split)  \n\ndata_valid=validation(data_split)\n\n\n\n\nCode\ndim(data_train)\n\n\n[1] 5647   11\n\n\n\n\nCode\ndim(data_test)\n\n\n[1] 807  11\n\n\n\n\nCode\ndim(data_valid)\n\n\n[1] 1614   11\n\n\n10 fold for tunning\n\n\nCode\nset.seed(234)\nfolds &lt;- vfold_cv(data_train)",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow, tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/3 multclass classification.html#recipe",
    "href": "Multiclass classification/3 multclass classification.html#recipe",
    "title": "Multiple Classification Model with recipe,workflow, tuning",
    "section": "3.1 recipe",
    "text": "3.1 recipe\nbecasue the target class is not balance so using downsample\n\n\nCode\ndata_rec &lt;- recipe(target_variable ~ ., data = data_train) %&gt;%\n  #update_role(ID, new_role = \"ID\") %&gt;% \n  step_rm(ID) %&gt;% \n  #step_downsample(target_variable) %&gt;%\n  \n  step_impute_median(all_numeric(), -all_outcomes())%&gt;% \n  step_impute_mode(all_nominal(), -all_outcomes())%&gt;% \n  \n  step_dummy(all_nominal(), -all_outcomes()) %&gt;%\n  step_zv(all_numeric()) %&gt;%\n  step_normalize(all_numeric())\n\ndata_rec",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow, tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/3 multclass classification.html#model",
    "href": "Multiclass classification/3 multclass classification.html#model",
    "title": "Multiple Classification Model with recipe,workflow, tuning",
    "section": "3.2 model",
    "text": "3.2 model\n\n3.2.1 tree model\n\n\nCode\ntree_spec &lt;- decision_tree() %&gt;%\n  set_engine(\"rpart\") %&gt;%\n  set_mode(\"classification\")\n\n\n\n\n3.2.2 KNN model\n\n\nCode\nknn_spec &lt;- nearest_neighbor() %&gt;%\n  set_engine(\"kknn\") %&gt;%\n  set_mode(\"classification\")\n\n\n\n\n3.2.3 xgb tuning model\n\n\nCode\nxgb_spec &lt;- boost_tree(\n  trees = 10,\n  tree_depth = tune(), min_n = tune(),\n  loss_reduction = tune(),                     ## first three: model complexity\n  sample_size = tune(),  mtry=tune(),       ## randomness\n  learn_rate = tune()                          ## step size\n) %&gt;%\n  set_engine(\"xgboost\") %&gt;%\n  set_mode(\"classification\")\n\nxgb_spec\n\n\nBoosted Tree Model Specification (classification)\n\nMain Arguments:\n  mtry = tune()\n  trees = 10\n  min_n = tune()\n  tree_depth = tune()\n  learn_rate = tune()\n  loss_reduction = tune()\n  sample_size = tune()\n\nComputational engine: xgboost \n\n\nxgb tunning grid\n\n\nCode\nxgb_tune_grid= grid_latin_hypercube(\n  tree_depth(),learn_rate(),loss_reduction(),min_n(),\n  sample_size=sample_prop(),finalize(mtry(),data_train),\n  size=50)\n\nhead(xgb_tune_grid)\n\n\n# A tibble: 6 × 6\n  tree_depth learn_rate loss_reduction min_n sample_size  mtry\n       &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt; &lt;int&gt;\n1          2   1.79e-10     0.00740       10       0.484     2\n2         15   2.53e- 3     0.0000313     14       0.365     7\n3          5   4.69e- 8     1.51          16       0.697     7\n4          2   3.65e- 6     0.0000550     34       0.834     8\n5         14   6.92e- 7    10.4           30       0.714     6\n6         11   1.47e- 2     0.00000199    36       0.398     8\n\n\nworkflow\n\n\nCode\nknn_wf &lt;- workflow() %&gt;%add_recipe(data_rec) %&gt;% add_model(knn_spec) \n\ntree_wf &lt;- workflow() %&gt;%add_recipe(data_rec)%&gt;% add_model(tree_spec)\n\nxgb_wf &lt;- workflow() %&gt;%add_recipe(data_rec)%&gt;% add_model(xgb_spec)",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow, tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/3 multclass classification.html#training-and-tunning",
    "href": "Multiclass classification/3 multclass classification.html#training-and-tunning",
    "title": "Multiple Classification Model with recipe,workflow, tuning",
    "section": "3.3 training and tunning",
    "text": "3.3 training and tunning\n\n\nCode\nset.seed(234)\nfolds &lt;- vfold_cv(data_train)",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow, tuning"
    ]
  },
  {
    "objectID": "Multiclass classification/3 multclass classification.html#model-performance",
    "href": "Multiclass classification/3 multclass classification.html#model-performance",
    "title": "Multiple Classification Model with recipe,workflow, tuning",
    "section": "3.4 model performance:",
    "text": "3.4 model performance:\n\n3.4.1 KNN performance\n\n\nCode\nknn_wf_result= fit(knn_wf,data_train)\n\n\n\n\nCode\nfuture_result_class=predict(knn_wf_result,data_test)\n\n\n\n\nCode\nfuture_result_prob=predict(knn_wf_result,data_test,type=\"prob\")\n\n\n\n\nCode\nall_future_result=cbind(data_test,future_result_class,future_result_prob)\n\n\n\n\nCode\naccuracy(all_future_result, target_variable,  .pred_class)\n\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy multiclass     0.475\n\n\n\n\nCode\nroc_auc(all_future_result, target_variable,.pred_A ,.pred_B,.pred_C ,.pred_D)\n\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;\n1 roc_auc hand_till      0.711\n\n\n\n\nCode\nall_future_result %&gt;% roc_curve(target_variable,.pred_A ,.pred_B,.pred_C ,.pred_D) %&gt;% \n  autoplot()\n\n\n\n\n\n\n\n\n\n\n\n3.4.2 Tree performance\n\n\nCode\ntree_wf_result= fit(tree_wf,data_train)\n\n\n\n\nCode\ntree_future_result_class=predict(tree_wf_result,data_test)\n\n\n\n\nCode\ntree_future_result_prob=predict(tree_wf_result,data_test,type=\"prob\")\n\n\n\n\nCode\ntree_all_future_result=cbind(data_test,tree_future_result_class,tree_future_result_prob)\n\n\n\n\nCode\naccuracy(tree_all_future_result, target_variable,  .pred_class)\n\n\n# A tibble: 1 × 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy multiclass     0.525\n\n\n\n\nCode\nroc_auc(tree_all_future_result, target_variable,.pred_A ,.pred_B,.pred_C ,.pred_D)\n\n\n# A tibble: 1 × 3\n  .metric .estimator .estimate\n  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;\n1 roc_auc hand_till      0.716\n\n\n\n\nCode\ntree_all_future_result %&gt;% roc_curve(target_variable,.pred_A ,.pred_B,.pred_C ,.pred_D) %&gt;% \n  autoplot()",
    "crumbs": [
      "Multiclass classification",
      "Multiple Classification Model with recipe,workflow, tuning"
    ]
  },
  {
    "objectID": "model type/1 decision tree.html",
    "href": "model type/1 decision tree.html",
    "title": "Decision tree",
    "section": "",
    "text": "1 Pros\n\nEasier to interpret than Neural Network\nFast training and making inference\n\n\n\n2 Cons\n\nProne to overfitting\n\n\n\n3 reference:\nhttps://www.youtube.com/watch?v=6DlWndLbk90\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "model type",
      "Decision tree"
    ]
  },
  {
    "objectID": "other/5 other/4 quarto tips.html",
    "href": "other/5 other/4 quarto tips.html",
    "title": "quarto tips",
    "section": "",
    "text": "1 add a output folder bottom\n\nadd foldableCodeBlcok.lua into blog root folder\nadd in _quarto.yml\n\nfilters: - fold_results.lua\n\nput following on code chunk\n\n{r, attr.output=‘.details summary=“sessionInfo()”’} #| echo: false sessionInfo()\n\n\n2 render all website\n\n\n\nCode\n\nTerminal\n\nquarto render \"tidymodel in R\"\n\n\n\n\n\n3 referece:\nhttps://github.com/quarto-dev/quarto-cli/issues/341\nhttps://gist.github.com/atusy/f2b5b992e45c68ab6823499f2339c6e6\n\n\nCode\nsessionInfo()\n\n\nsessionInfo()\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Sonoma 14.1.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.4 compiler_4.3.1    fastmap_1.1.1     cli_3.6.2        \n [5] tools_4.3.1       htmltools_0.5.8.1 rstudioapi_0.16.0 yaml_2.3.8       \n [9] rmarkdown_2.26    knitr_1.45        jsonlite_1.8.8    xfun_0.43        \n[13] digest_0.6.35     rlang_1.1.3       evaluate_0.23    \n\n\n\n\n\n4 resource:\nhttps://themockup.blog/posts/2021-01-28-removing-image-backgrounds-with-magick/\nhttps://cran.r-project.org/web/packages/magick/vignettes/intro.html\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "5 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/1 chromote.html",
    "href": "other/4 other/1 chromote.html",
    "title": "chromote",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(chromote)\n\n\n\n\nCode\npackageVersion(\"chromote\")\n\n\n\n1 create view\n\n\nCode\nlibrary(chromote)\n\nb &lt;- ChromoteSession$new()\n\n# In a web browser, open a viewer for the headless browser. Works best with\n# Chromium-based browsers.\nb$view()\n\n\n\n\nCode\nb$Browser$getVersion()\n\n\n\n\n2 go to page\n\n\nCode\nb$Page$navigate(\"https://www.r-project.org/\")\n\n\n\n\n3 take picture\n\n\nCode\n# Saves to screenshot.png\nb$screenshot()\n\n\n\n\nCode\n# Takes a screenshot of elements picked out by CSS selector\nis_interactive &lt;- interactive() # Display screenshot if interactive\nb$screenshot(\"sidebar.png\", selector = \"h1\" ,show = is_interactive)\n\n\n\n\n4 take picture as pdf\n\n\nCode\nb$screenshot_pdf(filename='page.pdf')\n\n\n\n\n5 Reference:\nhttps://rstudio.github.io/chromote/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "4 other",
      "chromote"
    ]
  },
  {
    "objectID": "other/4 other/3 image processing.html",
    "href": "other/4 other/3 image processing.html",
    "title": "image processing",
    "section": "",
    "text": "Code\nlibrary(magick)\n\n\n\n1 input\n\n\nCode\nraw_logo &lt;- image_read('./images/comb.webp')\n\n\n\n\n2 output\n\n\nCode\nimage_info(raw_logo)\n\n\n  format width height colorspace matte filesize density\n1   WEBP   450    303       sRGB  TRUE    49650   72x72\n\n\n\n\n3 change format\n\n\nCode\nnew_png &lt;- image_convert(raw_logo, \"png\")\n\n\n\n\nCode\nimage_info(new_png)\n\n\n  format width height colorspace matte filesize density\n1    PNG   450    303       sRGB  TRUE        0   72x72\n\n\n\n\n4 output\n\n\nCode\nimage_write(new_png, path = \"./images/new_png.png\", format = \"png\")\n\n\n\n\nCode\nraw_logo &lt;- image_read('./images/logo1.png')\n\n\n\n\nCode\nraw_logo %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE    53960   72x72\n\n\n\n\n\n\n\n\n\n\n\n5 fill corner white to greem\neach corner (top left, top right, bottom left, bottom right). For our real usage, we’re going to convert this “green” space to transparent instead.\n\n\nCode\nimg_filled &lt;- raw_logo %&gt;% \n    image_fill(\"green\", \"+1+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"green\", \"+140+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"green\", \"+1+99\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"green\", \"+140+99\", fuzz = 50, refcolor = \"white\")\n\nimg_filled %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n6 rotate\n\n\nCode\nimg_filled %&gt;% image_rotate(45) %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1632   1632       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n7 make backgroup transparent (given 0-100 green color backgroup)\n\n\nCode\nb=img_filled %&gt;% image_transparent(color='green',10)\n\nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\nCode\nimage_write(b, path = \"b.png\", format = \"png\")\n\n\n\n\n8 change opacity level\n\n\nCode\nb=img_filled %&gt;% image_colorize(opacity =80, color = 'white')\nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n9 change brightness level\n\n\nCode\nb=img_filled %&gt;%image_modulate(brightness = 30)\n  \nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n10 change blur level\n\n\nCode\nb=img_filled %&gt;%  image_blur(10, 5)\n  \nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n11 add text into picture\n\n\nCode\nb=img_filled %&gt;% image_annotate( \"The quick brown fox\", font = 'Times', size = 80,gravity = \"southwest\", color = \"red\")\n  \nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n12 resize\n\n\nCode\nb= img_filled%&gt;% image_resize(\"500\")\nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG   500    357       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\nCode\nimage_info(img_filled)\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\nCode\nimage_info(b)\n\n\n  format width height colorspace matte filesize density\n1    PNG   500    357       sRGB  TRUE        0   72x72\n\n\n\n\n13 make logo black\n\n\nCode\nimg_filled2 &lt;- raw_logo %&gt;% \n    image_fill(\"transparent\", \"+1+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"transparent\", \"+140+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"transparent\", \"+1+99\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"transparent\", \"+140+99\", fuzz = 50, refcolor = \"white\")\n\n\n\n\nCode\nimg_filled2 %&gt;% \n    image_channel(\"Opacity\") %&gt;% \n    image_convert(matte=FALSE) %&gt;% \n  print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       Gray FALSE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\nsessionInfo()\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Sonoma 14.1.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] magick_2.8.3\n\nloaded via a namespace (and not attached):\n [1] digest_0.6.35     fastmap_1.1.1     xfun_0.43         magrittr_2.0.3   \n [5] knitr_1.45        htmltools_0.5.8.1 png_0.1-8         rmarkdown_2.26   \n [9] cli_3.6.2         compiler_4.3.1    rstudioapi_0.16.0 tools_4.3.1      \n[13] evaluate_0.23     Rcpp_1.0.12       yaml_2.3.8        rlang_1.1.3      \n[17] jsonlite_1.8.8    htmlwidgets_1.6.4\n\n\n\n\n\n14 add backgroup image\n\n\nCode\nlibrary(ggplot2)\nlibrary(png)\nlibrary(grid)\nlibrary(ggimage)\n\n\n\n\nCode\nimg &lt;- readPNG(\"./images/new_png.png\")\n\n\n\n\nCode\nbees &lt;- data.frame(distance = c(0.5, 1, 1.5, 2, 2.5, 3),\n                  number = c(40, 34, 32, 22,18, 10))\n\nggplot(data = bees, aes(x = distance, y = number)) +\n  annotation_custom(rasterGrob(img, \n                               width = unit(1,\"npc\"),\n                               height = unit(1,\"npc\")), \n                    -Inf, Inf, -Inf, Inf) +\n  geom_point() +\n  xlab(\"Distance (km)\") +\n  ylab(\"Number of Bees\") +\n  ylim(0, 45)\n\n\n\n\n\n\n\n\n\n\n\n15 replace scatter with image\n\n\nCode\nbees$image &lt;- \"./images/bee.png\"\n\n\n\n\nCode\nggplot(data = bees, aes(x = distance, y = number)) +\n  annotation_custom(rasterGrob(img, \n                               width = unit(1,\"npc\"),\n                               height = unit(1,\"npc\")), \n                    -Inf, Inf, -Inf, Inf) +\n  geom_image(aes(image = image), size = 0.15) +\n  xlab(\"Distance (km)\") +\n  ylab(\"Number of Bees\") +\n  ylim(0, 45)\n\n\n\n\n\n\n\n\n\n\n\n16 add logo\n\n\nCode\nimg2 =image_read(\"./images/logo1.png\")\n\n\n\n\nCode\nlibrary(cowplot)\np=ggplot(data = bees, aes(x = distance, y = number)) +\n  annotation_custom(rasterGrob(img, \n                               width = unit(1,\"npc\"),\n                               height = unit(1,\"npc\")), \n                    -Inf, Inf, -Inf, Inf) +\n  geom_image(aes(image = image), size = 0.15) +\n  xlab(\"Distance (km)\") +\n  ylab(\"Number of Bees\") +\n  ylim(0, 45)\n\n\n\nggdraw() +draw_plot(p,x = 0, y = 0.15, width = 1, height = 0.85) +draw_image(img2,x = 0.1, y = 0.1, width = 0.1, height = 0.1) \n\n\n\n\n\n\n\n\n\n\n\n17 resource:\nhttps://themockup.blog/posts/2021-01-28-removing-image-backgrounds-with-magick/\nhttps://cran.r-project.org/web/packages/magick/vignettes/intro.html\nhttps://buzzrbeeline.blog/2018/06/13/fun-and-easy-r-graphs-with-images/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "4 other",
      "image processing"
    ]
  },
  {
    "objectID": "Plot/3 Map/2 leaflet.html",
    "href": "Plot/3 Map/2 leaflet.html",
    "title": "map",
    "section": "",
    "text": "1 data\n\n\nCode\nlibrary(tidyverse)\n\nlibrary(sf)\nlibrary(leaflet)\nlibrary(geojsonio)\nlibrary(leaflet.extras)\n\n\n\n\n2 display at openstreet map\n\n\nCode\nm &lt;- leaflet() %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addMarkers(lng=174.768, lat=-36.852, popup=\"The birthplace of R\")\n\nm  \n\n\n\n\n\n\n\n\n3 display at google map\n\n\nCode\nleaflet() |&gt;\n  # add base mao\n  addTiles(urlTemplate = \"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\") |&gt;\n  # set view\n  setView(116.347817690225, 39.997202126977, zoom = 16) |&gt;\n  # add markers\n  addMarkers(116.347817690225, 39.997202126977)\n\n\n\n\n\n\n\n\n4 Third-Party map\n\n\nCode\n#m &lt;- leaflet() %&gt;% setView(lng = -71.0589, lat = 42.3601, zoom = 10)\n#m %&gt;% addProviderTiles(providers$Stadia.StamenToner)\n\n\n\n\n5 add pop up\nPopups are small boxes containing arbitrary HTML, that point to a specific point on the map.\n\n\nCode\ncontent &lt;- paste(sep = \"&lt;br/&gt;\",\n  \"&lt;b&gt;&lt;a href='https://www.samurainoodle.com/'&gt;Samurai Noodle&lt;/a&gt;&lt;/b&gt;\",\n  \"606 5th Ave. S\",\n  \"Seattle, WA 98138\"\n)\n\nleaflet() %&gt;% addTiles() %&gt;%\n  setView(-122.327298, 47.597131,zoom = 12) %&gt;% \n  addPopups(-122.327298, 47.597131, content,\n    #options = popupOptions(closeButton = FALSE)\n    options = popupOptions(closeButton = FALSE)\n  )\n\n\n\n\n\n\n\n\n6 add Markers\n\n\nCode\nlibrary(htmltools)\n\ndf &lt;- read.csv(textConnection(\n\"Name,Lat,Long\nSamurai Noodle,47.597131,-122.327298\nKukai Ramen,47.6154,-122.327157\nTsukushinbo,47.59987,-122.326726\"\n))\n\nleaflet(df) %&gt;% addTiles() %&gt;%\n  addMarkers(~Long, ~Lat, popup = ~htmlEscape(Name))\n\n\n\n\n\n\n\n\n7 add Labels\nA label is a textual or HTML content that can attached to markers and shapes to be always displayed or displayed on mouse over. Unlike popups you don’t need to click a marker/polygon for the label to be shown.\n\n\nCode\nlibrary(htmltools)\n\ndf &lt;- read.csv(textConnection(\n\"Name,Lat,Long\nSamurai Noodle,47.597131,-122.327298\nKukai Ramen,47.6154,-122.327157\nTsukushinbo,47.59987,-122.326726\"))\n\nleaflet(df) %&gt;% addTiles() %&gt;%\n  addMarkers(~Long, ~Lat, label = ~htmlEscape(Name))\n\n\n\n\n\n\n\n\n8 World map\n\n\nCode\n#install.packages(\"https://cran.r-project.org/src/contrib/Archive/maptools/maptools_1.1-8.tar.gz\")\n\n\n\n\nCode\njson_data=read_sf(\"world-administrative-boundaries.geojson\")\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\n#Get my variable\n#name&lt;-c(\"Ghana\", \"Grenada\", \"Guyana\", \"India\", \"Jamaica\", \"Kenya\", \"United States\",\"Canada\")\n#val&lt;-c(1,2,4,5,5,1000,20000, 100)\n\n#per_gdp_usd&lt;-data.frame(name,val)\n\n\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\n\nper_gdp_usd=read_excel('world data.xlsx') %&gt;% mutate(\n  name=case_when(\n    name ==\"United States\" ~ \"United States of America\"\n     ,name ==\"Russia\" ~ \"Russian Federation\"\n   ,name ==\"U.K. of Great Britain and Northern Ireland\" ~ \"United Kingdom\"\n   \n   ,name ==\"U.K. of Great Britain and Northern Ireland\" ~ \"United Kingdom\"\n   \n   ,name == \"South Korea\"~ \"Republic of Korea\"\n   \n   ,name ==\"Lao People's Democratic Republic\" ~ \"Laos\"\n   \n    ,TRUE ~ name\n  )\n)\n\n\n\n\nCode\n#test=full_join(map_df, per_gdp_usd, by=\"name\")\n\n#left =test %&gt;% filter(is.na(iso3)==TRUE)\n\n#right=test %&gt;% filter(is.na(per_gdp_total)==TRUE)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"name\")\n\n\n\n\nCode\nglimpse(map_df002)\n\n\nRows: 158\nColumns: 12\n$ name                     &lt;chr&gt; \"Albania\", \"Algeria\", \"Andorra\", \"Angola\", \"A…\n$ geo_point_2d             &lt;chr&gt; \"{ \\\"lon\\\": 20.068384605918776, \\\"lat\\\": 41.1…\n$ iso3                     &lt;chr&gt; \"ALB\", \"DZA\", \"AND\", \"AGO\", \"ARG\", \"ARM\", \"AU…\n$ status                   &lt;chr&gt; \"Member State\", \"Member State\", \"Member State…\n$ color_code               &lt;chr&gt; \"ALB\", \"DZA\", \"AND\", \"AGO\", \"ARG\", \"ARM\", \"AU…\n$ continent                &lt;chr&gt; \"Europe\", \"Africa\", \"Europe\", \"Africa\", \"Amer…\n$ region                   &lt;chr&gt; \"Southern Europe\", \"Northern Africa\", \"Southe…\n$ iso_3166_1_alpha_2_codes &lt;chr&gt; \"AL\", \"DZ\", \"AD\", \"AO\", \"AR\", \"AM\", \"AU\", \"AT…\n$ french_short             &lt;chr&gt; \"Albanie\", \"Algérie\", \"Andorre\", \"Angola\", \"A…\n$ geometry                 &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((20.07142 42..., …\n$ per_gdp_total            &lt;dbl&gt; 1.888210e+10, 1.919130e+11, 3.352033e+09, 1.0…\n$ per_gdp_usd              &lt;dbl&gt; 6643, 4274, 41993, 2999, 13904, 7014, 64003, …\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gdp_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gdp_usd, \"（千 美元）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", round(map_sf002$per_gdp_usd/1000), \"K &lt;br/&gt;\",\n       \"总gpd 美元：\", round(map_sf002$per_gdp_total/1000000), \"M &lt;br/&gt;\"\n\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gdp_usd, opacity = 1.0\n    )\n\n\n\n\n\n\n\n\n9 China one city map\n\n\nCode\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/citys/440300.json\") \n#or\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/440300_full.json\")\n\n\n深圳市：\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(json_data) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n\n\n\n\n10 all China each province GPD map\n\n\nCode\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\n中国 2022 各省 人均gpd usd：\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\nper_gdp_usd=read_excel('china gdp2022.xlsx')\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"city\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gpd_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gpd_usd, \"（美万）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", map_sf002$per_gpd_usd, \"&lt;br/&gt;\",\n      \"人均gpd 人民币：\", map_sf002$per_gpd_rmb, \"&lt;br/&gt;\",\n       \"人口：\", round(map_sf002$total_gpd_rmb/map_sf002$per_gpd_rmb), \"&lt;br/&gt;\"\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gpd_usd, opacity = 1.0\n    )\n\n\n\n\n\n\nGPD data source:国家统计局数据库\n\n\n11 China one province map each city GPD\n\n\nCode\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/province/440000.json\") \n\n\n广东省 2021 人均gpd usd：\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\nper_gdp_usd=read_excel('guangdong city gdp2021.xlsx')\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"city\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\ndata source:广东统计年鉴2022\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gpd_usd)\n    ,popup = ~ paste0(\n      \"城市：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gpd_usd, \"（美万）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"城市：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", map_sf002$per_gpd_usd, \"&lt;br/&gt;\",\n      \"人均gpd 人民币：\", map_sf002$per_gpd_rmb, \"&lt;br/&gt;\",\n       \"人口：\", round(map_sf002$total_gpd_rmb*10000000/map_sf002$per_gpd_rmb), \"&lt;br/&gt;\"\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gpd_usd, opacity = 1.0\n    )\n\n\n\n\n\n\nhttps://zh.wikipedia.org/wiki/%E5%B9%BF%E4%B8%9C%E5%90%84%E5%9C%B0%E7%BA%A7%E5%B8%82%E5%9C%B0%E5%8C%BA%E7%94%9F%E4%BA%A7%E6%80%BB%E5%80%BC%E5%88%97%E8%A1%A8\n\n\n12 China province map\n\n\nCode\nlibrary(leaflet)\nlibrary(sf)\n\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/china.json\") \n#or\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nm=leaflet(json_data) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n \n\nm\n\n\n\n\n\n\nadd provincial capital\n\n\nCode\nChina=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\n\n\nCode\nChina002=China %&gt;% as_data_frame() %&gt;% mutate(\n                                            center2=as.character(center) %&gt;% str_replace('c','')%&gt;% str_replace('[(]','') %&gt;% str_replace('[)]','')\n                                               )\n\n\n\n\nCode\nChina003=China002%&gt;%separate(center2, c(\"x\", \"y\"), \", \")\n\n\n\n\nCode\nChina_point = China003 %&gt;% \n  slice(-35)\n\nm %&gt;% \n  addCircles(data = China_point,\n                  lng = ~as.numeric(x), lat = ~as.numeric(y),color = \"red\",weight = 10,\n                  fillOpacity =2)\n\n\n\n\n\n\n\n\n13 China province and city map\n\n\nCode\nmap_list &lt;- lapply(\n  X = list.files(\"./GeoMapData_CN/province\", recursive = T, full.names = T),\n  FUN = sf::read_sf\n)\n\nlength(map_list)\n\n\n[1] 34\n\n\n\n\nCode\nfor (i in c(1:length(map_list))){\n   #print(i)\n  #print(dim(map_list[[i]]))\n  #print(ncol(map_list[[i]]))\n  if(ncol(map_list[[i]])!=10){print(map_list[[i]])}\n  }\n\n\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 119.3183 ymin: 21.75147 xmax: 124.5656 ymax: 25.92592\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                    &lt;MULTIPOLYGON [°]&gt;\n1 710000 台湾省 121.509062,25.044332 province (((119.5543 23.68248, 119.555 23.…\n\n\n\n\nCode\nX = list.files(\"./GeoMapData_CN/province\", recursive = T, full.names = T)\n\nX2=X[-which(X %in% c(\"./GeoMapData_CN/province/710000.json\"\n         ))]\n\nmap_list &lt;- lapply(\n  X = X2,\n  FUN = sf::read_sf\n)\n\n\n\n\nCode\nlength(map_list)\n\n\n[1] 33\n\n\n\n\nCode\nprovince_map &lt;- Reduce(\"rbind\", map_list)\n\n\n\n\nCode\n# library(leaflet)\n# library(sf)\n# \n# json_data &lt;- province_map\n# \n# \n# pal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"), 1:10)\n# \n# leaflet(json_data) %&gt;%\n#   addTiles() %&gt;%\n#   addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n14 China city and district map\n\n\nCode\nmap_list &lt;- lapply(\n  X = list.files(\"./GeoMapData_CN/citys\", recursive = T, full.names = T),\n  FUN = sf::read_sf\n)\n\nlength(map_list)\n\n\n[1] 334\n\n\n\n\nCode\nfor (i in c(1:length(map_list))){\n   #print(i)\n  #print(dim(map_list[[i]]))\n  #print(ncol(map_list[[i]]))\n  if(ncol(map_list[[i]])!=10){print(map_list[[i]])}\n  }\n\n\nSimple feature collection with 1 feature and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 113.5215 ymin: 22.65421 xmax: 114.2603 ymax: 23.14205\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                         &lt;POLYGON [°]&gt;\n1 441900 东莞市 113.746262,23.046237 city  ((114.2292 22.81251, 114.2278 22.813…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 113.157 ymin: 22.20104 xmax: 113.692 ymax: 22.7726\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                         &lt;POLYGON [°]&gt;\n1 442000 中山市 113.382391,22.521113 city  ((113.5687 22.41193, 113.5666 22.412…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 115.9267 ymin: 20.58265 xmax: 116.9338 ymax: 21.12693\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name     center               level                            geometry\n  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;                &lt;chr&gt;                  &lt;MULTIPOLYGON [°]&gt;\n1 442100 东沙群岛 116.887312,20.617512 city  (((115.9433 21.09745, 115.95 21.11…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 108.9287 ymin: 19.17894 xmax: 109.7694 ymax: 19.92575\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                    &lt;MULTIPOLYGON [°]&gt;\n1 460400 儋州市 109.576782,19.517486 city  (((109.4322 19.91302, 109.4253 19.91…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 97.8483 ymin: 39.65426 xmax: 98.52018 ymax: 39.99979\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name     center              level                             geometry\n  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;                   &lt;MULTIPOLYGON [°]&gt;\n1 620200 嘉峪关市 98.277304,39.786529 city  (((97.85974 39.7169, 97.85827 39.71…\n\n\n\n\nCode\nX = list.files(\"./GeoMapData_CN/citys\", recursive = T, full.names = T)\n\nX2=X[-which(X %in% c(\"./GeoMapData_CN/citys/620200.json\"\n         ,\"./GeoMapData_CN/citys/460400.json\"\n              ,\"./GeoMapData_CN/citys/442100.json\"\n              ,\"./GeoMapData_CN/citys/442000.json\"\n              ,\"./GeoMapData_CN/citys/441900.json\"\n         ))]\n\nmap_list &lt;- lapply(\n  X = X2,\n  FUN = sf::read_sf\n)\n\n\n\n\nCode\nlength(map_list)\n\n\n[1] 329\n\n\n\n\nCode\nprovince_map &lt;- Reduce(\"rbind\", map_list)\n\n\n\n\nCode\n# library(leaflet)\n# library(sf)\n# \n# json_data &lt;- province_map\n# \n# \n# pal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"), 1:10)\n# \n# leaflet(json_data) %&gt;%\n#   addTiles() %&gt;%\n#   addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n15 show all map providers\n\n\nCode\nproviders\n\n\nproviders\n$OpenStreetMap\n[1] \"OpenStreetMap\"\n\n$OpenStreetMap.Mapnik\n[1] \"OpenStreetMap.Mapnik\"\n\n$OpenStreetMap.DE\n[1] \"OpenStreetMap.DE\"\n\n$OpenStreetMap.CH\n[1] \"OpenStreetMap.CH\"\n\n$OpenStreetMap.France\n[1] \"OpenStreetMap.France\"\n\n$OpenStreetMap.HOT\n[1] \"OpenStreetMap.HOT\"\n\n$OpenStreetMap.BZH\n[1] \"OpenStreetMap.BZH\"\n\n$MapTilesAPI\n[1] \"MapTilesAPI\"\n\n$MapTilesAPI.OSMEnglish\n[1] \"MapTilesAPI.OSMEnglish\"\n\n$MapTilesAPI.OSMFrancais\n[1] \"MapTilesAPI.OSMFrancais\"\n\n$MapTilesAPI.OSMEspagnol\n[1] \"MapTilesAPI.OSMEspagnol\"\n\n$OpenSeaMap\n[1] \"OpenSeaMap\"\n\n$OPNVKarte\n[1] \"OPNVKarte\"\n\n$OpenTopoMap\n[1] \"OpenTopoMap\"\n\n$OpenRailwayMap\n[1] \"OpenRailwayMap\"\n\n$OpenFireMap\n[1] \"OpenFireMap\"\n\n$SafeCast\n[1] \"SafeCast\"\n\n$Stadia\n[1] \"Stadia\"\n\n$Stadia.AlidadeSmooth\n[1] \"Stadia.AlidadeSmooth\"\n\n$Stadia.AlidadeSmoothDark\n[1] \"Stadia.AlidadeSmoothDark\"\n\n$Stadia.OSMBright\n[1] \"Stadia.OSMBright\"\n\n$Stadia.Outdoors\n[1] \"Stadia.Outdoors\"\n\n$Stadia.StamenToner\n[1] \"Stadia.StamenToner\"\n\n$Stadia.StamenTonerBackground\n[1] \"Stadia.StamenTonerBackground\"\n\n$Stadia.StamenTonerLines\n[1] \"Stadia.StamenTonerLines\"\n\n$Stadia.StamenTonerLabels\n[1] \"Stadia.StamenTonerLabels\"\n\n$Stadia.StamenTonerLite\n[1] \"Stadia.StamenTonerLite\"\n\n$Stadia.StamenWatercolor\n[1] \"Stadia.StamenWatercolor\"\n\n$Stadia.StamenTerrain\n[1] \"Stadia.StamenTerrain\"\n\n$Stadia.StamenTerrainBackground\n[1] \"Stadia.StamenTerrainBackground\"\n\n$Stadia.StamenTerrainLabels\n[1] \"Stadia.StamenTerrainLabels\"\n\n$Stadia.StamenTerrainLines\n[1] \"Stadia.StamenTerrainLines\"\n\n$Thunderforest\n[1] \"Thunderforest\"\n\n$Thunderforest.OpenCycleMap\n[1] \"Thunderforest.OpenCycleMap\"\n\n$Thunderforest.Transport\n[1] \"Thunderforest.Transport\"\n\n$Thunderforest.TransportDark\n[1] \"Thunderforest.TransportDark\"\n\n$Thunderforest.SpinalMap\n[1] \"Thunderforest.SpinalMap\"\n\n$Thunderforest.Landscape\n[1] \"Thunderforest.Landscape\"\n\n$Thunderforest.Outdoors\n[1] \"Thunderforest.Outdoors\"\n\n$Thunderforest.Pioneer\n[1] \"Thunderforest.Pioneer\"\n\n$Thunderforest.MobileAtlas\n[1] \"Thunderforest.MobileAtlas\"\n\n$Thunderforest.Neighbourhood\n[1] \"Thunderforest.Neighbourhood\"\n\n$CyclOSM\n[1] \"CyclOSM\"\n\n$Jawg\n[1] \"Jawg\"\n\n$Jawg.Streets\n[1] \"Jawg.Streets\"\n\n$Jawg.Terrain\n[1] \"Jawg.Terrain\"\n\n$Jawg.Sunny\n[1] \"Jawg.Sunny\"\n\n$Jawg.Dark\n[1] \"Jawg.Dark\"\n\n$Jawg.Light\n[1] \"Jawg.Light\"\n\n$Jawg.Matrix\n[1] \"Jawg.Matrix\"\n\n$MapBox\n[1] \"MapBox\"\n\n$MapTiler\n[1] \"MapTiler\"\n\n$MapTiler.Streets\n[1] \"MapTiler.Streets\"\n\n$MapTiler.Basic\n[1] \"MapTiler.Basic\"\n\n$MapTiler.Bright\n[1] \"MapTiler.Bright\"\n\n$MapTiler.Pastel\n[1] \"MapTiler.Pastel\"\n\n$MapTiler.Positron\n[1] \"MapTiler.Positron\"\n\n$MapTiler.Hybrid\n[1] \"MapTiler.Hybrid\"\n\n$MapTiler.Toner\n[1] \"MapTiler.Toner\"\n\n$MapTiler.Topo\n[1] \"MapTiler.Topo\"\n\n$MapTiler.Voyager\n[1] \"MapTiler.Voyager\"\n\n$TomTom\n[1] \"TomTom\"\n\n$TomTom.Basic\n[1] \"TomTom.Basic\"\n\n$TomTom.Hybrid\n[1] \"TomTom.Hybrid\"\n\n$TomTom.Labels\n[1] \"TomTom.Labels\"\n\n$Esri\n[1] \"Esri\"\n\n$Esri.WorldStreetMap\n[1] \"Esri.WorldStreetMap\"\n\n$Esri.DeLorme\n[1] \"Esri.DeLorme\"\n\n$Esri.WorldTopoMap\n[1] \"Esri.WorldTopoMap\"\n\n$Esri.WorldImagery\n[1] \"Esri.WorldImagery\"\n\n$Esri.WorldTerrain\n[1] \"Esri.WorldTerrain\"\n\n$Esri.WorldShadedRelief\n[1] \"Esri.WorldShadedRelief\"\n\n$Esri.WorldPhysical\n[1] \"Esri.WorldPhysical\"\n\n$Esri.OceanBasemap\n[1] \"Esri.OceanBasemap\"\n\n$Esri.NatGeoWorldMap\n[1] \"Esri.NatGeoWorldMap\"\n\n$Esri.WorldGrayCanvas\n[1] \"Esri.WorldGrayCanvas\"\n\n$OpenWeatherMap\n[1] \"OpenWeatherMap\"\n\n$OpenWeatherMap.Clouds\n[1] \"OpenWeatherMap.Clouds\"\n\n$OpenWeatherMap.CloudsClassic\n[1] \"OpenWeatherMap.CloudsClassic\"\n\n$OpenWeatherMap.Precipitation\n[1] \"OpenWeatherMap.Precipitation\"\n\n$OpenWeatherMap.PrecipitationClassic\n[1] \"OpenWeatherMap.PrecipitationClassic\"\n\n$OpenWeatherMap.Rain\n[1] \"OpenWeatherMap.Rain\"\n\n$OpenWeatherMap.RainClassic\n[1] \"OpenWeatherMap.RainClassic\"\n\n$OpenWeatherMap.Pressure\n[1] \"OpenWeatherMap.Pressure\"\n\n$OpenWeatherMap.PressureContour\n[1] \"OpenWeatherMap.PressureContour\"\n\n$OpenWeatherMap.Wind\n[1] \"OpenWeatherMap.Wind\"\n\n$OpenWeatherMap.Temperature\n[1] \"OpenWeatherMap.Temperature\"\n\n$OpenWeatherMap.Snow\n[1] \"OpenWeatherMap.Snow\"\n\n$HERE\n[1] \"HERE\"\n\n$HERE.normalDay\n[1] \"HERE.normalDay\"\n\n$HERE.normalDayCustom\n[1] \"HERE.normalDayCustom\"\n\n$HERE.normalDayGrey\n[1] \"HERE.normalDayGrey\"\n\n$HERE.normalDayMobile\n[1] \"HERE.normalDayMobile\"\n\n$HERE.normalDayGreyMobile\n[1] \"HERE.normalDayGreyMobile\"\n\n$HERE.normalDayTransit\n[1] \"HERE.normalDayTransit\"\n\n$HERE.normalDayTransitMobile\n[1] \"HERE.normalDayTransitMobile\"\n\n$HERE.normalDayTraffic\n[1] \"HERE.normalDayTraffic\"\n\n$HERE.normalNight\n[1] \"HERE.normalNight\"\n\n$HERE.normalNightMobile\n[1] \"HERE.normalNightMobile\"\n\n$HERE.normalNightGrey\n[1] \"HERE.normalNightGrey\"\n\n$HERE.normalNightGreyMobile\n[1] \"HERE.normalNightGreyMobile\"\n\n$HERE.normalNightTransit\n[1] \"HERE.normalNightTransit\"\n\n$HERE.normalNightTransitMobile\n[1] \"HERE.normalNightTransitMobile\"\n\n$HERE.reducedDay\n[1] \"HERE.reducedDay\"\n\n$HERE.reducedNight\n[1] \"HERE.reducedNight\"\n\n$HERE.basicMap\n[1] \"HERE.basicMap\"\n\n$HERE.mapLabels\n[1] \"HERE.mapLabels\"\n\n$HERE.trafficFlow\n[1] \"HERE.trafficFlow\"\n\n$HERE.carnavDayGrey\n[1] \"HERE.carnavDayGrey\"\n\n$HERE.hybridDay\n[1] \"HERE.hybridDay\"\n\n$HERE.hybridDayMobile\n[1] \"HERE.hybridDayMobile\"\n\n$HERE.hybridDayTransit\n[1] \"HERE.hybridDayTransit\"\n\n$HERE.hybridDayGrey\n[1] \"HERE.hybridDayGrey\"\n\n$HERE.hybridDayTraffic\n[1] \"HERE.hybridDayTraffic\"\n\n$HERE.pedestrianDay\n[1] \"HERE.pedestrianDay\"\n\n$HERE.pedestrianNight\n[1] \"HERE.pedestrianNight\"\n\n$HERE.satelliteDay\n[1] \"HERE.satelliteDay\"\n\n$HERE.terrainDay\n[1] \"HERE.terrainDay\"\n\n$HERE.terrainDayMobile\n[1] \"HERE.terrainDayMobile\"\n\n$HEREv3\n[1] \"HEREv3\"\n\n$HEREv3.normalDay\n[1] \"HEREv3.normalDay\"\n\n$HEREv3.normalDayCustom\n[1] \"HEREv3.normalDayCustom\"\n\n$HEREv3.normalDayGrey\n[1] \"HEREv3.normalDayGrey\"\n\n$HEREv3.normalDayMobile\n[1] \"HEREv3.normalDayMobile\"\n\n$HEREv3.normalDayGreyMobile\n[1] \"HEREv3.normalDayGreyMobile\"\n\n$HEREv3.normalDayTransit\n[1] \"HEREv3.normalDayTransit\"\n\n$HEREv3.normalDayTransitMobile\n[1] \"HEREv3.normalDayTransitMobile\"\n\n$HEREv3.normalNight\n[1] \"HEREv3.normalNight\"\n\n$HEREv3.normalNightMobile\n[1] \"HEREv3.normalNightMobile\"\n\n$HEREv3.normalNightGrey\n[1] \"HEREv3.normalNightGrey\"\n\n$HEREv3.normalNightGreyMobile\n[1] \"HEREv3.normalNightGreyMobile\"\n\n$HEREv3.normalNightTransit\n[1] \"HEREv3.normalNightTransit\"\n\n$HEREv3.normalNightTransitMobile\n[1] \"HEREv3.normalNightTransitMobile\"\n\n$HEREv3.reducedDay\n[1] \"HEREv3.reducedDay\"\n\n$HEREv3.reducedNight\n[1] \"HEREv3.reducedNight\"\n\n$HEREv3.basicMap\n[1] \"HEREv3.basicMap\"\n\n$HEREv3.mapLabels\n[1] \"HEREv3.mapLabels\"\n\n$HEREv3.trafficFlow\n[1] \"HEREv3.trafficFlow\"\n\n$HEREv3.carnavDayGrey\n[1] \"HEREv3.carnavDayGrey\"\n\n$HEREv3.hybridDay\n[1] \"HEREv3.hybridDay\"\n\n$HEREv3.hybridDayMobile\n[1] \"HEREv3.hybridDayMobile\"\n\n$HEREv3.hybridDayTransit\n[1] \"HEREv3.hybridDayTransit\"\n\n$HEREv3.hybridDayGrey\n[1] \"HEREv3.hybridDayGrey\"\n\n$HEREv3.pedestrianDay\n[1] \"HEREv3.pedestrianDay\"\n\n$HEREv3.pedestrianNight\n[1] \"HEREv3.pedestrianNight\"\n\n$HEREv3.satelliteDay\n[1] \"HEREv3.satelliteDay\"\n\n$HEREv3.terrainDay\n[1] \"HEREv3.terrainDay\"\n\n$HEREv3.terrainDayMobile\n[1] \"HEREv3.terrainDayMobile\"\n\n$FreeMapSK\n[1] \"FreeMapSK\"\n\n$MtbMap\n[1] \"MtbMap\"\n\n$CartoDB\n[1] \"CartoDB\"\n\n$CartoDB.Positron\n[1] \"CartoDB.Positron\"\n\n$CartoDB.PositronNoLabels\n[1] \"CartoDB.PositronNoLabels\"\n\n$CartoDB.PositronOnlyLabels\n[1] \"CartoDB.PositronOnlyLabels\"\n\n$CartoDB.DarkMatter\n[1] \"CartoDB.DarkMatter\"\n\n$CartoDB.DarkMatterNoLabels\n[1] \"CartoDB.DarkMatterNoLabels\"\n\n$CartoDB.DarkMatterOnlyLabels\n[1] \"CartoDB.DarkMatterOnlyLabels\"\n\n$CartoDB.Voyager\n[1] \"CartoDB.Voyager\"\n\n$CartoDB.VoyagerNoLabels\n[1] \"CartoDB.VoyagerNoLabels\"\n\n$CartoDB.VoyagerOnlyLabels\n[1] \"CartoDB.VoyagerOnlyLabels\"\n\n$CartoDB.VoyagerLabelsUnder\n[1] \"CartoDB.VoyagerLabelsUnder\"\n\n$HikeBike\n[1] \"HikeBike\"\n\n$HikeBike.HikeBike\n[1] \"HikeBike.HikeBike\"\n\n$HikeBike.HillShading\n[1] \"HikeBike.HillShading\"\n\n$BasemapAT\n[1] \"BasemapAT\"\n\n$BasemapAT.basemap\n[1] \"BasemapAT.basemap\"\n\n$BasemapAT.grau\n[1] \"BasemapAT.grau\"\n\n$BasemapAT.overlay\n[1] \"BasemapAT.overlay\"\n\n$BasemapAT.terrain\n[1] \"BasemapAT.terrain\"\n\n$BasemapAT.surface\n[1] \"BasemapAT.surface\"\n\n$BasemapAT.highdpi\n[1] \"BasemapAT.highdpi\"\n\n$BasemapAT.orthofoto\n[1] \"BasemapAT.orthofoto\"\n\n$nlmaps\n[1] \"nlmaps\"\n\n$nlmaps.standaard\n[1] \"nlmaps.standaard\"\n\n$nlmaps.pastel\n[1] \"nlmaps.pastel\"\n\n$nlmaps.grijs\n[1] \"nlmaps.grijs\"\n\n$nlmaps.water\n[1] \"nlmaps.water\"\n\n$nlmaps.luchtfoto\n[1] \"nlmaps.luchtfoto\"\n\n$NASAGIBS\n[1] \"NASAGIBS\"\n\n$NASAGIBS.ModisTerraTrueColorCR\n[1] \"NASAGIBS.ModisTerraTrueColorCR\"\n\n$NASAGIBS.ModisTerraBands367CR\n[1] \"NASAGIBS.ModisTerraBands367CR\"\n\n$NASAGIBS.ViirsEarthAtNight2012\n[1] \"NASAGIBS.ViirsEarthAtNight2012\"\n\n$NASAGIBS.ModisTerraLSTDay\n[1] \"NASAGIBS.ModisTerraLSTDay\"\n\n$NASAGIBS.ModisTerraSnowCover\n[1] \"NASAGIBS.ModisTerraSnowCover\"\n\n$NASAGIBS.ModisTerraAOD\n[1] \"NASAGIBS.ModisTerraAOD\"\n\n$NASAGIBS.ModisTerraChlorophyll\n[1] \"NASAGIBS.ModisTerraChlorophyll\"\n\n$NLS\n[1] \"NLS\"\n\n$JusticeMap\n[1] \"JusticeMap\"\n\n$JusticeMap.income\n[1] \"JusticeMap.income\"\n\n$JusticeMap.americanIndian\n[1] \"JusticeMap.americanIndian\"\n\n$JusticeMap.asian\n[1] \"JusticeMap.asian\"\n\n$JusticeMap.black\n[1] \"JusticeMap.black\"\n\n$JusticeMap.hispanic\n[1] \"JusticeMap.hispanic\"\n\n$JusticeMap.multi\n[1] \"JusticeMap.multi\"\n\n$JusticeMap.nonWhite\n[1] \"JusticeMap.nonWhite\"\n\n$JusticeMap.white\n[1] \"JusticeMap.white\"\n\n$JusticeMap.plurality\n[1] \"JusticeMap.plurality\"\n\n$GeoportailFrance\n[1] \"GeoportailFrance\"\n\n$GeoportailFrance.plan\n[1] \"GeoportailFrance.plan\"\n\n$GeoportailFrance.parcels\n[1] \"GeoportailFrance.parcels\"\n\n$GeoportailFrance.orthos\n[1] \"GeoportailFrance.orthos\"\n\n$OneMapSG\n[1] \"OneMapSG\"\n\n$OneMapSG.Default\n[1] \"OneMapSG.Default\"\n\n$OneMapSG.Night\n[1] \"OneMapSG.Night\"\n\n$OneMapSG.Original\n[1] \"OneMapSG.Original\"\n\n$OneMapSG.Grey\n[1] \"OneMapSG.Grey\"\n\n$OneMapSG.LandLot\n[1] \"OneMapSG.LandLot\"\n\n$USGS\n[1] \"USGS\"\n\n$USGS.USTopo\n[1] \"USGS.USTopo\"\n\n$USGS.USImagery\n[1] \"USGS.USImagery\"\n\n$USGS.USImageryTopo\n[1] \"USGS.USImageryTopo\"\n\n$WaymarkedTrails\n[1] \"WaymarkedTrails\"\n\n$WaymarkedTrails.hiking\n[1] \"WaymarkedTrails.hiking\"\n\n$WaymarkedTrails.cycling\n[1] \"WaymarkedTrails.cycling\"\n\n$WaymarkedTrails.mtb\n[1] \"WaymarkedTrails.mtb\"\n\n$WaymarkedTrails.slopes\n[1] \"WaymarkedTrails.slopes\"\n\n$WaymarkedTrails.riding\n[1] \"WaymarkedTrails.riding\"\n\n$WaymarkedTrails.skating\n[1] \"WaymarkedTrails.skating\"\n\n$OpenAIP\n[1] \"OpenAIP\"\n\n$OpenSnowMap\n[1] \"OpenSnowMap\"\n\n$OpenSnowMap.pistes\n[1] \"OpenSnowMap.pistes\"\n\n$AzureMaps\n[1] \"AzureMaps\"\n\n$AzureMaps.MicrosoftImagery\n[1] \"AzureMaps.MicrosoftImagery\"\n\n$AzureMaps.MicrosoftBaseDarkGrey\n[1] \"AzureMaps.MicrosoftBaseDarkGrey\"\n\n$AzureMaps.MicrosoftBaseRoad\n[1] \"AzureMaps.MicrosoftBaseRoad\"\n\n$AzureMaps.MicrosoftBaseHybridRoad\n[1] \"AzureMaps.MicrosoftBaseHybridRoad\"\n\n$AzureMaps.MicrosoftTerraMain\n[1] \"AzureMaps.MicrosoftTerraMain\"\n\n$AzureMaps.MicrosoftWeatherInfraredMain\n[1] \"AzureMaps.MicrosoftWeatherInfraredMain\"\n\n$AzureMaps.MicrosoftWeatherRadarMain\n[1] \"AzureMaps.MicrosoftWeatherRadarMain\"\n\n$SwissFederalGeoportal\n[1] \"SwissFederalGeoportal\"\n\n$SwissFederalGeoportal.NationalMapColor\n[1] \"SwissFederalGeoportal.NationalMapColor\"\n\n$SwissFederalGeoportal.NationalMapGrey\n[1] \"SwissFederalGeoportal.NationalMapGrey\"\n\n$SwissFederalGeoportal.SWISSIMAGE\n[1] \"SwissFederalGeoportal.SWISSIMAGE\"\n\n\n\n\n\nCode\nsessionInfo()\n\n\nsessionInfo()\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Sonoma 14.1.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] readxl_1.4.3         openxlsx_4.2.5.2     htmltools_0.5.8.1   \n [4] leaflet.extras_1.0.0 geojsonio_0.11.3     leaflet_2.2.2       \n [7] sf_1.0-16            lubridate_1.9.3      forcats_1.0.0       \n[10] stringr_1.5.1        dplyr_1.1.4          purrr_1.0.2         \n[13] readr_2.1.5          tidyr_1.3.1          tibble_3.2.1        \n[16] ggplot2_3.5.1        tidyverse_2.0.0     \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.5            xfun_0.43               htmlwidgets_1.6.4      \n [4] lattice_0.22-6          tzdb_0.4.0              leaflet.providers_2.0.0\n [7] vctrs_0.6.5             tools_4.3.1             crosstalk_1.2.1        \n[10] generics_0.1.3          curl_5.2.1              proxy_0.4-27           \n[13] fansi_1.0.6             pkgconfig_2.0.3         KernSmooth_2.23-22     \n[16] RColorBrewer_1.1-3      lifecycle_1.0.4         farver_2.1.1           \n[19] compiler_4.3.1          munsell_0.5.1           jqr_1.3.3              \n[22] class_7.3-22            yaml_2.3.8              lazyeval_0.2.2         \n[25] jquerylib_0.1.4         pillar_1.9.0            classInt_0.4-10        \n[28] zip_2.3.1               tidyselect_1.2.1        digest_0.6.35          \n[31] stringi_1.8.4           fastmap_1.1.1           grid_4.3.1             \n[34] colorspace_2.1-0        cli_3.6.2               magrittr_2.0.3         \n[37] crul_1.4.2              utf8_1.2.4              e1071_1.7-14           \n[40] withr_3.0.0             scales_1.3.0            sp_2.1-4               \n[43] timechange_0.3.0        rmarkdown_2.26          cellranger_1.1.0       \n[46] hms_1.1.3               evaluate_0.23           knitr_1.45             \n[49] V8_4.4.2                viridisLite_0.4.2       geojson_0.3.5          \n[52] rlang_1.1.3             Rcpp_1.0.12             glue_1.7.0             \n[55] DBI_1.2.2               httpcode_0.3.0          geojsonsf_2.0.3        \n[58] rstudioapi_0.16.0       jsonlite_1.8.8          R6_2.5.1               \n[61] units_0.8-5            \n\n\n\n\n\n16 resouce:\nhttps://rstudio.github.io/leaflet/\nhttps://github.com/Lchiffon/leafletCN\nhttps://github.com/longwosion/geojson-map-china\nhttps://xiangyun.rbind.io/2022/02/draw-china-maps/\nhttps://datav.aliyun.com/portal/school/atlas/area_selector\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "3 Map",
      "map"
    ]
  },
  {
    "objectID": "Plot/4 Shiny/3 China accident map.html",
    "href": "Plot/4 Shiny/3 China accident map.html",
    "title": "Shiny in R:China accident map",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/China_accident_map/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "4 Shiny",
      "Shiny in R:China accident map"
    ]
  },
  {
    "objectID": "Plot/4 Shiny/1 shiny weight tracking.html",
    "href": "Plot/4 Shiny/1 shiny weight tracking.html",
    "title": "Shiny in R:weight tracking",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/weightshiny/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "4 Shiny",
      "Shiny in R:weight tracking"
    ]
  },
  {
    "objectID": "Plot/4 Shiny/2 shiny photo editor.html",
    "href": "Plot/4 Shiny/2 shiny photo editor.html",
    "title": "Shiny in R:photo editor",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/photo_editor/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "4 Shiny",
      "Shiny in R:photo editor"
    ]
  },
  {
    "objectID": "Plot/3 Map/1 China accident map with mapview.html",
    "href": "Plot/3 Map/1 China accident map with mapview.html",
    "title": "China accident map",
    "section": "",
    "text": "1 data\ndata source :https://github.com/percent4/chinese_incident_tracker\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(jsonlite)\nlibrary(curl)\nlibrary(lubridate)\nlibrary(plotly)\nlibrary(ggplot2)\nlibrary(openxlsx)\nlibrary(readxl)\n\n\n\n\n2 one file\n\n\nCode\n#url &lt;- \"https://raw.githubusercontent.com/percent4/chinese_incident_tracker/main/elk/data/00105670-df53-4be8-9039-8a07fe2d2b4d.json\"\n#download.file(url,\"./data/SAFI.json\", mode = \"wb\")\n\n\n\n\nCode\ndata001 &lt;- read_json(\"./data/SAFI.json\")\n\n\n\n\nCode\ndata002=data001 %&gt;% as.data.frame()\ncolnames(data002)[14] = \"latitude\"\ncolnames(data002)[15] = \"longitude\"\nglimpse(data002)\n\n\nRows: 1\nColumns: 22\n$ item_id            &lt;chr&gt; \"00105670-df53-4be8-9039-8a07fe2d2b4d\"\n$ news_channel       &lt;chr&gt; \"新闻坊\"\n$ title              &lt;chr&gt; \"一养老院突发火灾，已致3死10伤！\"\n$ report             &lt;chr&gt; \"4月4日\\n\\n“东莞应急管理”\\n\\n发布情况通报\\n\\n↓↓↓\\n\\…\n$ original_websites  &lt;chr&gt; \"https://mp.weixin.qq.com/s/xUZR8gZ_N0UqGj0GvH6L8A\"\n$ start_date         &lt;chr&gt; \"2024-04-04\"\n$ start_time         &lt;chr&gt; \"2024-04-04 04:21:00\"\n$ update_time        &lt;chr&gt; \"2024-05-03 10:50:01\"\n$ incident_type      &lt;chr&gt; \"火灾\"\n$ incident_reason    &lt;chr&gt; \"该建筑为一栋11层楼房，起火部位为第三层303房，过火…\n$ person_death_num   &lt;int&gt; 3\n$ person_injury_num  &lt;int&gt; 10\n$ person_missing_num &lt;int&gt; 0\n$ latitude           &lt;dbl&gt; 113.6952\n$ longitude          &lt;dbl&gt; 23.07464\n$ place              &lt;chr&gt; \"东莞万江街道康怡护理院（公助民办养老院）\"\n$ province           &lt;chr&gt; \"广东省\"\n$ city               &lt;chr&gt; \"东莞市\"\n$ county             &lt;chr&gt; \"\"\n$ town               &lt;chr&gt; \"万江街道\"\n$ village            &lt;chr&gt; \"\"\n$ is_final           &lt;lgl&gt; TRUE\n\n\n\n\n3 all file\n\n\nCode\n#url=\"https://github.com/percent4/chinese_incident_tracker/archive/refs/heads/main.zip\"\n#download.file(url,\"./data/data.zip\", mode = \"wb\")\n\n\n\n\nCode\n#unzip(\"./data/data.zip\",exdir=\"./data/out\")\n\n\n\n\nCode\nfrom &lt;- \"./data/out/chinese_incident_tracker-main/elk/data\"\nto   &lt;- \"./data/json_folder\"\nfile.copy(list.files(from, full.names = TRUE), \n          to, \n          recursive = TRUE)\n\n\n [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n\n\n\n\nCode\n#list.files(\"./data/json_folder\")\n\n\n\n\nCode\nall_data=tibble()\n\nfor (i in list.files(\"./data/json_folder\")) {\n  #print(i)\n  data001=read_json(paste0(\"./data/json_folder/\",i))\n  data002=data001 %&gt;% as.data.frame()\n  colnames(data002)[14] = \"Longitude\"\n  colnames(data002)[15] = \"Latitude\"\n  #print(data002)\n  \n  all_data=rbind(all_data,data002)\n}\n\n\n\n\nCode\nall_data=all_data %&gt;% mutate(text=paste0(incident_type,\" \",\"死亡人数:\",person_death_num,\" 受伤人数:\",person_injury_num)\n                             ,month_year= format_ISO8601(ymd(start_date), precision = \"ym\")\n                             )\n\n\n\n\nCode\nglimpse(all_data)\n\n\nRows: 60\nColumns: 24\n$ item_id            &lt;chr&gt; \"00105670-df53-4be8-9039-8a07fe2d2b4d\", \"0683ba1e-7…\n$ news_channel       &lt;chr&gt; \"新闻坊\", \"中国新闻网\", \"凤凰网\", \"搜狐网\", \"每日经…\n$ title              &lt;chr&gt; \"一养老院突发火灾，已致3死10伤！\", \"江西于都一矿企…\n$ report             &lt;chr&gt; \"4月4日\\n\\n“东莞应急管理”\\n\\n发布情况通报\\n\\n↓↓↓\\n\\…\n$ original_websites  &lt;chr&gt; \"https://mp.weixin.qq.com/s/xUZR8gZ_N0UqGj0GvH6L8A\"…\n$ start_date         &lt;chr&gt; \"2024-04-04\", \"2024-04-24\", \"2024-01-22\", \"2024-02-…\n$ start_time         &lt;chr&gt; \"2024-04-04 04:21:00\", \"2024-04-24 00:08:48\", \"2024…\n$ update_time        &lt;chr&gt; \"2024-05-03 10:50:01\", \"2024-05-03 00:08:48\", \"2024…\n$ incident_type      &lt;chr&gt; \"火灾\", \"溃水\", \"山体滑坡\", \"房屋坍塌\", \"燃气爆炸\",…\n$ incident_reason    &lt;chr&gt; \"该建筑为一栋11层楼房，起火部位为第三层303房，过火…\n$ person_death_num   &lt;int&gt; 3, 3, 44, 1, 7, 4, 1, 1, 7, 1, 18, 4, 5, 1, 15, 12,…\n$ person_injury_num  &lt;int&gt; 10, 2, 2, 0, 27, 4, 0, 0, 0, 11, 1155, 0, 3, 2, 44,…\n$ person_missing_num &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 6, 0, …\n$ Longitude          &lt;dbl&gt; 113.69524, 115.32158, 104.95514, 113.28304, 116.808…\n$ Latitude           &lt;dbl&gt; 23.07464, 25.72126, 27.49063, 32.22574, 39.95258, 4…\n$ place              &lt;chr&gt; \"东莞万江街道康怡护理院（公助民办养老院）\", \"于都县…\n$ province           &lt;chr&gt; \"广东省\", \"江西省\", \"云南省\", \"湖北省\", \"河北省\", \"…\n$ city               &lt;chr&gt; \"东莞市\", \"赣州市\", \"昭通市\", \"随州市\", \"廊坊市\", \"…\n$ county             &lt;chr&gt; \"\", \"于都县\", \"镇雄县\", \"随县\", \"三河市\", \"新城区\",…\n$ town               &lt;chr&gt; \"万江街道\", \"祁禄山镇\", \"塘房镇\", \"万和镇\", \"燕郊镇…\n$ village            &lt;chr&gt; \"\", \"金沙村\", \"\", \"\", \"小张各庄\", \"\", \"\", \"\", \"乔家…\n$ is_final           &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…\n$ text               &lt;chr&gt; \"火灾 死亡人数:3 受伤人数:10\", \"溃水 死亡人数:3 受…\n$ month_year         &lt;chr&gt; \"2024-04\", \"2024-04\", \"2024-01\", \"2024-02\", \"2024-0…\n\n\n\n\nCode\n#write.xlsx(all_data,'all_data.xlsx')\n\n\n\n\n4 chart\ngroup to month\n\n\nCode\nchartdata001=all_data %&gt;% group_by(month_year)  %&gt;%  summarise(person_death_num=sum(person_death_num)\n                                                           ,person_injury_num=sum(person_injury_num)\n                                                           )\n\n\nwide to long\n\n\nCode\nchartdata002=chartdata001 %&gt;%select(month_year,person_death_num,person_injury_num) %&gt;% \n  pivot_longer(!c(month_year), names_to = 'type', values_to = 'DATA')\n\n\n\n\nCode\ngg=ggplot(chartdata001, aes(x=month_year, y=person_death_num,label = person_death_num))+\n  geom_bar(stat=\"identity\",fill='red')+ geom_text(vjust = -1,\n              position = position_dodge(width = 0.9))+ theme_bw()\n\n\nggplotly(gg)\n\n\n\n\n\n\n\n\nCode\ngg=ggplot(chartdata002, aes(fill=type, y=DATA, x=month_year)) +\n    geom_col(position = \"dodge\") +\n    geom_text(aes(label = DATA), vjust = 1.5,\n              position = position_dodge(width = 0.9))+scale_y_log10()+ theme_light()\n\npp=ggplotly(gg)\n\npp\n\n\n\n\n\n\n\n\n5 map\n\n\nCode\nall_data2 =all_data %&gt;%  mutate(report=report %&gt;% str_trunc(100))\n\n\n\n\nCode\n#write.xlsx(all_data2,'all_data2.xlsx')\n\n\n\n\nCode\nlibrary(mapview)\nlibrary(sf)\nlibrary(stringr)\n\nmapview(all_data2, map.types='OpenStreetMap',label='text',xcol = \"Longitude\", ycol = \"Latitude\", zcol='incident_type',cex=\"person_death_num\",crs = 4269, grid = FALSE)\n\n\n\n\n\n\n\n\n6 resouce:\nhttps://github.com/percent4/chinese_incident_tracker\nhttps://github.com/r-spatial/mapview\nhttps://maps.clb.org.hk/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "3 Map",
      "China accident map"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html",
    "href": "other/4 other/4 quarto tips.html",
    "title": "quarto tips",
    "section": "",
    "text": "Code\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\n\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).\n\n\n\n\n\n\nCode\nlibrary(ggplot2)\nggplot(airquality, aes(Temp, Ozone)) + \n  geom_point() + \n  geom_smooth(method = \"loess\", se = FALSE)\n\n\n\n\n\n\n\nadd foldableCodeBlcok.lua into blog root folder\nadd in _quarto.yml\n\nfilters: - fold_results.lua\n\nput following on code chunk\n\n{r, attr.output=‘.details summary=“sessionInfo()”’} #| echo: false sessionInfo()\n\n\n\n\n\n\nCode\n\nTerminal\n\nquarto render \"tidymodel in R\"",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/2 translation.html",
    "href": "other/4 other/2 translation.html",
    "title": "Translation",
    "section": "",
    "text": "Code\nlibrary(polyglotr)\n\n\n\n1 Translation word\n\n\nCode\nword_translation &lt;- linguee_word_translation(\"fruit\", source_language = \"en\", target_language = \"zh\")\n\nword_translation\n\n\n[1] \"水果\" \"果香\" \"果子\" \"果品\" \"实\"   \"檎\"  \n\n\n\n\n2 translate sentences\n\n\nCode\ngoogle_get_supported_languages()\n\n\n# A tibble: 134 × 2\n   Language    `ISO-639 code`\n   &lt;chr&gt;       &lt;chr&gt;         \n 1 Afrikaans   af            \n 2 Albanian    sq            \n 3 Amharic     am            \n 4 Arabic      ar            \n 5 Armenian    hy            \n 6 Assamese    as            \n 7 Aymara      ay            \n 8 Azerbaijani az            \n 9 Bambara     bm            \n10 Basque      eu            \n# ℹ 124 more rows\n\n\n\n\nCode\ntexts &lt;- c(\"Hello, how are you?\", \n           \"I love programming!\", \n           \"This is a test.\")\n\nlanguages &lt;- c(\"es\", \"fr\", \"zh-CN\")\n\n\ncreate_translation_table(texts, languages)\n\n\n        original_word                     es                          fr\n1 Hello, how are you?     ¿Hola, cómo estás? Bonjour comment allez-vous?\n2 I love programming! ¡Me encanta programar!  J'adore la programmation !\n3     This is a test.    Esto es una prueba.              C'est un test.\n           zh-CN\n1       你好吗？\n2   我喜欢编程！\n3 这是一个测试。\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "4 other",
      "Translation"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#change-_quarto.yml",
    "href": "other/4 other/4 quarto tips.html#change-_quarto.yml",
    "title": "quarto tips",
    "section": "3.3 change _quarto.yml",
    "text": "3.3 change _quarto.yml\n\n\n_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#ignore-some-file-to-be-upload-to-github",
    "href": "other/4 other/4 quarto tips.html#ignore-some-file-to-be-upload-to-github",
    "title": "quarto tips",
    "section": "3.6 ignore some file to be upload to github",
    "text": "3.6 ignore some file to be upload to github\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#draft-postnot-include-in-the-main-page",
    "href": "other/4 other/4 quarto tips.html#draft-postnot-include-in-the-main-page",
    "title": "quarto tips",
    "section": "2.5 draft post,not include in the main page",
    "text": "2.5 draft post,not include in the main page\n\n\nCode\ndraft:true",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#create-github-repository",
    "href": "other/4 other/4 quarto tips.html#create-github-repository",
    "title": "quarto tips",
    "section": "3.4 create github repository",
    "text": "3.4 create github repository",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#in-github-repository-settingpages-change-branch-to-mian-docs",
    "href": "other/4 other/4 quarto tips.html#in-github-repository-settingpages-change-branch-to-mian-docs",
    "title": "quarto tips",
    "section": "3.5 in github repository setting/Pages change branch to mian /docs",
    "text": "3.5 in github repository setting/Pages change branch to mian /docs\n\nThe github site is created: https://your_github_name.github.io/repository_name/",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#blog-post",
    "href": "other/4 other/4 quarto tips.html#blog-post",
    "title": "quarto tips",
    "section": "2.1 blog post",
    "text": "2.1 blog post\n\n\nCode\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#hide-post-from-main-page",
    "href": "other/4 other/4 quarto tips.html#hide-post-from-main-page",
    "title": "quarto tips",
    "section": "2.2 hide post from main page",
    "text": "2.2 hide post from main page\n\n\nCode\n---\ndraft: true  \n  \n---",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#quarto.yml",
    "href": "other/4 other/4 quarto tips.html#quarto.yml",
    "title": "quarto tips",
    "section": "2.3 _quarto.yml",
    "text": "2.3 _quarto.yml\n\n\nCode\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#index.qmd",
    "href": "other/4 other/4 quarto tips.html#index.qmd",
    "title": "quarto tips",
    "section": "2.4 index.qmd",
    "text": "2.4 index.qmd\n\n\nCode\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-logo",
    "href": "Plot/1 ggplot2.html#add-logo",
    "title": "ggplot2 in R",
    "section": "11.1 add logo",
    "text": "11.1 add logo\n\n\nCode\n# Add your company's logo to the graph you created\nlogo &lt;- image_read(\"logo.png\")\np\ngrid::grid.raster(logo, x = 0.1, y = 0, just = c('left', 'bottom'), width = unit(0.4, 'inches'))",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#quarto-code-chunk-option",
    "href": "other/4 other/4 quarto tips.html#quarto-code-chunk-option",
    "title": "quarto tips",
    "section": "",
    "text": "Code\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\n\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).\n\n\n\n\n\n\nCode\nlibrary(ggplot2)\nggplot(airquality, aes(Temp, Ozone)) + \n  geom_point() + \n  geom_smooth(method = \"loess\", se = FALSE)",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#add-a-output-folder-bottom-at-quarto-file",
    "href": "other/4 other/4 quarto tips.html#add-a-output-folder-bottom-at-quarto-file",
    "title": "quarto tips",
    "section": "",
    "text": "add foldableCodeBlcok.lua into blog root folder\nadd in _quarto.yml\n\nfilters: - fold_results.lua\n\nput following on code chunk\n\n{r, attr.output=‘.details summary=“sessionInfo()”’} #| echo: false sessionInfo()",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#render-all-quarto-website",
    "href": "other/4 other/4 quarto tips.html#render-all-quarto-website",
    "title": "quarto tips",
    "section": "",
    "text": "Code\n\nTerminal\n\nquarto render \"tidymodel in R\"",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#publish-quarto-website-into-quarto-hub",
    "href": "other/4 other/4 quarto tips.html#publish-quarto-website-into-quarto-hub",
    "title": "quarto tips",
    "section": "3.1 Publish quarto website into quarto hub",
    "text": "3.1 Publish quarto website into quarto hub\nyou need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/4 other/4 quarto tips.html#publish-quarto-website-into-github-page",
    "href": "other/4 other/4 quarto tips.html#publish-quarto-website-into-github-page",
    "title": "quarto tips",
    "section": "3.2 Publish quarto website into github page",
    "text": "3.2 Publish quarto website into github page\n\n3.2.1 change _quarto.yml\n\n\n_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n3.2.2 create github repository\n\n\n\n3.2.3 in github repository setting/Pages change branch to mian /docs\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n3.2.4 ignore some file to be upload to github\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Other",
      "4 other",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/3 image processing.html",
    "href": "Plot/3 image processing.html",
    "title": "image processing",
    "section": "",
    "text": "Code\nlibrary(magick)\n\n\n\n1 input\n\n\nCode\nraw_logo &lt;- image_read('./images/comb.webp')\n\n\n\n\n2 output\n\n\nCode\nimage_info(raw_logo)\n\n\n  format width height colorspace matte filesize density\n1   WEBP   450    303       sRGB  TRUE    49650   72x72\n\n\n\n\n3 change format\n\n\nCode\nnew_png &lt;- image_convert(raw_logo, \"png\")\n\n\n\n\nCode\nimage_info(new_png)\n\n\n  format width height colorspace matte filesize density\n1    PNG   450    303       sRGB  TRUE        0   72x72\n\n\n\n\n4 output\n\n\nCode\nimage_write(new_png, path = \"./images/new_png.png\", format = \"png\")\n\n\n\n\nCode\nraw_logo &lt;- image_read('./images/logo1.png')\n\n\n\n\nCode\nraw_logo %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE    53960   72x72\n\n\n\n\n\n\n\n\n\n\n\n5 fill corner white to greem\neach corner (top left, top right, bottom left, bottom right). For our real usage, we’re going to convert this “green” space to transparent instead.\n\n\nCode\nimg_filled &lt;- raw_logo %&gt;% \n    image_fill(\"green\", \"+1+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"green\", \"+140+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"green\", \"+1+99\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"green\", \"+140+99\", fuzz = 50, refcolor = \"white\")\n\nimg_filled %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n6 rotate\n\n\nCode\nimg_filled %&gt;% image_rotate(45) %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1632   1632       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n7 add border\n\n\nCode\nimg_filled %&gt;% image_border(\"#CD5C5C\",\"20x20\")\n\n\n\n\n\n\n\n\n\n\n\n8 make backgroup transparent\n\n\nCode\n# 0-100 distance fuzz match with green\nb=img_filled %&gt;% image_transparent(color='green',10)\n\nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\nCode\nimage_write(b, path = \"b.png\", format = \"png\")\n\n\n\n\n9 change opacity level\n\n\nCode\nb=img_filled %&gt;% image_colorize(opacity =80, color = 'white')\nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n10 change brightness level\n\n\nCode\nb=img_filled %&gt;%image_modulate(brightness = 30)\n  \nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n11 change blur level\n\n\nCode\nb=img_filled %&gt;%  image_blur(10, 5)\n  \nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n12 add text into picture\n\n\nCode\nb=img_filled %&gt;% image_annotate( \"The quick brown fox\", font = 'Times', size = 80,gravity = \"southwest\", color = \"red\")\n  \nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n13 resize\nusing image_resize or image_scale\n\n\nCode\nb= img_filled%&gt;% image_resize(\"500\")\nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG   500    357       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\nCode\nimage_info(img_filled)\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\nCode\nimage_info(b)\n\n\n  format width height colorspace matte filesize density\n1    PNG   500    357       sRGB  TRUE        0   72x72\n\n\n\n\n14 make logo black\n\n\nCode\nimg_filled2 &lt;- raw_logo %&gt;% \n    image_fill(\"transparent\", \"+1+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"transparent\", \"+140+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"transparent\", \"+1+99\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"transparent\", \"+140+99\", fuzz = 50, refcolor = \"white\")\n\n\n\n\nCode\nimg_filled2 %&gt;% \n    image_channel(\"Opacity\") %&gt;% \n    image_convert(matte=FALSE) %&gt;% \n  print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       Gray FALSE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\nsessionInfo()\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Sonoma 14.1.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] magick_2.8.3\n\nloaded via a namespace (and not attached):\n [1] digest_0.6.35     fastmap_1.1.1     xfun_0.43         magrittr_2.0.3   \n [5] knitr_1.45        htmltools_0.5.8.1 png_0.1-8         rmarkdown_2.26   \n [9] cli_3.6.2         compiler_4.3.1    rstudioapi_0.16.0 tools_4.3.1      \n[13] evaluate_0.23     Rcpp_1.0.12       yaml_2.3.8        rlang_1.1.3      \n[17] jsonlite_1.8.8    htmlwidgets_1.6.4\n\n\n\n\n\n15 add backgroup image\n\n\nCode\nlibrary(ggplot2)\nlibrary(png)\nlibrary(grid)\nlibrary(ggimage)\n\n\n\n\nCode\nimg &lt;- readPNG(\"./images/new_png.png\")\n\n\n\n\nCode\nbees &lt;- data.frame(distance = c(0.5, 1, 1.5, 2, 2.5, 3),\n                  number = c(40, 34, 32, 22,18, 10))\n\nggplot(data = bees, aes(x = distance, y = number)) +\n  annotation_custom(rasterGrob(img, \n                               width = unit(1,\"npc\"),\n                               height = unit(1,\"npc\")), \n                    -Inf, Inf, -Inf, Inf) +\n  geom_point() +\n  xlab(\"Distance (km)\") +\n  ylab(\"Number of Bees\") +\n  ylim(0, 45)\n\n\n\n\n\n\n\n\n\n\n\n16 replace scatter with image\n\n\nCode\nbees$image &lt;- \"./images/bee.png\"\n\n\n\n\nCode\nggplot(data = bees, aes(x = distance, y = number)) +\n  annotation_custom(rasterGrob(img, \n                               width = unit(1,\"npc\"),\n                               height = unit(1,\"npc\")), \n                    -Inf, Inf, -Inf, Inf) +\n  geom_image(aes(image = image), size = 0.15) +\n  xlab(\"Distance (km)\") +\n  ylab(\"Number of Bees\") +\n  ylim(0, 45)\n\n\n\n\n\n\n\n\n\n\n\n17 add logo\n\n\nCode\nimg2 =image_read(\"./images/logo1.png\")\n\n\n\n\nCode\nlibrary(cowplot)\np=ggplot(data = bees, aes(x = distance, y = number)) +\n  annotation_custom(rasterGrob(img, \n                               width = unit(1,\"npc\"),\n                               height = unit(1,\"npc\")), \n                    -Inf, Inf, -Inf, Inf) +\n  geom_image(aes(image = image), size = 0.15) +\n  xlab(\"Distance (km)\") +\n  ylab(\"Number of Bees\") +\n  ylim(0, 45)\n\n\n\nggdraw() +draw_plot(p,x = 0, y = 0.15, width = 1, height = 0.85) +draw_image(img2,x = 0.1, y = 0.1, width = 0.1, height = 0.1) \n\n\n\n\n\n\n\n\n\n\n\n18 resource:\nhttps://themockup.blog/posts/2021-01-28-removing-image-backgrounds-with-magick/\nhttps://cran.r-project.org/web/packages/magick/vignettes/intro.html\nhttps://buzzrbeeline.blog/2018/06/13/fun-and-easy-r-graphs-with-images/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "image processing"
    ]
  },
  {
    "objectID": "Plot/Map/2 leaflet.html",
    "href": "Plot/Map/2 leaflet.html",
    "title": "map",
    "section": "",
    "text": "1 data\n\n\nCode\nlibrary(tidyverse)\n\nlibrary(sf)\nlibrary(leaflet)\nlibrary(geojsonio)\nlibrary(leaflet.extras)\n\n\n\n\n2 display at openstreet map\n\n\nCode\nm &lt;- leaflet() %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addMarkers(lng=174.768, lat=-36.852, popup=\"The birthplace of R\")\n\nm  \n\n\n\n\n\n\n\n\n3 display at google map\n\n\nCode\nleaflet() |&gt;\n  # add base mao\n  addTiles(urlTemplate = \"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\") |&gt;\n  # set view\n  setView(116.347817690225, 39.997202126977, zoom = 16) |&gt;\n  # add markers\n  addMarkers(116.347817690225, 39.997202126977)\n\n\n\n\n\n\n\n\n4 Third-Party map\n\n\nCode\n#m &lt;- leaflet() %&gt;% setView(lng = -71.0589, lat = 42.3601, zoom = 10)\n#m %&gt;% addProviderTiles(providers$Stadia.StamenToner)\n\n\n\n\n5 add pop up\nPopups are small boxes containing arbitrary HTML, that point to a specific point on the map.\n\n\nCode\ncontent &lt;- paste(sep = \"&lt;br/&gt;\",\n  \"&lt;b&gt;&lt;a href='https://www.samurainoodle.com/'&gt;Samurai Noodle&lt;/a&gt;&lt;/b&gt;\",\n  \"606 5th Ave. S\",\n  \"Seattle, WA 98138\"\n)\n\nleaflet() %&gt;% addTiles() %&gt;%\n  setView(-122.327298, 47.597131,zoom = 12) %&gt;% \n  addPopups(-122.327298, 47.597131, content,\n    #options = popupOptions(closeButton = FALSE)\n    options = popupOptions(closeButton = FALSE)\n  )\n\n\n\n\n\n\n\n\n6 add Markers\n\n\nCode\nlibrary(htmltools)\n\ndf &lt;- read.csv(textConnection(\n\"Name,Lat,Long\nSamurai Noodle,47.597131,-122.327298\nKukai Ramen,47.6154,-122.327157\nTsukushinbo,47.59987,-122.326726\"\n))\n\nleaflet(df) %&gt;% addTiles() %&gt;%\n  addMarkers(~Long, ~Lat, popup = ~htmlEscape(Name))\n\n\n\n\n\n\n\n\n7 add Labels\nA label is a textual or HTML content that can attached to markers and shapes to be always displayed or displayed on mouse over. Unlike popups you don’t need to click a marker/polygon for the label to be shown.\n\n\nCode\nlibrary(htmltools)\n\ndf &lt;- read.csv(textConnection(\n\"Name,Lat,Long\nSamurai Noodle,47.597131,-122.327298\nKukai Ramen,47.6154,-122.327157\nTsukushinbo,47.59987,-122.326726\"))\n\nleaflet(df) %&gt;% addTiles() %&gt;%\n  addMarkers(~Long, ~Lat, label = ~htmlEscape(Name))\n\n\n\n\n\n\n\n\n8 World map\n\n\nCode\n#install.packages(\"https://cran.r-project.org/src/contrib/Archive/maptools/maptools_1.1-8.tar.gz\")\n\n\n\n\nCode\njson_data=read_sf(\"world-administrative-boundaries.geojson\")\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\n#Get my variable\n#name&lt;-c(\"Ghana\", \"Grenada\", \"Guyana\", \"India\", \"Jamaica\", \"Kenya\", \"United States\",\"Canada\")\n#val&lt;-c(1,2,4,5,5,1000,20000, 100)\n\n#per_gdp_usd&lt;-data.frame(name,val)\n\n\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\n\nper_gdp_usd=read_excel('world data.xlsx') %&gt;% mutate(\n  name=case_when(\n    name ==\"United States\" ~ \"United States of America\"\n     ,name ==\"Russia\" ~ \"Russian Federation\"\n   ,name ==\"U.K. of Great Britain and Northern Ireland\" ~ \"United Kingdom\"\n   \n   ,name ==\"U.K. of Great Britain and Northern Ireland\" ~ \"United Kingdom\"\n   \n   ,name == \"South Korea\"~ \"Republic of Korea\"\n   \n   ,name ==\"Lao People's Democratic Republic\" ~ \"Laos\"\n   \n    ,TRUE ~ name\n  )\n)\n\n\n\n\nCode\n#test=full_join(map_df, per_gdp_usd, by=\"name\")\n\n#left =test %&gt;% filter(is.na(iso3)==TRUE)\n\n#right=test %&gt;% filter(is.na(per_gdp_total)==TRUE)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"name\")\n\n\n\n\nCode\nglimpse(map_df002)\n\n\nRows: 158\nColumns: 12\n$ name                     &lt;chr&gt; \"Albania\", \"Algeria\", \"Andorra\", \"Angola\", \"A…\n$ geo_point_2d             &lt;chr&gt; \"{ \\\"lon\\\": 20.068384605918776, \\\"lat\\\": 41.1…\n$ iso3                     &lt;chr&gt; \"ALB\", \"DZA\", \"AND\", \"AGO\", \"ARG\", \"ARM\", \"AU…\n$ status                   &lt;chr&gt; \"Member State\", \"Member State\", \"Member State…\n$ color_code               &lt;chr&gt; \"ALB\", \"DZA\", \"AND\", \"AGO\", \"ARG\", \"ARM\", \"AU…\n$ continent                &lt;chr&gt; \"Europe\", \"Africa\", \"Europe\", \"Africa\", \"Amer…\n$ region                   &lt;chr&gt; \"Southern Europe\", \"Northern Africa\", \"Southe…\n$ iso_3166_1_alpha_2_codes &lt;chr&gt; \"AL\", \"DZ\", \"AD\", \"AO\", \"AR\", \"AM\", \"AU\", \"AT…\n$ french_short             &lt;chr&gt; \"Albanie\", \"Algérie\", \"Andorre\", \"Angola\", \"A…\n$ geometry                 &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((20.07142 42..., …\n$ per_gdp_total            &lt;dbl&gt; 1.888210e+10, 1.919130e+11, 3.352033e+09, 1.0…\n$ per_gdp_usd              &lt;dbl&gt; 6643, 4274, 41993, 2999, 13904, 7014, 64003, …\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gdp_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gdp_usd, \"（千 美元）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", round(map_sf002$per_gdp_usd/1000), \"K &lt;br/&gt;\",\n       \"总gpd 美元：\", round(map_sf002$per_gdp_total/1000000), \"M &lt;br/&gt;\"\n\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gdp_usd, opacity = 1.0\n    )\n\n\n\n\n\n\n\n\n9 China one city map\n\n\nCode\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/citys/440300.json\") \n#or\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/440300_full.json\")\n\n\n深圳市：\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(json_data) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n\n\n\n\n10 all China each province GPD map\n\n\nCode\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\n中国 2022 各省 人均gpd usd：\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\nper_gdp_usd=read_excel('china gdp2022.xlsx')\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"city\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gpd_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gpd_usd, \"（美万）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", map_sf002$per_gpd_usd, \"&lt;br/&gt;\",\n      \"人均gpd 人民币：\", map_sf002$per_gpd_rmb, \"&lt;br/&gt;\",\n       \"人口：\", round(map_sf002$total_gpd_rmb/map_sf002$per_gpd_rmb), \"&lt;br/&gt;\"\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gpd_usd, opacity = 1.0\n    )\n\n\n\n\n\n\nGPD data source:国家统计局数据库\n\n\n11 China one province map each city GPD\n\n\nCode\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/province/440000.json\") \n\n\n广东省 2021 人均gpd usd：\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\nper_gdp_usd=read_excel('guangdong city gdp2021.xlsx')\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"city\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\ndata source:广东统计年鉴2022\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gpd_usd)\n    ,popup = ~ paste0(\n      \"城市：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gpd_usd, \"（美万）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"城市：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", map_sf002$per_gpd_usd, \"&lt;br/&gt;\",\n      \"人均gpd 人民币：\", map_sf002$per_gpd_rmb, \"&lt;br/&gt;\",\n       \"人口：\", round(map_sf002$total_gpd_rmb*10000000/map_sf002$per_gpd_rmb), \"&lt;br/&gt;\"\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gpd_usd, opacity = 1.0\n    )\n\n\n\n\n\n\nhttps://zh.wikipedia.org/wiki/%E5%B9%BF%E4%B8%9C%E5%90%84%E5%9C%B0%E7%BA%A7%E5%B8%82%E5%9C%B0%E5%8C%BA%E7%94%9F%E4%BA%A7%E6%80%BB%E5%80%BC%E5%88%97%E8%A1%A8\n\n\n12 China province map\n\n\nCode\nlibrary(leaflet)\nlibrary(sf)\n\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/china.json\") \n#or\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nm=leaflet(json_data) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n \n\nm\n\n\n\n\n\n\nadd provincial capital\n\n\nCode\nChina=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\n\n\nCode\nChina002=China %&gt;% as_data_frame() %&gt;% mutate(\n                                            center2=as.character(center) %&gt;% str_replace('c','')%&gt;% str_replace('[(]','') %&gt;% str_replace('[)]','')\n                                               )\n\n\n\n\nCode\nChina003=China002%&gt;%separate(center2, c(\"x\", \"y\"), \", \")\n\n\n\n\nCode\nChina_point = China003 %&gt;% \n  slice(-35)\n\nm %&gt;% \n  addCircles(data = China_point,\n                  lng = ~as.numeric(x), lat = ~as.numeric(y),color = \"red\",weight = 10,\n                  fillOpacity =2)\n\n\n\n\n\n\n\n\n13 China province and city map\n\n\nCode\nmap_list &lt;- lapply(\n  X = list.files(\"./GeoMapData_CN/province\", recursive = T, full.names = T),\n  FUN = sf::read_sf\n)\n\nlength(map_list)\n\n\n[1] 34\n\n\n\n\nCode\nfor (i in c(1:length(map_list))){\n   #print(i)\n  #print(dim(map_list[[i]]))\n  #print(ncol(map_list[[i]]))\n  if(ncol(map_list[[i]])!=10){print(map_list[[i]])}\n  }\n\n\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 119.3183 ymin: 21.75147 xmax: 124.5656 ymax: 25.92592\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                    &lt;MULTIPOLYGON [°]&gt;\n1 710000 台湾省 121.509062,25.044332 province (((119.5543 23.68248, 119.555 23.…\n\n\n\n\nCode\nX = list.files(\"./GeoMapData_CN/province\", recursive = T, full.names = T)\n\nX2=X[-which(X %in% c(\"./GeoMapData_CN/province/710000.json\"\n         ))]\n\nmap_list &lt;- lapply(\n  X = X2,\n  FUN = sf::read_sf\n)\n\n\n\n\nCode\nlength(map_list)\n\n\n[1] 33\n\n\n\n\nCode\nprovince_map &lt;- Reduce(\"rbind\", map_list)\n\n\n\n\nCode\n# library(leaflet)\n# library(sf)\n# \n# json_data &lt;- province_map\n# \n# \n# pal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"), 1:10)\n# \n# leaflet(json_data) %&gt;%\n#   addTiles() %&gt;%\n#   addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n14 China city and district map\n\n\nCode\nmap_list &lt;- lapply(\n  X = list.files(\"./GeoMapData_CN/citys\", recursive = T, full.names = T),\n  FUN = sf::read_sf\n)\n\nlength(map_list)\n\n\n[1] 334\n\n\n\n\nCode\nfor (i in c(1:length(map_list))){\n   #print(i)\n  #print(dim(map_list[[i]]))\n  #print(ncol(map_list[[i]]))\n  if(ncol(map_list[[i]])!=10){print(map_list[[i]])}\n  }\n\n\nSimple feature collection with 1 feature and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 113.5215 ymin: 22.65421 xmax: 114.2603 ymax: 23.14205\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                         &lt;POLYGON [°]&gt;\n1 441900 东莞市 113.746262,23.046237 city  ((114.2292 22.81251, 114.2278 22.813…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 113.157 ymin: 22.20104 xmax: 113.692 ymax: 22.7726\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                         &lt;POLYGON [°]&gt;\n1 442000 中山市 113.382391,22.521113 city  ((113.5687 22.41193, 113.5666 22.412…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 115.9267 ymin: 20.58265 xmax: 116.9338 ymax: 21.12693\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name     center               level                            geometry\n  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;                &lt;chr&gt;                  &lt;MULTIPOLYGON [°]&gt;\n1 442100 东沙群岛 116.887312,20.617512 city  (((115.9433 21.09745, 115.95 21.11…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 108.9287 ymin: 19.17894 xmax: 109.7694 ymax: 19.92575\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                    &lt;MULTIPOLYGON [°]&gt;\n1 460400 儋州市 109.576782,19.517486 city  (((109.4322 19.91302, 109.4253 19.91…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 97.8483 ymin: 39.65426 xmax: 98.52018 ymax: 39.99979\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name     center              level                             geometry\n  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;                   &lt;MULTIPOLYGON [°]&gt;\n1 620200 嘉峪关市 98.277304,39.786529 city  (((97.85974 39.7169, 97.85827 39.71…\n\n\n\n\nCode\nX = list.files(\"./GeoMapData_CN/citys\", recursive = T, full.names = T)\n\nX2=X[-which(X %in% c(\"./GeoMapData_CN/citys/620200.json\"\n         ,\"./GeoMapData_CN/citys/460400.json\"\n              ,\"./GeoMapData_CN/citys/442100.json\"\n              ,\"./GeoMapData_CN/citys/442000.json\"\n              ,\"./GeoMapData_CN/citys/441900.json\"\n         ))]\n\nmap_list &lt;- lapply(\n  X = X2,\n  FUN = sf::read_sf\n)\n\n\n\n\nCode\nlength(map_list)\n\n\n[1] 329\n\n\n\n\nCode\nprovince_map &lt;- Reduce(\"rbind\", map_list)\n\n\n\n\nCode\n# library(leaflet)\n# library(sf)\n# \n# json_data &lt;- province_map\n# \n# \n# pal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"), 1:10)\n# \n# leaflet(json_data) %&gt;%\n#   addTiles() %&gt;%\n#   addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n15 show all map providers\n\n\nCode\nproviders\n\n\nproviders\n$OpenStreetMap\n[1] \"OpenStreetMap\"\n\n$OpenStreetMap.Mapnik\n[1] \"OpenStreetMap.Mapnik\"\n\n$OpenStreetMap.DE\n[1] \"OpenStreetMap.DE\"\n\n$OpenStreetMap.CH\n[1] \"OpenStreetMap.CH\"\n\n$OpenStreetMap.France\n[1] \"OpenStreetMap.France\"\n\n$OpenStreetMap.HOT\n[1] \"OpenStreetMap.HOT\"\n\n$OpenStreetMap.BZH\n[1] \"OpenStreetMap.BZH\"\n\n$MapTilesAPI\n[1] \"MapTilesAPI\"\n\n$MapTilesAPI.OSMEnglish\n[1] \"MapTilesAPI.OSMEnglish\"\n\n$MapTilesAPI.OSMFrancais\n[1] \"MapTilesAPI.OSMFrancais\"\n\n$MapTilesAPI.OSMEspagnol\n[1] \"MapTilesAPI.OSMEspagnol\"\n\n$OpenSeaMap\n[1] \"OpenSeaMap\"\n\n$OPNVKarte\n[1] \"OPNVKarte\"\n\n$OpenTopoMap\n[1] \"OpenTopoMap\"\n\n$OpenRailwayMap\n[1] \"OpenRailwayMap\"\n\n$OpenFireMap\n[1] \"OpenFireMap\"\n\n$SafeCast\n[1] \"SafeCast\"\n\n$Stadia\n[1] \"Stadia\"\n\n$Stadia.AlidadeSmooth\n[1] \"Stadia.AlidadeSmooth\"\n\n$Stadia.AlidadeSmoothDark\n[1] \"Stadia.AlidadeSmoothDark\"\n\n$Stadia.OSMBright\n[1] \"Stadia.OSMBright\"\n\n$Stadia.Outdoors\n[1] \"Stadia.Outdoors\"\n\n$Stadia.StamenToner\n[1] \"Stadia.StamenToner\"\n\n$Stadia.StamenTonerBackground\n[1] \"Stadia.StamenTonerBackground\"\n\n$Stadia.StamenTonerLines\n[1] \"Stadia.StamenTonerLines\"\n\n$Stadia.StamenTonerLabels\n[1] \"Stadia.StamenTonerLabels\"\n\n$Stadia.StamenTonerLite\n[1] \"Stadia.StamenTonerLite\"\n\n$Stadia.StamenWatercolor\n[1] \"Stadia.StamenWatercolor\"\n\n$Stadia.StamenTerrain\n[1] \"Stadia.StamenTerrain\"\n\n$Stadia.StamenTerrainBackground\n[1] \"Stadia.StamenTerrainBackground\"\n\n$Stadia.StamenTerrainLabels\n[1] \"Stadia.StamenTerrainLabels\"\n\n$Stadia.StamenTerrainLines\n[1] \"Stadia.StamenTerrainLines\"\n\n$Thunderforest\n[1] \"Thunderforest\"\n\n$Thunderforest.OpenCycleMap\n[1] \"Thunderforest.OpenCycleMap\"\n\n$Thunderforest.Transport\n[1] \"Thunderforest.Transport\"\n\n$Thunderforest.TransportDark\n[1] \"Thunderforest.TransportDark\"\n\n$Thunderforest.SpinalMap\n[1] \"Thunderforest.SpinalMap\"\n\n$Thunderforest.Landscape\n[1] \"Thunderforest.Landscape\"\n\n$Thunderforest.Outdoors\n[1] \"Thunderforest.Outdoors\"\n\n$Thunderforest.Pioneer\n[1] \"Thunderforest.Pioneer\"\n\n$Thunderforest.MobileAtlas\n[1] \"Thunderforest.MobileAtlas\"\n\n$Thunderforest.Neighbourhood\n[1] \"Thunderforest.Neighbourhood\"\n\n$CyclOSM\n[1] \"CyclOSM\"\n\n$Jawg\n[1] \"Jawg\"\n\n$Jawg.Streets\n[1] \"Jawg.Streets\"\n\n$Jawg.Terrain\n[1] \"Jawg.Terrain\"\n\n$Jawg.Sunny\n[1] \"Jawg.Sunny\"\n\n$Jawg.Dark\n[1] \"Jawg.Dark\"\n\n$Jawg.Light\n[1] \"Jawg.Light\"\n\n$Jawg.Matrix\n[1] \"Jawg.Matrix\"\n\n$MapBox\n[1] \"MapBox\"\n\n$MapTiler\n[1] \"MapTiler\"\n\n$MapTiler.Streets\n[1] \"MapTiler.Streets\"\n\n$MapTiler.Basic\n[1] \"MapTiler.Basic\"\n\n$MapTiler.Bright\n[1] \"MapTiler.Bright\"\n\n$MapTiler.Pastel\n[1] \"MapTiler.Pastel\"\n\n$MapTiler.Positron\n[1] \"MapTiler.Positron\"\n\n$MapTiler.Hybrid\n[1] \"MapTiler.Hybrid\"\n\n$MapTiler.Toner\n[1] \"MapTiler.Toner\"\n\n$MapTiler.Topo\n[1] \"MapTiler.Topo\"\n\n$MapTiler.Voyager\n[1] \"MapTiler.Voyager\"\n\n$TomTom\n[1] \"TomTom\"\n\n$TomTom.Basic\n[1] \"TomTom.Basic\"\n\n$TomTom.Hybrid\n[1] \"TomTom.Hybrid\"\n\n$TomTom.Labels\n[1] \"TomTom.Labels\"\n\n$Esri\n[1] \"Esri\"\n\n$Esri.WorldStreetMap\n[1] \"Esri.WorldStreetMap\"\n\n$Esri.DeLorme\n[1] \"Esri.DeLorme\"\n\n$Esri.WorldTopoMap\n[1] \"Esri.WorldTopoMap\"\n\n$Esri.WorldImagery\n[1] \"Esri.WorldImagery\"\n\n$Esri.WorldTerrain\n[1] \"Esri.WorldTerrain\"\n\n$Esri.WorldShadedRelief\n[1] \"Esri.WorldShadedRelief\"\n\n$Esri.WorldPhysical\n[1] \"Esri.WorldPhysical\"\n\n$Esri.OceanBasemap\n[1] \"Esri.OceanBasemap\"\n\n$Esri.NatGeoWorldMap\n[1] \"Esri.NatGeoWorldMap\"\n\n$Esri.WorldGrayCanvas\n[1] \"Esri.WorldGrayCanvas\"\n\n$OpenWeatherMap\n[1] \"OpenWeatherMap\"\n\n$OpenWeatherMap.Clouds\n[1] \"OpenWeatherMap.Clouds\"\n\n$OpenWeatherMap.CloudsClassic\n[1] \"OpenWeatherMap.CloudsClassic\"\n\n$OpenWeatherMap.Precipitation\n[1] \"OpenWeatherMap.Precipitation\"\n\n$OpenWeatherMap.PrecipitationClassic\n[1] \"OpenWeatherMap.PrecipitationClassic\"\n\n$OpenWeatherMap.Rain\n[1] \"OpenWeatherMap.Rain\"\n\n$OpenWeatherMap.RainClassic\n[1] \"OpenWeatherMap.RainClassic\"\n\n$OpenWeatherMap.Pressure\n[1] \"OpenWeatherMap.Pressure\"\n\n$OpenWeatherMap.PressureContour\n[1] \"OpenWeatherMap.PressureContour\"\n\n$OpenWeatherMap.Wind\n[1] \"OpenWeatherMap.Wind\"\n\n$OpenWeatherMap.Temperature\n[1] \"OpenWeatherMap.Temperature\"\n\n$OpenWeatherMap.Snow\n[1] \"OpenWeatherMap.Snow\"\n\n$HERE\n[1] \"HERE\"\n\n$HERE.normalDay\n[1] \"HERE.normalDay\"\n\n$HERE.normalDayCustom\n[1] \"HERE.normalDayCustom\"\n\n$HERE.normalDayGrey\n[1] \"HERE.normalDayGrey\"\n\n$HERE.normalDayMobile\n[1] \"HERE.normalDayMobile\"\n\n$HERE.normalDayGreyMobile\n[1] \"HERE.normalDayGreyMobile\"\n\n$HERE.normalDayTransit\n[1] \"HERE.normalDayTransit\"\n\n$HERE.normalDayTransitMobile\n[1] \"HERE.normalDayTransitMobile\"\n\n$HERE.normalDayTraffic\n[1] \"HERE.normalDayTraffic\"\n\n$HERE.normalNight\n[1] \"HERE.normalNight\"\n\n$HERE.normalNightMobile\n[1] \"HERE.normalNightMobile\"\n\n$HERE.normalNightGrey\n[1] \"HERE.normalNightGrey\"\n\n$HERE.normalNightGreyMobile\n[1] \"HERE.normalNightGreyMobile\"\n\n$HERE.normalNightTransit\n[1] \"HERE.normalNightTransit\"\n\n$HERE.normalNightTransitMobile\n[1] \"HERE.normalNightTransitMobile\"\n\n$HERE.reducedDay\n[1] \"HERE.reducedDay\"\n\n$HERE.reducedNight\n[1] \"HERE.reducedNight\"\n\n$HERE.basicMap\n[1] \"HERE.basicMap\"\n\n$HERE.mapLabels\n[1] \"HERE.mapLabels\"\n\n$HERE.trafficFlow\n[1] \"HERE.trafficFlow\"\n\n$HERE.carnavDayGrey\n[1] \"HERE.carnavDayGrey\"\n\n$HERE.hybridDay\n[1] \"HERE.hybridDay\"\n\n$HERE.hybridDayMobile\n[1] \"HERE.hybridDayMobile\"\n\n$HERE.hybridDayTransit\n[1] \"HERE.hybridDayTransit\"\n\n$HERE.hybridDayGrey\n[1] \"HERE.hybridDayGrey\"\n\n$HERE.hybridDayTraffic\n[1] \"HERE.hybridDayTraffic\"\n\n$HERE.pedestrianDay\n[1] \"HERE.pedestrianDay\"\n\n$HERE.pedestrianNight\n[1] \"HERE.pedestrianNight\"\n\n$HERE.satelliteDay\n[1] \"HERE.satelliteDay\"\n\n$HERE.terrainDay\n[1] \"HERE.terrainDay\"\n\n$HERE.terrainDayMobile\n[1] \"HERE.terrainDayMobile\"\n\n$HEREv3\n[1] \"HEREv3\"\n\n$HEREv3.normalDay\n[1] \"HEREv3.normalDay\"\n\n$HEREv3.normalDayCustom\n[1] \"HEREv3.normalDayCustom\"\n\n$HEREv3.normalDayGrey\n[1] \"HEREv3.normalDayGrey\"\n\n$HEREv3.normalDayMobile\n[1] \"HEREv3.normalDayMobile\"\n\n$HEREv3.normalDayGreyMobile\n[1] \"HEREv3.normalDayGreyMobile\"\n\n$HEREv3.normalDayTransit\n[1] \"HEREv3.normalDayTransit\"\n\n$HEREv3.normalDayTransitMobile\n[1] \"HEREv3.normalDayTransitMobile\"\n\n$HEREv3.normalNight\n[1] \"HEREv3.normalNight\"\n\n$HEREv3.normalNightMobile\n[1] \"HEREv3.normalNightMobile\"\n\n$HEREv3.normalNightGrey\n[1] \"HEREv3.normalNightGrey\"\n\n$HEREv3.normalNightGreyMobile\n[1] \"HEREv3.normalNightGreyMobile\"\n\n$HEREv3.normalNightTransit\n[1] \"HEREv3.normalNightTransit\"\n\n$HEREv3.normalNightTransitMobile\n[1] \"HEREv3.normalNightTransitMobile\"\n\n$HEREv3.reducedDay\n[1] \"HEREv3.reducedDay\"\n\n$HEREv3.reducedNight\n[1] \"HEREv3.reducedNight\"\n\n$HEREv3.basicMap\n[1] \"HEREv3.basicMap\"\n\n$HEREv3.mapLabels\n[1] \"HEREv3.mapLabels\"\n\n$HEREv3.trafficFlow\n[1] \"HEREv3.trafficFlow\"\n\n$HEREv3.carnavDayGrey\n[1] \"HEREv3.carnavDayGrey\"\n\n$HEREv3.hybridDay\n[1] \"HEREv3.hybridDay\"\n\n$HEREv3.hybridDayMobile\n[1] \"HEREv3.hybridDayMobile\"\n\n$HEREv3.hybridDayTransit\n[1] \"HEREv3.hybridDayTransit\"\n\n$HEREv3.hybridDayGrey\n[1] \"HEREv3.hybridDayGrey\"\n\n$HEREv3.pedestrianDay\n[1] \"HEREv3.pedestrianDay\"\n\n$HEREv3.pedestrianNight\n[1] \"HEREv3.pedestrianNight\"\n\n$HEREv3.satelliteDay\n[1] \"HEREv3.satelliteDay\"\n\n$HEREv3.terrainDay\n[1] \"HEREv3.terrainDay\"\n\n$HEREv3.terrainDayMobile\n[1] \"HEREv3.terrainDayMobile\"\n\n$FreeMapSK\n[1] \"FreeMapSK\"\n\n$MtbMap\n[1] \"MtbMap\"\n\n$CartoDB\n[1] \"CartoDB\"\n\n$CartoDB.Positron\n[1] \"CartoDB.Positron\"\n\n$CartoDB.PositronNoLabels\n[1] \"CartoDB.PositronNoLabels\"\n\n$CartoDB.PositronOnlyLabels\n[1] \"CartoDB.PositronOnlyLabels\"\n\n$CartoDB.DarkMatter\n[1] \"CartoDB.DarkMatter\"\n\n$CartoDB.DarkMatterNoLabels\n[1] \"CartoDB.DarkMatterNoLabels\"\n\n$CartoDB.DarkMatterOnlyLabels\n[1] \"CartoDB.DarkMatterOnlyLabels\"\n\n$CartoDB.Voyager\n[1] \"CartoDB.Voyager\"\n\n$CartoDB.VoyagerNoLabels\n[1] \"CartoDB.VoyagerNoLabels\"\n\n$CartoDB.VoyagerOnlyLabels\n[1] \"CartoDB.VoyagerOnlyLabels\"\n\n$CartoDB.VoyagerLabelsUnder\n[1] \"CartoDB.VoyagerLabelsUnder\"\n\n$HikeBike\n[1] \"HikeBike\"\n\n$HikeBike.HikeBike\n[1] \"HikeBike.HikeBike\"\n\n$HikeBike.HillShading\n[1] \"HikeBike.HillShading\"\n\n$BasemapAT\n[1] \"BasemapAT\"\n\n$BasemapAT.basemap\n[1] \"BasemapAT.basemap\"\n\n$BasemapAT.grau\n[1] \"BasemapAT.grau\"\n\n$BasemapAT.overlay\n[1] \"BasemapAT.overlay\"\n\n$BasemapAT.terrain\n[1] \"BasemapAT.terrain\"\n\n$BasemapAT.surface\n[1] \"BasemapAT.surface\"\n\n$BasemapAT.highdpi\n[1] \"BasemapAT.highdpi\"\n\n$BasemapAT.orthofoto\n[1] \"BasemapAT.orthofoto\"\n\n$nlmaps\n[1] \"nlmaps\"\n\n$nlmaps.standaard\n[1] \"nlmaps.standaard\"\n\n$nlmaps.pastel\n[1] \"nlmaps.pastel\"\n\n$nlmaps.grijs\n[1] \"nlmaps.grijs\"\n\n$nlmaps.water\n[1] \"nlmaps.water\"\n\n$nlmaps.luchtfoto\n[1] \"nlmaps.luchtfoto\"\n\n$NASAGIBS\n[1] \"NASAGIBS\"\n\n$NASAGIBS.ModisTerraTrueColorCR\n[1] \"NASAGIBS.ModisTerraTrueColorCR\"\n\n$NASAGIBS.ModisTerraBands367CR\n[1] \"NASAGIBS.ModisTerraBands367CR\"\n\n$NASAGIBS.ViirsEarthAtNight2012\n[1] \"NASAGIBS.ViirsEarthAtNight2012\"\n\n$NASAGIBS.ModisTerraLSTDay\n[1] \"NASAGIBS.ModisTerraLSTDay\"\n\n$NASAGIBS.ModisTerraSnowCover\n[1] \"NASAGIBS.ModisTerraSnowCover\"\n\n$NASAGIBS.ModisTerraAOD\n[1] \"NASAGIBS.ModisTerraAOD\"\n\n$NASAGIBS.ModisTerraChlorophyll\n[1] \"NASAGIBS.ModisTerraChlorophyll\"\n\n$NLS\n[1] \"NLS\"\n\n$JusticeMap\n[1] \"JusticeMap\"\n\n$JusticeMap.income\n[1] \"JusticeMap.income\"\n\n$JusticeMap.americanIndian\n[1] \"JusticeMap.americanIndian\"\n\n$JusticeMap.asian\n[1] \"JusticeMap.asian\"\n\n$JusticeMap.black\n[1] \"JusticeMap.black\"\n\n$JusticeMap.hispanic\n[1] \"JusticeMap.hispanic\"\n\n$JusticeMap.multi\n[1] \"JusticeMap.multi\"\n\n$JusticeMap.nonWhite\n[1] \"JusticeMap.nonWhite\"\n\n$JusticeMap.white\n[1] \"JusticeMap.white\"\n\n$JusticeMap.plurality\n[1] \"JusticeMap.plurality\"\n\n$GeoportailFrance\n[1] \"GeoportailFrance\"\n\n$GeoportailFrance.plan\n[1] \"GeoportailFrance.plan\"\n\n$GeoportailFrance.parcels\n[1] \"GeoportailFrance.parcels\"\n\n$GeoportailFrance.orthos\n[1] \"GeoportailFrance.orthos\"\n\n$OneMapSG\n[1] \"OneMapSG\"\n\n$OneMapSG.Default\n[1] \"OneMapSG.Default\"\n\n$OneMapSG.Night\n[1] \"OneMapSG.Night\"\n\n$OneMapSG.Original\n[1] \"OneMapSG.Original\"\n\n$OneMapSG.Grey\n[1] \"OneMapSG.Grey\"\n\n$OneMapSG.LandLot\n[1] \"OneMapSG.LandLot\"\n\n$USGS\n[1] \"USGS\"\n\n$USGS.USTopo\n[1] \"USGS.USTopo\"\n\n$USGS.USImagery\n[1] \"USGS.USImagery\"\n\n$USGS.USImageryTopo\n[1] \"USGS.USImageryTopo\"\n\n$WaymarkedTrails\n[1] \"WaymarkedTrails\"\n\n$WaymarkedTrails.hiking\n[1] \"WaymarkedTrails.hiking\"\n\n$WaymarkedTrails.cycling\n[1] \"WaymarkedTrails.cycling\"\n\n$WaymarkedTrails.mtb\n[1] \"WaymarkedTrails.mtb\"\n\n$WaymarkedTrails.slopes\n[1] \"WaymarkedTrails.slopes\"\n\n$WaymarkedTrails.riding\n[1] \"WaymarkedTrails.riding\"\n\n$WaymarkedTrails.skating\n[1] \"WaymarkedTrails.skating\"\n\n$OpenAIP\n[1] \"OpenAIP\"\n\n$OpenSnowMap\n[1] \"OpenSnowMap\"\n\n$OpenSnowMap.pistes\n[1] \"OpenSnowMap.pistes\"\n\n$AzureMaps\n[1] \"AzureMaps\"\n\n$AzureMaps.MicrosoftImagery\n[1] \"AzureMaps.MicrosoftImagery\"\n\n$AzureMaps.MicrosoftBaseDarkGrey\n[1] \"AzureMaps.MicrosoftBaseDarkGrey\"\n\n$AzureMaps.MicrosoftBaseRoad\n[1] \"AzureMaps.MicrosoftBaseRoad\"\n\n$AzureMaps.MicrosoftBaseHybridRoad\n[1] \"AzureMaps.MicrosoftBaseHybridRoad\"\n\n$AzureMaps.MicrosoftTerraMain\n[1] \"AzureMaps.MicrosoftTerraMain\"\n\n$AzureMaps.MicrosoftWeatherInfraredMain\n[1] \"AzureMaps.MicrosoftWeatherInfraredMain\"\n\n$AzureMaps.MicrosoftWeatherRadarMain\n[1] \"AzureMaps.MicrosoftWeatherRadarMain\"\n\n$SwissFederalGeoportal\n[1] \"SwissFederalGeoportal\"\n\n$SwissFederalGeoportal.NationalMapColor\n[1] \"SwissFederalGeoportal.NationalMapColor\"\n\n$SwissFederalGeoportal.NationalMapGrey\n[1] \"SwissFederalGeoportal.NationalMapGrey\"\n\n$SwissFederalGeoportal.SWISSIMAGE\n[1] \"SwissFederalGeoportal.SWISSIMAGE\"\n\n\n\n\n\nCode\nsessionInfo()\n\n\nsessionInfo()\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Sonoma 14.1.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] readxl_1.4.3         openxlsx_4.2.5.2     htmltools_0.5.8.1   \n [4] leaflet.extras_1.0.0 geojsonio_0.11.3     leaflet_2.2.2       \n [7] sf_1.0-16            lubridate_1.9.3      forcats_1.0.0       \n[10] stringr_1.5.1        dplyr_1.1.4          purrr_1.0.2         \n[13] readr_2.1.5          tidyr_1.3.1          tibble_3.2.1        \n[16] ggplot2_3.5.1        tidyverse_2.0.0     \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.5            xfun_0.43               htmlwidgets_1.6.4      \n [4] lattice_0.22-6          tzdb_0.4.0              leaflet.providers_2.0.0\n [7] vctrs_0.6.5             tools_4.3.1             crosstalk_1.2.1        \n[10] generics_0.1.3          curl_5.2.1              proxy_0.4-27           \n[13] fansi_1.0.6             pkgconfig_2.0.3         KernSmooth_2.23-22     \n[16] RColorBrewer_1.1-3      lifecycle_1.0.4         farver_2.1.1           \n[19] compiler_4.3.1          munsell_0.5.1           jqr_1.3.3              \n[22] class_7.3-22            yaml_2.3.8              lazyeval_0.2.2         \n[25] jquerylib_0.1.4         pillar_1.9.0            classInt_0.4-10        \n[28] zip_2.3.1               tidyselect_1.2.1        digest_0.6.35          \n[31] stringi_1.8.4           fastmap_1.1.1           grid_4.3.1             \n[34] colorspace_2.1-0        cli_3.6.2               magrittr_2.0.3         \n[37] crul_1.4.2              utf8_1.2.4              e1071_1.7-14           \n[40] withr_3.0.0             scales_1.3.0            sp_2.1-4               \n[43] timechange_0.3.0        rmarkdown_2.26          cellranger_1.1.0       \n[46] hms_1.1.3               evaluate_0.23           knitr_1.45             \n[49] V8_4.4.2                viridisLite_0.4.2       geojson_0.3.5          \n[52] rlang_1.1.3             Rcpp_1.0.12             glue_1.7.0             \n[55] DBI_1.2.2               httpcode_0.3.0          geojsonsf_2.0.3        \n[58] rstudioapi_0.16.0       jsonlite_1.8.8          R6_2.5.1               \n[61] units_0.8-5            \n\n\n\n\n\n16 resouce:\nhttps://rstudio.github.io/leaflet/\nhttps://github.com/Lchiffon/leafletCN\nhttps://github.com/longwosion/geojson-map-china\nhttps://xiangyun.rbind.io/2022/02/draw-china-maps/\nhttps://datav.aliyun.com/portal/school/atlas/area_selector\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "Map",
      "map"
    ]
  },
  {
    "objectID": "Plot/4 Financial data.html",
    "href": "Plot/4 Financial data.html",
    "title": "Financial data",
    "section": "",
    "text": "Code\nlibrary(quantmod)\nlibrary(tidyverse)\nlibrary(yahoofinancer)\nlibrary(Quandl)\nlibrary(plotly)\nlibrary(finreportr)\nlibrary(rvest)\n\n\n\n1 stock price\n\n\nCode\nnifty_50 &lt;- Index$new('^NSEI')\n\ndata001=nifty_50$get_history(start = '2023-01-01', interval = '1d') %&gt;% mutate(adj_close=adj_close %&gt;% as.numeric())\n\na=head(data001$adj_close,1)[[1]]\n\ndata001b=data001 %&gt;% mutate(adj_close2=adj_close/a)\n\n\n\n\nCode\naapl &lt;- Ticker$new('aapl')\n\ndata002=aapl$get_history(start = '2023-01-01', interval = '1d') %&gt;% mutate(adj_close=adj_close %&gt;% as.numeric())\n\na=head(data002$adj_close,1)[[1]]\n\ndata002b=data002 %&gt;% mutate(adj_close2=adj_close/a)\n\n\n\n\nCode\n# initialize plot\nfig &lt;- plot_ly()\n\n# add data from first dataframe Df1\nfig &lt;- fig %&gt;%\n    add_lines(data=data001b, name=\"NSEI50\", x = ~date, y = ~adj_close2)\n\n# add data from second dataframe Df2\nfig &lt;- fig %&gt;%\n    add_lines(data=data002b, name=\"apple\", x = ~date, y = ~adj_close2)\n# show figure\nfig\n\n\n\n\n\n\n\n\n2 financials income statement\n\n\nCode\nlibrary(chromote)\nlibrary(httr)\n\n\n\n\nCode\nurl='https://finance.yahoo.com/quote/AMAT/financials'\n\n\n\n\nCode\nb &lt;- ChromoteSession$new()\n\n\n\n\nCode\n# In a web browser, open a viewer for the headless browser. Works best with\n# Chromium-based browsers.\n#b$view()\nb$Page$navigate(url)\n\n\n$frameId\n[1] \"CC288F4F40D2609DEC6C62E4211051C9\"\n\n$loaderId\n[1] \"B9F093A6E0C38DDFEE66E928EBCC916E\"\n\n\n\n\nCode\nx &lt;- b$DOM$getDocument()\n\n\n\n\nCode\nb$screenshot(\"sidebar.png\")\n\n\n[1] \"An error occurred: Error in onRejected(...): code: -32000\\n  message: Cannot take screenshot with 0 height.\\n\"\n\n\n\n\nCode\npage=b$Runtime$evaluate(\"document.querySelector('html').outerHTML\")$result$value %&gt;% \n  read_html()\n\n\n\n\nCode\nb$close()\n\n\n[1] TRUE\n\n\n\n\nCode\ncol1=page%&gt;% \n  html_elements(\".row .column:nth-child(1)\") %&gt;% html_text2()  %&gt;% head(33)\n\n\n\n\nCode\ncol2=page%&gt;% \n  html_elements(\".row .column:nth-child(2)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol3=page%&gt;% \n  html_elements(\".row .column:nth-child(3)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol4=page%&gt;% \n  html_elements(\".row .column:nth-child(4)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol5=page%&gt;% \n  html_elements(\".row .column:nth-child(5)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol6=page%&gt;% \n  html_elements(\".row .column:nth-child(6)\") %&gt;% html_text2()\n\n\n\n\nCode\ndata001=data.frame(col1,col2,col3,col4,col5,col6)\n\n\n\n\nCode\nlibrary(janitor )\ncolnames(data001) &lt;- data001[1,]\ndata001 &lt;- data001[-1, ]  %&gt;%clean_names()\n\n\n\n\nCode\nglimpse(data001)\n\n\nRows: 32\nColumns: 6\n$ breakdown   &lt;chr&gt; \"Total Revenue\", \"Cost of Revenue\", \"Gross Profit\", \"Opera…\n$ ttm         &lt;chr&gt; \"26,485,000\", \"14,042,000\", \"12,443,000\", \"4,792,000\", \"7,…\n$ x10_31_2023 &lt;chr&gt; \"26,517,000\", \"14,133,000\", \"12,384,000\", \"4,730,000\", \"7,…\n$ x10_31_2022 &lt;chr&gt; \"25,785,000\", \"13,792,000\", \"11,993,000\", \"4,209,000\", \"7,…\n$ x10_31_2021 &lt;chr&gt; \"23,063,000\", \"12,149,000\", \"10,914,000\", \"3,714,000\", \"7,…\n$ x10_31_2020 &lt;chr&gt; \"17,202,000\", \"9,510,000\", \"7,692,000\", \"3,327,000\", \"4,36…\n\n\n\n\nCode\ndata002=data001 %&gt;% mutate(breakdown=breakdown %&gt;% str_remove_all('HTML_TAG_START HTML_TAG_END')\n                           ,ttm=round(as.numeric(gsub(\",\",\"\",ttm)))\n                           ,year_2023=round(as.numeric(gsub(\",\",\"\",x10_31_2023)))\n                             ,year_2022=round(as.numeric(gsub(\",\",\"\",x10_31_2022)))\n                             ,year_2021=round(as.numeric(gsub(\",\",\"\",x10_31_2021)))\n                             ,year_2020=round(as.numeric(gsub(\",\",\"\",x10_31_2020)))\n                           ) %&gt;% select(-x10_31_2023,-x10_31_2022,-x10_31_2021,-x10_31_2020)\n\n\n\n\nCode\nglimpse(data002)\n\n\nRows: 32\nColumns: 6\n$ breakdown &lt;chr&gt; \"Total Revenue\", \"Cost of Revenue\", \"Gross Profit\", \"Operati…\n$ ttm       &lt;dbl&gt; 26485000, 14042000, 12443000, 4792000, 7651000, 407000, NA, …\n$ year_2023 &lt;dbl&gt; 26517000, 14133000, 12384000, 4730000, 7654000, 62000, NA, 7…\n$ year_2022 &lt;dbl&gt; 25785000, 13792000, 11993000, 4209000, 7784000, -189000, 400…\n$ year_2021 &lt;dbl&gt; 23063000, 12149000, 10914000, 3714000, 7200000, -118000, -31…\n$ year_2020 &lt;dbl&gt; 17202000, 9510000, 7692000, 3327000, 4365000, -199000, NA, 4…\n\n\n\n\nCode\noptions(scipen = 999)\n\nlibrary(knitr)\nkable(data002)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbreakdown\nttm\nyear_2023\nyear_2022\nyear_2021\nyear_2020\n\n\n\n\n2\nTotal Revenue\n26485000\n26517000\n25785000\n23063000\n17202000\n\n\n3\nCost of Revenue\n14042000\n14133000\n13792000\n12149000\n9510000\n\n\n4\nGross Profit\n12443000\n12384000\n11993000\n10914000\n7692000\n\n\n5\nOperating Expense\n4792000\n4730000\n4209000\n3714000\n3327000\n\n\n6\nOperating Income\n7651000\n7654000\n7784000\n7200000\n4365000\n\n\n7\nNet Non Operating Interest Income Expense\n407000\n62000\n-189000\n-118000\n-199000\n\n\n8\nOther Income Expense\nNA\nNA\n4000\n-311000\nNA\n\n\n9\nPretax Income\n8058000\n7716000\n7599000\n6771000\n4166000\n\n\n10\nTax Provision\n900000\n860000\n1074000\n883000\n547000\n\n\n11\nNet Income Common Stockholders\n7158000\n6856000\n6525000\n5888000\n3619000\n\n\n12\nDiluted NI Available to Com Stockholders\n7158000\n6856000\n6525000\n5888000\n3619000\n\n\n13\nBasic EPS\n9\n8\n7\n6\n4\n\n\n14\nDiluted EPS\n8\n8\n7\n6\n4\n\n\n15\nBasic Average Shares\n836500\n840000\n871000\n910000\n916000\n\n\n16\nDiluted Average Shares\n842000\n845000\n877000\n919000\n923000\n\n\n17\nTotal Operating Income as Reported\n7651000\n7654000\n7788000\n6889000\n4365000\n\n\n18\nTotal Expenses\n18834000\n18863000\n18001000\n15863000\n12837000\n\n\n19\nNet Income from Continuing & Discontinued Operation\n7158000\n6856000\n6525000\n5888000\n3619000\n\n\n20\nNormalized Income\n7158000\n6856000\n6521564\n6158570\n3619000\n\n\n21\nInterest Income\n645000\n300000\n39000\n118000\n41000\n\n\n22\nInterest Expense\n238000\n238000\n228000\n236000\n240000\n\n\n23\nNet Interest Income\n407000\n62000\n-189000\n-118000\n-199000\n\n\n24\nEBIT\n8296000\n7954000\n7827000\n7007000\n4406000\n\n\n25\nEBITDA\n8782000\n8469000\n8271000\n7401000\n4782000\n\n\n26\nReconciled Cost of Revenue\n14042000\n14133000\n13792000\n12149000\n9510000\n\n\n27\nReconciled Depreciation\n486000\n515000\n444000\n394000\n376000\n\n\n28\nNet Income from Continuing Operation Net Minority Interest\n7158000\n6856000\n6525000\n5888000\n3619000\n\n\n29\nTotal Unusual Items Excluding Goodwill\nNA\nNA\n4000\n-311000\nNA\n\n\n30\nTotal Unusual Items\nNA\nNA\n4000\n-311000\nNA\n\n\n31\nNormalized EBITDA\n8782000\n8469000\n8267000\n7712000\n4782000\n\n\n32\nTax Rate for Calcs\n0\n0\n0\n0\n0\n\n\n33\nTax Effect of Unusual Items\nNA\nNA\n564\n-40430\nNA\n\n\n\n\n\n\n\n3 resource:\nhttps://github.com/rsquaredacademy/yahoofinancer\nhttps://github.com/sewardlee337/finreportr\nhttps://www.youtube.com/watch?v=uVHGgSXtQmE\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "Financial data"
    ]
  },
  {
    "objectID": "Plot/Map/3 leaflet US.html",
    "href": "Plot/Map/3 leaflet US.html",
    "title": "US map",
    "section": "",
    "text": "1 data\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(chromote)\nlibrary(janitor)\nlibrary(tidygeocoder)\nlibrary(leaflet)\nlibrary(sf)\n\n\n\n\nCode\nlibrary(maps)\nmapStates = map(\"state\", fill = TRUE, plot = FALSE)\n\n\n\n\nCode\njson_data=read_sf(\"us-states.json\")\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\n2 map\n\n\nCode\ndata001=read_csv('./data/us shooting dagta001.csv')\n\n\n\n\nCode\ndata001=sample_n(data001,10) %&gt;% clean_names() %&gt;% mutate(full_adress=paste(address,city_or_county,state))\n\n\n\n\nCode\nglimpse(data001)\n\n\nRows: 10\nColumns: 12\n$ incident_id       &lt;dbl&gt; 2780110, 2793699, 2787520, 2788152, 2785933, 2789593…\n$ incident_date     &lt;chr&gt; \"December 15, 2023\", \"December 20, 2023\", \"December …\n$ state             &lt;chr&gt; \"California\", \"North Carolina\", \"Kentucky\", \"Kansas\"…\n$ city_or_county    &lt;chr&gt; \"Bakersfield\", \"Wadesboro\", \"Louisville\", \"Galena\", …\n$ address           &lt;chr&gt; \"5000 block of Evanston Ct\", \"White Store Rd\", \"2300…\n$ victims_killed    &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 1, 0, 0, 0\n$ victims_injured   &lt;dbl&gt; 0, 2, 1, 1, 1, 1, 0, 1, 1, 1\n$ suspects_killed   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n$ suspects_injured  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n$ suspects_arrested &lt;dbl&gt; 1, 0, 0, 1, 0, 1, 0, 0, 0, 0\n$ operations        &lt;chr&gt; \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/…\n$ full_adress       &lt;chr&gt; \"5000 block of Evanston Ct Bakersfield California\", …\n\n\n\n\n3 search all address to latitude, longitude\n\n\nCode\n# geocode the addresses\ndata002 &lt;- data001 %&gt;%\n  geocode(full_adress, method = 'arcgis', lat = latitude , long = longitude)\n\nglimpse(data002)\n\n\nRows: 10\nColumns: 14\n$ incident_id       &lt;dbl&gt; 2780110, 2793699, 2787520, 2788152, 2785933, 2789593…\n$ incident_date     &lt;chr&gt; \"December 15, 2023\", \"December 20, 2023\", \"December …\n$ state             &lt;chr&gt; \"California\", \"North Carolina\", \"Kentucky\", \"Kansas\"…\n$ city_or_county    &lt;chr&gt; \"Bakersfield\", \"Wadesboro\", \"Louisville\", \"Galena\", …\n$ address           &lt;chr&gt; \"5000 block of Evanston Ct\", \"White Store Rd\", \"2300…\n$ victims_killed    &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 1, 0, 0, 0\n$ victims_injured   &lt;dbl&gt; 0, 2, 1, 1, 1, 1, 0, 1, 1, 1\n$ suspects_killed   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n$ suspects_injured  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n$ suspects_arrested &lt;dbl&gt; 1, 0, 0, 1, 0, 1, 0, 0, 0, 0\n$ operations        &lt;chr&gt; \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/…\n$ full_adress       &lt;chr&gt; \"5000 block of Evanston Ct Bakersfield California\", …\n$ latitude          &lt;dbl&gt; 35.31938, 34.92870, 38.21242, 37.07492, 41.47294, 39…\n$ longitude         &lt;dbl&gt; -119.05923, -80.17780, -85.75143, -94.63921, -81.591…\n\n\n\n\nCode\ndata003=data002 %&gt;% filter(is.na(latitude)==FALSE,(is.na(longitude)==FALSE))\n\n\n\n\n4 map\n\n\nCode\nm &lt;- leaflet(data=mapStates) %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addMarkers( lng=data003$longitude, lat=data003$latitude, popup=data003$state)%&gt;% \n  addPolygons(fillColor = topo.colors(10, alpha = NULL), stroke = FALSE)\n\nm  \n\n\n\n\n\n\n\n\n5 US gdp by State\n\n\nCode\nglimpse(mapStates)\n\n\nList of 4\n $ x    : num [1:15599] -87.5 -87.5 -87.5 -87.5 -87.6 ...\n $ y    : num [1:15599] 30.4 30.4 30.4 30.3 30.3 ...\n $ range: num [1:4] -124.7 -67 25.1 49.4\n $ names: chr [1:63] \"alabama\" \"arizona\" \"arkansas\" \"california\" ...\n - attr(*, \"class\")= chr \"map\"\n\n\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\n\nper_gdp_usd=read_excel('US state gpd 2022.xlsx') %&gt;% mutate(names=str_replace(names,'\\\\*','') %&gt;% str_trim() )\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"names\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"magma\", NULL)\n\n\nm &lt;- leaflet(map_sf002) %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n   addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_2022_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_2022_usd, \"（千 美元）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", round(map_sf002$per_2022_usd/1000), \"K &lt;br/&gt;\",\n       \"总gpd 美元：\", round(map_sf002$total_2022_usd), \"M &lt;br/&gt;\"\n\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_2022_usd, opacity = 1.0\n    )\n  \n\n\n\nm  \n\n\n\n\n\n\n\n\n6 resouce:\nhttps://www.gunviolencearchive.org/reports/mass-shooting?page=8&year=2023\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "Map",
      "US map"
    ]
  },
  {
    "objectID": "other/5 Publish/1 quarto tips.html",
    "href": "other/5 Publish/1 quarto tips.html",
    "title": "quarto tips",
    "section": "",
    "text": "Code\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\n\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).\n\n\n\n\n\n\nCode\nlibrary(ggplot2)\nggplot(airquality, aes(Temp, Ozone)) + \n  geom_point() + \n  geom_smooth(method = \"loess\", se = FALSE)",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/5 Publish/1 quarto tips.html#in-yaml-header",
    "href": "other/5 Publish/1 quarto tips.html#in-yaml-header",
    "title": "quarto tips",
    "section": "",
    "text": "Code\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\n\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/5 Publish/1 quarto tips.html#in-code-chunk",
    "href": "other/5 Publish/1 quarto tips.html#in-code-chunk",
    "title": "quarto tips",
    "section": "",
    "text": "Code\nlibrary(ggplot2)\nggplot(airquality, aes(Temp, Ozone)) + \n  geom_point() + \n  geom_smooth(method = \"loess\", se = FALSE)",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/5 Publish/2 quarto blog.html",
    "href": "other/5 Publish/2 quarto blog.html",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---\n\n\n\n\n\n\n\nCode\n---\ndraft: true  \n  \n---\n\n\n\n\n\n\n\nCode\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true\n\n\n\n\n\n\n\nCode\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---\n\n\n\n\n\n\n\nCode\ndraft:true",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "other/5 Publish/2 quarto blog.html#blog-post",
    "href": "other/5 Publish/2 quarto blog.html#blog-post",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "other/5 Publish/2 quarto blog.html#hide-post-from-main-page",
    "href": "other/5 Publish/2 quarto blog.html#hide-post-from-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ndraft: true  \n  \n---",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "other/5 Publish/2 quarto blog.html#quarto.yml",
    "href": "other/5 Publish/2 quarto blog.html#quarto.yml",
    "title": "quarto blog",
    "section": "",
    "text": "Code\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "other/5 Publish/2 quarto blog.html#index.qmd",
    "href": "other/5 Publish/2 quarto blog.html#index.qmd",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "other/5 Publish/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "href": "other/5 Publish/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\ndraft:true",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "other/5 Publish/3 quarto website.html",
    "href": "other/5 Publish/3 quarto website.html",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub\n\n\n\n\n\n\n\n\n\n_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto website"
    ]
  },
  {
    "objectID": "other/5 Publish/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "href": "other/5 Publish/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto website"
    ]
  },
  {
    "objectID": "other/5 Publish/3 quarto website.html#publish-quarto-website-into-github-page",
    "href": "other/5 Publish/3 quarto website.html#publish-quarto-website-into-github-page",
    "title": "quarto website",
    "section": "",
    "text": "_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto website"
    ]
  },
  {
    "objectID": "other/5 Publish/4 quarto presentation .html",
    "href": "other/5 Publish/4 quarto presentation .html",
    "title": "quarto presentation",
    "section": "",
    "text": "1 revealjs YAML\n\n\nCode\n---\ntitle: \"Habits\"\nauthor: \"John Doe\"\nformat: revealjs\n---\n\n\n\n\n2 pages\n\n\nCode\n# pages\n\n# In the morning\n\n## Getting up\n\n- Turn off alarm\n- Get out of bed\n\n## Breakfast\n\n- Eat eggs\n- Drink coffee\n\n\n\n\n3 YAML format setting\n\n\nCode\nformat:\n  revealjs:\n    controls: true\n    navigation-mode: vertical\n    height: 800\n    width: 1000    \n    fontsize: 20pt\n    page-layout: full\n    logo: images/logo.jpg\n    footer: \"This is footer(https://google.com/)\"\n    slide-number: c\n    show-slide-number: all\n    menu: false\n\n\n\n\n4 Main Title Slide Background YAML setting\n\n\nCode\n---\ntitle: My Slide Show\ntitle-slide-attributes:\n    data-background-image: /path/to/title_image.png\n    data-background-size: contain\n    data-background-opacity: \"0.5\"\n---\n\n\n\n\n5 Chalkboard YAML setting\n\n\nCode\n---\ntitle: \"Presentation\"\nformat:\n  revealjs:\n    chalkboard: true\n---\n\n\n\n\n6 center whole page\n\n\nCode\n# This will be centered {.center}\n\nThis text is moved as well\n\n\n\n\n7 reference:\nhttps://quarto.org/docs/presentations/revealjs/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto presentation"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#replace-string",
    "href": "data manipulation/3 data manipulation with tidyverse.html#replace-string",
    "title": "Data manipulation with tidyverse",
    "section": "3.6 replace string",
    "text": "3.6 replace string\n\n3.6.1 str_replace()\n\n\nCode\ntext001=\"abcb\"\ntext001 %&gt;% str_replace('b','1')\n\n\n[1] \"a1cb\"\n\n\n\n\n3.6.2 str_replace_all()\n\n\nCode\ntext001=\"abcb\"\ntext001 %&gt;% str_replace_all('b','1')\n\n\n[1] \"a1c1\"\n\n\n\n\n3.6.3 replace with regular expression\n\n\nCode\nword2=c('a-b','M6D5','M6D54','M6D55','M6D5') %&gt;% as_tibble()\nword2\n\n\n# A tibble: 5 × 1\n  value\n  &lt;chr&gt;\n1 a-b  \n2 M6D5 \n3 M6D54\n4 M6D55\n5 M6D5 \n\n\nreplace D+all number with ’_’\n\n\nCode\nword2 %&gt;% mutate(new=value %&gt;% str_replace_all('D\\\\d*','_'))\n\n\n# A tibble: 5 × 2\n  value new  \n  &lt;chr&gt; &lt;chr&gt;\n1 a-b   a-b  \n2 M6D5  M6_  \n3 M6D54 M6_  \n4 M6D55 M6_  \n5 M6D5  M6_",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#split-string",
    "href": "data manipulation/3 data manipulation with tidyverse.html#split-string",
    "title": "Data manipulation with tidyverse",
    "section": "3.7 split string",
    "text": "3.7 split string\n\n\nCode\nword=c('a-b','1-c','c-c')\n\ndf_word=word %&gt;% as.data.frame() %&gt;% rename('word'='.')\n\n\n\n3.7.1 make 2 coloumn and split by - using stringr package\n\n\nCode\ndf_word\n\n\n  word\n1  a-b\n2  1-c\n3  c-c\n\n\n\n\nCode\nlibrary(stringr)\ndf_word$word %&gt;% str_split_fixed('-',2)\n\n\n     [,1] [,2]\n[1,] \"a\"  \"b\" \n[2,] \"1\"  \"c\" \n[3,] \"c\"  \"c\" \n\n\n\n\n3.7.2 make 2 coloumn and split by - using tidyr package\n\n\nCode\ndf_word\n\n\n  word\n1  a-b\n2  1-c\n3  c-c\n\n\n\n\nCode\nlibrary(tidyr)\ndf_word %&gt;% separate(word,c('col1','col2'),'-')\n\n\n  col1 col2\n1    a    b\n2    1    c\n3    c    c",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#subset-element-in-list",
    "href": "data manipulation/3 data manipulation with tidyverse.html#subset-element-in-list",
    "title": "Data manipulation with tidyverse",
    "section": "3.8 subset element in list",
    "text": "3.8 subset element in list\n\n\nCode\nword=c('aabbbasdf','apple','pet','melon')\n\n\n\n3.8.1 word with ‘a’\n\n\nCode\nword %&gt;% str_subset('a')\n\n\n[1] \"aabbbasdf\" \"apple\"    \n\n\n\n\n3.8.2 word with ‘a,e,i,o,u’\n\n\nCode\nword %&gt;% str_subset(\"[aeiou]\")\n\n\n[1] \"aabbbasdf\" \"apple\"     \"pet\"       \"melon\"    \n\n\n\n\n3.8.3 word with ‘pet’ or ‘melon’\n\n\nCode\nword %&gt;% str_subset('pet|melon')\n\n\n[1] \"pet\"   \"melon\"\n\n\n\n\n3.8.4 word with ‘pet’ or ‘melon’\n\n\nCode\nword %&gt;% str_subset('aa')\n\n\n[1] \"aabbbasdf\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#extract-string",
    "href": "data manipulation/3 data manipulation with tidyverse.html#extract-string",
    "title": "Data manipulation with tidyverse",
    "section": "3.9 extract string",
    "text": "3.9 extract string\n\n\nCode\ndata001=mtcars\ndata001 &lt;- cbind(names = rownames(data001), data001)\n\n\n\n3.9.1 by postion\nextract 2 to 4\n\n\nCode\ndata001$new_names=data001$names %&gt;% str_sub(2,4)\nhead(data001 %&gt;% select(new_names,names))\n\n\n                  new_names             names\nMazda RX4               azd         Mazda RX4\nMazda RX4 Wag           azd     Mazda RX4 Wag\nDatsun 710              ats        Datsun 710\nHornet 4 Drive          orn    Hornet 4 Drive\nHornet Sportabout       orn Hornet Sportabout\nValiant                 ali           Valiant\n\n\n\n\n3.9.2 extracting with Regular expressions\nextracting one letter\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract(\"\\\\w\")\n\n\n[1] \"a\"\n\n\nextracting one letter/number\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract(\".\")\n\n\n[1] \"a\"\n\n\nextracting one .\n\n\nCode\ntrx='abc1993.ccc'\ntrx %&gt;% str_extract(\"\\\\.\")\n\n\n[1] \".\"\n\n\nextracting 3 letter start with ‘a’\n\n\nCode\nword=c('aabbbasdfe. e','appl.e e','pet','melon','asdf g 133asd') %&gt;% as_tibble()\nword\n\n\n# A tibble: 5 × 1\n  value        \n  &lt;chr&gt;        \n1 aabbbasdfe. e\n2 appl.e e     \n3 pet          \n4 melon        \n5 asdf g 133asd\n\n\nextracting 2 letter start with ‘a’\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\"a..\"))\n\n\n# A tibble: 5 × 2\n  value         new  \n  &lt;chr&gt;         &lt;chr&gt;\n1 aabbbasdfe. e aab  \n2 appl.e e      app  \n3 pet           &lt;NA&gt; \n4 melon         &lt;NA&gt; \n5 asdf g 133asd asd  \n\n\nextracting all letter start with ‘a’\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\"a.+\"))\n\n\n# A tibble: 5 × 2\n  value         new          \n  &lt;chr&gt;         &lt;chr&gt;        \n1 aabbbasdfe. e aabbbasdfe. e\n2 appl.e e      appl.e e     \n3 pet           &lt;NA&gt;         \n4 melon         &lt;NA&gt;         \n5 asdf g 133asd asdf g 133asd\n\n\nextracting all letter between ‘a’ and ‘e’\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\"(a).*?(e)\"))\n\n\n# A tibble: 5 × 2\n  value         new       \n  &lt;chr&gt;         &lt;chr&gt;     \n1 aabbbasdfe. e aabbbasdfe\n2 appl.e e      appl.e    \n3 pet           &lt;NA&gt;      \n4 melon         &lt;NA&gt;      \n5 asdf g 133asd &lt;NA&gt;      \n\n\nextracting all letter between ‘a’ and ‘.’\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\"(a).*?(\\\\.)\"))\n\n\n# A tibble: 5 × 2\n  value         new        \n  &lt;chr&gt;         &lt;chr&gt;      \n1 aabbbasdfe. e aabbbasdfe.\n2 appl.e e      appl.      \n3 pet           &lt;NA&gt;       \n4 melon         &lt;NA&gt;       \n5 asdf g 133asd &lt;NA&gt;       \n\n\nextracting all letter between ‘a’ and space\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\"(a).*?( )\"))\n\n\n# A tibble: 5 × 2\n  value         new           \n  &lt;chr&gt;         &lt;chr&gt;         \n1 aabbbasdfe. e \"aabbbasdfe. \"\n2 appl.e e      \"appl.e \"     \n3 pet            &lt;NA&gt;         \n4 melon          &lt;NA&gt;         \n5 asdf g 133asd \"asdf \"       \n\n\nextracting all letter end with number\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\".*?\\\\d\")\n               , new2=new %&gt;% str_sub(end=-3)\n                                         \n)\n\n\n# A tibble: 5 × 3\n  value         new      new2  \n  &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt; \n1 aabbbasdfe. e &lt;NA&gt;     &lt;NA&gt;  \n2 appl.e e      &lt;NA&gt;     &lt;NA&gt;  \n3 pet           &lt;NA&gt;     &lt;NA&gt;  \n4 melon         &lt;NA&gt;     &lt;NA&gt;  \n5 asdf g 133asd asdf g 1 asdf g\n\n\nextracting one number\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract(\"\\\\d\")\n\n\n[1] \"1\"\n\n\nextracting more number\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract(\"(\\\\d)+\")\n\n\n[1] \"1993\"\n\n\nextracting more non number\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract_all(\"\\\\D+\")\n\n\n[[1]]\n[1] \"abc\"  \" ccc\"\n\n\nextracting all letter from the begining\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract(\"[:alpha:]+\")\n\n\n[1] \"abc\"\n\n\nextracting number after points:\n\n\nCode\ntrx=c('abcpoints:100 ccc','asdfasd','points:66','thisis points:6')\ntrx\n\n\n[1] \"abcpoints:100 ccc\" \"asdfasd\"           \"points:66\"        \n[4] \"thisis points:6\"  \n\n\nextracting number after points: and remove non match\n\n\nCode\nt=trx %&gt;% str_extract(\"points:[:digit:]+\") %&gt;% na.omit()%&gt;% str_extract(\"points:[:digit:]+\")\nt\n\n\n[1] \"points:100\" \"points:66\"  \"points:6\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#regular-expressions",
    "href": "data manipulation/3 data manipulation with tidyverse.html#regular-expressions",
    "title": "Data manipulation with tidyverse",
    "section": "3.10 Regular expressions",
    "text": "3.10 Regular expressions\n\n\nCode\nphones=c('abba','124','anna')\nphones\n\n\n[1] \"abba\" \"124\"  \"anna\"\n\n\n\n3.10.1 get a+ (b or n) + (b or n) + a\n\n\nCode\nphones %&gt;% str_view('a[bn][bn]a')\n\n\n[1] │ &lt;abba&gt;\n[3] │ &lt;anna&gt;\n\n\n\n\n3.10.2 bb or nn\n\n\nCode\nphones %&gt;% str_view('(bb|nn)')\n\n\n[1] │ a&lt;bb&gt;a\n[3] │ a&lt;nn&gt;a",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#compare-two-vector",
    "href": "data manipulation/2 data structure in R.html#compare-two-vector",
    "title": "Data structure in R",
    "section": "1.11 compare two vector",
    "text": "1.11 compare two vector\n\n\nCode\nxx=c(1,2,3,4)\nxx\n\n\n[1] 1 2 3 4\n\n\n\n\nCode\nyy=c(2,4)\nyy\n\n\n[1] 2 4\n\n\nfind number only in xx not in yy\n\n\nCode\nsetdiff(xx, yy)\n\n\n[1] 1 3",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "other/5 Publish/1 quarto tips.html#embed-youtube",
    "href": "other/5 Publish/1 quarto tips.html#embed-youtube",
    "title": "quarto tips",
    "section": "embed youtube",
    "text": "embed youtube\n\n\nCode\n&lt;iframe width=\"640\" height=\"480\" src=\"https://www.youtube.com/embed/nku5zFMZAdU\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen&gt;\n&lt;/iframe&gt;",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "other/5 Publish/1 quarto tips.html#embed-local",
    "href": "other/5 Publish/1 quarto tips.html#embed-local",
    "title": "quarto tips",
    "section": "embed local",
    "text": "embed local\n\n\nCode\n{{&lt; video images/vv.mp4 height=\"600\" &gt;}}",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#line-width-and-colour",
    "href": "Plot/2 plotly.html#line-width-and-colour",
    "title": "Plotly in R",
    "section": "1.4 line width and colour",
    "text": "1.4 line width and colour\n\n\nCode\nfig &lt;- plot_ly(data = data002 %&gt;%filter(continent=='Asia'), x = ~year, y = ~pop,mode = 'lines',line = list(color = 'rgb(205, 12, 24)', width = 8))\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#change-x-y-axis-range",
    "href": "Plot/2 plotly.html#change-x-y-axis-range",
    "title": "Plotly in R",
    "section": "7.4 change x y axis range",
    "text": "7.4 change x y axis range\n\n\nCode\nfig &lt;- plot_ly(data=tips,x = ~total_bill,color=~sex, type = \"histogram\") %&gt;% layout(title = 'new title'\n                                                                                   ,xaxis = list(title = 'new x',range=c(20,40))\n                                                                                  ,yaxis = list(title = 'new y',range=c(20,40)) \n                                                                                    )\n\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "other/3 Web scraping on whiskyfun.com/6 EDA.html",
    "href": "other/3 Web scraping on whiskyfun.com/6 EDA.html",
    "title": "All page clean up",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(stringr)\nlibrary(openxlsx)\nlibrary(readxl)\nlibrary(lubridate)\nlibrary(ggplot2)\n\n\n\n1 input\n\n\nCode\ndata001=read_excel('./output/all_page_review_clean_v2.xlsx') %&gt;% mutate(\n  title_length=nchar(name)\n  ,high_bottle=if_else(score&gt;=90,1,0)\n  \n  )\n\n\n\n\nCode\nglimpse(data001)\n\n\n\n\nCode\ndata002=data001 %&gt;% select(-old_page,-review_date) %&gt;% unique() %&gt;% filter(score&gt;0\n                                                              ,score&lt;=100\n                                                              ,bottle_review2 %&gt;% str_sub(1,6)!='Colour'\n                                                               ,bottle_review2 %&gt;% str_sub(1,4)!='Nose'\n                                                               ,bottle_review2 %&gt;%str_sub(1,5)!='Mouth'\n                                                              ,title_length&lt;=180\n                                                              ) %&gt;% arrange(desc(title_length))\nglimpse(data002)\n\n\n\n\nCode\nsummary001=data002 %&gt;% group_by(review_year) %&gt;% summarise(score=mean(score)\n                                                           ,bottles=n()\n                                                           ,high_bottle=sum(high_bottle)\n                                                           ) %&gt;% mutate(high_bottle_per=high_bottle/bottles)\n\nsummary001\n\n\n\n\nCode\np=ggplot(summary001, aes(review_year,score)) + geom_point()+ geom_line()\np\n\n\n\n\nCode\np=ggplot(summary001, aes(review_year,bottles)) + geom_point()+ geom_line()\np\n\n\n\n\nCode\np=ggplot(summary001, aes(review_year,high_bottle_per)) + geom_point()+ geom_line()\np\n\n\n\n\nCode\nlibrary(plotly)\npp=plot_ly(summary001, x = ~review_year, y = ~bottles, type = \"bar\", name = \"bottles\") %&gt;%\n  add_trace(x = ~review_year, y = ~score, type = 'scatter', mode = \"lines\", yaxis = \"y2\", name = \"score\", line = list(color = 'rgb(205, 12, 24)', width = 8)) %&gt;%\n  \n  layout(\n    title = 'Whiksyfun review bottles and average score'\n    ,legend = list(orientation = 'h')\n     ,xaxis = list(range=c(2003,2025))\n    ,yaxis2 = list(overlaying = \"y\", side = \"right\",range=c(80,90))\n    ,yaxis = list(range=c(0,1500))\n         )\n\npp\n\n\n\n\nCode\norca(pp, \"plot.png\")\n\n\n\n\nCode\nlibrary(plotly)\npp=plot_ly(summary001, x = ~review_year, y = ~bottles, type = \"bar\", name = \"瓶\",text=~bottles) %&gt;%\n  add_trace(x = ~review_year, y = ~score, type = 'scatter', mode = \"lines\", yaxis = \"y2\", name = \"平均分\", line = list(color = 'rgb(205, 12, 24)', width = 8)) %&gt;%\n  \n  layout(\n    title = 'WF每年酒评数量和平均分'\n    ,showlegend = FALSE\n     ,xaxis = list(title='年'\n                   ,dtick = 2\n                   ,tick0 = 2004\n      ,tickmode = \"linear\"\n      )\n    ,margin=list(\n  l = 50,\n  r = 50,\n  b = 100,\n  t = 100,\n  pad = 4\n)\n    ,yaxis2 = list(overlaying = \"y\", side = \"left\",range=c(80,90),title='平均分')\n    ,yaxis = list(side=\"left\",zeroline = FALSE,showline = FALSE,showticklabels = FALSE,showgrid = FALSE,title='')\n    ,annotations = list(x = 1, y = -0.2, \n                              text = \"2004-09 to 2024-05\", \n                              showarrow = F, \n                              xref='paper', \n                              yref='paper'\n      )\n                              \n       ,images = list(  \n      list(  \n        source = base64enc::dataURI(file = \"wf logo.png\")\n        ,xref = \"paper\"\n        ,yref = \"paper\" \n        ,x = 0.01\n        ,y = -0.08\n        ,sizex = 0.4\n        ,sizey = 0.4\n       ,xanchor=\"left\"  \n      )  \n    )   )\n\npp\n\n\n\n\nCode\norca(pp, \"plot2.png\")\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "3 Web scraping on whiskyfun.com",
      "All page clean up"
    ]
  },
  {
    "objectID": "other/5 Publish/1 quarto tips.html#embed-local-video",
    "href": "other/5 Publish/1 quarto tips.html#embed-local-video",
    "title": "quarto tips",
    "section": "embed local video",
    "text": "embed local video\n\n\nCode\n{{&lt; video images/vv.mp4 height=\"600\" &gt;}}",
    "crumbs": [
      "Other",
      "5 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/5 Publish/1 quarto tips.html",
    "href": "Plot/5 Publish/1 quarto tips.html",
    "title": "quarto tips",
    "section": "",
    "text": "Code\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\n\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).\n\n\n\n\n\n\nCode\nlibrary(ggplot2)\nggplot(airquality, aes(Temp, Ozone)) + \n  geom_point() + \n  geom_smooth(method = \"loess\", se = FALSE)",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/5 Publish/1 quarto tips.html#in-yaml-header",
    "href": "Plot/5 Publish/1 quarto tips.html#in-yaml-header",
    "title": "quarto tips",
    "section": "",
    "text": "Code\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\n\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/5 Publish/1 quarto tips.html#in-code-chunk",
    "href": "Plot/5 Publish/1 quarto tips.html#in-code-chunk",
    "title": "quarto tips",
    "section": "",
    "text": "Code\nlibrary(ggplot2)\nggplot(airquality, aes(Temp, Ozone)) + \n  geom_point() + \n  geom_smooth(method = \"loess\", se = FALSE)",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/5 Publish/1 quarto tips.html#embed-youtube",
    "href": "Plot/5 Publish/1 quarto tips.html#embed-youtube",
    "title": "quarto tips",
    "section": "embed youtube",
    "text": "embed youtube\n\n\nCode\n&lt;iframe width=\"640\" height=\"480\" src=\"https://www.youtube.com/embed/nku5zFMZAdU\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen&gt;\n&lt;/iframe&gt;",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/5 Publish/1 quarto tips.html#embed-local-video",
    "href": "Plot/5 Publish/1 quarto tips.html#embed-local-video",
    "title": "quarto tips",
    "section": "embed local video",
    "text": "embed local video\n\n\nCode\n{{&lt; video images/vv.mp4 height=\"600\" &gt;}}",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/5 Publish/4 quarto presentation .html",
    "href": "Plot/5 Publish/4 quarto presentation .html",
    "title": "quarto presentation",
    "section": "",
    "text": "1 revealjs YAML\n\n\nCode\n---\ntitle: \"Habits\"\nauthor: \"John Doe\"\nformat: revealjs\n---\n\n\n\n\n2 pages\n\n\nCode\n# pages\n\n# In the morning\n\n## Getting up\n\n- Turn off alarm\n- Get out of bed\n\n## Breakfast\n\n- Eat eggs\n- Drink coffee\n\n\n\n\n3 YAML format setting\n\n\nCode\nformat:\n  revealjs:\n    controls: true\n    navigation-mode: vertical\n    height: 800\n    width: 1000    \n    fontsize: 20pt\n    page-layout: full\n    logo: images/logo.jpg\n    footer: \"This is footer(https://google.com/)\"\n    slide-number: c\n    show-slide-number: all\n    menu: false\n\n\n\n\n4 Main Title Slide Background YAML setting\n\n\nCode\n---\ntitle: My Slide Show\ntitle-slide-attributes:\n    data-background-image: /path/to/title_image.png\n    data-background-size: contain\n    data-background-opacity: \"0.5\"\n---\n\n\n\n\n5 Chalkboard YAML setting\n\n\nCode\n---\ntitle: \"Presentation\"\nformat:\n  revealjs:\n    chalkboard: true\n---\n\n\n\n\n6 center whole page\n\n\nCode\n# This will be centered {.center}\n\nThis text is moved as well\n\n\n\n\n7 reference:\nhttps://quarto.org/docs/presentations/revealjs/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto presentation"
    ]
  },
  {
    "objectID": "Plot/5 Publish/3 quarto website.html",
    "href": "Plot/5 Publish/3 quarto website.html",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub\n\n\n\n\n\n\n\n\n\n_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto website"
    ]
  },
  {
    "objectID": "Plot/5 Publish/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "href": "Plot/5 Publish/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto website"
    ]
  },
  {
    "objectID": "Plot/5 Publish/3 quarto website.html#publish-quarto-website-into-github-page",
    "href": "Plot/5 Publish/3 quarto website.html#publish-quarto-website-into-github-page",
    "title": "quarto website",
    "section": "",
    "text": "_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto website"
    ]
  },
  {
    "objectID": "Plot/5 Publish/2 quarto blog.html",
    "href": "Plot/5 Publish/2 quarto blog.html",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---\n\n\n\n\n\n\n\nCode\n---\ndraft: true  \n  \n---\n\n\n\n\n\n\n\nCode\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true\n\n\n\n\n\n\n\nCode\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---\n\n\n\n\n\n\n\nCode\ndraft:true",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/5 Publish/2 quarto blog.html#blog-post",
    "href": "Plot/5 Publish/2 quarto blog.html#blog-post",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/5 Publish/2 quarto blog.html#hide-post-from-main-page",
    "href": "Plot/5 Publish/2 quarto blog.html#hide-post-from-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ndraft: true  \n  \n---",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/5 Publish/2 quarto blog.html#quarto.yml",
    "href": "Plot/5 Publish/2 quarto blog.html#quarto.yml",
    "title": "quarto blog",
    "section": "",
    "text": "Code\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/5 Publish/2 quarto blog.html#index.qmd",
    "href": "Plot/5 Publish/2 quarto blog.html#index.qmd",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/5 Publish/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "href": "Plot/5 Publish/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\ndraft:true",
    "crumbs": [
      "Plot",
      "5 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html",
    "href": "Plot/7 Publish/1 quarto tips.html",
    "title": "quarto tips",
    "section": "",
    "text": "https://quarto.org/docs/get-started/\n\n\n\n\n\nCode\ninstall.packages(\"quarto\")",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html#in-yaml-header",
    "href": "Plot/7 Publish/1 quarto tips.html#in-yaml-header",
    "title": "quarto tips",
    "section": "in YAML header",
    "text": "in YAML header\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html#in-code-chunk",
    "href": "Plot/7 Publish/1 quarto tips.html#in-code-chunk",
    "title": "quarto tips",
    "section": "in code chunk",
    "text": "in code chunk\n\n\nCode\n #| eval: false",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html#embed-youtube",
    "href": "Plot/7 Publish/1 quarto tips.html#embed-youtube",
    "title": "quarto tips",
    "section": "embed youtube",
    "text": "embed youtube\n\n\nCode\n&lt;iframe width=\"640\" height=\"480\" src=\"https://www.youtube.com/embed/nku5zFMZAdU\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen&gt;\n&lt;/iframe&gt;",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html#embed-local-video",
    "href": "Plot/7 Publish/1 quarto tips.html#embed-local-video",
    "title": "quarto tips",
    "section": "embed local video",
    "text": "embed local video\n\n\nCode\n{{&lt; video images/vv.mp4 height=\"600\" &gt;}}",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/2 quarto blog.html",
    "href": "Plot/7 Publish/2 quarto blog.html",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---\n\n\n\n\n\n\n\nCode\n---\ndraft: true  \n  \n---\n\n\n\n\n\n\n\nCode\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true\n\n\n\n\n\n\n\nCode\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---\n\n\n\n\n\n\n\nCode\ndraft:true",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 Publish/2 quarto blog.html#blog-post",
    "href": "Plot/7 Publish/2 quarto blog.html#blog-post",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 Publish/2 quarto blog.html#hide-post-from-main-page",
    "href": "Plot/7 Publish/2 quarto blog.html#hide-post-from-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ndraft: true  \n  \n---",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 Publish/2 quarto blog.html#quarto.yml",
    "href": "Plot/7 Publish/2 quarto blog.html#quarto.yml",
    "title": "quarto blog",
    "section": "",
    "text": "Code\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 Publish/2 quarto blog.html#index.qmd",
    "href": "Plot/7 Publish/2 quarto blog.html#index.qmd",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 Publish/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "href": "Plot/7 Publish/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\ndraft:true",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 Publish/3 quarto website.html",
    "href": "Plot/7 Publish/3 quarto website.html",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub\n\n\n\n\n\n\n\n\n\n_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto website"
    ]
  },
  {
    "objectID": "Plot/7 Publish/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "href": "Plot/7 Publish/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto website"
    ]
  },
  {
    "objectID": "Plot/7 Publish/3 quarto website.html#publish-quarto-website-into-github-page",
    "href": "Plot/7 Publish/3 quarto website.html#publish-quarto-website-into-github-page",
    "title": "quarto website",
    "section": "",
    "text": "_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto website"
    ]
  },
  {
    "objectID": "Plot/7 Publish/4 quarto presentation .html",
    "href": "Plot/7 Publish/4 quarto presentation .html",
    "title": "quarto presentation",
    "section": "",
    "text": "1 revealjs YAML\n\n\nCode\n---\ntitle: \"Habits\"\nauthor: \"John Doe\"\nformat: revealjs\n---\n\n\n\n\n2 pages\n\n\nCode\n# pages\n\n# In the morning\n\n## Getting up\n\n- Turn off alarm\n- Get out of bed\n\n## Breakfast\n\n- Eat eggs\n- Drink coffee\n\n\n\n\n3 YAML format setting\n\n\nCode\nformat:\n  revealjs:\n    controls: true\n    navigation-mode: vertical\n    height: 800\n    width: 1000    \n    fontsize: 20pt\n    page-layout: full\n    logo: images/logo.jpg\n    footer: \"This is footer(https://google.com/)\"\n    slide-number: c\n    show-slide-number: all\n    menu: false\n\n\n\n\n4 Main Title Slide Background YAML setting\n\n\nCode\n---\ntitle: My Slide Show\ntitle-slide-attributes:\n    data-background-image: /path/to/title_image.png\n    data-background-size: contain\n    data-background-opacity: \"0.5\"\n---\n\n\n\n\n5 Chalkboard YAML setting\n\n\nCode\n---\ntitle: \"Presentation\"\nformat:\n  revealjs:\n    chalkboard: true\n---\n\n\n\n\n6 center whole page\n\n\nCode\n# This will be centered {.center}\n\nThis text is moved as well\n\n\n\n\n7 reference:\nhttps://quarto.org/docs/presentations/revealjs/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto presentation"
    ]
  },
  {
    "objectID": "Plot/5 Map/2 leaflet.html",
    "href": "Plot/5 Map/2 leaflet.html",
    "title": "map",
    "section": "",
    "text": "1 data\n\n\nCode\nlibrary(tidyverse)\n\nlibrary(sf)\nlibrary(leaflet)\nlibrary(geojsonio)\nlibrary(leaflet.extras)\n\n\n\n\n2 display at openstreet map\n\n\nCode\nm &lt;- leaflet() %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addMarkers(lng=174.768, lat=-36.852, popup=\"The birthplace of R\")\n\nm  \n\n\n\n\n\n\n\n\n3 display at google map\n\n\nCode\nleaflet() |&gt;\n  # add base mao\n  addTiles(urlTemplate = \"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\") |&gt;\n  # set view\n  setView(116.347817690225, 39.997202126977, zoom = 16) |&gt;\n  # add markers\n  addMarkers(116.347817690225, 39.997202126977)\n\n\n\n\n\n\n\n\n4 Third-Party map\n\n\nCode\n#m &lt;- leaflet() %&gt;% setView(lng = -71.0589, lat = 42.3601, zoom = 10)\n#m %&gt;% addProviderTiles(providers$Stadia.StamenToner)\n\n\n\n\n5 add pop up\nPopups are small boxes containing arbitrary HTML, that point to a specific point on the map.\n\n\nCode\ncontent &lt;- paste(sep = \"&lt;br/&gt;\",\n  \"&lt;b&gt;&lt;a href='https://www.samurainoodle.com/'&gt;Samurai Noodle&lt;/a&gt;&lt;/b&gt;\",\n  \"606 5th Ave. S\",\n  \"Seattle, WA 98138\"\n)\n\nleaflet() %&gt;% addTiles() %&gt;%\n  setView(-122.327298, 47.597131,zoom = 12) %&gt;% \n  addPopups(-122.327298, 47.597131, content,\n    #options = popupOptions(closeButton = FALSE)\n    options = popupOptions(closeButton = FALSE)\n  )\n\n\n\n\n\n\n\n\n6 add Markers\n\n\nCode\nlibrary(htmltools)\n\ndf &lt;- read.csv(textConnection(\n\"Name,Lat,Long\nSamurai Noodle,47.597131,-122.327298\nKukai Ramen,47.6154,-122.327157\nTsukushinbo,47.59987,-122.326726\"\n))\n\nleaflet(df) %&gt;% addTiles() %&gt;%\n  addMarkers(~Long, ~Lat, popup = ~htmlEscape(Name))\n\n\n\n\n\n\n\n\n7 add Labels\nA label is a textual or HTML content that can attached to markers and shapes to be always displayed or displayed on mouse over. Unlike popups you don’t need to click a marker/polygon for the label to be shown.\n\n\nCode\nlibrary(htmltools)\n\ndf &lt;- read.csv(textConnection(\n\"Name,Lat,Long\nSamurai Noodle,47.597131,-122.327298\nKukai Ramen,47.6154,-122.327157\nTsukushinbo,47.59987,-122.326726\"))\n\nleaflet(df) %&gt;% addTiles() %&gt;%\n  addMarkers(~Long, ~Lat, label = ~htmlEscape(Name))\n\n\n\n\n\n\n\n\n8 World map\n\n\nCode\n#install.packages(\"https://cran.r-project.org/src/contrib/Archive/maptools/maptools_1.1-8.tar.gz\")\n\n\n\n\nCode\njson_data=read_sf(\"world-administrative-boundaries.geojson\")\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\n#Get my variable\n#name&lt;-c(\"Ghana\", \"Grenada\", \"Guyana\", \"India\", \"Jamaica\", \"Kenya\", \"United States\",\"Canada\")\n#val&lt;-c(1,2,4,5,5,1000,20000, 100)\n\n#per_gdp_usd&lt;-data.frame(name,val)\n\n\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\n\nper_gdp_usd=read_excel('world data.xlsx') %&gt;% mutate(\n  name=case_when(\n    name ==\"United States\" ~ \"United States of America\"\n     ,name ==\"Russia\" ~ \"Russian Federation\"\n   ,name ==\"U.K. of Great Britain and Northern Ireland\" ~ \"United Kingdom\"\n   \n   ,name ==\"U.K. of Great Britain and Northern Ireland\" ~ \"United Kingdom\"\n   \n   ,name == \"South Korea\"~ \"Republic of Korea\"\n   \n   ,name ==\"Lao People's Democratic Republic\" ~ \"Laos\"\n   \n    ,TRUE ~ name\n  )\n)\n\n\n\n\nCode\n#test=full_join(map_df, per_gdp_usd, by=\"name\")\n\n#left =test %&gt;% filter(is.na(iso3)==TRUE)\n\n#right=test %&gt;% filter(is.na(per_gdp_total)==TRUE)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"name\")\n\n\n\n\nCode\nglimpse(map_df002)\n\n\nRows: 158\nColumns: 12\n$ name                     &lt;chr&gt; \"Albania\", \"Algeria\", \"Andorra\", \"Angola\", \"A…\n$ geo_point_2d             &lt;chr&gt; \"{ \\\"lon\\\": 20.068384605918776, \\\"lat\\\": 41.1…\n$ iso3                     &lt;chr&gt; \"ALB\", \"DZA\", \"AND\", \"AGO\", \"ARG\", \"ARM\", \"AU…\n$ status                   &lt;chr&gt; \"Member State\", \"Member State\", \"Member State…\n$ color_code               &lt;chr&gt; \"ALB\", \"DZA\", \"AND\", \"AGO\", \"ARG\", \"ARM\", \"AU…\n$ continent                &lt;chr&gt; \"Europe\", \"Africa\", \"Europe\", \"Africa\", \"Amer…\n$ region                   &lt;chr&gt; \"Southern Europe\", \"Northern Africa\", \"Southe…\n$ iso_3166_1_alpha_2_codes &lt;chr&gt; \"AL\", \"DZ\", \"AD\", \"AO\", \"AR\", \"AM\", \"AU\", \"AT…\n$ french_short             &lt;chr&gt; \"Albanie\", \"Algérie\", \"Andorre\", \"Angola\", \"A…\n$ geometry                 &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((20.07142 42..., …\n$ per_gdp_total            &lt;dbl&gt; 1.888210e+10, 1.919130e+11, 3.352033e+09, 1.0…\n$ per_gdp_usd              &lt;dbl&gt; 6643, 4274, 41993, 2999, 13904, 7014, 64003, …\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gdp_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gdp_usd, \"（千 美元）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", round(map_sf002$per_gdp_usd/1000), \"K &lt;br/&gt;\",\n       \"总gpd 美元：\", round(map_sf002$per_gdp_total/1000000), \"M &lt;br/&gt;\"\n\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gdp_usd, opacity = 1.0\n    )\n\n\n\n\n\n\n\n\n9 China one city map\n\n\nCode\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/citys/440300.json\") \n#or\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/440300_full.json\")\n\n\n深圳市：\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(json_data) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n\n\n\n\n10 all China each province GPD map\n\n\nCode\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\n中国 2022 各省 人均gpd usd：\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\nper_gdp_usd=read_excel('china gdp2022.xlsx')\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"city\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gpd_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gpd_usd, \"（美万）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", map_sf002$per_gpd_usd, \"&lt;br/&gt;\",\n      \"人均gpd 人民币：\", map_sf002$per_gpd_rmb, \"&lt;br/&gt;\",\n       \"人口：\", round(map_sf002$total_gpd_rmb/map_sf002$per_gpd_rmb), \"&lt;br/&gt;\"\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gpd_usd, opacity = 1.0\n    )\n\n\n\n\n\n\nGPD data source:国家统计局数据库\n\n\n11 China one province map each city GPD\n\n\nCode\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/province/440000.json\") \n\n\n广东省 2021 人均gpd usd：\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\nper_gdp_usd=read_excel('guangdong city gdp2021.xlsx')\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"city\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\ndata source:广东统计年鉴2022\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gpd_usd)\n    ,popup = ~ paste0(\n      \"城市：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gpd_usd, \"（美万）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"城市：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", map_sf002$per_gpd_usd, \"&lt;br/&gt;\",\n      \"人均gpd 人民币：\", map_sf002$per_gpd_rmb, \"&lt;br/&gt;\",\n       \"人口：\", round(map_sf002$total_gpd_rmb*10000000/map_sf002$per_gpd_rmb), \"&lt;br/&gt;\"\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gpd_usd, opacity = 1.0\n    )\n\n\n\n\n\n\nhttps://zh.wikipedia.org/wiki/%E5%B9%BF%E4%B8%9C%E5%90%84%E5%9C%B0%E7%BA%A7%E5%B8%82%E5%9C%B0%E5%8C%BA%E7%94%9F%E4%BA%A7%E6%80%BB%E5%80%BC%E5%88%97%E8%A1%A8\n\n\n12 China province map\n\n\nCode\nlibrary(leaflet)\nlibrary(sf)\n\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/china.json\") \n#or\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nm=leaflet(json_data) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n \n\nm\n\n\n\n\n\n\nadd provincial capital\n\n\nCode\nChina=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\n\n\nCode\nChina002=China %&gt;% as_data_frame() %&gt;% mutate(\n                                            center2=as.character(center) %&gt;% str_replace('c','')%&gt;% str_replace('[(]','') %&gt;% str_replace('[)]','')\n                                               )\n\n\n\n\nCode\nChina003=China002%&gt;%separate(center2, c(\"x\", \"y\"), \", \")\n\n\n\n\nCode\nChina_point = China003 %&gt;% \n  slice(-35)\n\nm %&gt;% \n  addCircles(data = China_point,\n                  lng = ~as.numeric(x), lat = ~as.numeric(y),color = \"red\",weight = 10,\n                  fillOpacity =2)\n\n\n\n\n\n\n\n\n13 China province and city map\n\n\nCode\nmap_list &lt;- lapply(\n  X = list.files(\"./GeoMapData_CN/province\", recursive = T, full.names = T),\n  FUN = sf::read_sf\n)\n\nlength(map_list)\n\n\n[1] 34\n\n\n\n\nCode\nfor (i in c(1:length(map_list))){\n   #print(i)\n  #print(dim(map_list[[i]]))\n  #print(ncol(map_list[[i]]))\n  if(ncol(map_list[[i]])!=10){print(map_list[[i]])}\n  }\n\n\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 119.3183 ymin: 21.75147 xmax: 124.5656 ymax: 25.92592\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                    &lt;MULTIPOLYGON [°]&gt;\n1 710000 台湾省 121.509062,25.044332 province (((119.5543 23.68248, 119.555 23.…\n\n\n\n\nCode\nX = list.files(\"./GeoMapData_CN/province\", recursive = T, full.names = T)\n\nX2=X[-which(X %in% c(\"./GeoMapData_CN/province/710000.json\"\n         ))]\n\nmap_list &lt;- lapply(\n  X = X2,\n  FUN = sf::read_sf\n)\n\n\n\n\nCode\nlength(map_list)\n\n\n[1] 33\n\n\n\n\nCode\nprovince_map &lt;- Reduce(\"rbind\", map_list)\n\n\n\n\nCode\n# library(leaflet)\n# library(sf)\n# \n# json_data &lt;- province_map\n# \n# \n# pal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"), 1:10)\n# \n# leaflet(json_data) %&gt;%\n#   addTiles() %&gt;%\n#   addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n14 China city and district map\n\n\nCode\nmap_list &lt;- lapply(\n  X = list.files(\"./GeoMapData_CN/citys\", recursive = T, full.names = T),\n  FUN = sf::read_sf\n)\n\nlength(map_list)\n\n\n[1] 334\n\n\n\n\nCode\nfor (i in c(1:length(map_list))){\n   #print(i)\n  #print(dim(map_list[[i]]))\n  #print(ncol(map_list[[i]]))\n  if(ncol(map_list[[i]])!=10){print(map_list[[i]])}\n  }\n\n\nSimple feature collection with 1 feature and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 113.5215 ymin: 22.65421 xmax: 114.2603 ymax: 23.14205\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                         &lt;POLYGON [°]&gt;\n1 441900 东莞市 113.746262,23.046237 city  ((114.2292 22.81251, 114.2278 22.813…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 113.157 ymin: 22.20104 xmax: 113.692 ymax: 22.7726\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                         &lt;POLYGON [°]&gt;\n1 442000 中山市 113.382391,22.521113 city  ((113.5687 22.41193, 113.5666 22.412…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 115.9267 ymin: 20.58265 xmax: 116.9338 ymax: 21.12693\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name     center               level                            geometry\n  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;                &lt;chr&gt;                  &lt;MULTIPOLYGON [°]&gt;\n1 442100 东沙群岛 116.887312,20.617512 city  (((115.9433 21.09745, 115.95 21.11…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 108.9287 ymin: 19.17894 xmax: 109.7694 ymax: 19.92575\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                    &lt;MULTIPOLYGON [°]&gt;\n1 460400 儋州市 109.576782,19.517486 city  (((109.4322 19.91302, 109.4253 19.91…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 97.8483 ymin: 39.65426 xmax: 98.52018 ymax: 39.99979\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name     center              level                             geometry\n  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;                   &lt;MULTIPOLYGON [°]&gt;\n1 620200 嘉峪关市 98.277304,39.786529 city  (((97.85974 39.7169, 97.85827 39.71…\n\n\n\n\nCode\nX = list.files(\"./GeoMapData_CN/citys\", recursive = T, full.names = T)\n\nX2=X[-which(X %in% c(\"./GeoMapData_CN/citys/620200.json\"\n         ,\"./GeoMapData_CN/citys/460400.json\"\n              ,\"./GeoMapData_CN/citys/442100.json\"\n              ,\"./GeoMapData_CN/citys/442000.json\"\n              ,\"./GeoMapData_CN/citys/441900.json\"\n         ))]\n\nmap_list &lt;- lapply(\n  X = X2,\n  FUN = sf::read_sf\n)\n\n\n\n\nCode\nlength(map_list)\n\n\n[1] 329\n\n\n\n\nCode\nprovince_map &lt;- Reduce(\"rbind\", map_list)\n\n\n\n\nCode\n# library(leaflet)\n# library(sf)\n# \n# json_data &lt;- province_map\n# \n# \n# pal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"), 1:10)\n# \n# leaflet(json_data) %&gt;%\n#   addTiles() %&gt;%\n#   addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n15 show all map providers\n\n\nCode\nproviders\n\n\nproviders\n$OpenStreetMap\n[1] \"OpenStreetMap\"\n\n$OpenStreetMap.Mapnik\n[1] \"OpenStreetMap.Mapnik\"\n\n$OpenStreetMap.DE\n[1] \"OpenStreetMap.DE\"\n\n$OpenStreetMap.CH\n[1] \"OpenStreetMap.CH\"\n\n$OpenStreetMap.France\n[1] \"OpenStreetMap.France\"\n\n$OpenStreetMap.HOT\n[1] \"OpenStreetMap.HOT\"\n\n$OpenStreetMap.BZH\n[1] \"OpenStreetMap.BZH\"\n\n$MapTilesAPI\n[1] \"MapTilesAPI\"\n\n$MapTilesAPI.OSMEnglish\n[1] \"MapTilesAPI.OSMEnglish\"\n\n$MapTilesAPI.OSMFrancais\n[1] \"MapTilesAPI.OSMFrancais\"\n\n$MapTilesAPI.OSMEspagnol\n[1] \"MapTilesAPI.OSMEspagnol\"\n\n$OpenSeaMap\n[1] \"OpenSeaMap\"\n\n$OPNVKarte\n[1] \"OPNVKarte\"\n\n$OpenTopoMap\n[1] \"OpenTopoMap\"\n\n$OpenRailwayMap\n[1] \"OpenRailwayMap\"\n\n$OpenFireMap\n[1] \"OpenFireMap\"\n\n$SafeCast\n[1] \"SafeCast\"\n\n$Stadia\n[1] \"Stadia\"\n\n$Stadia.AlidadeSmooth\n[1] \"Stadia.AlidadeSmooth\"\n\n$Stadia.AlidadeSmoothDark\n[1] \"Stadia.AlidadeSmoothDark\"\n\n$Stadia.OSMBright\n[1] \"Stadia.OSMBright\"\n\n$Stadia.Outdoors\n[1] \"Stadia.Outdoors\"\n\n$Stadia.StamenToner\n[1] \"Stadia.StamenToner\"\n\n$Stadia.StamenTonerBackground\n[1] \"Stadia.StamenTonerBackground\"\n\n$Stadia.StamenTonerLines\n[1] \"Stadia.StamenTonerLines\"\n\n$Stadia.StamenTonerLabels\n[1] \"Stadia.StamenTonerLabels\"\n\n$Stadia.StamenTonerLite\n[1] \"Stadia.StamenTonerLite\"\n\n$Stadia.StamenWatercolor\n[1] \"Stadia.StamenWatercolor\"\n\n$Stadia.StamenTerrain\n[1] \"Stadia.StamenTerrain\"\n\n$Stadia.StamenTerrainBackground\n[1] \"Stadia.StamenTerrainBackground\"\n\n$Stadia.StamenTerrainLabels\n[1] \"Stadia.StamenTerrainLabels\"\n\n$Stadia.StamenTerrainLines\n[1] \"Stadia.StamenTerrainLines\"\n\n$Thunderforest\n[1] \"Thunderforest\"\n\n$Thunderforest.OpenCycleMap\n[1] \"Thunderforest.OpenCycleMap\"\n\n$Thunderforest.Transport\n[1] \"Thunderforest.Transport\"\n\n$Thunderforest.TransportDark\n[1] \"Thunderforest.TransportDark\"\n\n$Thunderforest.SpinalMap\n[1] \"Thunderforest.SpinalMap\"\n\n$Thunderforest.Landscape\n[1] \"Thunderforest.Landscape\"\n\n$Thunderforest.Outdoors\n[1] \"Thunderforest.Outdoors\"\n\n$Thunderforest.Pioneer\n[1] \"Thunderforest.Pioneer\"\n\n$Thunderforest.MobileAtlas\n[1] \"Thunderforest.MobileAtlas\"\n\n$Thunderforest.Neighbourhood\n[1] \"Thunderforest.Neighbourhood\"\n\n$CyclOSM\n[1] \"CyclOSM\"\n\n$Jawg\n[1] \"Jawg\"\n\n$Jawg.Streets\n[1] \"Jawg.Streets\"\n\n$Jawg.Terrain\n[1] \"Jawg.Terrain\"\n\n$Jawg.Sunny\n[1] \"Jawg.Sunny\"\n\n$Jawg.Dark\n[1] \"Jawg.Dark\"\n\n$Jawg.Light\n[1] \"Jawg.Light\"\n\n$Jawg.Matrix\n[1] \"Jawg.Matrix\"\n\n$MapBox\n[1] \"MapBox\"\n\n$MapTiler\n[1] \"MapTiler\"\n\n$MapTiler.Streets\n[1] \"MapTiler.Streets\"\n\n$MapTiler.Basic\n[1] \"MapTiler.Basic\"\n\n$MapTiler.Bright\n[1] \"MapTiler.Bright\"\n\n$MapTiler.Pastel\n[1] \"MapTiler.Pastel\"\n\n$MapTiler.Positron\n[1] \"MapTiler.Positron\"\n\n$MapTiler.Hybrid\n[1] \"MapTiler.Hybrid\"\n\n$MapTiler.Toner\n[1] \"MapTiler.Toner\"\n\n$MapTiler.Topo\n[1] \"MapTiler.Topo\"\n\n$MapTiler.Voyager\n[1] \"MapTiler.Voyager\"\n\n$TomTom\n[1] \"TomTom\"\n\n$TomTom.Basic\n[1] \"TomTom.Basic\"\n\n$TomTom.Hybrid\n[1] \"TomTom.Hybrid\"\n\n$TomTom.Labels\n[1] \"TomTom.Labels\"\n\n$Esri\n[1] \"Esri\"\n\n$Esri.WorldStreetMap\n[1] \"Esri.WorldStreetMap\"\n\n$Esri.DeLorme\n[1] \"Esri.DeLorme\"\n\n$Esri.WorldTopoMap\n[1] \"Esri.WorldTopoMap\"\n\n$Esri.WorldImagery\n[1] \"Esri.WorldImagery\"\n\n$Esri.WorldTerrain\n[1] \"Esri.WorldTerrain\"\n\n$Esri.WorldShadedRelief\n[1] \"Esri.WorldShadedRelief\"\n\n$Esri.WorldPhysical\n[1] \"Esri.WorldPhysical\"\n\n$Esri.OceanBasemap\n[1] \"Esri.OceanBasemap\"\n\n$Esri.NatGeoWorldMap\n[1] \"Esri.NatGeoWorldMap\"\n\n$Esri.WorldGrayCanvas\n[1] \"Esri.WorldGrayCanvas\"\n\n$OpenWeatherMap\n[1] \"OpenWeatherMap\"\n\n$OpenWeatherMap.Clouds\n[1] \"OpenWeatherMap.Clouds\"\n\n$OpenWeatherMap.CloudsClassic\n[1] \"OpenWeatherMap.CloudsClassic\"\n\n$OpenWeatherMap.Precipitation\n[1] \"OpenWeatherMap.Precipitation\"\n\n$OpenWeatherMap.PrecipitationClassic\n[1] \"OpenWeatherMap.PrecipitationClassic\"\n\n$OpenWeatherMap.Rain\n[1] \"OpenWeatherMap.Rain\"\n\n$OpenWeatherMap.RainClassic\n[1] \"OpenWeatherMap.RainClassic\"\n\n$OpenWeatherMap.Pressure\n[1] \"OpenWeatherMap.Pressure\"\n\n$OpenWeatherMap.PressureContour\n[1] \"OpenWeatherMap.PressureContour\"\n\n$OpenWeatherMap.Wind\n[1] \"OpenWeatherMap.Wind\"\n\n$OpenWeatherMap.Temperature\n[1] \"OpenWeatherMap.Temperature\"\n\n$OpenWeatherMap.Snow\n[1] \"OpenWeatherMap.Snow\"\n\n$HERE\n[1] \"HERE\"\n\n$HERE.normalDay\n[1] \"HERE.normalDay\"\n\n$HERE.normalDayCustom\n[1] \"HERE.normalDayCustom\"\n\n$HERE.normalDayGrey\n[1] \"HERE.normalDayGrey\"\n\n$HERE.normalDayMobile\n[1] \"HERE.normalDayMobile\"\n\n$HERE.normalDayGreyMobile\n[1] \"HERE.normalDayGreyMobile\"\n\n$HERE.normalDayTransit\n[1] \"HERE.normalDayTransit\"\n\n$HERE.normalDayTransitMobile\n[1] \"HERE.normalDayTransitMobile\"\n\n$HERE.normalDayTraffic\n[1] \"HERE.normalDayTraffic\"\n\n$HERE.normalNight\n[1] \"HERE.normalNight\"\n\n$HERE.normalNightMobile\n[1] \"HERE.normalNightMobile\"\n\n$HERE.normalNightGrey\n[1] \"HERE.normalNightGrey\"\n\n$HERE.normalNightGreyMobile\n[1] \"HERE.normalNightGreyMobile\"\n\n$HERE.normalNightTransit\n[1] \"HERE.normalNightTransit\"\n\n$HERE.normalNightTransitMobile\n[1] \"HERE.normalNightTransitMobile\"\n\n$HERE.reducedDay\n[1] \"HERE.reducedDay\"\n\n$HERE.reducedNight\n[1] \"HERE.reducedNight\"\n\n$HERE.basicMap\n[1] \"HERE.basicMap\"\n\n$HERE.mapLabels\n[1] \"HERE.mapLabels\"\n\n$HERE.trafficFlow\n[1] \"HERE.trafficFlow\"\n\n$HERE.carnavDayGrey\n[1] \"HERE.carnavDayGrey\"\n\n$HERE.hybridDay\n[1] \"HERE.hybridDay\"\n\n$HERE.hybridDayMobile\n[1] \"HERE.hybridDayMobile\"\n\n$HERE.hybridDayTransit\n[1] \"HERE.hybridDayTransit\"\n\n$HERE.hybridDayGrey\n[1] \"HERE.hybridDayGrey\"\n\n$HERE.hybridDayTraffic\n[1] \"HERE.hybridDayTraffic\"\n\n$HERE.pedestrianDay\n[1] \"HERE.pedestrianDay\"\n\n$HERE.pedestrianNight\n[1] \"HERE.pedestrianNight\"\n\n$HERE.satelliteDay\n[1] \"HERE.satelliteDay\"\n\n$HERE.terrainDay\n[1] \"HERE.terrainDay\"\n\n$HERE.terrainDayMobile\n[1] \"HERE.terrainDayMobile\"\n\n$HEREv3\n[1] \"HEREv3\"\n\n$HEREv3.normalDay\n[1] \"HEREv3.normalDay\"\n\n$HEREv3.normalDayCustom\n[1] \"HEREv3.normalDayCustom\"\n\n$HEREv3.normalDayGrey\n[1] \"HEREv3.normalDayGrey\"\n\n$HEREv3.normalDayMobile\n[1] \"HEREv3.normalDayMobile\"\n\n$HEREv3.normalDayGreyMobile\n[1] \"HEREv3.normalDayGreyMobile\"\n\n$HEREv3.normalDayTransit\n[1] \"HEREv3.normalDayTransit\"\n\n$HEREv3.normalDayTransitMobile\n[1] \"HEREv3.normalDayTransitMobile\"\n\n$HEREv3.normalNight\n[1] \"HEREv3.normalNight\"\n\n$HEREv3.normalNightMobile\n[1] \"HEREv3.normalNightMobile\"\n\n$HEREv3.normalNightGrey\n[1] \"HEREv3.normalNightGrey\"\n\n$HEREv3.normalNightGreyMobile\n[1] \"HEREv3.normalNightGreyMobile\"\n\n$HEREv3.normalNightTransit\n[1] \"HEREv3.normalNightTransit\"\n\n$HEREv3.normalNightTransitMobile\n[1] \"HEREv3.normalNightTransitMobile\"\n\n$HEREv3.reducedDay\n[1] \"HEREv3.reducedDay\"\n\n$HEREv3.reducedNight\n[1] \"HEREv3.reducedNight\"\n\n$HEREv3.basicMap\n[1] \"HEREv3.basicMap\"\n\n$HEREv3.mapLabels\n[1] \"HEREv3.mapLabels\"\n\n$HEREv3.trafficFlow\n[1] \"HEREv3.trafficFlow\"\n\n$HEREv3.carnavDayGrey\n[1] \"HEREv3.carnavDayGrey\"\n\n$HEREv3.hybridDay\n[1] \"HEREv3.hybridDay\"\n\n$HEREv3.hybridDayMobile\n[1] \"HEREv3.hybridDayMobile\"\n\n$HEREv3.hybridDayTransit\n[1] \"HEREv3.hybridDayTransit\"\n\n$HEREv3.hybridDayGrey\n[1] \"HEREv3.hybridDayGrey\"\n\n$HEREv3.pedestrianDay\n[1] \"HEREv3.pedestrianDay\"\n\n$HEREv3.pedestrianNight\n[1] \"HEREv3.pedestrianNight\"\n\n$HEREv3.satelliteDay\n[1] \"HEREv3.satelliteDay\"\n\n$HEREv3.terrainDay\n[1] \"HEREv3.terrainDay\"\n\n$HEREv3.terrainDayMobile\n[1] \"HEREv3.terrainDayMobile\"\n\n$FreeMapSK\n[1] \"FreeMapSK\"\n\n$MtbMap\n[1] \"MtbMap\"\n\n$CartoDB\n[1] \"CartoDB\"\n\n$CartoDB.Positron\n[1] \"CartoDB.Positron\"\n\n$CartoDB.PositronNoLabels\n[1] \"CartoDB.PositronNoLabels\"\n\n$CartoDB.PositronOnlyLabels\n[1] \"CartoDB.PositronOnlyLabels\"\n\n$CartoDB.DarkMatter\n[1] \"CartoDB.DarkMatter\"\n\n$CartoDB.DarkMatterNoLabels\n[1] \"CartoDB.DarkMatterNoLabels\"\n\n$CartoDB.DarkMatterOnlyLabels\n[1] \"CartoDB.DarkMatterOnlyLabels\"\n\n$CartoDB.Voyager\n[1] \"CartoDB.Voyager\"\n\n$CartoDB.VoyagerNoLabels\n[1] \"CartoDB.VoyagerNoLabels\"\n\n$CartoDB.VoyagerOnlyLabels\n[1] \"CartoDB.VoyagerOnlyLabels\"\n\n$CartoDB.VoyagerLabelsUnder\n[1] \"CartoDB.VoyagerLabelsUnder\"\n\n$HikeBike\n[1] \"HikeBike\"\n\n$HikeBike.HikeBike\n[1] \"HikeBike.HikeBike\"\n\n$HikeBike.HillShading\n[1] \"HikeBike.HillShading\"\n\n$BasemapAT\n[1] \"BasemapAT\"\n\n$BasemapAT.basemap\n[1] \"BasemapAT.basemap\"\n\n$BasemapAT.grau\n[1] \"BasemapAT.grau\"\n\n$BasemapAT.overlay\n[1] \"BasemapAT.overlay\"\n\n$BasemapAT.terrain\n[1] \"BasemapAT.terrain\"\n\n$BasemapAT.surface\n[1] \"BasemapAT.surface\"\n\n$BasemapAT.highdpi\n[1] \"BasemapAT.highdpi\"\n\n$BasemapAT.orthofoto\n[1] \"BasemapAT.orthofoto\"\n\n$nlmaps\n[1] \"nlmaps\"\n\n$nlmaps.standaard\n[1] \"nlmaps.standaard\"\n\n$nlmaps.pastel\n[1] \"nlmaps.pastel\"\n\n$nlmaps.grijs\n[1] \"nlmaps.grijs\"\n\n$nlmaps.water\n[1] \"nlmaps.water\"\n\n$nlmaps.luchtfoto\n[1] \"nlmaps.luchtfoto\"\n\n$NASAGIBS\n[1] \"NASAGIBS\"\n\n$NASAGIBS.ModisTerraTrueColorCR\n[1] \"NASAGIBS.ModisTerraTrueColorCR\"\n\n$NASAGIBS.ModisTerraBands367CR\n[1] \"NASAGIBS.ModisTerraBands367CR\"\n\n$NASAGIBS.ViirsEarthAtNight2012\n[1] \"NASAGIBS.ViirsEarthAtNight2012\"\n\n$NASAGIBS.ModisTerraLSTDay\n[1] \"NASAGIBS.ModisTerraLSTDay\"\n\n$NASAGIBS.ModisTerraSnowCover\n[1] \"NASAGIBS.ModisTerraSnowCover\"\n\n$NASAGIBS.ModisTerraAOD\n[1] \"NASAGIBS.ModisTerraAOD\"\n\n$NASAGIBS.ModisTerraChlorophyll\n[1] \"NASAGIBS.ModisTerraChlorophyll\"\n\n$NLS\n[1] \"NLS\"\n\n$JusticeMap\n[1] \"JusticeMap\"\n\n$JusticeMap.income\n[1] \"JusticeMap.income\"\n\n$JusticeMap.americanIndian\n[1] \"JusticeMap.americanIndian\"\n\n$JusticeMap.asian\n[1] \"JusticeMap.asian\"\n\n$JusticeMap.black\n[1] \"JusticeMap.black\"\n\n$JusticeMap.hispanic\n[1] \"JusticeMap.hispanic\"\n\n$JusticeMap.multi\n[1] \"JusticeMap.multi\"\n\n$JusticeMap.nonWhite\n[1] \"JusticeMap.nonWhite\"\n\n$JusticeMap.white\n[1] \"JusticeMap.white\"\n\n$JusticeMap.plurality\n[1] \"JusticeMap.plurality\"\n\n$GeoportailFrance\n[1] \"GeoportailFrance\"\n\n$GeoportailFrance.plan\n[1] \"GeoportailFrance.plan\"\n\n$GeoportailFrance.parcels\n[1] \"GeoportailFrance.parcels\"\n\n$GeoportailFrance.orthos\n[1] \"GeoportailFrance.orthos\"\n\n$OneMapSG\n[1] \"OneMapSG\"\n\n$OneMapSG.Default\n[1] \"OneMapSG.Default\"\n\n$OneMapSG.Night\n[1] \"OneMapSG.Night\"\n\n$OneMapSG.Original\n[1] \"OneMapSG.Original\"\n\n$OneMapSG.Grey\n[1] \"OneMapSG.Grey\"\n\n$OneMapSG.LandLot\n[1] \"OneMapSG.LandLot\"\n\n$USGS\n[1] \"USGS\"\n\n$USGS.USTopo\n[1] \"USGS.USTopo\"\n\n$USGS.USImagery\n[1] \"USGS.USImagery\"\n\n$USGS.USImageryTopo\n[1] \"USGS.USImageryTopo\"\n\n$WaymarkedTrails\n[1] \"WaymarkedTrails\"\n\n$WaymarkedTrails.hiking\n[1] \"WaymarkedTrails.hiking\"\n\n$WaymarkedTrails.cycling\n[1] \"WaymarkedTrails.cycling\"\n\n$WaymarkedTrails.mtb\n[1] \"WaymarkedTrails.mtb\"\n\n$WaymarkedTrails.slopes\n[1] \"WaymarkedTrails.slopes\"\n\n$WaymarkedTrails.riding\n[1] \"WaymarkedTrails.riding\"\n\n$WaymarkedTrails.skating\n[1] \"WaymarkedTrails.skating\"\n\n$OpenAIP\n[1] \"OpenAIP\"\n\n$OpenSnowMap\n[1] \"OpenSnowMap\"\n\n$OpenSnowMap.pistes\n[1] \"OpenSnowMap.pistes\"\n\n$AzureMaps\n[1] \"AzureMaps\"\n\n$AzureMaps.MicrosoftImagery\n[1] \"AzureMaps.MicrosoftImagery\"\n\n$AzureMaps.MicrosoftBaseDarkGrey\n[1] \"AzureMaps.MicrosoftBaseDarkGrey\"\n\n$AzureMaps.MicrosoftBaseRoad\n[1] \"AzureMaps.MicrosoftBaseRoad\"\n\n$AzureMaps.MicrosoftBaseHybridRoad\n[1] \"AzureMaps.MicrosoftBaseHybridRoad\"\n\n$AzureMaps.MicrosoftTerraMain\n[1] \"AzureMaps.MicrosoftTerraMain\"\n\n$AzureMaps.MicrosoftWeatherInfraredMain\n[1] \"AzureMaps.MicrosoftWeatherInfraredMain\"\n\n$AzureMaps.MicrosoftWeatherRadarMain\n[1] \"AzureMaps.MicrosoftWeatherRadarMain\"\n\n$SwissFederalGeoportal\n[1] \"SwissFederalGeoportal\"\n\n$SwissFederalGeoportal.NationalMapColor\n[1] \"SwissFederalGeoportal.NationalMapColor\"\n\n$SwissFederalGeoportal.NationalMapGrey\n[1] \"SwissFederalGeoportal.NationalMapGrey\"\n\n$SwissFederalGeoportal.SWISSIMAGE\n[1] \"SwissFederalGeoportal.SWISSIMAGE\"\n\n\n\n\n\nCode\nsessionInfo()\n\n\nsessionInfo()\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Sonoma 14.1.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] readxl_1.4.3         openxlsx_4.2.5.2     htmltools_0.5.8.1   \n [4] leaflet.extras_1.0.0 geojsonio_0.11.3     leaflet_2.2.2       \n [7] sf_1.0-16            lubridate_1.9.3      forcats_1.0.0       \n[10] stringr_1.5.1        dplyr_1.1.4          purrr_1.0.2         \n[13] readr_2.1.5          tidyr_1.3.1          tibble_3.2.1        \n[16] ggplot2_3.5.1        tidyverse_2.0.0     \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.5            xfun_0.43               htmlwidgets_1.6.4      \n [4] lattice_0.22-6          tzdb_0.4.0              leaflet.providers_2.0.0\n [7] vctrs_0.6.5             tools_4.3.1             crosstalk_1.2.1        \n[10] generics_0.1.3          curl_5.2.1              proxy_0.4-27           \n[13] fansi_1.0.6             pkgconfig_2.0.3         KernSmooth_2.23-22     \n[16] RColorBrewer_1.1-3      lifecycle_1.0.4         farver_2.1.1           \n[19] compiler_4.3.1          munsell_0.5.1           jqr_1.3.3              \n[22] class_7.3-22            yaml_2.3.8              lazyeval_0.2.2         \n[25] jquerylib_0.1.4         pillar_1.9.0            classInt_0.4-10        \n[28] zip_2.3.1               tidyselect_1.2.1        digest_0.6.35          \n[31] stringi_1.8.4           fastmap_1.1.1           grid_4.3.1             \n[34] colorspace_2.1-0        cli_3.6.2               magrittr_2.0.3         \n[37] crul_1.4.2              utf8_1.2.4              e1071_1.7-14           \n[40] withr_3.0.0             scales_1.3.0            sp_2.1-4               \n[43] timechange_0.3.0        rmarkdown_2.26          cellranger_1.1.0       \n[46] hms_1.1.3               evaluate_0.23           knitr_1.45             \n[49] V8_4.4.2                viridisLite_0.4.2       geojson_0.3.5          \n[52] rlang_1.1.3             Rcpp_1.0.12             glue_1.7.0             \n[55] DBI_1.2.2               httpcode_0.3.0          geojsonsf_2.0.3        \n[58] rstudioapi_0.16.0       jsonlite_1.8.8          R6_2.5.1               \n[61] units_0.8-5            \n\n\n\n\n\n16 resouce:\nhttps://rstudio.github.io/leaflet/\nhttps://github.com/Lchiffon/leafletCN\nhttps://github.com/longwosion/geojson-map-china\nhttps://xiangyun.rbind.io/2022/02/draw-china-maps/\nhttps://datav.aliyun.com/portal/school/atlas/area_selector\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "5 Map",
      "map"
    ]
  },
  {
    "objectID": "Plot/5 Map/3 leaflet US.html",
    "href": "Plot/5 Map/3 leaflet US.html",
    "title": "US map",
    "section": "",
    "text": "1 data\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(chromote)\nlibrary(janitor)\nlibrary(tidygeocoder)\nlibrary(leaflet)\nlibrary(sf)\n\n\n\n\nCode\nlibrary(maps)\nmapStates = map(\"state\", fill = TRUE, plot = FALSE)\n\n\n\n\nCode\njson_data=read_sf(\"us-states.json\")\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\n2 map\n\n\nCode\ndata001=read_csv('./data/us shooting dagta001.csv')\n\n\n\n\nCode\ndata001=sample_n(data001,10) %&gt;% clean_names() %&gt;% mutate(full_adress=paste(address,city_or_county,state))\n\n\n\n\nCode\nglimpse(data001)\n\n\nRows: 10\nColumns: 12\n$ incident_id       &lt;dbl&gt; 2787329, 2788929, 2782375, 2786672, 2790629, 2780411…\n$ incident_date     &lt;chr&gt; \"December 24, 2023\", \"December 27, 2023\", \"December …\n$ state             &lt;chr&gt; \"Georgia\", \"Florida\", \"Florida\", \"Nevada\", \"Californ…\n$ city_or_county    &lt;chr&gt; \"Augusta\", \"Tallahassee\", \"Pompano Beach\", \"North La…\n$ address           &lt;chr&gt; \"4200 block of James Dr\", \"2000 block of Old Saint A…\n$ victims_killed    &lt;dbl&gt; 1, 0, 1, 1, 0, 1, 1, 0, 0, 0\n$ victims_injured   &lt;dbl&gt; 0, 1, 0, 0, 1, 2, 0, 1, 1, 1\n$ suspects_killed   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n$ suspects_injured  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n$ suspects_arrested &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 0, 0, 0, 0\n$ operations        &lt;chr&gt; \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/…\n$ full_adress       &lt;chr&gt; \"4200 block of James Dr Augusta Georgia\", \"2000 bloc…\n\n\n\n\n3 search all address to latitude, longitude\n\n\nCode\n# geocode the addresses\ndata002 &lt;- data001 %&gt;%\n  geocode(full_adress, method = 'arcgis', lat = latitude , long = longitude)\n\nglimpse(data002)\n\n\nRows: 10\nColumns: 14\n$ incident_id       &lt;dbl&gt; 2787329, 2788929, 2782375, 2786672, 2790629, 2780411…\n$ incident_date     &lt;chr&gt; \"December 24, 2023\", \"December 27, 2023\", \"December …\n$ state             &lt;chr&gt; \"Georgia\", \"Florida\", \"Florida\", \"Nevada\", \"Californ…\n$ city_or_county    &lt;chr&gt; \"Augusta\", \"Tallahassee\", \"Pompano Beach\", \"North La…\n$ address           &lt;chr&gt; \"4200 block of James Dr\", \"2000 block of Old Saint A…\n$ victims_killed    &lt;dbl&gt; 1, 0, 1, 1, 0, 1, 1, 0, 0, 0\n$ victims_injured   &lt;dbl&gt; 0, 1, 0, 0, 1, 2, 0, 1, 1, 1\n$ suspects_killed   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n$ suspects_injured  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n$ suspects_arrested &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 0, 0, 0, 0\n$ operations        &lt;chr&gt; \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/…\n$ full_adress       &lt;chr&gt; \"4200 block of James Dr Augusta Georgia\", \"2000 bloc…\n$ latitude          &lt;dbl&gt; 33.36299, 30.42625, 26.23754, 36.21801, 34.45968, 32…\n$ longitude         &lt;dbl&gt; -82.07112, -84.24690, -80.12642, -115.18388, -117.27…\n\n\n\n\nCode\ndata003=data002 %&gt;% filter(is.na(latitude)==FALSE,(is.na(longitude)==FALSE))\n\n\n\n\n4 map\n\n\nCode\nm &lt;- leaflet(data=mapStates) %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addMarkers( lng=data003$longitude, lat=data003$latitude, popup=data003$state)%&gt;% \n  addPolygons(fillColor = topo.colors(10, alpha = NULL), stroke = FALSE)\n\nm  \n\n\n\n\n\n\n\n\n5 US gdp by State\n\n\nCode\nglimpse(mapStates)\n\n\nList of 4\n $ x    : num [1:15599] -87.5 -87.5 -87.5 -87.5 -87.6 ...\n $ y    : num [1:15599] 30.4 30.4 30.4 30.3 30.3 ...\n $ range: num [1:4] -124.7 -67 25.1 49.4\n $ names: chr [1:63] \"alabama\" \"arizona\" \"arkansas\" \"california\" ...\n - attr(*, \"class\")= chr \"map\"\n\n\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\n\nper_gdp_usd=read_excel('US state gpd 2022.xlsx') %&gt;% mutate(names=str_replace(names,'\\\\*','') %&gt;% str_trim() )\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"names\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"magma\", NULL)\n\n\nm &lt;- leaflet(map_sf002) %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n   addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_2022_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_2022_usd, \"（千 美元）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", round(map_sf002$per_2022_usd/1000), \"K &lt;br/&gt;\",\n       \"总gpd 美元：\", round(map_sf002$total_2022_usd), \"M &lt;br/&gt;\"\n\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_2022_usd, opacity = 1.0\n    )\n  \n\n\n\nm  \n\n\n\n\n\n\n\n\n6 resouce:\nhttps://www.gunviolencearchive.org/reports/mass-shooting?page=8&year=2023\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "5 Map",
      "US map"
    ]
  },
  {
    "objectID": "intro/2 probability.html#draw-10-number-from-1-to-10",
    "href": "intro/2 probability.html#draw-10-number-from-1-to-10",
    "title": "Probability",
    "section": "1.1 draw 10 number from 1 to 10",
    "text": "1.1 draw 10 number from 1 to 10\n\n\nCode\na=sample(1:10,10, replace=T) \na\n\n\n [1]  9  4  1 10  1 10  5  9  3  5\n\n\neach number around 10%\n\n\nCode\nas.data.frame(table(a))\n\n\n   a Freq\n1  1    2\n2  3    1\n3  4    1\n4  5    2\n5  9    2\n6 10    2",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#draw-10000-number-from-1-to-10",
    "href": "intro/2 probability.html#draw-10000-number-from-1-to-10",
    "title": "Probability",
    "section": "1.2 draw 10,000 number from 1 to 10",
    "text": "1.2 draw 10,000 number from 1 to 10\n\n\nCode\na=sample(1:10,10000, replace=T) \n\n\neach number around 10%\n\n\nCode\nas.data.frame(table(a))\n\n\n    a Freq\n1   1  988\n2   2  991\n3   3 1009\n4   4  989\n5   5  982\n6   6 1035\n7   7 1050\n8   8 1016\n9   9  969\n10 10  971",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#permutationsorder-dose-not-matter-2-number-from-4-number",
    "href": "intro/2 probability.html#permutationsorder-dose-not-matter-2-number-from-4-number",
    "title": "Probability",
    "section": "2.1 Permutations(order dose not matter), 2 number from 4 number",
    "text": "2.1 Permutations(order dose not matter), 2 number from 4 number\n\n\nCode\nlibrary(gtools)\nall_num=4\nchoose=2\n\nres&lt;- permutations(n= all_num, r = choose, v = c(1:all_num))\nres\n\n\n      [,1] [,2]\n [1,]    1    2\n [2,]    1    3\n [3,]    1    4\n [4,]    2    1\n [5,]    2    3\n [6,]    2    4\n [7,]    3    1\n [8,]    3    2\n [9,]    3    4\n[10,]    4    1\n[11,]    4    2\n[12,]    4    3\n\n\n\n\nCode\nprint (nrow(res))\n\n\n[1] 12\n\n\nall_num!/choose!\n4!/2!\n\n\nCode\n(4*3*2*1)/(2*1)\n\n\n[1] 12\n\n\nor\n\n\nCode\nfactorial(4) / factorial(4-2)\n\n\n[1] 12",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#combinationsorder-matter-2-number-from-4-number",
    "href": "intro/2 probability.html#combinationsorder-matter-2-number-from-4-number",
    "title": "Probability",
    "section": "2.2 Combinations(order matter), 2 number from 4 number",
    "text": "2.2 Combinations(order matter), 2 number from 4 number\n\n\nCode\nlibrary(gtools)\nall_num=4\nchoose=2\n\nres&lt;- combinations(n= all_num, r = choose, v = c(1:all_num))\nres\n\n\n     [,1] [,2]\n[1,]    1    2\n[2,]    1    3\n[3,]    1    4\n[4,]    2    3\n[5,]    2    4\n[6,]    3    4\n\n\n\n\nCode\nprint (nrow(res))\n\n\n[1] 6\n\n\nall_num!/((all_num-choose)! * choose!\n4!/((4-2)! * 2!)\n\n\nCode\n(4*3*2*1)/((2*1)*(2*1))\n\n\n[1] 6\n\n\nor\n\n\nCode\nfactorial(4) / (factorial(4-2)*factorial(2))\n\n\n[1] 6",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#soluition-1pat-least-onep1-snoringp2-snoringp3-snoringp4-snoring",
    "href": "intro/2 probability.html#soluition-1pat-least-onep1-snoringp2-snoringp3-snoringp4-snoring",
    "title": "Probability",
    "section": "3.1 soluition 1:P(at least one)=P(1 snoring)+P(2 snoring)+P(3 snoring)+P(4 snoring)",
    "text": "3.1 soluition 1:P(at least one)=P(1 snoring)+P(2 snoring)+P(3 snoring)+P(4 snoring)\n\n3.1.1 0 snoring\n\n\nCode\np0=(0.8*0.8*0.8*0.8)\np0\n\n\n[1] 0.4096\n\n\n\n\n3.1.2 1 snoring\n\n\nCode\np1=(0.2*0.8*0.8*0.8)*4\np1\n\n\n[1] 0.4096\n\n\n\n\n3.1.3 2 snoring\nchoose 2 from 4: factorial(4) / (factorial(4-2)*factorial(2))\ntotal 6 Permutations\n\n\nCode\nfactorial(4) / (factorial(4-2)*factorial(2))\n\n\n[1] 6\n\n\n\n\nCode\np2=(0.2*0.2*0.8*0.8)*6\np2\n\n\n[1] 0.1536\n\n\n\n\n3.1.4 3 snoring\nchoose 3 from 4 Combinations(order matter),factorial(4) / (factorial(4-3)*factorial(3))\n4 Combinations:\n\n\nCode\nfactorial(4) / (factorial(4-3)*factorial(3))\n\n\n[1] 4\n\n\n\n\nCode\np3=(0.2*0.2*0.2*0.8)*4\np3\n\n\n[1] 0.0256\n\n\n\n\n3.1.5 4 snoring\n\n\nCode\np4=(0.2*0.2*0.2*0.2)\np4\n\n\n[1] 0.0016\n\n\n\n\n3.1.6 at least one:\n\n\nCode\nP_at_least_one=p1+p2+p3+p4\nP_at_least_one\n\n\n[1] 0.5904",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#soluition-2pat-least-one1-pno-one-snoring",
    "href": "intro/2 probability.html#soluition-2pat-least-one1-pno-one-snoring",
    "title": "Probability",
    "section": "3.2 soluition 2:P(at least one)=1-P(no one snoring)",
    "text": "3.2 soluition 2:P(at least one)=1-P(no one snoring)\n\n\nCode\nP_at_least_one2=1-0.8*0.8*0.8*0.8\nP_at_least_one2\n\n\n[1] 0.5904",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#section",
    "href": "intro/2 probability.html#section",
    "title": "Probability",
    "section": "4.1 ",
    "text": "4.1 \n\n\nCode\nx &lt;- seq(-3, 3, length = 100)\ntrue_density &lt;- dnorm(x, mean = 0, sd = 1)\nplot(x, true_density, ylab = \"f(x)\", main = \"Standard Normal Density\", type = \"l\")",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#binomial-distribution",
    "href": "intro/2 probability.html#binomial-distribution",
    "title": "Probability",
    "section": "5.1 Binomial distribution",
    "text": "5.1 Binomial distribution\nthe binomial distribution with parameters n and p is the discrete probability distribution of the number of successes in a sequence of n independent experiments, each asking a yes–no question, and each with its own Boolean-valued outcome: success (with probability p) or failure (with probability 1-p)\nfor a single trial, i.e., n = 1, the binomial distribution is a Bernoulli distribution\n\n5.1.1 Probability density function (pdf)\n1 people snoring Probability\n\n\nCode\nn = 4 # number of people in a room\np = 0.2 # snoring\n\ndbinom(x=1, size=n, prob=p) # 1 people snoring Probability\n\n\n[1] 0.4096\n\n\n1,2,3,4 people snoring Probability\n\n\nCode\nn = 4 # number of people in a room\np = 0.2 # snoring\n\ndbinom(x=c(0,1,2,3,4), size=n, prob=p) # 1 people snoring Probability\n\n\n[1] 0.4096 0.4096 0.1536 0.0256 0.0016\n\n\nsum of all event Probability is always 1\n\n\nCode\nsum(dbinom(x=c(0,1,2,3,4), size=n, prob=p))\n\n\n[1] 1\n\n\n\n\n5.1.2 Probability function\n&lt;=1 people snoring\n\n\nCode\npbinom(q=1, size=n,prob=p, lower.tail=TRUE) \n\n\n[1] 0.8192\n\n\n\n\n5.1.3 generate 10000 number from 0 to 4 with Probability=0.2\n\n\nCode\na=rbinom(1000,size=4,0.2) \n\ntable(a)\n\n\na\n  0   1   2   3   4 \n407 394 167  30   2",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#normal-distribtionalso-called-gaussian-distribution",
    "href": "intro/2 probability.html#normal-distribtionalso-called-gaussian-distribution",
    "title": "Probability",
    "section": "5.2 Normal Distribtion(also called Gaussian distribution)",
    "text": "5.2 Normal Distribtion(also called Gaussian distribution)\nX is a random variable following a normal distribution with mean μ and variance σ2\n68% within 1 standard deviation\n95% within 2 standard deviation\n99.7% within 3 standard deviation\n\n\n5.2.1 Probability Density Function (pdf)\n\ncomputes the pdf at location 0 of N(0,4),normal distribution with mean 1 and variance 4.\nsd is the standard deviation, which is the square root of the variance.\n\n\nCode\ndnorm(0, mean = 1, sd = 2)\n\n\n[1] 0.1760327\n\n\n\n\n5.2.2 cumulative distribution function(cdf)\n\nProbability of &lt;=70 from Normal Distribtion with mean=75 and sd=5\nsmaller than 1 standard deviation from the mean\n\n\nCode\npnorm(q=70,mean=75,sd=5)\n\n\n[1] 0.1586553\n\n\nProbability of &gt;=80 from Normal Distribtion with mean=75 and sd=5\nlarger than 1 standard deviation from the mean\n\n\nCode\n1-pnorm(q=80,mean=75,sd=5)\n\n\n[1] 0.1586553\n\n\n\n\n5.2.3 quantile function\n\nQ1\n\n\nCode\nqnorm(p=0.25,mean=75,sd=5)\n\n\n[1] 71.62755\n\n\nQ3\n\n\nCode\nqnorm(p=0.75,mean=75,sd=5)\n\n\n[1] 78.37245\n\n\n\n\n5.2.4 random number generator\n\n\n\n5.2.5 generate 1000 number from Normal Distribtion with mean=75 and sd=5\n\n\nCode\nnd=rnorm(n=1000,mean=75,sd=5)\nnd=sort(nd)\n\n\n\n\nCode\nmean(nd)\n\n\n[1] 75.05545\n\n\n\n\nCode\nsd(nd)\n\n\n[1] 4.999038\n\n\n\n\nCode\nhist(nd)\n\n\n\n\n\n\n\n\n\n\n\nCode\ndens=dnorm(nd,mean=mean(nd),sd=sd(nd))\n\n\n\n\nCode\nplot(nd,dens,type='l')\n\n\n\n\n\n\n\n\n\n\n\n5.2.6 check data normally distributed\n\n\nCode\nnd_data=rnorm(n=1000,mean=0,sd=2)\nnd_data=sort(nd_data)\n\n\n\n\nCode\nnon_nd_data=seq(1:1000)\nnon_nd_data=sort(non_nd_data)\n\n\n\n5.2.6.1 method 1 :histogram\n\n\nCode\n#define plotting region\npar(mfrow=c(1,2)) \n\n#create histogram for both datasets\nhist(nd_data, col='steelblue', main='Normal')\nhist(non_nd_data, col='steelblue', main='Non-normal')\n\n\n\n\n\n\n\n\n\n\n\n5.2.6.2 method 2 :Q-Q plot\n\n\nCode\n#define plotting region\npar(mfrow=c(1,2)) \n\n#create Q-Q plot for both datasets\nqqnorm(nd_data, main='Normal')\nqqline(nd_data)\n\nqqnorm(non_nd_data, main='Non-normal')\nqqline(non_nd_data)\n\n\n\n\n\n\n\n\n\n\n\n5.2.6.3 Method 3: Shapiro-Wilk Test\nnull hypothesis (H0):The data is normally distributed.\nif p-value =&gt;0.05 then normally distributed\n\n\nCode\n#perform shapiro-wilk test\nshapiro.test(nd_data)\n\n\n\n    Shapiro-Wilk normality test\n\ndata:  nd_data\nW = 0.99868, p-value = 0.6748\n\n\nif p-value &lt;0.05 then not normally distributed(reject the null hypothesis)\n\n\nCode\n#perform shapiro-wilk test\nshapiro.test(non_nd_data)\n\n\n\n    Shapiro-Wilk normality test\n\ndata:  non_nd_data\nW = 0.95481, p-value &lt; 2.2e-16",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#student-t-distribution",
    "href": "intro/2 probability.html#student-t-distribution",
    "title": "Probability",
    "section": "5.3 student t distribution",
    "text": "5.3 student t distribution\n\n\n5.3.1 one sample t test\n\n\n5.3.2 two sample t test\n\n\n5.3.3 Paired t test\n\n\n5.3.4 Pearson correlation coefficient",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#poisson-distribution",
    "href": "intro/2 probability.html#poisson-distribution",
    "title": "Probability",
    "section": "5.6 Poisson Distribution",
    "text": "5.6 Poisson Distribution",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#f-distribution",
    "href": "intro/2 probability.html#f-distribution",
    "title": "Probability",
    "section": "5.4 F distribution",
    "text": "5.4 F distribution\n\n5.4.1 ANOVA",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#chi-square",
    "href": "intro/2 probability.html#chi-square",
    "title": "Probability",
    "section": "5.5 Chi-square",
    "text": "5.5 Chi-square\n\n5.5.1 Chi-square goodness of fit test\n\n\n5.5.2 Chi-square test of independence",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#permutationsorder-dose-matter-2-number-from-4-number",
    "href": "intro/2 probability.html#permutationsorder-dose-matter-2-number-from-4-number",
    "title": "Probability",
    "section": "2.1 Permutations(order dose matter), 2 number from 4 number",
    "text": "2.1 Permutations(order dose matter), 2 number from 4 number\n\n\nCode\nlibrary(gtools)\nall_num=4\nchoose=2\n\nres&lt;- permutations(n= all_num, r = choose, v = c(1:all_num))\nres\n\n\n      [,1] [,2]\n [1,]    1    2\n [2,]    1    3\n [3,]    1    4\n [4,]    2    1\n [5,]    2    3\n [6,]    2    4\n [7,]    3    1\n [8,]    3    2\n [9,]    3    4\n[10,]    4    1\n[11,]    4    2\n[12,]    4    3\n\n\n\n\nCode\nprint (nrow(res))\n\n\n[1] 12\n\n\nall_num!/choose!\n4!/2!\n\n\nCode\n(4*3*2*1)/(2*1)\n\n\n[1] 12\n\n\nor\n\n\nCode\nfactorial(4) / factorial(2)\n\n\n[1] 12",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#combinationsorder-no-matter-2-number-from-4-number",
    "href": "intro/2 probability.html#combinationsorder-no-matter-2-number-from-4-number",
    "title": "Probability",
    "section": "2.2 Combinations(order no matter), 2 number from 4 number",
    "text": "2.2 Combinations(order no matter), 2 number from 4 number\n\n\nCode\nlibrary(gtools)\nall_num=4\nchoose=2\n\nres&lt;- combinations(n= all_num, r = choose, v = c(1:all_num))\nres\n\n\n     [,1] [,2]\n[1,]    1    2\n[2,]    1    3\n[3,]    1    4\n[4,]    2    3\n[5,]    2    4\n[6,]    3    4\n\n\n\n\nCode\nprint (nrow(res))\n\n\n[1] 6\n\n\nall_num!/((all_num-choose)! * choose!\n4!/((4-2)! * 2!)\n\n\nCode\n(4*3*2*1)/((2*1)*(2*1))\n\n\n[1] 6\n\n\nor\n\n\nCode\nfactorial(4) / (factorial(4-2)*factorial(2))\n\n\n[1] 6",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-1.what-is-probability-of-choose-4-number-from-4-number-and-0-correctall-wrong.",
    "href": "intro/2 probability.html#question-1.what-is-probability-of-choose-4-number-from-4-number-and-0-correctall-wrong.",
    "title": "Probability",
    "section": "4.1 Question 1.what is probability of choose 4 number from 4 number and 0 correct(all wrong).",
    "text": "4.1 Question 1.what is probability of choose 4 number from 4 number and 0 correct(all wrong).\n\n4.1.1 permutations(order matter)\n4!=432*1=24 combination\n\n\nCode\n4*3*2*1\n\n\n[1] 24\n\n\n\n\n4.1.2 Derangement\n\nor\n\nThere are 9 Derangement(all wrong)\n\n\nCode\ne=2.71828\n#D(4)=(4!+1)/e\n\nD_4=floor((4*3*2*1+1)/e)\nD_4\n\n\n[1] 9\n\n\nSo the all wrong probability of choose 4 number from 4 number is\n\n\nCode\nQ1=(floor((4*3*2*1+1)/e))/(4*3*2*1)\nQ1\n\n\n[1] 0.375",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-2.-what-is-probability-of-choose-4-number-from-4-number-and-only-1-correct",
    "href": "intro/2 probability.html#question-2.-what-is-probability-of-choose-4-number-from-4-number-and-only-1-correct",
    "title": "Probability",
    "section": "4.2 Question 2. what is probability of choose 4 number from 4 number and only 1 correct",
    "text": "4.2 Question 2. what is probability of choose 4 number from 4 number and only 1 correct\n\n4.2.1 permutations(order matter)\n4!=432*1=24 combination\n\n\nCode\n4*3*2*1\n\n\n[1] 24\n\n\n\n\n4.2.2 Derangement\nany of the 4 number can be correct, and remaining 3 number all wrong and it become the D(3) Derangement problem\n\n\nCode\ne=2.71828\n#D(3)=(3!+1)/e\n\nD_3=floor((3*2*1+1)/e)\nD_3\n\n\n[1] 2\n\n\nSo the probability of choose 4 number from 4 number and only 1 correct is\n\n\nCode\nQ2=(4*2)/(4*3*2*1)\nQ2\n\n\n[1] 0.3333333",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-3.-what-is-probability-of-choose-4-number-from-4-number-and-only-2-correct",
    "href": "intro/2 probability.html#question-3.-what-is-probability-of-choose-4-number-from-4-number-and-only-2-correct",
    "title": "Probability",
    "section": "4.3 Question 3. what is probability of choose 4 number from 4 number and only 2 correct",
    "text": "4.3 Question 3. what is probability of choose 4 number from 4 number and only 2 correct\nthe problem is same as choose 2 number from 4 number.total 6 Combinations(order no matter)\n\n\nCode\nfactorial(4) / (factorial(4-2)*factorial(2))\n\n\n[1] 6\n\n\nSo the probability of choose 4 number from 4 number and only 2 correct is\n\n\nCode\nQ3=6/(4*3*2*1)\nQ3\n\n\n[1] 0.25",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-4.what-is-probability-of-choose-4-number-from-4-number-and-only-3-correct",
    "href": "intro/2 probability.html#question-4.what-is-probability-of-choose-4-number-from-4-number-and-only-3-correct",
    "title": "Probability",
    "section": "4.4 Question 4.what is probability of choose 4 number from 4 number and only 3 correct",
    "text": "4.4 Question 4.what is probability of choose 4 number from 4 number and only 3 correct\nIts same as all correct. since 3 correct the last one will be also correct\n\n\nCode\nQ4=1/(4*3*2*1)\nQ4\n\n\n[1] 0.04166667",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-5.what-is-probability-of-choose-4-number-from-4-number-and-4-correct",
    "href": "intro/2 probability.html#question-5.what-is-probability-of-choose-4-number-from-4-number-and-4-correct",
    "title": "Probability",
    "section": "4.5 Question 5.what is probability of choose 4 number from 4 number and 4 correct",
    "text": "4.5 Question 5.what is probability of choose 4 number from 4 number and 4 correct\n\n\nCode\nQ5=1/(4*3*2*1)\nQ5\n\n\n[1] 0.04166667\n\n\nSo all event total probability is 1\n\n\nCode\nQ1+Q2+Q3+Q4\n\n\n[1] 1",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html",
    "href": "intro/2 probability.html",
    "title": "Probability",
    "section": "",
    "text": "Probability is the branch of mathematics concerning events and numerical descriptions of how likely they are to occur. The probability of an event is a number between 0 and 1; the larger the probability, the more likely an event is to occur.",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#solution-2pat-least-one1-pno-one-snoring",
    "href": "intro/2 probability.html#solution-2pat-least-one1-pno-one-snoring",
    "title": "Probability",
    "section": "3.2 solution 2:P(at least one)=1-P(no one snoring)",
    "text": "3.2 solution 2:P(at least one)=1-P(no one snoring)\n\n\nCode\nP_at_least_one2=1-0.8*0.8*0.8*0.8\nP_at_least_one2\n\n\n[1] 0.5904",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#normal-distributionalso-called-gaussian-distribution",
    "href": "intro/2 probability.html#normal-distributionalso-called-gaussian-distribution",
    "title": "Probability",
    "section": "5.2 Normal Distribution(also called Gaussian distribution)",
    "text": "5.2 Normal Distribution(also called Gaussian distribution)\nX is a random variable following a normal distribution with mean μ and variance σ2\n68% within 1 standard deviation\n95% within 2 standard deviation\n99.7% within 3 standard deviation\n\n5.2.1 Z score and standard Normal Distribution\nstandard Normal Distribution is special Normal Distribution with mean=0 and standard deviation =1\n\nZ table\n\n\n\n5.2.2 Standardization\ntransfer any normal Distribution into standard Normal Distribution\n\nformula:\n\n\n\n5.2.3 R function\n\n\n\n5.2.4 Probability Density Function (pdf)\n\ncomputes the pdf at location 0 of N(0,4),normal distribution with mean 1 and variance 4.\nsd is the standard deviation, which is the square root of the variance.\n\n\nCode\ndnorm(0, mean = 1, sd = 2)\n\n\n[1] 0.1760327\n\n\n\n\n5.2.5 cumulative distribution function(cdf)\n\nProbability of &lt;=70 from Normal Distribtion with mean=75 and sd=5\nsmaller than 1 standard deviation from the mean\n\n\nCode\npnorm(q=70,mean=75,sd=5)\n\n\n[1] 0.1586553\n\n\nProbability of &gt;=80 from Normal Distribtion with mean=75 and sd=5\nlarger than 1 standard deviation from the mean\n\n\nCode\n1-pnorm(q=80,mean=75,sd=5)\n\n\n[1] 0.1586553\n\n\n\n\n5.2.6 quantile function\n\nQ1\n\n\nCode\nqnorm(p=0.25,mean=75,sd=5)\n\n\n[1] 71.62755\n\n\nQ3\n\n\nCode\nqnorm(p=0.75,mean=75,sd=5)\n\n\n[1] 78.37245\n\n\n\n\n5.2.7 random number generator\n\n\n\n5.2.8 generate 1000 number from Normal Distribtion with mean=75 and sd=5\n\n\nCode\nnd=rnorm(n=1000,mean=75,sd=5)\nnd=sort(nd)\n\n\n\n\nCode\nmean(nd)\n\n\n[1] 74.87661\n\n\n\n\nCode\nsd(nd)\n\n\n[1] 4.988259\n\n\n\n\nCode\nhist(nd)\n\n\n\n\n\n\n\n\n\n\n\nCode\ndens=dnorm(nd,mean=mean(nd),sd=sd(nd))\n\n\n\n\nCode\nplot(nd,dens,type='l')\n\n\n\n\n\n\n\n\n\n\n\n5.2.9 check data normally distributed\n\n\nCode\nnd_data=rnorm(n=1000,mean=0,sd=2)\nnd_data=sort(nd_data)\n\n\n\n\nCode\nnon_nd_data=seq(1:1000)\nnon_nd_data=sort(non_nd_data)\n\n\n\n5.2.9.1 method 1 :histogram\n\n\nCode\n#define plotting region\npar(mfrow=c(1,2)) \n\n#create histogram for both datasets\nhist(nd_data, col='steelblue', main='Normal')\nhist(non_nd_data, col='steelblue', main='Non-normal')\n\n\n\n\n\n\n\n\n\n\n\n5.2.9.2 method 2 :Q-Q plot\n\n\nCode\n#define plotting region\npar(mfrow=c(1,2)) \n\n#create Q-Q plot for both datasets\nqqnorm(nd_data, main='Normal')\nqqline(nd_data)\n\nqqnorm(non_nd_data, main='Non-normal')\nqqline(non_nd_data)\n\n\n\n\n\n\n\n\n\n\n\n5.2.9.3 Method 3: Shapiro-Wilk Test\nnull hypothesis (H0):The data is normally distributed.\nif p-value =&gt;0.05 then normally distributed\n\n\nCode\n#perform shapiro-wilk test\nshapiro.test(nd_data)\n\n\n\n    Shapiro-Wilk normality test\n\ndata:  nd_data\nW = 0.99879, p-value = 0.7491\n\n\nif p-value &lt;0.05 then not normally distributed(reject the null hypothesis)\n\n\nCode\n#perform shapiro-wilk test\nshapiro.test(non_nd_data)\n\n\n\n    Shapiro-Wilk normality test\n\ndata:  non_nd_data\nW = 0.95481, p-value &lt; 2.2e-16",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/3 Statistics.html",
    "href": "intro/3 Statistics.html",
    "title": "Statistics",
    "section": "",
    "text": "1 Statistics\n\n\n\n2 Variable\n\n\n\n3 Categorical variable\n\n\n\n4 Quantitative variable\n\n\n\n5 Variance vs Standard deviation\n\n\n\n6 Reference\nhttps://www.youtube.com/watch?v=MXaJ7sa7q-8\n\n\nCode\nsessionInfo()\n\n\nsessionInfo()\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Sonoma 14.1.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.4 compiler_4.3.1    fastmap_1.1.1     cli_3.6.2        \n [5] tools_4.3.1       htmltools_0.5.8.1 rstudioapi_0.16.0 yaml_2.3.8       \n [9] rmarkdown_2.26    knitr_1.45        jsonlite_1.8.8    xfun_0.43        \n[13] digest_0.6.35     rlang_1.1.3       evaluate_0.23    \n\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Intro",
      "Statistics"
    ]
  },
  {
    "objectID": "Plot/5 Map/1 leaflet.html",
    "href": "Plot/5 Map/1 leaflet.html",
    "title": "map",
    "section": "",
    "text": "1 data\n\n\nCode\nlibrary(tidyverse)\n\nlibrary(sf)\nlibrary(leaflet)\nlibrary(geojsonio)\nlibrary(leaflet.extras)\n\n\n\n\n2 display at openstreet map\n\n\nCode\nm &lt;- leaflet() %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addMarkers(lng=174.768, lat=-36.852, popup=\"The birthplace of R\")\n\nm  \n\n\n\n\n\n\n\n\n3 display at google map\n\n\nCode\nleaflet() |&gt;\n  # add base mao\n  addTiles(urlTemplate = \"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\") |&gt;\n  # set view\n  setView(116.347817690225, 39.997202126977, zoom = 16) |&gt;\n  # add markers\n  addMarkers(116.347817690225, 39.997202126977)\n\n\n\n\n\n\n\n\n4 Third-Party map\n\n\nCode\n#m &lt;- leaflet() %&gt;% setView(lng = -71.0589, lat = 42.3601, zoom = 10)\n#m %&gt;% addProviderTiles(providers$Stadia.StamenToner)\n\n\n\n\n5 add pop up\nPopups are small boxes containing arbitrary HTML, that point to a specific point on the map.\n\n\nCode\ncontent &lt;- paste(sep = \"&lt;br/&gt;\",\n  \"&lt;b&gt;&lt;a href='https://www.samurainoodle.com/'&gt;Samurai Noodle&lt;/a&gt;&lt;/b&gt;\",\n  \"606 5th Ave. S\",\n  \"Seattle, WA 98138\"\n)\n\nleaflet() %&gt;% addTiles() %&gt;%\n  setView(-122.327298, 47.597131,zoom = 12) %&gt;% \n  addPopups(-122.327298, 47.597131, content,\n    #options = popupOptions(closeButton = FALSE)\n    options = popupOptions(closeButton = FALSE)\n  )\n\n\n\n\n\n\n\n\n6 add Markers\n\n\nCode\nlibrary(htmltools)\n\ndf &lt;- read.csv(textConnection(\n\"Name,Lat,Long\nSamurai Noodle,47.597131,-122.327298\nKukai Ramen,47.6154,-122.327157\nTsukushinbo,47.59987,-122.326726\"\n))\n\nleaflet(df) %&gt;% addTiles() %&gt;%\n  addMarkers(~Long, ~Lat, popup = ~htmlEscape(Name))\n\n\n\n\n\n\n\n\n7 add Labels\nA label is a textual or HTML content that can attached to markers and shapes to be always displayed or displayed on mouse over. Unlike popups you don’t need to click a marker/polygon for the label to be shown.\n\n\nCode\nlibrary(htmltools)\n\ndf &lt;- read.csv(textConnection(\n\"Name,Lat,Long\nSamurai Noodle,47.597131,-122.327298\nKukai Ramen,47.6154,-122.327157\nTsukushinbo,47.59987,-122.326726\"))\n\nleaflet(df) %&gt;% addTiles() %&gt;%\n  addMarkers(~Long, ~Lat, label = ~htmlEscape(Name))\n\n\n\n\n\n\n\n\n8 World map\n\n\nCode\n#install.packages(\"https://cran.r-project.org/src/contrib/Archive/maptools/maptools_1.1-8.tar.gz\")\n\n\n\n\nCode\njson_data=read_sf(\"world-administrative-boundaries.geojson\")\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\n#Get my variable\n#name&lt;-c(\"Ghana\", \"Grenada\", \"Guyana\", \"India\", \"Jamaica\", \"Kenya\", \"United States\",\"Canada\")\n#val&lt;-c(1,2,4,5,5,1000,20000, 100)\n\n#per_gdp_usd&lt;-data.frame(name,val)\n\n\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\n\nper_gdp_usd=read_excel('world data.xlsx') %&gt;% mutate(\n  name=case_when(\n    name ==\"United States\" ~ \"United States of America\"\n     ,name ==\"Russia\" ~ \"Russian Federation\"\n   ,name ==\"U.K. of Great Britain and Northern Ireland\" ~ \"United Kingdom\"\n   \n   ,name ==\"U.K. of Great Britain and Northern Ireland\" ~ \"United Kingdom\"\n   \n   ,name == \"South Korea\"~ \"Republic of Korea\"\n   \n   ,name ==\"Lao People's Democratic Republic\" ~ \"Laos\"\n   \n    ,TRUE ~ name\n  )\n)\n\n\n\n\nCode\n#test=full_join(map_df, per_gdp_usd, by=\"name\")\n\n#left =test %&gt;% filter(is.na(iso3)==TRUE)\n\n#right=test %&gt;% filter(is.na(per_gdp_total)==TRUE)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"name\")\n\n\n\n\nCode\nglimpse(map_df002)\n\n\nRows: 158\nColumns: 12\n$ name                     &lt;chr&gt; \"Albania\", \"Algeria\", \"Andorra\", \"Angola\", \"A…\n$ geo_point_2d             &lt;chr&gt; \"{ \\\"lon\\\": 20.068384605918776, \\\"lat\\\": 41.1…\n$ iso3                     &lt;chr&gt; \"ALB\", \"DZA\", \"AND\", \"AGO\", \"ARG\", \"ARM\", \"AU…\n$ status                   &lt;chr&gt; \"Member State\", \"Member State\", \"Member State…\n$ color_code               &lt;chr&gt; \"ALB\", \"DZA\", \"AND\", \"AGO\", \"ARG\", \"ARM\", \"AU…\n$ continent                &lt;chr&gt; \"Europe\", \"Africa\", \"Europe\", \"Africa\", \"Amer…\n$ region                   &lt;chr&gt; \"Southern Europe\", \"Northern Africa\", \"Southe…\n$ iso_3166_1_alpha_2_codes &lt;chr&gt; \"AL\", \"DZ\", \"AD\", \"AO\", \"AR\", \"AM\", \"AU\", \"AT…\n$ french_short             &lt;chr&gt; \"Albanie\", \"Algérie\", \"Andorre\", \"Angola\", \"A…\n$ geometry                 &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((20.07142 42..., …\n$ per_gdp_total            &lt;dbl&gt; 1.888210e+10, 1.919130e+11, 3.352033e+09, 1.0…\n$ per_gdp_usd              &lt;dbl&gt; 6643, 4274, 41993, 2999, 13904, 7014, 64003, …\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gdp_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gdp_usd, \"（千 美元）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", round(map_sf002$per_gdp_usd/1000), \"K &lt;br/&gt;\",\n       \"总gpd 美元：\", round(map_sf002$per_gdp_total/1000000), \"M &lt;br/&gt;\"\n\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gdp_usd, opacity = 1.0\n    )\n\n\n\n\n\n\n\n\n9 China one city map\n\n\nCode\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/citys/440300.json\") \n#or\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/440300_full.json\")\n\n\n深圳市：\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(json_data) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n\n\n\n\n10 all China each province GPD map\n\n\nCode\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\n中国 2022 各省 人均gpd usd：\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\nper_gdp_usd=read_excel('china gdp2022.xlsx')\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"city\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gpd_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gpd_usd, \"（美万）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", map_sf002$per_gpd_usd, \"&lt;br/&gt;\",\n      \"人均gpd 人民币：\", map_sf002$per_gpd_rmb, \"&lt;br/&gt;\",\n       \"人口：\", round(map_sf002$total_gpd_rmb/map_sf002$per_gpd_rmb), \"&lt;br/&gt;\"\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gpd_usd, opacity = 1.0\n    )\n\n\n\n\n\n\nGPD data source:国家统计局数据库\n\n\n11 China one province map each city GPD\n\n\nCode\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/province/440000.json\") \n\n\n广东省 2021 人均gpd usd：\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\nper_gdp_usd=read_excel('guangdong city gdp2021.xlsx')\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"city\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\ndata source:广东统计年鉴2022\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gpd_usd)\n    ,popup = ~ paste0(\n      \"城市：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gpd_usd, \"（美万）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"城市：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", map_sf002$per_gpd_usd, \"&lt;br/&gt;\",\n      \"人均gpd 人民币：\", map_sf002$per_gpd_rmb, \"&lt;br/&gt;\",\n       \"人口：\", round(map_sf002$total_gpd_rmb*10000000/map_sf002$per_gpd_rmb), \"&lt;br/&gt;\"\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gpd_usd, opacity = 1.0\n    )\n\n\n\n\n\n\nhttps://zh.wikipedia.org/wiki/%E5%B9%BF%E4%B8%9C%E5%90%84%E5%9C%B0%E7%BA%A7%E5%B8%82%E5%9C%B0%E5%8C%BA%E7%94%9F%E4%BA%A7%E6%80%BB%E5%80%BC%E5%88%97%E8%A1%A8\n\n\n12 China province map\n\n\nCode\nlibrary(leaflet)\nlibrary(sf)\n\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/china.json\") \n#or\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nm=leaflet(json_data) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n \n\nm\n\n\n\n\n\n\nadd provincial capital\n\n\nCode\nChina=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\n\n\nCode\nChina002=China %&gt;% as_data_frame() %&gt;% mutate(\n                                            center2=as.character(center) %&gt;% str_replace('c','')%&gt;% str_replace('[(]','') %&gt;% str_replace('[)]','')\n                                               )\n\n\n\n\nCode\nChina003=China002%&gt;%separate(center2, c(\"x\", \"y\"), \", \")\n\n\n\n\nCode\nChina_point = China003 %&gt;% \n  slice(-35)\n\nm %&gt;% \n  addCircles(data = China_point,\n                  lng = ~as.numeric(x), lat = ~as.numeric(y),color = \"red\",weight = 10,\n                  fillOpacity =2)\n\n\n\n\n\n\n\n\n13 China province and city map\n\n\nCode\nmap_list &lt;- lapply(\n  X = list.files(\"./GeoMapData_CN/province\", recursive = T, full.names = T),\n  FUN = sf::read_sf\n)\n\nlength(map_list)\n\n\n[1] 34\n\n\n\n\nCode\nfor (i in c(1:length(map_list))){\n   #print(i)\n  #print(dim(map_list[[i]]))\n  #print(ncol(map_list[[i]]))\n  if(ncol(map_list[[i]])!=10){print(map_list[[i]])}\n  }\n\n\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 119.3183 ymin: 21.75147 xmax: 124.5656 ymax: 25.92592\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                    &lt;MULTIPOLYGON [°]&gt;\n1 710000 台湾省 121.509062,25.044332 province (((119.5543 23.68248, 119.555 23.…\n\n\n\n\nCode\nX = list.files(\"./GeoMapData_CN/province\", recursive = T, full.names = T)\n\nX2=X[-which(X %in% c(\"./GeoMapData_CN/province/710000.json\"\n         ))]\n\nmap_list &lt;- lapply(\n  X = X2,\n  FUN = sf::read_sf\n)\n\n\n\n\nCode\nlength(map_list)\n\n\n[1] 33\n\n\n\n\nCode\nprovince_map &lt;- Reduce(\"rbind\", map_list)\n\n\n\n\nCode\n# library(leaflet)\n# library(sf)\n# \n# json_data &lt;- province_map\n# \n# \n# pal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"), 1:10)\n# \n# leaflet(json_data) %&gt;%\n#   addTiles() %&gt;%\n#   addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n14 China city and district map\n\n\nCode\nmap_list &lt;- lapply(\n  X = list.files(\"./GeoMapData_CN/citys\", recursive = T, full.names = T),\n  FUN = sf::read_sf\n)\n\nlength(map_list)\n\n\n[1] 334\n\n\n\n\nCode\nfor (i in c(1:length(map_list))){\n   #print(i)\n  #print(dim(map_list[[i]]))\n  #print(ncol(map_list[[i]]))\n  if(ncol(map_list[[i]])!=10){print(map_list[[i]])}\n  }\n\n\nSimple feature collection with 1 feature and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 113.5215 ymin: 22.65421 xmax: 114.2603 ymax: 23.14205\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                         &lt;POLYGON [°]&gt;\n1 441900 东莞市 113.746262,23.046237 city  ((114.2292 22.81251, 114.2278 22.813…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 113.157 ymin: 22.20104 xmax: 113.692 ymax: 22.7726\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                         &lt;POLYGON [°]&gt;\n1 442000 中山市 113.382391,22.521113 city  ((113.5687 22.41193, 113.5666 22.412…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 115.9267 ymin: 20.58265 xmax: 116.9338 ymax: 21.12693\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name     center               level                            geometry\n  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;                &lt;chr&gt;                  &lt;MULTIPOLYGON [°]&gt;\n1 442100 东沙群岛 116.887312,20.617512 city  (((115.9433 21.09745, 115.95 21.11…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 108.9287 ymin: 19.17894 xmax: 109.7694 ymax: 19.92575\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                    &lt;MULTIPOLYGON [°]&gt;\n1 460400 儋州市 109.576782,19.517486 city  (((109.4322 19.91302, 109.4253 19.91…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 97.8483 ymin: 39.65426 xmax: 98.52018 ymax: 39.99979\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name     center              level                             geometry\n  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;                   &lt;MULTIPOLYGON [°]&gt;\n1 620200 嘉峪关市 98.277304,39.786529 city  (((97.85974 39.7169, 97.85827 39.71…\n\n\n\n\nCode\nX = list.files(\"./GeoMapData_CN/citys\", recursive = T, full.names = T)\n\nX2=X[-which(X %in% c(\"./GeoMapData_CN/citys/620200.json\"\n         ,\"./GeoMapData_CN/citys/460400.json\"\n              ,\"./GeoMapData_CN/citys/442100.json\"\n              ,\"./GeoMapData_CN/citys/442000.json\"\n              ,\"./GeoMapData_CN/citys/441900.json\"\n         ))]\n\nmap_list &lt;- lapply(\n  X = X2,\n  FUN = sf::read_sf\n)\n\n\n\n\nCode\nlength(map_list)\n\n\n[1] 329\n\n\n\n\nCode\nprovince_map &lt;- Reduce(\"rbind\", map_list)\n\n\n\n\nCode\n# library(leaflet)\n# library(sf)\n# \n# json_data &lt;- province_map\n# \n# \n# pal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"), 1:10)\n# \n# leaflet(json_data) %&gt;%\n#   addTiles() %&gt;%\n#   addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n15 show all map providers\n\n\nCode\nproviders\n\n\nproviders\n$OpenStreetMap\n[1] \"OpenStreetMap\"\n\n$OpenStreetMap.Mapnik\n[1] \"OpenStreetMap.Mapnik\"\n\n$OpenStreetMap.DE\n[1] \"OpenStreetMap.DE\"\n\n$OpenStreetMap.CH\n[1] \"OpenStreetMap.CH\"\n\n$OpenStreetMap.France\n[1] \"OpenStreetMap.France\"\n\n$OpenStreetMap.HOT\n[1] \"OpenStreetMap.HOT\"\n\n$OpenStreetMap.BZH\n[1] \"OpenStreetMap.BZH\"\n\n$MapTilesAPI\n[1] \"MapTilesAPI\"\n\n$MapTilesAPI.OSMEnglish\n[1] \"MapTilesAPI.OSMEnglish\"\n\n$MapTilesAPI.OSMFrancais\n[1] \"MapTilesAPI.OSMFrancais\"\n\n$MapTilesAPI.OSMEspagnol\n[1] \"MapTilesAPI.OSMEspagnol\"\n\n$OpenSeaMap\n[1] \"OpenSeaMap\"\n\n$OPNVKarte\n[1] \"OPNVKarte\"\n\n$OpenTopoMap\n[1] \"OpenTopoMap\"\n\n$OpenRailwayMap\n[1] \"OpenRailwayMap\"\n\n$OpenFireMap\n[1] \"OpenFireMap\"\n\n$SafeCast\n[1] \"SafeCast\"\n\n$Stadia\n[1] \"Stadia\"\n\n$Stadia.AlidadeSmooth\n[1] \"Stadia.AlidadeSmooth\"\n\n$Stadia.AlidadeSmoothDark\n[1] \"Stadia.AlidadeSmoothDark\"\n\n$Stadia.OSMBright\n[1] \"Stadia.OSMBright\"\n\n$Stadia.Outdoors\n[1] \"Stadia.Outdoors\"\n\n$Stadia.StamenToner\n[1] \"Stadia.StamenToner\"\n\n$Stadia.StamenTonerBackground\n[1] \"Stadia.StamenTonerBackground\"\n\n$Stadia.StamenTonerLines\n[1] \"Stadia.StamenTonerLines\"\n\n$Stadia.StamenTonerLabels\n[1] \"Stadia.StamenTonerLabels\"\n\n$Stadia.StamenTonerLite\n[1] \"Stadia.StamenTonerLite\"\n\n$Stadia.StamenWatercolor\n[1] \"Stadia.StamenWatercolor\"\n\n$Stadia.StamenTerrain\n[1] \"Stadia.StamenTerrain\"\n\n$Stadia.StamenTerrainBackground\n[1] \"Stadia.StamenTerrainBackground\"\n\n$Stadia.StamenTerrainLabels\n[1] \"Stadia.StamenTerrainLabels\"\n\n$Stadia.StamenTerrainLines\n[1] \"Stadia.StamenTerrainLines\"\n\n$Thunderforest\n[1] \"Thunderforest\"\n\n$Thunderforest.OpenCycleMap\n[1] \"Thunderforest.OpenCycleMap\"\n\n$Thunderforest.Transport\n[1] \"Thunderforest.Transport\"\n\n$Thunderforest.TransportDark\n[1] \"Thunderforest.TransportDark\"\n\n$Thunderforest.SpinalMap\n[1] \"Thunderforest.SpinalMap\"\n\n$Thunderforest.Landscape\n[1] \"Thunderforest.Landscape\"\n\n$Thunderforest.Outdoors\n[1] \"Thunderforest.Outdoors\"\n\n$Thunderforest.Pioneer\n[1] \"Thunderforest.Pioneer\"\n\n$Thunderforest.MobileAtlas\n[1] \"Thunderforest.MobileAtlas\"\n\n$Thunderforest.Neighbourhood\n[1] \"Thunderforest.Neighbourhood\"\n\n$CyclOSM\n[1] \"CyclOSM\"\n\n$Jawg\n[1] \"Jawg\"\n\n$Jawg.Streets\n[1] \"Jawg.Streets\"\n\n$Jawg.Terrain\n[1] \"Jawg.Terrain\"\n\n$Jawg.Sunny\n[1] \"Jawg.Sunny\"\n\n$Jawg.Dark\n[1] \"Jawg.Dark\"\n\n$Jawg.Light\n[1] \"Jawg.Light\"\n\n$Jawg.Matrix\n[1] \"Jawg.Matrix\"\n\n$MapBox\n[1] \"MapBox\"\n\n$MapTiler\n[1] \"MapTiler\"\n\n$MapTiler.Streets\n[1] \"MapTiler.Streets\"\n\n$MapTiler.Basic\n[1] \"MapTiler.Basic\"\n\n$MapTiler.Bright\n[1] \"MapTiler.Bright\"\n\n$MapTiler.Pastel\n[1] \"MapTiler.Pastel\"\n\n$MapTiler.Positron\n[1] \"MapTiler.Positron\"\n\n$MapTiler.Hybrid\n[1] \"MapTiler.Hybrid\"\n\n$MapTiler.Toner\n[1] \"MapTiler.Toner\"\n\n$MapTiler.Topo\n[1] \"MapTiler.Topo\"\n\n$MapTiler.Voyager\n[1] \"MapTiler.Voyager\"\n\n$TomTom\n[1] \"TomTom\"\n\n$TomTom.Basic\n[1] \"TomTom.Basic\"\n\n$TomTom.Hybrid\n[1] \"TomTom.Hybrid\"\n\n$TomTom.Labels\n[1] \"TomTom.Labels\"\n\n$Esri\n[1] \"Esri\"\n\n$Esri.WorldStreetMap\n[1] \"Esri.WorldStreetMap\"\n\n$Esri.DeLorme\n[1] \"Esri.DeLorme\"\n\n$Esri.WorldTopoMap\n[1] \"Esri.WorldTopoMap\"\n\n$Esri.WorldImagery\n[1] \"Esri.WorldImagery\"\n\n$Esri.WorldTerrain\n[1] \"Esri.WorldTerrain\"\n\n$Esri.WorldShadedRelief\n[1] \"Esri.WorldShadedRelief\"\n\n$Esri.WorldPhysical\n[1] \"Esri.WorldPhysical\"\n\n$Esri.OceanBasemap\n[1] \"Esri.OceanBasemap\"\n\n$Esri.NatGeoWorldMap\n[1] \"Esri.NatGeoWorldMap\"\n\n$Esri.WorldGrayCanvas\n[1] \"Esri.WorldGrayCanvas\"\n\n$OpenWeatherMap\n[1] \"OpenWeatherMap\"\n\n$OpenWeatherMap.Clouds\n[1] \"OpenWeatherMap.Clouds\"\n\n$OpenWeatherMap.CloudsClassic\n[1] \"OpenWeatherMap.CloudsClassic\"\n\n$OpenWeatherMap.Precipitation\n[1] \"OpenWeatherMap.Precipitation\"\n\n$OpenWeatherMap.PrecipitationClassic\n[1] \"OpenWeatherMap.PrecipitationClassic\"\n\n$OpenWeatherMap.Rain\n[1] \"OpenWeatherMap.Rain\"\n\n$OpenWeatherMap.RainClassic\n[1] \"OpenWeatherMap.RainClassic\"\n\n$OpenWeatherMap.Pressure\n[1] \"OpenWeatherMap.Pressure\"\n\n$OpenWeatherMap.PressureContour\n[1] \"OpenWeatherMap.PressureContour\"\n\n$OpenWeatherMap.Wind\n[1] \"OpenWeatherMap.Wind\"\n\n$OpenWeatherMap.Temperature\n[1] \"OpenWeatherMap.Temperature\"\n\n$OpenWeatherMap.Snow\n[1] \"OpenWeatherMap.Snow\"\n\n$HERE\n[1] \"HERE\"\n\n$HERE.normalDay\n[1] \"HERE.normalDay\"\n\n$HERE.normalDayCustom\n[1] \"HERE.normalDayCustom\"\n\n$HERE.normalDayGrey\n[1] \"HERE.normalDayGrey\"\n\n$HERE.normalDayMobile\n[1] \"HERE.normalDayMobile\"\n\n$HERE.normalDayGreyMobile\n[1] \"HERE.normalDayGreyMobile\"\n\n$HERE.normalDayTransit\n[1] \"HERE.normalDayTransit\"\n\n$HERE.normalDayTransitMobile\n[1] \"HERE.normalDayTransitMobile\"\n\n$HERE.normalDayTraffic\n[1] \"HERE.normalDayTraffic\"\n\n$HERE.normalNight\n[1] \"HERE.normalNight\"\n\n$HERE.normalNightMobile\n[1] \"HERE.normalNightMobile\"\n\n$HERE.normalNightGrey\n[1] \"HERE.normalNightGrey\"\n\n$HERE.normalNightGreyMobile\n[1] \"HERE.normalNightGreyMobile\"\n\n$HERE.normalNightTransit\n[1] \"HERE.normalNightTransit\"\n\n$HERE.normalNightTransitMobile\n[1] \"HERE.normalNightTransitMobile\"\n\n$HERE.reducedDay\n[1] \"HERE.reducedDay\"\n\n$HERE.reducedNight\n[1] \"HERE.reducedNight\"\n\n$HERE.basicMap\n[1] \"HERE.basicMap\"\n\n$HERE.mapLabels\n[1] \"HERE.mapLabels\"\n\n$HERE.trafficFlow\n[1] \"HERE.trafficFlow\"\n\n$HERE.carnavDayGrey\n[1] \"HERE.carnavDayGrey\"\n\n$HERE.hybridDay\n[1] \"HERE.hybridDay\"\n\n$HERE.hybridDayMobile\n[1] \"HERE.hybridDayMobile\"\n\n$HERE.hybridDayTransit\n[1] \"HERE.hybridDayTransit\"\n\n$HERE.hybridDayGrey\n[1] \"HERE.hybridDayGrey\"\n\n$HERE.hybridDayTraffic\n[1] \"HERE.hybridDayTraffic\"\n\n$HERE.pedestrianDay\n[1] \"HERE.pedestrianDay\"\n\n$HERE.pedestrianNight\n[1] \"HERE.pedestrianNight\"\n\n$HERE.satelliteDay\n[1] \"HERE.satelliteDay\"\n\n$HERE.terrainDay\n[1] \"HERE.terrainDay\"\n\n$HERE.terrainDayMobile\n[1] \"HERE.terrainDayMobile\"\n\n$HEREv3\n[1] \"HEREv3\"\n\n$HEREv3.normalDay\n[1] \"HEREv3.normalDay\"\n\n$HEREv3.normalDayCustom\n[1] \"HEREv3.normalDayCustom\"\n\n$HEREv3.normalDayGrey\n[1] \"HEREv3.normalDayGrey\"\n\n$HEREv3.normalDayMobile\n[1] \"HEREv3.normalDayMobile\"\n\n$HEREv3.normalDayGreyMobile\n[1] \"HEREv3.normalDayGreyMobile\"\n\n$HEREv3.normalDayTransit\n[1] \"HEREv3.normalDayTransit\"\n\n$HEREv3.normalDayTransitMobile\n[1] \"HEREv3.normalDayTransitMobile\"\n\n$HEREv3.normalNight\n[1] \"HEREv3.normalNight\"\n\n$HEREv3.normalNightMobile\n[1] \"HEREv3.normalNightMobile\"\n\n$HEREv3.normalNightGrey\n[1] \"HEREv3.normalNightGrey\"\n\n$HEREv3.normalNightGreyMobile\n[1] \"HEREv3.normalNightGreyMobile\"\n\n$HEREv3.normalNightTransit\n[1] \"HEREv3.normalNightTransit\"\n\n$HEREv3.normalNightTransitMobile\n[1] \"HEREv3.normalNightTransitMobile\"\n\n$HEREv3.reducedDay\n[1] \"HEREv3.reducedDay\"\n\n$HEREv3.reducedNight\n[1] \"HEREv3.reducedNight\"\n\n$HEREv3.basicMap\n[1] \"HEREv3.basicMap\"\n\n$HEREv3.mapLabels\n[1] \"HEREv3.mapLabels\"\n\n$HEREv3.trafficFlow\n[1] \"HEREv3.trafficFlow\"\n\n$HEREv3.carnavDayGrey\n[1] \"HEREv3.carnavDayGrey\"\n\n$HEREv3.hybridDay\n[1] \"HEREv3.hybridDay\"\n\n$HEREv3.hybridDayMobile\n[1] \"HEREv3.hybridDayMobile\"\n\n$HEREv3.hybridDayTransit\n[1] \"HEREv3.hybridDayTransit\"\n\n$HEREv3.hybridDayGrey\n[1] \"HEREv3.hybridDayGrey\"\n\n$HEREv3.pedestrianDay\n[1] \"HEREv3.pedestrianDay\"\n\n$HEREv3.pedestrianNight\n[1] \"HEREv3.pedestrianNight\"\n\n$HEREv3.satelliteDay\n[1] \"HEREv3.satelliteDay\"\n\n$HEREv3.terrainDay\n[1] \"HEREv3.terrainDay\"\n\n$HEREv3.terrainDayMobile\n[1] \"HEREv3.terrainDayMobile\"\n\n$FreeMapSK\n[1] \"FreeMapSK\"\n\n$MtbMap\n[1] \"MtbMap\"\n\n$CartoDB\n[1] \"CartoDB\"\n\n$CartoDB.Positron\n[1] \"CartoDB.Positron\"\n\n$CartoDB.PositronNoLabels\n[1] \"CartoDB.PositronNoLabels\"\n\n$CartoDB.PositronOnlyLabels\n[1] \"CartoDB.PositronOnlyLabels\"\n\n$CartoDB.DarkMatter\n[1] \"CartoDB.DarkMatter\"\n\n$CartoDB.DarkMatterNoLabels\n[1] \"CartoDB.DarkMatterNoLabels\"\n\n$CartoDB.DarkMatterOnlyLabels\n[1] \"CartoDB.DarkMatterOnlyLabels\"\n\n$CartoDB.Voyager\n[1] \"CartoDB.Voyager\"\n\n$CartoDB.VoyagerNoLabels\n[1] \"CartoDB.VoyagerNoLabels\"\n\n$CartoDB.VoyagerOnlyLabels\n[1] \"CartoDB.VoyagerOnlyLabels\"\n\n$CartoDB.VoyagerLabelsUnder\n[1] \"CartoDB.VoyagerLabelsUnder\"\n\n$HikeBike\n[1] \"HikeBike\"\n\n$HikeBike.HikeBike\n[1] \"HikeBike.HikeBike\"\n\n$HikeBike.HillShading\n[1] \"HikeBike.HillShading\"\n\n$BasemapAT\n[1] \"BasemapAT\"\n\n$BasemapAT.basemap\n[1] \"BasemapAT.basemap\"\n\n$BasemapAT.grau\n[1] \"BasemapAT.grau\"\n\n$BasemapAT.overlay\n[1] \"BasemapAT.overlay\"\n\n$BasemapAT.terrain\n[1] \"BasemapAT.terrain\"\n\n$BasemapAT.surface\n[1] \"BasemapAT.surface\"\n\n$BasemapAT.highdpi\n[1] \"BasemapAT.highdpi\"\n\n$BasemapAT.orthofoto\n[1] \"BasemapAT.orthofoto\"\n\n$nlmaps\n[1] \"nlmaps\"\n\n$nlmaps.standaard\n[1] \"nlmaps.standaard\"\n\n$nlmaps.pastel\n[1] \"nlmaps.pastel\"\n\n$nlmaps.grijs\n[1] \"nlmaps.grijs\"\n\n$nlmaps.water\n[1] \"nlmaps.water\"\n\n$nlmaps.luchtfoto\n[1] \"nlmaps.luchtfoto\"\n\n$NASAGIBS\n[1] \"NASAGIBS\"\n\n$NASAGIBS.ModisTerraTrueColorCR\n[1] \"NASAGIBS.ModisTerraTrueColorCR\"\n\n$NASAGIBS.ModisTerraBands367CR\n[1] \"NASAGIBS.ModisTerraBands367CR\"\n\n$NASAGIBS.ViirsEarthAtNight2012\n[1] \"NASAGIBS.ViirsEarthAtNight2012\"\n\n$NASAGIBS.ModisTerraLSTDay\n[1] \"NASAGIBS.ModisTerraLSTDay\"\n\n$NASAGIBS.ModisTerraSnowCover\n[1] \"NASAGIBS.ModisTerraSnowCover\"\n\n$NASAGIBS.ModisTerraAOD\n[1] \"NASAGIBS.ModisTerraAOD\"\n\n$NASAGIBS.ModisTerraChlorophyll\n[1] \"NASAGIBS.ModisTerraChlorophyll\"\n\n$NLS\n[1] \"NLS\"\n\n$JusticeMap\n[1] \"JusticeMap\"\n\n$JusticeMap.income\n[1] \"JusticeMap.income\"\n\n$JusticeMap.americanIndian\n[1] \"JusticeMap.americanIndian\"\n\n$JusticeMap.asian\n[1] \"JusticeMap.asian\"\n\n$JusticeMap.black\n[1] \"JusticeMap.black\"\n\n$JusticeMap.hispanic\n[1] \"JusticeMap.hispanic\"\n\n$JusticeMap.multi\n[1] \"JusticeMap.multi\"\n\n$JusticeMap.nonWhite\n[1] \"JusticeMap.nonWhite\"\n\n$JusticeMap.white\n[1] \"JusticeMap.white\"\n\n$JusticeMap.plurality\n[1] \"JusticeMap.plurality\"\n\n$GeoportailFrance\n[1] \"GeoportailFrance\"\n\n$GeoportailFrance.plan\n[1] \"GeoportailFrance.plan\"\n\n$GeoportailFrance.parcels\n[1] \"GeoportailFrance.parcels\"\n\n$GeoportailFrance.orthos\n[1] \"GeoportailFrance.orthos\"\n\n$OneMapSG\n[1] \"OneMapSG\"\n\n$OneMapSG.Default\n[1] \"OneMapSG.Default\"\n\n$OneMapSG.Night\n[1] \"OneMapSG.Night\"\n\n$OneMapSG.Original\n[1] \"OneMapSG.Original\"\n\n$OneMapSG.Grey\n[1] \"OneMapSG.Grey\"\n\n$OneMapSG.LandLot\n[1] \"OneMapSG.LandLot\"\n\n$USGS\n[1] \"USGS\"\n\n$USGS.USTopo\n[1] \"USGS.USTopo\"\n\n$USGS.USImagery\n[1] \"USGS.USImagery\"\n\n$USGS.USImageryTopo\n[1] \"USGS.USImageryTopo\"\n\n$WaymarkedTrails\n[1] \"WaymarkedTrails\"\n\n$WaymarkedTrails.hiking\n[1] \"WaymarkedTrails.hiking\"\n\n$WaymarkedTrails.cycling\n[1] \"WaymarkedTrails.cycling\"\n\n$WaymarkedTrails.mtb\n[1] \"WaymarkedTrails.mtb\"\n\n$WaymarkedTrails.slopes\n[1] \"WaymarkedTrails.slopes\"\n\n$WaymarkedTrails.riding\n[1] \"WaymarkedTrails.riding\"\n\n$WaymarkedTrails.skating\n[1] \"WaymarkedTrails.skating\"\n\n$OpenAIP\n[1] \"OpenAIP\"\n\n$OpenSnowMap\n[1] \"OpenSnowMap\"\n\n$OpenSnowMap.pistes\n[1] \"OpenSnowMap.pistes\"\n\n$AzureMaps\n[1] \"AzureMaps\"\n\n$AzureMaps.MicrosoftImagery\n[1] \"AzureMaps.MicrosoftImagery\"\n\n$AzureMaps.MicrosoftBaseDarkGrey\n[1] \"AzureMaps.MicrosoftBaseDarkGrey\"\n\n$AzureMaps.MicrosoftBaseRoad\n[1] \"AzureMaps.MicrosoftBaseRoad\"\n\n$AzureMaps.MicrosoftBaseHybridRoad\n[1] \"AzureMaps.MicrosoftBaseHybridRoad\"\n\n$AzureMaps.MicrosoftTerraMain\n[1] \"AzureMaps.MicrosoftTerraMain\"\n\n$AzureMaps.MicrosoftWeatherInfraredMain\n[1] \"AzureMaps.MicrosoftWeatherInfraredMain\"\n\n$AzureMaps.MicrosoftWeatherRadarMain\n[1] \"AzureMaps.MicrosoftWeatherRadarMain\"\n\n$SwissFederalGeoportal\n[1] \"SwissFederalGeoportal\"\n\n$SwissFederalGeoportal.NationalMapColor\n[1] \"SwissFederalGeoportal.NationalMapColor\"\n\n$SwissFederalGeoportal.NationalMapGrey\n[1] \"SwissFederalGeoportal.NationalMapGrey\"\n\n$SwissFederalGeoportal.SWISSIMAGE\n[1] \"SwissFederalGeoportal.SWISSIMAGE\"\n\n\n\n\n\nCode\nsessionInfo()\n\n\nsessionInfo()\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Sonoma 14.1.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] readxl_1.4.3         openxlsx_4.2.5.2     htmltools_0.5.8.1   \n [4] leaflet.extras_1.0.0 geojsonio_0.11.3     leaflet_2.2.2       \n [7] sf_1.0-16            lubridate_1.9.3      forcats_1.0.0       \n[10] stringr_1.5.1        dplyr_1.1.4          purrr_1.0.2         \n[13] readr_2.1.5          tidyr_1.3.1          tibble_3.2.1        \n[16] ggplot2_3.5.1        tidyverse_2.0.0     \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.5            xfun_0.43               htmlwidgets_1.6.4      \n [4] lattice_0.22-6          tzdb_0.4.0              leaflet.providers_2.0.0\n [7] vctrs_0.6.5             tools_4.3.1             crosstalk_1.2.1        \n[10] generics_0.1.3          curl_5.2.1              proxy_0.4-27           \n[13] fansi_1.0.6             pkgconfig_2.0.3         KernSmooth_2.23-22     \n[16] RColorBrewer_1.1-3      lifecycle_1.0.4         farver_2.1.1           \n[19] compiler_4.3.1          munsell_0.5.1           jqr_1.3.3              \n[22] class_7.3-22            yaml_2.3.8              lazyeval_0.2.2         \n[25] jquerylib_0.1.4         pillar_1.9.0            classInt_0.4-10        \n[28] zip_2.3.1               tidyselect_1.2.1        digest_0.6.35          \n[31] stringi_1.8.4           fastmap_1.1.1           grid_4.3.1             \n[34] colorspace_2.1-0        cli_3.6.2               magrittr_2.0.3         \n[37] crul_1.4.2              utf8_1.2.4              e1071_1.7-14           \n[40] withr_3.0.0             scales_1.3.0            sp_2.1-4               \n[43] timechange_0.3.0        rmarkdown_2.26          cellranger_1.1.0       \n[46] hms_1.1.3               evaluate_0.23           knitr_1.45             \n[49] V8_4.4.2                viridisLite_0.4.2       geojson_0.3.5          \n[52] rlang_1.1.3             Rcpp_1.0.12             glue_1.7.0             \n[55] DBI_1.2.2               httpcode_0.3.0          geojsonsf_2.0.3        \n[58] rstudioapi_0.16.0       jsonlite_1.8.8          R6_2.5.1               \n[61] units_0.8-5            \n\n\n\n\n\n16 resouce:\nhttps://rstudio.github.io/leaflet/\nhttps://github.com/Lchiffon/leafletCN\nhttps://github.com/longwosion/geojson-map-china\nhttps://xiangyun.rbind.io/2022/02/draw-china-maps/\nhttps://datav.aliyun.com/portal/school/atlas/area_selector\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "5 Map",
      "map"
    ]
  },
  {
    "objectID": "Plot/5 Map/2 China accident map with mapview.html",
    "href": "Plot/5 Map/2 China accident map with mapview.html",
    "title": "China accident map",
    "section": "",
    "text": "1 data\ndata source :https://github.com/percent4/chinese_incident_tracker\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(jsonlite)\nlibrary(curl)\nlibrary(lubridate)\nlibrary(plotly)\nlibrary(ggplot2)\nlibrary(openxlsx)\nlibrary(readxl)\n\n\n\n\n2 one file\n\n\nCode\n#url &lt;- \"https://raw.githubusercontent.com/percent4/chinese_incident_tracker/main/elk/data/00105670-df53-4be8-9039-8a07fe2d2b4d.json\"\n#download.file(url,\"./data/SAFI.json\", mode = \"wb\")\n\n\n\n\nCode\ndata001 &lt;- read_json(\"./data/SAFI.json\")\n\n\n\n\nCode\ndata002=data001 %&gt;% as.data.frame()\ncolnames(data002)[14] = \"latitude\"\ncolnames(data002)[15] = \"longitude\"\nglimpse(data002)\n\n\nRows: 1\nColumns: 22\n$ item_id            &lt;chr&gt; \"00105670-df53-4be8-9039-8a07fe2d2b4d\"\n$ news_channel       &lt;chr&gt; \"新闻坊\"\n$ title              &lt;chr&gt; \"一养老院突发火灾，已致3死10伤！\"\n$ report             &lt;chr&gt; \"4月4日\\n\\n“东莞应急管理”\\n\\n发布情况通报\\n\\n↓↓↓\\n\\…\n$ original_websites  &lt;chr&gt; \"https://mp.weixin.qq.com/s/xUZR8gZ_N0UqGj0GvH6L8A\"\n$ start_date         &lt;chr&gt; \"2024-04-04\"\n$ start_time         &lt;chr&gt; \"2024-04-04 04:21:00\"\n$ update_time        &lt;chr&gt; \"2024-05-03 10:50:01\"\n$ incident_type      &lt;chr&gt; \"火灾\"\n$ incident_reason    &lt;chr&gt; \"该建筑为一栋11层楼房，起火部位为第三层303房，过火…\n$ person_death_num   &lt;int&gt; 3\n$ person_injury_num  &lt;int&gt; 10\n$ person_missing_num &lt;int&gt; 0\n$ latitude           &lt;dbl&gt; 113.6952\n$ longitude          &lt;dbl&gt; 23.07464\n$ place              &lt;chr&gt; \"东莞万江街道康怡护理院（公助民办养老院）\"\n$ province           &lt;chr&gt; \"广东省\"\n$ city               &lt;chr&gt; \"东莞市\"\n$ county             &lt;chr&gt; \"\"\n$ town               &lt;chr&gt; \"万江街道\"\n$ village            &lt;chr&gt; \"\"\n$ is_final           &lt;lgl&gt; TRUE\n\n\n\n\n3 all file\n\n\nCode\n#url=\"https://github.com/percent4/chinese_incident_tracker/archive/refs/heads/main.zip\"\n#download.file(url,\"./data/data.zip\", mode = \"wb\")\n\n\n\n\nCode\n#unzip(\"./data/data.zip\",exdir=\"./data/out\")\n\n\n\n\nCode\nfrom &lt;- \"./data/out/chinese_incident_tracker-main/elk/data\"\nto   &lt;- \"./data/json_folder\"\nfile.copy(list.files(from, full.names = TRUE), \n          to, \n          recursive = TRUE)\n\n\n [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n\n\n\n\nCode\n#list.files(\"./data/json_folder\")\n\n\n\n\nCode\nall_data=tibble()\n\nfor (i in list.files(\"./data/json_folder\")) {\n  #print(i)\n  data001=read_json(paste0(\"./data/json_folder/\",i))\n  data002=data001 %&gt;% as.data.frame()\n  colnames(data002)[14] = \"Longitude\"\n  colnames(data002)[15] = \"Latitude\"\n  #print(data002)\n  \n  all_data=rbind(all_data,data002)\n}\n\n\n\n\nCode\nall_data=all_data %&gt;% mutate(text=paste0(incident_type,\" \",\"死亡人数:\",person_death_num,\" 受伤人数:\",person_injury_num)\n                             ,month_year= format_ISO8601(ymd(start_date), precision = \"ym\")\n                             )\n\n\n\n\nCode\nglimpse(all_data)\n\n\nRows: 60\nColumns: 24\n$ item_id            &lt;chr&gt; \"00105670-df53-4be8-9039-8a07fe2d2b4d\", \"0683ba1e-7…\n$ news_channel       &lt;chr&gt; \"新闻坊\", \"中国新闻网\", \"凤凰网\", \"搜狐网\", \"每日经…\n$ title              &lt;chr&gt; \"一养老院突发火灾，已致3死10伤！\", \"江西于都一矿企…\n$ report             &lt;chr&gt; \"4月4日\\n\\n“东莞应急管理”\\n\\n发布情况通报\\n\\n↓↓↓\\n\\…\n$ original_websites  &lt;chr&gt; \"https://mp.weixin.qq.com/s/xUZR8gZ_N0UqGj0GvH6L8A\"…\n$ start_date         &lt;chr&gt; \"2024-04-04\", \"2024-04-24\", \"2024-01-22\", \"2024-02-…\n$ start_time         &lt;chr&gt; \"2024-04-04 04:21:00\", \"2024-04-24 00:08:48\", \"2024…\n$ update_time        &lt;chr&gt; \"2024-05-03 10:50:01\", \"2024-05-03 00:08:48\", \"2024…\n$ incident_type      &lt;chr&gt; \"火灾\", \"溃水\", \"山体滑坡\", \"房屋坍塌\", \"燃气爆炸\",…\n$ incident_reason    &lt;chr&gt; \"该建筑为一栋11层楼房，起火部位为第三层303房，过火…\n$ person_death_num   &lt;int&gt; 3, 3, 44, 1, 7, 4, 1, 1, 7, 1, 18, 4, 5, 1, 15, 12,…\n$ person_injury_num  &lt;int&gt; 10, 2, 2, 0, 27, 4, 0, 0, 0, 11, 1155, 0, 3, 2, 44,…\n$ person_missing_num &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 6, 0, …\n$ Longitude          &lt;dbl&gt; 113.69524, 115.32158, 104.95514, 113.28304, 116.808…\n$ Latitude           &lt;dbl&gt; 23.07464, 25.72126, 27.49063, 32.22574, 39.95258, 4…\n$ place              &lt;chr&gt; \"东莞万江街道康怡护理院（公助民办养老院）\", \"于都县…\n$ province           &lt;chr&gt; \"广东省\", \"江西省\", \"云南省\", \"湖北省\", \"河北省\", \"…\n$ city               &lt;chr&gt; \"东莞市\", \"赣州市\", \"昭通市\", \"随州市\", \"廊坊市\", \"…\n$ county             &lt;chr&gt; \"\", \"于都县\", \"镇雄县\", \"随县\", \"三河市\", \"新城区\",…\n$ town               &lt;chr&gt; \"万江街道\", \"祁禄山镇\", \"塘房镇\", \"万和镇\", \"燕郊镇…\n$ village            &lt;chr&gt; \"\", \"金沙村\", \"\", \"\", \"小张各庄\", \"\", \"\", \"\", \"乔家…\n$ is_final           &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…\n$ text               &lt;chr&gt; \"火灾 死亡人数:3 受伤人数:10\", \"溃水 死亡人数:3 受…\n$ month_year         &lt;chr&gt; \"2024-04\", \"2024-04\", \"2024-01\", \"2024-02\", \"2024-0…\n\n\n\n\nCode\n#write.xlsx(all_data,'all_data.xlsx')\n\n\n\n\n4 chart\ngroup to month\n\n\nCode\nchartdata001=all_data %&gt;% group_by(month_year)  %&gt;%  summarise(person_death_num=sum(person_death_num)\n                                                           ,person_injury_num=sum(person_injury_num)\n                                                           )\n\n\nwide to long\n\n\nCode\nchartdata002=chartdata001 %&gt;%select(month_year,person_death_num,person_injury_num) %&gt;% \n  pivot_longer(!c(month_year), names_to = 'type', values_to = 'DATA')\n\n\n\n\nCode\ngg=ggplot(chartdata001, aes(x=month_year, y=person_death_num,label = person_death_num))+\n  geom_bar(stat=\"identity\",fill='red')+ geom_text(vjust = -1,\n              position = position_dodge(width = 0.9))+ theme_bw()\n\n\nggplotly(gg)\n\n\n\n\n\n\n\n\nCode\ngg=ggplot(chartdata002, aes(fill=type, y=DATA, x=month_year)) +\n    geom_col(position = \"dodge\") +\n    geom_text(aes(label = DATA), vjust = 1.5,\n              position = position_dodge(width = 0.9))+scale_y_log10()+ theme_light()\n\npp=ggplotly(gg)\n\npp\n\n\n\n\n\n\n\n\n5 map\n\n\nCode\nall_data2 =all_data %&gt;%  mutate(report=report %&gt;% str_trunc(100))\n\n\n\n\nCode\n#write.xlsx(all_data2,'all_data2.xlsx')\n\n\n\n\nCode\nlibrary(mapview)\nlibrary(sf)\nlibrary(stringr)\n\nmapview(all_data2, map.types='OpenStreetMap',label='text',xcol = \"Longitude\", ycol = \"Latitude\", zcol='incident_type',cex=\"person_death_num\",crs = 4269, grid = FALSE)\n\n\n\n\n\n\n\n\n6 resouce:\nhttps://github.com/percent4/chinese_incident_tracker\nhttps://github.com/r-spatial/mapview\nhttps://maps.clb.org.hk/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "5 Map",
      "China accident map"
    ]
  },
  {
    "objectID": "Plot/5 Map/4 HK whisky bar.html",
    "href": "Plot/5 Map/4 HK whisky bar.html",
    "title": "HK whisk bar",
    "section": "",
    "text": "1 data\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(chromote)\nlibrary(janitor)\nlibrary(tidygeocoder)\nlibrary(leaflet)\nlibrary(sf)\n\n\n\n\nCode\nbar_name=c('Maltcask@太子','House Welley@中環','Casky@灣仔')\nbar_address=c('169 Sai Yeung Choi St N, Mong Kok,Hongkong','97 Wellington St, Central,Hongkong','20-24 Lockhart Road, Wan Chai,Hongkong')\n\nbar_logo=c('https://img.shoplineapp.com/media/image_clips/62f16f8d7df01b0025a82bad/original.png','https://static.wixstatic.com/media/2d390e_27d0b3da21a94459bccf741600782591~mv2.jpg/v1/fill/w_160,h_160,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/Grey.jpg','https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQsSelY2PRVxaxyU_Ydf9CHgtUrClzpxpqJ2g&s')\n\n\ndata001=tibble(bar_name,bar_address,bar_logo)\n\n\n\n\n2 search all address to latitude, longitude\n\n\nCode\n# geocode the addresses\ndata002 =data001 %&gt;% geocode(bar_address, method = 'osm',lat = latitude , long = longitude)\n\nglimpse(data002)\n\n\nRows: 3\nColumns: 5\n$ bar_name    &lt;chr&gt; \"Maltcask@太子\", \"House Welley@中環\", \"Casky@灣仔\"\n$ bar_address &lt;chr&gt; \"169 Sai Yeung Choi St N, Mong Kok,Hongkong\", \"97 Wellingt…\n$ bar_logo    &lt;chr&gt; \"https://img.shoplineapp.com/media/image_clips/62f16f8d7df…\n$ latitude    &lt;dbl&gt; 22.32539, 22.28360, 22.27858\n$ longitude   &lt;dbl&gt; 114.1688, 114.1543, 114.1770\n\n\n\n\n3 map\n\n\nCode\n# Choose Icon:\nleafIcons &lt;- icons(data002$bar_logo,iconWidth =60, iconHeight = 50)\n\n\nm &lt;- leaflet() %&gt;%\n  \n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addMarkers(lng=data002$longitude, lat=data002$latitude,icon = leafIcons)\n \n\nm  \n\n\n\n\n\n\n\n\nCode\nm &lt;- leaflet(height=2000, width=2000) %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addPopups( lng=data002$longitude, lat=data002$latitude, data002$bar_name\n             ,options = popupOptions(closeButton = FALSE)\n             \n            )\n \n\nm  \n\n\n\n\n\n\n\n\nCode\nm &lt;- leaflet(height=2500, width=2000) %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n addMarkers(\n    lng=data002$longitude, lat=data002$latitude\n    ,label = data002$bar_name,options = popupOptions(closeButton = FALSE),\n   \n    labelOptions = labelOptions(noHide = TRUE, direction = \"bottom\",\n      style = list(\n        \"color\" = \"red\",\n        \"font-family\" = \"serif\",\n        \"font-style\" = \"italic\",\n        \"box-shadow\" = \"2px 2px rgba(0,0,0,0.25)\",\n        \"font-size\" = \"12px\",\n        \"border-color\" = \"rgba(0,0,0,0.5)\"\n      ))) \n  \n\nm  \n\n\n\n\n\n\n\n\n4 resouce:\nhttps://www.gunviolencearchive.org/reports/mass-shooting?page=8&year=2023\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "5 Map",
      "HK whisk bar"
    ]
  },
  {
    "objectID": "Plot/6 Shiny/3 China accident map.html",
    "href": "Plot/6 Shiny/3 China accident map.html",
    "title": "Shiny in R:China accident map",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/China_accident_map/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "6 Shiny",
      "Shiny in R:China accident map"
    ]
  },
  {
    "objectID": "Plot/6 Shiny/2 shiny photo editor.html",
    "href": "Plot/6 Shiny/2 shiny photo editor.html",
    "title": "Shiny in R:photo editor",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/photo_editor/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "6 Shiny",
      "Shiny in R:photo editor"
    ]
  },
  {
    "objectID": "Plot/6 Shiny/1 shiny weight tracking.html",
    "href": "Plot/6 Shiny/1 shiny weight tracking.html",
    "title": "Shiny in R:weight tracking",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/weightshiny/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "6 Shiny",
      "Shiny in R:weight tracking"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html#install-quarto-cli",
    "href": "Plot/7 Publish/1 quarto tips.html#install-quarto-cli",
    "title": "quarto tips",
    "section": "",
    "text": "https://quarto.org/docs/get-started/",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html#install-quarto-pacakge",
    "href": "Plot/7 Publish/1 quarto tips.html#install-quarto-pacakge",
    "title": "quarto tips",
    "section": "",
    "text": "Code\ninstall.packages(\"quarto\")",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/5 quarto extensions.html#quarto-extension-lightbox",
    "href": "Plot/7 Publish/5 quarto extensions.html#quarto-extension-lightbox",
    "title": "quarto Extensioins",
    "section": "",
    "text": "An extension that uses the GLightbox javascript library to add lightbox styling and behavior to images in your HTML documents.\n\n\nquarto install extension quarto-ext/lightbox\n\n\n\nThe Lightbox extension can automatically give images in your web page a lightbox treatment. You can enable this like:\nin header yaml:\n\n\nCode\n---\ntitle: Simple Lightbox Example\nfilters:\n   - lightbox\nlightbox: auto\n---\n\n\nIn addition to simply providing a lightbox treatment for individual images, you can also group images into a ‘gallery’. When the user activates the lightbox, they will be able to page through the images in the gallery without returning to the main document.\nin content:\n\n\nCode\n![](images/image-562149792.png){group=\"my-gallery\"\ndescription=\"its a picture\"}\n\n\n\n\n\ncode:example.qmd\nwebsite:example.qmd.\n\n\n\ngo to folder which have added quarto extension\n\n\nCode\nquarto list extensions\n\n\n\n\n\n\n\n\nCode\nquarto update quarto-ext/fontawesome\n\n\n\n\n\n\n\nCode\nquarto remove quarto-ext/fontawesome\n\n\nIf you run the quarto remove extension command with no extension-id, you will be presented with a list of extensions that are present and you may select which extensions to remove.",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto Extensioins"
    ]
  },
  {
    "objectID": "Plot/7 Publish/5 quarto extensions.html#reference",
    "href": "Plot/7 Publish/5 quarto extensions.html#reference",
    "title": "quarto Extensioins",
    "section": "",
    "text": "https://quarto.org/docs/extensions/\nhttps://github.com/quarto-ext/lightbox",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto Extensioins"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html#in-terminal",
    "href": "Plot/7 Publish/1 quarto tips.html#in-terminal",
    "title": "quarto tips",
    "section": "in Terminal",
    "text": "in Terminal\n\n\n\nCode\n\nTerminal\n\nquarto check",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html#in-r",
    "href": "Plot/7 Publish/1 quarto tips.html#in-r",
    "title": "quarto tips",
    "section": "in R",
    "text": "in R\n\n\nCode\nlibrary(quarto)\nquarto_version()\n\n\n[1] '1.5.57'\n\n\nquarto location\n\n\nCode\nquarto_path()\n\n\n[1] \"/Applications/quarto/bin/quarto\"",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/5 quarto extensions.html",
    "href": "Plot/7 Publish/5 quarto extensions.html",
    "title": "quarto Extensioins",
    "section": "",
    "text": "Extensions are a powerful way to modify and extend the behavior of Quarto. Quarto v1.2 Required for Quarto Extensions.\n\n1 quarto extension： lightbox\nAn extension that uses the GLightbox javascript library to add lightbox styling and behavior to images in your HTML documents.\n\n\n2 Installation:\n\n\n\nCode\n\nTerminal\n\nquarto install extension quarto-ext/lightbox\n\n\n\n\n\n3 Usage:\nThe Lightbox extension can automatically give images in your web page a lightbox treatment. You can enable this like:\nin header yaml:\n\n\nCode\n---\ntitle: Simple Lightbox Example\nfilters:\n   - lightbox\nlightbox: auto\n---\n\n\nIn addition to simply providing a lightbox treatment for individual images, you can also group images into a ‘gallery’. When the user activates the lightbox, they will be able to page through the images in the gallery without returning to the main document.\nin content:\n\n\nCode\n![](images/image-562149792.png){group=\"my-gallery\"\ndescription=\"its a picture\"}\n\n\n\n\n4 quarto extension lightbox example:\ncode:example.qmd\nwebsite:example.qmd.\n\n\n5 list quarto extension\ngo to folder which have added quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto list extensions\n\n\n\n\n\n\n6 update quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto update quarto-ext/fontawesome\n\n\n\n\n\n7 remove quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto remove quarto-ext/fontawesome\n\n\n\nIf you run the quarto remove extension command with no extension-id, you will be presented with a list of extensions that are present and you may select which extensions to remove.\n\n\n8 Reference\nhttps://quarto.org/docs/extensions/\nhttps://github.com/quarto-ext/lightbox\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto Extensioins"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html#r",
    "href": "Plot/7 Publish/1 quarto tips.html#r",
    "title": "quarto tips",
    "section": "R",
    "text": "R\n```{R}\nversion\n```",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html#python",
    "href": "Plot/7 Publish/1 quarto tips.html#python",
    "title": "quarto tips",
    "section": "Python",
    "text": "Python\n```{python}\nimport sys\nprint(sys.version)\n```",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/1 quarto tips.html#bath",
    "href": "Plot/7 Publish/1 quarto tips.html#bath",
    "title": "quarto tips",
    "section": "Bath",
    "text": "Bath\n```{bash}\necho \"foo\" \n```",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 Publish/6 quarto parameters.html",
    "href": "Plot/7 Publish/6 quarto parameters.html",
    "title": "quarto parameters",
    "section": "",
    "text": "Code\nlibrary(quarto)\nquarto_render(\"_parameters in R.qmd\"\n,output_file='R.html'\n,execute_params = list(name='new me',key=9999))",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto parameters"
    ]
  },
  {
    "objectID": "Plot/7 Publish/r quarto parameters.html",
    "href": "Plot/7 Publish/r quarto parameters.html",
    "title": "quarto parameters in R",
    "section": "",
    "text": "1 name is one``{r}\nparams$value\n\n\n\n\n:::{#quarto-navigation-envelope .hidden}\n[Ploting]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyLXRpdGxl\"}\n[Tidymodel with R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXItdGl0bGU=\"}\n[quarto parameters]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1wcmV2\"}\n[Plot]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOnF1YXJ0by1zaWRlYmFyLXNlY3Rpb24tMQ==\"}\n[ggplot2 in R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzEgZ2dwbG90Mi5odG1sZ2dwbG90Mi1pbi1S\"}\n[Plotly in R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzIgcGxvdGx5Lmh0bWxQbG90bHktaW4tUg==\"}\n[image processing]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzMgaW1hZ2UgcHJvY2Vzc2luZy5odG1saW1hZ2UtcHJvY2Vzc2luZw==\"}\n[Financial data]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzQgRmluYW5jaWFsIGRhdGEuaHRtbEZpbmFuY2lhbC1kYXRh\"}\n[5 Map]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOnF1YXJ0by1zaWRlYmFyLXNlY3Rpb24tMg==\"}\n[map]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzUgTWFwLzEgbGVhZmxldC5odG1sbWFw\"}\n[China accident map]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzUgTWFwLzIgQ2hpbmEgYWNjaWRlbnQgbWFwIHdpdGggbWFwdmlldy5odG1sQ2hpbmEtYWNjaWRlbnQtbWFw\"}\n[US map]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzUgTWFwLzMgbGVhZmxldCBVUy5odG1sVVMtbWFw\"}\n[HK whisk bar]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzUgTWFwLzQgSEsgd2hpc2t5IGJhci5odG1sSEstd2hpc2stYmFy\"}\n[6 Shiny]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOnF1YXJ0by1zaWRlYmFyLXNlY3Rpb24tMw==\"}\n[Shiny in R:weight tracking]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzYgU2hpbnkvMSBzaGlueSB3ZWlnaHQgdHJhY2tpbmcuaHRtbFNoaW55LWluLVI6d2VpZ2h0LXRyYWNraW5n\"}\n[Shiny in R:photo editor]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzYgU2hpbnkvMiBzaGlueSBwaG90byBlZGl0b3IuaHRtbFNoaW55LWluLVI6cGhvdG8tZWRpdG9y\"}\n[Shiny in R:China accident map]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzYgU2hpbnkvMyBDaGluYSBhY2NpZGVudCBtYXAuaHRtbFNoaW55LWluLVI6Q2hpbmEtYWNjaWRlbnQtbWFw\"}\n[7 Publish]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOnF1YXJ0by1zaWRlYmFyLXNlY3Rpb24tNA==\"}\n[quarto tips]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzcgUHVibGlzaC8xIHF1YXJ0byB0aXBzLmh0bWxxdWFydG8tdGlwcw==\"}\n[quarto blog]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzcgUHVibGlzaC8yIHF1YXJ0byBibG9nLmh0bWxxdWFydG8tYmxvZw==\"}\n[quarto website]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzcgUHVibGlzaC8zIHF1YXJ0byB3ZWJzaXRlLmh0bWxxdWFydG8td2Vic2l0ZQ==\"}\n[quarto presentation]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzcgUHVibGlzaC80IHF1YXJ0byBwcmVzZW50YXRpb24gLmh0bWxxdWFydG8tcHJlc2VudGF0aW9u\"}\n[quarto Extensioins]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzcgUHVibGlzaC81IHF1YXJ0byBleHRlbnNpb25zLmh0bWxxdWFydG8tRXh0ZW5zaW9pbnM=\"}\n[quarto parameters]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzcgUHVibGlzaC82IHF1YXJ0byBwYXJhbWV0ZXJzLmh0bWxxdWFydG8tcGFyYW1ldGVycw==\"}\n[quarto parameters in R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1zaWRlYmFyOi9QbG90LzcgUHVibGlzaC9yIHF1YXJ0byBwYXJhbWV0ZXJzLmh0bWxxdWFydG8tcGFyYW1ldGVycy1pbi1S\"}\n[Home]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6SG9tZQ==\"}\n[/index.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2luZGV4Lmh0bWw=\"}\n[intro]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6aW50cm8=\"}\n[Intro]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6SW50cm8=\"}\n[Basic R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6QmFzaWMgUg==\"}\n[/intro/1 basic R.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2ludHJvLzEgYmFzaWMgUi5odG1s\"}\n[Probability]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UHJvYmFiaWxpdHk=\"}\n[/intro/2 probability.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2ludHJvLzIgcHJvYmFiaWxpdHkuaHRtbA==\"}\n[Statistics]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6U3RhdGlzdGljcw==\"}\n[/intro/3 Statistics.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2ludHJvLzMgU3RhdGlzdGljcy5odG1s\"}\n[R book]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UiBib29r\"}\n[/intro/5 R boook.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2ludHJvLzUgUiBib29vay5odG1s\"}\n[Data analytic in R book]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6RGF0YSBhbmFseXRpYyBpbiBSIGJvb2s=\"}\n[/intro/6 data analytic in R book.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2ludHJvLzYgZGF0YSBhbmFseXRpYyBpbiBSIGJvb2suaHRtbA==\"}\n[Data]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6RGF0YQ==\"}\n[data manipulation]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6ZGF0YSBtYW5pcHVsYXRpb24=\"}\n[input & ouput in R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6aW5wdXQgJiBvdXB1dCBpbiBS\"}\n[/data manipulation/1 input ouput.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2RhdGEgbWFuaXB1bGF0aW9uLzEgaW5wdXQgb3VwdXQuaHRtbA==\"}\n[Data structure in R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6RGF0YSBzdHJ1Y3R1cmUgaW4gUg==\"}\n[/data manipulation/2 data structure in R.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2RhdGEgbWFuaXB1bGF0aW9uLzIgZGF0YSBzdHJ1Y3R1cmUgaW4gUi5odG1s\"}\n[Data manipulation with tidyverse]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6RGF0YSBtYW5pcHVsYXRpb24gd2l0aCB0aWR5dmVyc2U=\"}\n[/data manipulation/3 data manipulation with tidyverse.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2RhdGEgbWFuaXB1bGF0aW9uLzMgZGF0YSBtYW5pcHVsYXRpb24gd2l0aCB0aWR5dmVyc2UuaHRtbA==\"}\n[resample]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6cmVzYW1wbGU=\"}\n[/data manipulation/4 resample.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2RhdGEgbWFuaXB1bGF0aW9uLzQgcmVzYW1wbGUuaHRtbA==\"}\n[recipe]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6cmVjaXBl\"}\n[/data manipulation/5 recipe.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2RhdGEgbWFuaXB1bGF0aW9uLzUgcmVjaXBlLmh0bWw=\"}\n[SQL database with R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6U1FMIGRhdGFiYXNlIHdpdGggUg==\"}\n[/data manipulation/5 SQL database.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2RhdGEgbWFuaXB1bGF0aW9uLzUgU1FMIGRhdGFiYXNlLmh0bWw=\"}\n[Ploting]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UGxvdGluZw==\"}\n[Plot]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UGxvdA==\"}\n[ggplot2 in R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Z2dwbG90MiBpbiBS\"}\n[/Plot/1 ggplot2.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L1Bsb3QvMSBnZ3Bsb3QyLmh0bWw=\"}\n[Plotly in R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UGxvdGx5IGluIFI=\"}\n[/Plot/2 plotly.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L1Bsb3QvMiBwbG90bHkuaHRtbA==\"}\n[image processing]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6aW1hZ2UgcHJvY2Vzc2luZw==\"}\n[/Plot/3 image processing.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L1Bsb3QvMyBpbWFnZSBwcm9jZXNzaW5nLmh0bWw=\"}\n[Financial data]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6RmluYW5jaWFsIGRhdGE=\"}\n[/Plot/4 Financial data.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L1Bsb3QvNCBGaW5hbmNpYWwgZGF0YS5odG1s\"}\n[5 Map]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6NSBNYXA=\"}\n[/Plot/5 Map/1 leaflet.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L1Bsb3QvNSBNYXAvMSBsZWFmbGV0Lmh0bWw=\"}\n[6 Shiny]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6NiBTaGlueQ==\"}\n[/Plot/6 Shiny/1 shiny weight tracking.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L1Bsb3QvNiBTaGlueS8xIHNoaW55IHdlaWdodCB0cmFja2luZy5odG1s\"}\n[7 Publish]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6NyBQdWJsaXNo\"}\n[/Plot/7 Publish/1 quarto tips.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L1Bsb3QvNyBQdWJsaXNoLzEgcXVhcnRvIHRpcHMuaHRtbA==\"}\n[Model type]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6TW9kZWwgdHlwZQ==\"}\n[model type]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6bW9kZWwgdHlwZQ==\"}\n[Decision tree]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6RGVjaXNpb24gdHJlZQ==\"}\n[/model type/1 decision tree.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L21vZGVsIHR5cGUvMSBkZWNpc2lvbiB0cmVlLmh0bWw=\"}\n[Random forest]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UmFuZG9tIGZvcmVzdA==\"}\n[/model type/2 random forest.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L21vZGVsIHR5cGUvMiByYW5kb20gZm9yZXN0Lmh0bWw=\"}\n[Gradient boosted trees]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6R3JhZGllbnQgYm9vc3RlZCB0cmVlcw==\"}\n[/model type/3 gradient boosted trees.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L21vZGVsIHR5cGUvMyBncmFkaWVudCBib29zdGVkIHRyZWVzLmh0bWw=\"}\n[Classification]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q2xhc3NpZmljYXRpb24=\"}\n[titanic classification model]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6dGl0YW5pYyBjbGFzc2lmaWNhdGlvbiBtb2RlbA==\"}\n[Titanic data]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6VGl0YW5pYyBkYXRh\"}\n[/titanic classification model/0 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L3RpdGFuaWMgY2xhc3NpZmljYXRpb24gbW9kZWwvMCBjbGFzc2lmaWNhdGlvbiBUaWR5IE1vZGVsaW5nLmh0bWw=\"}\n[Classification model]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q2xhc3NpZmljYXRpb24gbW9kZWw=\"}\n[/titanic classification model/1 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L3RpdGFuaWMgY2xhc3NpZmljYXRpb24gbW9kZWwvMSBjbGFzc2lmaWNhdGlvbiBUaWR5IE1vZGVsaW5nLmh0bWw=\"}\n[Classification model with Recipe]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q2xhc3NpZmljYXRpb24gbW9kZWwgd2l0aCBSZWNpcGU=\"}\n[/titanic classification model/2 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L3RpdGFuaWMgY2xhc3NpZmljYXRpb24gbW9kZWwvMiBjbGFzc2lmaWNhdGlvbiBUaWR5IE1vZGVsaW5nLmh0bWw=\"}\n[Classification model with Recipe,workflow,tunning]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q2xhc3NpZmljYXRpb24gbW9kZWwgd2l0aCBSZWNpcGUsd29ya2Zsb3csdHVubmluZw==\"}\n[/titanic classification model/3 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L3RpdGFuaWMgY2xhc3NpZmljYXRpb24gbW9kZWwvMyBjbGFzc2lmaWNhdGlvbiBUaWR5IE1vZGVsaW5nLmh0bWw=\"}\n[Classification model with Recipe,workflow,fast tunning]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q2xhc3NpZmljYXRpb24gbW9kZWwgd2l0aCBSZWNpcGUsd29ya2Zsb3csZmFzdCB0dW5uaW5n\"}\n[/titanic classification model/4 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L3RpdGFuaWMgY2xhc3NpZmljYXRpb24gbW9kZWwvNCBjbGFzc2lmaWNhdGlvbiBUaWR5IE1vZGVsaW5nLmh0bWw=\"}\n[Multiple classification model with Recipe,workflow set,fast tunning]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6TXVsdGlwbGUgY2xhc3NpZmljYXRpb24gbW9kZWwgd2l0aCBSZWNpcGUsd29ya2Zsb3cgc2V0LGZhc3QgdHVubmluZw==\"}\n[/titanic classification model/5 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L3RpdGFuaWMgY2xhc3NpZmljYXRpb24gbW9kZWwvNSBjbGFzc2lmaWNhdGlvbiBUaWR5IE1vZGVsaW5nLmh0bWw=\"}\n[Classification imbanlance]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q2xhc3NpZmljYXRpb24gaW1iYW5sYW5jZQ==\"}\n[hotel classification model]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6aG90ZWwgY2xhc3NpZmljYXRpb24gbW9kZWw=\"}\n[Hotel booking data]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6SG90ZWwgYm9va2luZyBkYXRh\"}\n[/hotel classification model/0 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdGVsIGNsYXNzaWZpY2F0aW9uIG1vZGVsLzAgY2xhc3NpZmljYXRpb24gVGlkeSBNb2RlbGluZy5odG1s\"}\n[Classification Model]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q2xhc3NpZmljYXRpb24gTW9kZWw=\"}\n[/hotel classification model/1 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdGVsIGNsYXNzaWZpY2F0aW9uIG1vZGVsLzEgY2xhc3NpZmljYXRpb24gVGlkeSBNb2RlbGluZy5odG1s\"}\n[Classification Model with recipe]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q2xhc3NpZmljYXRpb24gTW9kZWwgd2l0aCByZWNpcGU=\"}\n[/hotel classification model/3 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdGVsIGNsYXNzaWZpY2F0aW9uIG1vZGVsLzMgY2xhc3NpZmljYXRpb24gVGlkeSBNb2RlbGluZy5odG1s\"}\n[Classification Model with recipe,workflow,tuning]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q2xhc3NpZmljYXRpb24gTW9kZWwgd2l0aCByZWNpcGUsd29ya2Zsb3csdHVuaW5n\"}\n[/hotel classification model/4 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdGVsIGNsYXNzaWZpY2F0aW9uIG1vZGVsLzQgY2xhc3NpZmljYXRpb24gVGlkeSBNb2RlbGluZy5odG1s\"}\n[Classification Model with recipe,workflow,fast tuning]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q2xhc3NpZmljYXRpb24gTW9kZWwgd2l0aCByZWNpcGUsd29ya2Zsb3csZmFzdCB0dW5pbmc=\"}\n[/hotel classification model/5 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdGVsIGNsYXNzaWZpY2F0aW9uIG1vZGVsLzUgY2xhc3NpZmljYXRpb24gVGlkeSBNb2RlbGluZy5odG1s\"}\n[Multiple Classification Model with recipe,workflow set,fast tuning]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6TXVsdGlwbGUgQ2xhc3NpZmljYXRpb24gTW9kZWwgd2l0aCByZWNpcGUsd29ya2Zsb3cgc2V0LGZhc3QgdHVuaW5n\"}\n[/hotel classification model/6 classification Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdGVsIGNsYXNzaWZpY2F0aW9uIG1vZGVsLzYgY2xhc3NpZmljYXRpb24gVGlkeSBNb2RlbGluZy5odG1s\"}\n[Multiclass classification]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6TXVsdGljbGFzcyBjbGFzc2lmaWNhdGlvbg==\"}\n[Customer Segmentation Dataset]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q3VzdG9tZXIgU2VnbWVudGF0aW9uIERhdGFzZXQ=\"}\n[/Multiclass classification/0 multclass classification.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L011bHRpY2xhc3MgY2xhc3NpZmljYXRpb24vMCBtdWx0Y2xhc3MgY2xhc3NpZmljYXRpb24uaHRtbA==\"}\n[/Multiclass classification/1 multclass classification.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L011bHRpY2xhc3MgY2xhc3NpZmljYXRpb24vMSBtdWx0Y2xhc3MgY2xhc3NpZmljYXRpb24uaHRtbA==\"}\n[Multiple Classification Model with recipe,workflow, tuning]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6TXVsdGlwbGUgQ2xhc3NpZmljYXRpb24gTW9kZWwgd2l0aCByZWNpcGUsd29ya2Zsb3csIHR1bmluZw==\"}\n[/Multiclass classification/3 multclass classification.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L011bHRpY2xhc3MgY2xhc3NpZmljYXRpb24vMyBtdWx0Y2xhc3MgY2xhc3NpZmljYXRpb24uaHRtbA==\"}\n[/Multiclass classification/6 multclass classification.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L011bHRpY2xhc3MgY2xhc3NpZmljYXRpb24vNiBtdWx0Y2xhc3MgY2xhc3NpZmljYXRpb24uaHRtbA==\"}\n[Regression]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UmVncmVzc2lvbg==\"}\n[house price regression model]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6aG91c2UgcHJpY2UgcmVncmVzc2lvbiBtb2RlbA==\"}\n[House price data]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6SG91c2UgcHJpY2UgZGF0YQ==\"}\n[/house price regression model/0 Regression Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdXNlIHByaWNlIHJlZ3Jlc3Npb24gbW9kZWwvMCBSZWdyZXNzaW9uIFRpZHkgTW9kZWxpbmcuaHRtbA==\"}\n[Regression model]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UmVncmVzc2lvbiBtb2RlbA==\"}\n[/house price regression model/1 Regression Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdXNlIHByaWNlIHJlZ3Jlc3Npb24gbW9kZWwvMSBSZWdyZXNzaW9uIFRpZHkgTW9kZWxpbmcuaHRtbA==\"}\n[Regression model with Recipe]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UmVncmVzc2lvbiBtb2RlbCB3aXRoIFJlY2lwZQ==\"}\n[/house price regression model/3 Regression Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdXNlIHByaWNlIHJlZ3Jlc3Npb24gbW9kZWwvMyBSZWdyZXNzaW9uIFRpZHkgTW9kZWxpbmcuaHRtbA==\"}\n[Regression model with Recipe,workflow,tuning]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UmVncmVzc2lvbiBtb2RlbCB3aXRoIFJlY2lwZSx3b3JrZmxvdyx0dW5pbmc=\"}\n[/house price regression model/4 Regression Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdXNlIHByaWNlIHJlZ3Jlc3Npb24gbW9kZWwvNCBSZWdyZXNzaW9uIFRpZHkgTW9kZWxpbmcuaHRtbA==\"}\n[Regression model with Recipe,workflow,fast tuning]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UmVncmVzc2lvbiBtb2RlbCB3aXRoIFJlY2lwZSx3b3JrZmxvdyxmYXN0IHR1bmluZw==\"}\n[/house price regression model/5 Regression Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdXNlIHByaWNlIHJlZ3Jlc3Npb24gbW9kZWwvNSBSZWdyZXNzaW9uIFRpZHkgTW9kZWxpbmcuaHRtbA==\"}\n[Multiple Regression model with Recipe,workflow set,fast tuning]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6TXVsdGlwbGUgUmVncmVzc2lvbiBtb2RlbCB3aXRoIFJlY2lwZSx3b3JrZmxvdyBzZXQsZmFzdCB0dW5pbmc=\"}\n[/house price regression model/6 Regression Tidy Modeling.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2hvdXNlIHByaWNlIHJlZ3Jlc3Npb24gbW9kZWwvNiBSZWdyZXNzaW9uIFRpZHkgTW9kZWxpbmcuaHRtbA==\"}\n[Clustering]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6Q2x1c3RlcmluZw==\"}\n[Mall Customers Dataset]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6TWFsbCBDdXN0b21lcnMgRGF0YXNldA==\"}\n[/clustering/0 Mall Customers.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2NsdXN0ZXJpbmcvMCBNYWxsIEN1c3RvbWVycy5odG1s\"}\n[K mean Clustering]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6SyBtZWFuIENsdXN0ZXJpbmc=\"}\n[/clustering/1 k mean Clustering.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2NsdXN0ZXJpbmcvMSBrIG1lYW4gQ2x1c3RlcmluZy5odG1s\"}\n[K mean Clustering with image]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6SyBtZWFuIENsdXN0ZXJpbmcgd2l0aCBpbWFnZQ==\"}\n[/clustering/1.2 k mean Clustering.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2NsdXN0ZXJpbmcvMS4yIGsgbWVhbiBDbHVzdGVyaW5nLmh0bWw=\"}\n[Hierarchical Clustering]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6SGllcmFyY2hpY2FsIENsdXN0ZXJpbmc=\"}\n[/clustering/2 Hierarchical Clustering.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2NsdXN0ZXJpbmcvMiBIaWVyYXJjaGljYWwgQ2x1c3RlcmluZy5odG1s\"}\n[k mode Clustering]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6ayBtb2RlIENsdXN0ZXJpbmc=\"}\n[/clustering/3 k mode Clustering.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2NsdXN0ZXJpbmcvMyBrIG1vZGUgQ2x1c3RlcmluZy5odG1s\"}\n[Principal component analysis]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6UHJpbmNpcGFsIGNvbXBvbmVudCBhbmFseXNpcw==\"}\n[/clustering/4 Principal component analysis .html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L2NsdXN0ZXJpbmcvNCBQcmluY2lwYWwgY29tcG9uZW50IGFuYWx5c2lzIC5odG1s\"}\n[Other]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6T3RoZXI=\"}\n[1 Web scraping on www.whiskynotes.be]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6MSBXZWIgc2NyYXBpbmcgb24gd3d3LndoaXNreW5vdGVzLmJl\"}\n[/other/1 Web scraping on www.whiskynotes.be/1 whiskynote data.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L290aGVyLzEgV2ViIHNjcmFwaW5nIG9uIHd3dy53aGlza3lub3Rlcy5iZS8xIHdoaXNreW5vdGUgZGF0YS5odG1s\"}\n[2 Web scraping on whiskybase.com]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6MiBXZWIgc2NyYXBpbmcgb24gd2hpc2t5YmFzZS5jb20=\"}\n[/other/2 Web scraping on whiskybase.com/1 whiskybase data.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L290aGVyLzIgV2ViIHNjcmFwaW5nIG9uIHdoaXNreWJhc2UuY29tLzEgd2hpc2t5YmFzZSBkYXRhLmh0bWw=\"}\n[3 Web scraping on whiskyfun.com]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6MyBXZWIgc2NyYXBpbmcgb24gd2hpc2t5ZnVuLmNvbQ==\"}\n[/other/3 Web scraping on whiskyfun.com/1 whiskyfun data.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L290aGVyLzMgV2ViIHNjcmFwaW5nIG9uIHdoaXNreWZ1bi5jb20vMSB3aGlza3lmdW4gZGF0YS5odG1s\"}\n[4 web scrap]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6NCB3ZWIgc2NyYXA=\"}\n[/other/4 web scrap/web scrap.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L290aGVyLzQgd2ViIHNjcmFwL3dlYiBzY3JhcC5odG1s\"}\n[5 other]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6NSBvdGhlcg==\"}\n[/other/5 other/1 chromote.html]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWludC1uYXZiYXI6L290aGVyLzUgb3RoZXIvMSBjaHJvbW90ZS5odG1s\"}\n[Plot]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWJyZWFkY3J1bWJzLVBsb3Q=\"}\n[7 Publish]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWJyZWFkY3J1bWJzLTctUHVibGlzaA==\"}\n[quarto parameters in R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLWJyZWFkY3J1bWJzLXF1YXJ0by1wYXJhbWV0ZXJzLWluLVI=\"}\n\n:::{.hidden .quarto-markdown-envelope-contents render-id=\"Zm9vdGVyLXJpZ2h0\"}\nThis website is built with ❤️ and [Quarto](https://quarto.org/).\n:::\n\n:::\n\n\n\n:::{#quarto-meta-markdown .hidden}\n[quarto parameters in R – Tidymodel with R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLW1ldGF0aXRsZQ==\"}\n[quarto parameters in R – Tidymodel with R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLXR3aXR0ZXJjYXJkdGl0bGU=\"}\n[quarto parameters in R – Tidymodel with R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLW9nY2FyZHRpdGxl\"}\n[Tidymodel with R]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLW1ldGFzaXRlbmFtZQ==\"}\n[]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLXR3aXR0ZXJjYXJkZGVzYw==\"}\n[]{.hidden .quarto-markdown-envelope-contents render-id=\"cXVhcnRvLW9nY2FyZGRkZXNj\"}\n:::\n\n\n\n\n&lt;!-- --&gt;\n\n::: {.quarto-embedded-source-code}\n```````````````````{.markdown shortcodes=\"false\"}\n---\ntitle: \"quarto parameters in R\"\n\n\nauthor: \"Tony Duan\"\n\nexecute:\n  warning: false\n  error: false\n  \nformat:\n  html:\n    toc: true\n    toc-location: right\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    code-copy: true\n\nparams:\n  name: one\n  value: 1\n---\n\n\n# name is `{r} params$name\n\nquarto-executable-code-5450563D\n\n```r\nparams$value\n``````````````````` :::\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto parameters in R"
    ]
  },
  {
    "objectID": "Plot/7 Publish/parameters in R.html",
    "href": "Plot/7 Publish/parameters in R.html",
    "title": "parameters in R",
    "section": "",
    "text": "in R\nName is peter !\n\nprint(params$name)\n\n[1] \"peter\"\n\n\n\nprint(params$key)\n\n[1] 100\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "7 Publish",
      "parameters in R"
    ]
  },
  {
    "objectID": "Plot/7 Publish/6 quarto parameters.html#render-qmd-file-with-parameters-input",
    "href": "Plot/7 Publish/6 quarto parameters.html#render-qmd-file-with-parameters-input",
    "title": "quarto parameters",
    "section": "",
    "text": "Code\nlibrary(quarto)\nquarto_render(\"_parameters in R.qmd\"\n,output_file='R.html'\n,execute_params = list(name='new me',key=9999))",
    "crumbs": [
      "Plot",
      "7 Publish",
      "quarto parameters"
    ]
  },
  {
    "objectID": "intro/7 error handling.html",
    "href": "intro/7 error handling.html",
    "title": "Error handling",
    "section": "",
    "text": "error: can not find Python specified in RETICULATE_PYTHON (/Library/Frameworks/Python.framework/Versions/3.12/bin/python3)\n\n\nwhich -a python python3\n\n\n\ngo to home folder by Command-Shift-H\nRETICULATE_PYTHON=\"/Library/Frameworks/Python.framework/Versions/3.13/bin/python3\"",
    "crumbs": [
      "Intro",
      "Error handling"
    ]
  },
  {
    "objectID": "intro/7 error handling.html#find-current-python-version",
    "href": "intro/7 error handling.html#find-current-python-version",
    "title": "Error handling",
    "section": "",
    "text": "which -a python python3",
    "crumbs": [
      "Intro",
      "Error handling"
    ]
  },
  {
    "objectID": "intro/7 error handling.html#change-python-version-in-.renviron-under-home-folder",
    "href": "intro/7 error handling.html#change-python-version-in-.renviron-under-home-folder",
    "title": "Error handling",
    "section": "",
    "text": "go to home folder by Command-Shift-H\nRETICULATE_PYTHON=\"/Library/Frameworks/Python.framework/Versions/3.13/bin/python3\"",
    "crumbs": [
      "Intro",
      "Error handling"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html",
    "href": "Plot/8 dashboard/1 dashboard.html",
    "title": "Dashboard",
    "section": "",
    "text": "quarto dashboard\n\n\n\nCode\n\n_dashboard_r.qmd\n\n---\ntitle: \"First quarto dashboard\"\nformat: dashboard\n---\n\n```{r}\na=1\na\n```\n\n\n\n\n\nReference:\nhttps://www.youtube.com/watch?v=HW7QbqI4fH0\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html#install-quarto-cli",
    "href": "Plot/8 dashboard/1 dashboard.html#install-quarto-cli",
    "title": "Dashboard",
    "section": "",
    "text": "https://quarto.org/docs/get-started/",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html#install-quarto-pacakge",
    "href": "Plot/8 dashboard/1 dashboard.html#install-quarto-pacakge",
    "title": "Dashboard",
    "section": "",
    "text": "Code\ninstall.packages(\"quarto\")",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html#in-terminal",
    "href": "Plot/8 dashboard/1 dashboard.html#in-terminal",
    "title": "Dashboard",
    "section": "in Terminal",
    "text": "in Terminal\n\n\n\nCode\n\nTerminal\n\nquarto check",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html#in-r",
    "href": "Plot/8 dashboard/1 dashboard.html#in-r",
    "title": "Dashboard",
    "section": "in R",
    "text": "in R\n\n\nCode\nlibrary(quarto)\nquarto_version()\n\n\n[1] '1.6.30'\n\n\nquarto location\n\n\nCode\nquarto_path()\n\n\n[1] \"/usr/local/bin/quarto\"",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html#r",
    "href": "Plot/8 dashboard/1 dashboard.html#r",
    "title": "Dashboard",
    "section": "R",
    "text": "R\n```{R}\nversion\n```",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html#python",
    "href": "Plot/8 dashboard/1 dashboard.html#python",
    "title": "Dashboard",
    "section": "Python",
    "text": "Python\n```{python}\nimport sys\nprint(sys.version)\n```",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html#bath",
    "href": "Plot/8 dashboard/1 dashboard.html#bath",
    "title": "Dashboard",
    "section": "Bath",
    "text": "Bath\n```{bash}\necho \"foo\" \n```",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html#in-yaml-header",
    "href": "Plot/8 dashboard/1 dashboard.html#in-yaml-header",
    "title": "Dashboard",
    "section": "in YAML header",
    "text": "in YAML header\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html#in-code-chunk",
    "href": "Plot/8 dashboard/1 dashboard.html#in-code-chunk",
    "title": "Dashboard",
    "section": "in code chunk",
    "text": "in code chunk\n\n\nCode\n #| eval: false",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html#embed-youtube",
    "href": "Plot/8 dashboard/1 dashboard.html#embed-youtube",
    "title": "Dashboard",
    "section": "embed youtube",
    "text": "embed youtube\n\n\nCode\n&lt;iframe width=\"640\" height=\"480\" src=\"https://www.youtube.com/embed/nku5zFMZAdU\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen&gt;\n&lt;/iframe&gt;",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/8 dashboard/1 dashboard.html#embed-local-video",
    "href": "Plot/8 dashboard/1 dashboard.html#embed-local-video",
    "title": "Dashboard",
    "section": "embed local video",
    "text": "embed local video\n\n\nCode\n{{&lt; video images/vv.mp4 height=\"600\" &gt;}}",
    "crumbs": [
      "Plot",
      "8 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html",
    "href": "Plot/7 quarto/1 quarto tips.html",
    "title": "quarto tips",
    "section": "",
    "text": "https://quarto.org/docs/get-started/\n\n\n\n\n\nCode\ninstall.packages(\"quarto\")",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html#install-quarto-cli",
    "href": "Plot/7 quarto/1 quarto tips.html#install-quarto-cli",
    "title": "quarto tips",
    "section": "",
    "text": "https://quarto.org/docs/get-started/",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html#install-quarto-pacakge",
    "href": "Plot/7 quarto/1 quarto tips.html#install-quarto-pacakge",
    "title": "quarto tips",
    "section": "",
    "text": "Code\ninstall.packages(\"quarto\")",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html#in-terminal",
    "href": "Plot/7 quarto/1 quarto tips.html#in-terminal",
    "title": "quarto tips",
    "section": "in Terminal",
    "text": "in Terminal\n\n\n\nCode\n\nTerminal\n\nquarto check",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html#in-r",
    "href": "Plot/7 quarto/1 quarto tips.html#in-r",
    "title": "quarto tips",
    "section": "in R",
    "text": "in R\n\n\nCode\nlibrary(quarto)\nquarto_version()\n\n\n[1] '1.6.30'\n\n\nquarto location\n\n\nCode\nquarto_path()\n\n\n[1] \"/usr/local/bin/quarto\"",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html#r",
    "href": "Plot/7 quarto/1 quarto tips.html#r",
    "title": "quarto tips",
    "section": "R",
    "text": "R\n```{R}\nversion\n```",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html#python",
    "href": "Plot/7 quarto/1 quarto tips.html#python",
    "title": "quarto tips",
    "section": "Python",
    "text": "Python\n```{python}\nimport sys\nprint(sys.version)\n```",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html#bath",
    "href": "Plot/7 quarto/1 quarto tips.html#bath",
    "title": "quarto tips",
    "section": "Bath",
    "text": "Bath\n```{bash}\necho \"foo\" \n```",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html#in-yaml-header",
    "href": "Plot/7 quarto/1 quarto tips.html#in-yaml-header",
    "title": "quarto tips",
    "section": "in YAML header",
    "text": "in YAML header\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html#in-code-chunk",
    "href": "Plot/7 quarto/1 quarto tips.html#in-code-chunk",
    "title": "quarto tips",
    "section": "in code chunk",
    "text": "in code chunk\n\n\nCode\n #| eval: false",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html#embed-youtube",
    "href": "Plot/7 quarto/1 quarto tips.html#embed-youtube",
    "title": "quarto tips",
    "section": "embed youtube",
    "text": "embed youtube\n\n\nCode\n&lt;iframe width=\"640\" height=\"480\" src=\"https://www.youtube.com/embed/nku5zFMZAdU\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen&gt;\n&lt;/iframe&gt;",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/1 quarto tips.html#embed-local-video",
    "href": "Plot/7 quarto/1 quarto tips.html#embed-local-video",
    "title": "quarto tips",
    "section": "embed local video",
    "text": "embed local video\n\n\nCode\n{{&lt; video images/vv.mp4 height=\"600\" &gt;}}",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Plot/7 quarto/5 quarto extensions.html",
    "href": "Plot/7 quarto/5 quarto extensions.html",
    "title": "quarto Extensioins",
    "section": "",
    "text": "Extensions are a powerful way to modify and extend the behavior of Quarto. Quarto v1.2 Required for Quarto Extensions.\n\n1 quarto extension： lightbox\nAn extension that uses the GLightbox javascript library to add lightbox styling and behavior to images in your HTML documents.\n\n\n2 Installation:\n\n\n\nCode\n\nTerminal\n\nquarto install extension quarto-ext/lightbox\n\n\n\n\n\n3 Usage:\nThe Lightbox extension can automatically give images in your web page a lightbox treatment. You can enable this like:\nin header yaml:\n\n\nCode\n---\ntitle: Simple Lightbox Example\nfilters:\n   - lightbox\nlightbox: auto\n---\n\n\nIn addition to simply providing a lightbox treatment for individual images, you can also group images into a ‘gallery’. When the user activates the lightbox, they will be able to page through the images in the gallery without returning to the main document.\nin content:\n\n\nCode\n![](images/image-562149792.png){group=\"my-gallery\"\ndescription=\"its a picture\"}\n\n\n\n\n4 quarto extension lightbox example:\ncode:example.qmd\nwebsite:example.qmd.\n\n\n5 list quarto extension\ngo to folder which have added quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto list extensions\n\n\n\n\n\n\n6 update quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto update quarto-ext/fontawesome\n\n\n\n\n\n7 remove quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto remove quarto-ext/fontawesome\n\n\n\nIf you run the quarto remove extension command with no extension-id, you will be presented with a list of extensions that are present and you may select which extensions to remove.\n\n\n8 Reference\nhttps://quarto.org/docs/extensions/\nhttps://github.com/quarto-ext/lightbox\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto Extensioins"
    ]
  },
  {
    "objectID": "Plot/7 quarto/4 quarto presentation .html",
    "href": "Plot/7 quarto/4 quarto presentation .html",
    "title": "quarto presentation",
    "section": "",
    "text": "1 revealjs YAML\n\n\nCode\n---\ntitle: \"Habits\"\nauthor: \"John Doe\"\nformat: revealjs\n---\n\n\n\n\n2 pages\n\n\nCode\n# pages\n\n# In the morning\n\n## Getting up\n\n- Turn off alarm\n- Get out of bed\n\n## Breakfast\n\n- Eat eggs\n- Drink coffee\n\n\n\n\n3 YAML format setting\n\n\nCode\nformat:\n  revealjs:\n    controls: true\n    navigation-mode: vertical\n    height: 800\n    width: 1000    \n    fontsize: 20pt\n    page-layout: full\n    logo: images/logo.jpg\n    footer: \"This is footer(https://google.com/)\"\n    slide-number: c\n    show-slide-number: all\n    menu: false\n\n\n\n\n4 Main Title Slide Background YAML setting\n\n\nCode\n---\ntitle: My Slide Show\ntitle-slide-attributes:\n    data-background-image: /path/to/title_image.png\n    data-background-size: contain\n    data-background-opacity: \"0.5\"\n---\n\n\n\n\n5 Chalkboard YAML setting\n\n\nCode\n---\ntitle: \"Presentation\"\nformat:\n  revealjs:\n    chalkboard: true\n---\n\n\n\n\n6 center whole page\n\n\nCode\n# This will be centered {.center}\n\nThis text is moved as well\n\n\n\n\n7 reference:\nhttps://quarto.org/docs/presentations/revealjs/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto presentation"
    ]
  },
  {
    "objectID": "Plot/7 quarto/3 quarto website.html",
    "href": "Plot/7 quarto/3 quarto website.html",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub\n\n\n\n\n\n\n\n\n\n_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Plot/7 quarto/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "href": "Plot/7 quarto/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Plot/7 quarto/3 quarto website.html#publish-quarto-website-into-github-page",
    "href": "Plot/7 quarto/3 quarto website.html#publish-quarto-website-into-github-page",
    "title": "quarto website",
    "section": "",
    "text": "_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Plot/7 quarto/2 quarto blog.html",
    "href": "Plot/7 quarto/2 quarto blog.html",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---\n\n\n\n\n\n\n\nCode\n---\ndraft: true  \n  \n---\n\n\n\n\n\n\n\nCode\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true\n\n\n\n\n\n\n\nCode\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---\n\n\n\n\n\n\n\nCode\ndraft:true",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 quarto/2 quarto blog.html#blog-post",
    "href": "Plot/7 quarto/2 quarto blog.html#blog-post",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 quarto/2 quarto blog.html#hide-post-from-main-page",
    "href": "Plot/7 quarto/2 quarto blog.html#hide-post-from-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ndraft: true  \n  \n---",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 quarto/2 quarto blog.html#quarto.yml",
    "href": "Plot/7 quarto/2 quarto blog.html#quarto.yml",
    "title": "quarto blog",
    "section": "",
    "text": "Code\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 quarto/2 quarto blog.html#index.qmd",
    "href": "Plot/7 quarto/2 quarto blog.html#index.qmd",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 quarto/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "href": "Plot/7 quarto/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\ndraft:true",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Plot/7 quarto/6 quarto parameters.html",
    "href": "Plot/7 quarto/6 quarto parameters.html",
    "title": "quarto parameters",
    "section": "",
    "text": "Code\nlibrary(quarto)\nquarto_render(\"_parameters in R.qmd\"\n,output_file='R.html'\n,execute_params = list(name='new me',key=9999))",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto parameters"
    ]
  },
  {
    "objectID": "Plot/7 quarto/6 quarto parameters.html#render-qmd-file-with-parameters-input",
    "href": "Plot/7 quarto/6 quarto parameters.html#render-qmd-file-with-parameters-input",
    "title": "quarto parameters",
    "section": "",
    "text": "Code\nlibrary(quarto)\nquarto_render(\"_parameters in R.qmd\"\n,output_file='R.html'\n,execute_params = list(name='new me',key=9999))",
    "crumbs": [
      "Plot",
      "7 quarto",
      "quarto parameters"
    ]
  },
  {
    "objectID": "other/6 google analytics/1 google analytics.html",
    "href": "other/6 google analytics/1 google analytics.html",
    "title": "google analytic in R",
    "section": "",
    "text": "1 package\n\n\nCode\n# Libraries\nlibrary(googleAnalyticsR)\nlibrary(gargle)\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(lubridate)\n\n\n\n\n2 API\n\n\nCode\n# Access\nga_auth(email=\"verykoala@gmail.com\")\nga_account_list(\"ga4\")\n\n\n# A tibble: 4 × 4\n  account_name accountId property_name           propertyId\n  &lt;chr&gt;        &lt;chr&gt;     &lt;chr&gt;                   &lt;chr&gt;     \n1 verykoala    30370450  verykoala - GA4         431072878 \n2 verykoala    30370450  drinking                431975107 \n3 Demo Account 54516992  GA4 - Flood-It!         153293282 \n4 Demo Account 54516992  GA4 - Google Merch Shop 213025502 \n\n\n\n\n3 download data\n\n\nCode\nmy_property_id &lt;- 431975107\nfrom_date &lt;- \"2023-01-01\"\nto_date &lt;- \"2024-12-31\"\n           \noverall &lt;- ga_data(\n  my_property_id,\n  metrics = c(\"activeUsers\", \"newUsers\",\"sessions\", \"screenPageViews\"),\n  date_range = c(from_date, to_date)\n  )\n\n\n\n\nCode\noverall\n\n\n# A tibble: 1 × 4\n  activeUsers newUsers sessions screenPageViews\n        &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;           &lt;dbl&gt;\n1          92       99      472            2743\n\n\n\n\n4 image at the back into plotly\n\n\nCode\n# By Country\ncountry &lt;- ga_data(\n  my_property_id,\n  dimensions = c(\"country\"),\n  metrics = c(\"activeUsers\", \"newUsers\",\"sessions\", \"screenPageViews\"),\n  date_range = c(from_date, to_date)\n)\n\ncountry\n\n\n# A tibble: 18 × 5\n   country        activeUsers newUsers sessions screenPageViews\n   &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;           &lt;dbl&gt;\n 1 Hong Kong               32       23      136             631\n 2 China                   28       31      279            1814\n 3 United States           15       12       20              95\n 4 Thailand                 6        2       14              87\n 5 Ireland                  5        5        5               5\n 6 Japan                    5        4        5              13\n 7 Macao                    4        4       20              58\n 8 Sweden                   4        4        4               4\n 9 United Kingdom           3        3        3               3\n10 (not set)                2        2        2               2\n11 Malaysia                 2        2        4               9\n12 Singapore                2        0        4              11\n13 South Korea              2        2        3               2\n14 Argentina                1        1        1               1\n15 Australia                1        1        1               1\n16 Canada                   1        1        1               3\n17 Iran                     1        1        1               3\n18 Taiwan                   1        1        1               1\n\n\n\n\n5 add image at the back into plotly\n\n\nCode\nfig &lt;- plot_ly(data=country,x = ~sessions,y=~country,text=~sessions, type = \"bar\",orientation = 'h')%&gt;% \n  layout(title = 'Vistors',yaxis = list(title='Regions',categoryorder = \"total ascending\"),\n         images = list(  \n      list(  \n        source = base64enc::dataURI(file = \"images/google_analytics-ar21.webp\")\n        ,xref = \"paper\"\n        ,yref = \"paper\" \n        ,x = 0.9\n        ,y = 0.3\n        ,sizex = 0.3\n        ,sizey = 0.3\n       ,xanchor=\"right\"  \n        ,layer = \"below\"\n      )  \n         \n         )\n)\n\nfig\n\n\n\n\n\n\n\n\nCode\nsample &lt;- ga_data(\n  my_property_id,\n  dimensions = c(\"date\",\"dayOfWeek\"),\n  metrics = c(\"activeUsers\", \"newUsers\",\"sessions\", \"screenPageViews\"),\n  date_range = c(from_date, to_date)\n) %&gt;% \narrange(desc(date)) %&gt;% mutate(weekend_date=floor_date(date, \"week\")+7)\n\nsample\n\n\n# A tibble: 100 × 7\n   date       dayOfWeek activeUsers newUsers sessions screenPageViews\n   &lt;date&gt;     &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;           &lt;dbl&gt;\n 1 2024-12-31 2                   2        2        2               2\n 2 2024-12-29 0                   2        0        4              11\n 3 2024-12-27 5                   2        0        5             215\n 4 2024-12-26 4                   2        1        2              23\n 5 2024-12-25 3                   3        1       10              37\n 6 2024-12-22 0                   2        0        3              39\n 7 2024-12-21 6                   2        0        5              20\n 8 2024-12-20 5                   4        2        7              63\n 9 2024-12-19 4                   2        0       11              39\n10 2024-12-18 3                   2        0        7              13\n# ℹ 90 more rows\n# ℹ 1 more variable: weekend_date &lt;date&gt;\n\n\nCode\nsample002=sample %&gt;% group_by(weekend_date) %&gt;% summarise(activeUsers=sum(activeUsers)\n                                                          ,sessions=sum(sessions))\n\n\n\n\nCode\nfig &lt;- plot_ly(data = sample002, x = ~weekend_date, y = ~sessions,mode = 'lines')%&gt;% layout(title = 'Vistors',images = list(  \n      list(  \n        source = base64enc::dataURI(file = \"images/google_analytics-ar21.webp\")\n        ,xref = \"paper\"\n        ,yref = \"paper\" \n        ,x = 0.4\n        ,y = 0.9\n        ,sizex = 0.3\n        ,sizey = 0.3\n       ,xanchor=\"left\"  \n      )  \n    )\n    ) \nfig\n\n\n\n\n\n\n\n\n6 reference:\nhttps://www.listendata.com/2023/09/how-to-use-google-analytics-in-r.html\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "6 google analytics",
      "google analytic in R"
    ]
  },
  {
    "objectID": "other/6 other/1 chromote.html",
    "href": "other/6 other/1 chromote.html",
    "title": "chromote",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(chromote)\n\n\n\n\nCode\npackageVersion(\"chromote\")\n\n\n\n1 create view\n\n\nCode\nlibrary(chromote)\n\nb &lt;- ChromoteSession$new()\n\n# In a web browser, open a viewer for the headless browser. Works best with\n# Chromium-based browsers.\nb$view()\n\n\n\n\nCode\nb$Browser$getVersion()\n\n\n\n\n2 go to page\n\n\nCode\nb$Page$navigate(\"https://www.r-project.org/\")\n\n\n\n\n3 take picture\n\n\nCode\n# Saves to screenshot.png\nb$screenshot()\n\n\n\n\nCode\n# Takes a screenshot of elements picked out by CSS selector\nis_interactive &lt;- interactive() # Display screenshot if interactive\nb$screenshot(\"sidebar.png\", selector = \"h1\" ,show = is_interactive)\n\n\n\n\n4 take picture as pdf\n\n\nCode\nb$screenshot_pdf(filename='page.pdf')\n\n\n\n\n5 Reference:\nhttps://rstudio.github.io/chromote/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "6 other",
      "chromote"
    ]
  },
  {
    "objectID": "other/6 other/2 translation.html",
    "href": "other/6 other/2 translation.html",
    "title": "Translation",
    "section": "",
    "text": "Code\nlibrary(polyglotr)\n\n\n\n1 Translation word\n\n\nCode\nword_translation &lt;- linguee_word_translation(\"fruit\", source_language = \"en\", target_language = \"zh\")\n\nword_translation\n\n\n[1] \"水果\" \"果香\" \"果子\" \"果品\" \"实\"   \"檎\"  \n\n\n\n\n2 translate sentences\n\n\nCode\ngoogle_get_supported_languages()\n\n\n# A tibble: 194 × 2\n   Language  `ISO-639 code`\n   &lt;chr&gt;     &lt;chr&gt;         \n 1 Abkhaz    ab            \n 2 Acehnese  ace           \n 3 Acholi    ach           \n 4 Afrikaans af            \n 5 Albanian  sq            \n 6 Alur      alz           \n 7 Amharic   am            \n 8 Arabic    ar            \n 9 Armenian  hy            \n10 Assamese  as            \n# ℹ 184 more rows\n\n\n\n\nCode\ntexts &lt;- c(\"Hello, how are you?\", \n           \"I love programming!\", \n           \"This is a test.\")\n\nlanguages &lt;- c(\"es\", \"fr\", \"zh-CN\")\n\n\ncreate_translation_table(texts, languages)\n\n\n        original_word                     es                          fr\n1 Hello, how are you?     ¿Hola, cómo estás? Bonjour comment allez-vous?\n2 I love programming! ¡Me encanta programar!  J'adore la programmation !\n3     This is a test.    Esto es una prueba.           Ceci est un test.\n           zh-CN\n1       你好吗？\n2   我喜欢编程！\n3 这是一个测试。\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "6 other",
      "Translation"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html",
    "href": "data manipulation/4 data table.html",
    "title": "Data table",
    "section": "",
    "text": "With the gt package, anyone can make wonderful-looking tables using the R programming language. The gt philosophy: we can construct a wide variety of useful tables with a cohesive set of table parts. These include the table header, the stub, the column labels and spanner column labels, the table body, and the table footer.\n\n\n\n\nCode\nlibrary(gt)\n\n\n\n\nCode\nlibrary(gt)\nlibrary(gtExtras)\n\n# Define the start and end dates for the data range\nstart_date &lt;- \"2010-06-07\"\nend_date &lt;- \"2010-06-14\"\n\n# Create a gt table based on preprocessed\n# `sp500` table data\nsp500 |&gt;\n  dplyr::filter(date &gt;= start_date & date &lt;= end_date) |&gt;\n  dplyr::select(-adj_close) |&gt;\n  gt() |&gt;\n  tab_header(\n    # title\n    title = \"S&P 500\",\n    # subtitle\n    subtitle = glue::glue(\"{start_date} to {end_date}\")\n  ) |&gt;\n  # format currency\n  fmt_currency() |&gt;\n  # format date\n  fmt_date(columns = date, date_style = \"wd_m_day_year\") |&gt;\n  # format suffixing\n  fmt_number(columns = volume, suffixing = TRUE) %&gt;% \n \n  # foot note with link\n   tab_source_note(\n    gt_hyperlink('Reference', 'https://gt.rstudio.com/')\n  ) %&gt;% \n\n  # make images url to images\n  #gt_img_rows(columns = image, img_source = \"web\", height = 120) %&gt;% \n  # align columns\n  cols_align(\n  align = c(\"center\"),\n  columns = everything()\n)\n\n\n\n\n\n\n\n\nS&P 500\n\n\n2010-06-07 to 2010-06-14\n\n\ndate\nopen\nhigh\nlow\nclose\nvolume\n\n\n\n\nMon, Jun 14, 2010\n$1,095.00\n$1,105.91\n$1,089.03\n$1,089.63\n4.43B\n\n\nFri, Jun 11, 2010\n$1,082.65\n$1,092.25\n$1,077.12\n$1,091.60\n4.06B\n\n\nThu, Jun 10, 2010\n$1,058.77\n$1,087.85\n$1,058.77\n$1,086.84\n5.14B\n\n\nWed, Jun 9, 2010\n$1,062.75\n$1,077.74\n$1,052.25\n$1,055.69\n5.98B\n\n\nTue, Jun 8, 2010\n$1,050.81\n$1,063.15\n$1,042.17\n$1,062.00\n6.19B\n\n\nMon, Jun 7, 2010\n$1,065.84\n$1,071.36\n$1,049.86\n$1,050.47\n5.47B\n\n\n\nReference\n\n\n\n\n\n\n\n\n\n\nThere are several R packages that either use gt to generate tabular outputs or extend gt in amazing ways. Here is a short list of some of these great packages:\n\ngtsummary (GITHUB, WEBSITE)\ngtExtras (GITHUB, WEBSITE)\npointblank (GITHUB, WEBSITE)\ntfrmt (GITHUB, WEBSITE)\ngto (GITHUB)\n\n\n\n\nhttps://gt.rstudio.com/",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html#packages-that-use-or-extend-gt",
    "href": "data manipulation/4 data table.html#packages-that-use-or-extend-gt",
    "title": "Data table",
    "section": "",
    "text": "There are several R packages that either use gt to generate tabular outputs or extend gt in amazing ways. Here is a short list of some of these great packages:\n\ngtsummary (GITHUB, WEBSITE)\ngtExtras (GITHUB, WEBSITE)\npointblank (GITHUB, WEBSITE)\ntfrmt (GITHUB, WEBSITE)\ngto (GITHUB)",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#create-database-file-pythonsqlite.db-and-copy-mtcars-data-and-iris-data-into-database",
    "href": "data manipulation/6 SQL database.html#create-database-file-pythonsqlite.db-and-copy-mtcars-data-and-iris-data-into-database",
    "title": "SQL database with R",
    "section": "1.1 create database file pythonsqlite.db and copy mtcars data and iris data into database",
    "text": "1.1 create database file pythonsqlite.db and copy mtcars data and iris data into database\n\n\nCode\nmtcars=cbind(newColName = rownames(mtcars), mtcars)\n\n\n\n\nCode\n# Create an ephemeral in-memory RSQLite database\ncon &lt;- dbConnect(RSQLite::SQLite(), \"my_sql_database\")\n\n# view database on IDE\nconnection_view(con)\n\n\n\n\nCode\ndbWriteTable(con, \"mtcars\", mtcars,overwrite=TRUE)\ndbWriteTable(con, \"iris\", iris,overwrite=TRUE)",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#check-all-table-in-database",
    "href": "data manipulation/6 SQL database.html#check-all-table-in-database",
    "title": "SQL database with R",
    "section": "1.2 check all table in database",
    "text": "1.2 check all table in database\n\n\nCode\ndbListTables(con)\n\n\n[1] \"iris\"   \"mtcars\"",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#select",
    "href": "data manipulation/6 SQL database.html#select",
    "title": "SQL database with R",
    "section": "2.1 select",
    "text": "2.1 select\n\n\nCode\nsql =\"SELECT * FROM mtcars LIMIT 3\"\ntable=dbGetQuery(con,sql)\ntable\n\n\n     newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1     Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\n2 Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\n3    Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#renaming-column",
    "href": "data manipulation/6 SQL database.html#renaming-column",
    "title": "SQL database with R",
    "section": "2.2 Renaming column",
    "text": "2.2 Renaming column\n\n\nCode\nsql=\"select mpg as new_mpg from mtcars\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n  new_mpg\n1    21.0\n2    21.0\n3    22.8\n4    21.4\n5    18.7\n6    18.1",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#create-column",
    "href": "data manipulation/6 SQL database.html#create-column",
    "title": "SQL database with R",
    "section": "2.3 create column",
    "text": "2.3 create column\n\n\nCode\nsql=\"select mpg+1 as new_mpg,mpg from mtcars\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n  new_mpg  mpg\n1    22.0 21.0\n2    22.0 21.0\n3    23.8 22.8\n4    22.4 21.4\n5    19.7 18.7\n6    19.1 18.1",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#filter-rows",
    "href": "data manipulation/6 SQL database.html#filter-rows",
    "title": "SQL database with R",
    "section": "2.4 Filter rows",
    "text": "2.4 Filter rows\n\n\nCode\nsql=\"select * from mtcars where hp&gt;100\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n         newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\n2     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\n3    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\n4 Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\n5           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1\n6        Duster 360 14.3   8  360 245 3.21 3.570 15.84  0  0    3    4\n\n\n\n2.4.1 Filters with AND conditions\n\n\nCode\nsql=\"select * from mtcars where hp&gt;100 and drat&lt;3\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n          newColName  mpg cyl disp  hp drat   wt  qsec vs am gear carb\n1            Valiant 18.1   6  225 105 2.76 3.46 20.22  1  0    3    1\n2 Cadillac Fleetwood 10.4   8  472 205 2.93 5.25 17.98  0  0    3    4\n3   Dodge Challenger 15.5   8  318 150 2.76 3.52 16.87  0  0    3    2\n\n\n\n\n2.4.2 Filters with or conditions\n\n\nCode\nsql=\"select * from mtcars where hp&gt;100 or drat&lt;3\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n         newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\n2     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\n3    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\n4 Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\n5           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1\n6        Duster 360 14.3   8  360 245 3.21 3.570 15.84  0  0    3    4",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#append",
    "href": "data manipulation/6 SQL database.html#append",
    "title": "SQL database with R",
    "section": "2.5 Append",
    "text": "2.5 Append\n\n2.5.1 append by row\n\n\nCode\nsql=\"select * from mtcars union all select * from mtcars \"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n         newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\n2     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\n3        Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1\n4    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\n5 Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\n6           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1\n\n\n\n\n2.5.2 append by column\n\n\n2.5.3 Dropping NA values\n\n\n2.5.4 keep NA values",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#group-by",
    "href": "data manipulation/6 SQL database.html#group-by",
    "title": "SQL database with R",
    "section": "2.6 group by",
    "text": "2.6 group by\n\n2.6.1 average,min,max,sum\n\n\nCode\nsql=\"select AVG(hp),min(hp),max(hp),sum(hp) from mtcars\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n   AVG(hp) min(hp) max(hp) sum(hp)\n1 146.6875      52     335    4694\n\n\n\n\n2.6.2 count record and count distinct record\n\n\nCode\nsql=\"select vs, count(*),count(distinct cyl) from mtcars group by vs\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n  vs count(*) count(distinct cyl)\n1  0       18                   3\n2  1       14                   2",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#order-rows",
    "href": "data manipulation/6 SQL database.html#order-rows",
    "title": "SQL database with R",
    "section": "2.7 order rows",
    "text": "2.7 order rows\n\n\nCode\nsql=\"select * from mtcars order by mpg\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n           newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1  Cadillac Fleetwood 10.4   8  472 205 2.93 5.250 17.98  0  0    3    4\n2 Lincoln Continental 10.4   8  460 215 3.00 5.424 17.82  0  0    3    4\n3          Camaro Z28 13.3   8  350 245 3.73 3.840 15.41  0  0    3    4\n4          Duster 360 14.3   8  360 245 3.21 3.570 15.84  0  0    3    4\n5   Chrysler Imperial 14.7   8  440 230 3.23 5.345 17.42  0  0    3    4\n6       Maserati Bora 15.0   8  301 335 3.54 3.570 14.60  0  1    5    8\n\n\n\n2.7.1 Sort in descending order\n\n\nCode\nsql=\"select * from mtcars order by mpg desc\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n      newColName  mpg cyl  disp  hp drat    wt  qsec vs am gear carb\n1 Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1\n2       Fiat 128 32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1\n3    Honda Civic 30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2\n4   Lotus Europa 30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2\n5      Fiat X1-9 27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1\n6  Porsche 914-2 26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2\n\n\n\n\n2.7.2 Arrange by multiple variables\n\n\nCode\nsql=\"select * from mtcars order by mpg ,cyl\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n           newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1  Cadillac Fleetwood 10.4   8  472 205 2.93 5.250 17.98  0  0    3    4\n2 Lincoln Continental 10.4   8  460 215 3.00 5.424 17.82  0  0    3    4\n3          Camaro Z28 13.3   8  350 245 3.73 3.840 15.41  0  0    3    4\n4          Duster 360 14.3   8  360 245 3.21 3.570 15.84  0  0    3    4\n5   Chrysler Imperial 14.7   8  440 230 3.23 5.345 17.42  0  0    3    4\n6       Maserati Bora 15.0   8  301 335 3.54 3.570 14.60  0  1    5    8",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#join",
    "href": "data manipulation/6 SQL database.html#join",
    "title": "SQL database with R",
    "section": "2.8 join",
    "text": "2.8 join\n\n2.8.1 inner_join\n\n\nCode\nsql=\"select a.newColName,a.mpg,b.mpg as new_mpg from mtcars a left join mtcars b on a.newColName=b.newColName\"\n\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n         newColName  mpg new_mpg\n1         Mazda RX4 21.0    21.0\n2     Mazda RX4 Wag 21.0    21.0\n3        Datsun 710 22.8    22.8\n4    Hornet 4 Drive 21.4    21.4\n5 Hornet Sportabout 18.7    18.7\n6           Valiant 18.1    18.1\n\n\n\n\n2.8.2 full join\n\n\n2.8.3 left join\n\n\n2.8.4 anti join",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#reshape-tables",
    "href": "data manipulation/6 SQL database.html#reshape-tables",
    "title": "SQL database with R",
    "section": "2.9 Reshape tables",
    "text": "2.9 Reshape tables\n\n2.9.1 Gather data long(wide to long)\n\n\n2.9.2 Spread data wide (long to wide)",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#string",
    "href": "data manipulation/6 SQL database.html#string",
    "title": "SQL database with R",
    "section": "2.10 string",
    "text": "2.10 string\n\n2.10.1 upper case\n\n\n2.10.2 lower case\n\n\n2.10.3 match\n\n\n2.10.4 concatenation\n\n\n2.10.5 replace\n\n\n2.10.6 extract",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#date",
    "href": "data manipulation/6 SQL database.html#date",
    "title": "SQL database with R",
    "section": "2.11 date",
    "text": "2.11 date",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#create-table-into-database",
    "href": "data manipulation/6 SQL database.html#create-table-into-database",
    "title": "SQL database with R",
    "section": "2.12 create table into database",
    "text": "2.12 create table into database\n\n\nCode\nsql=\"create table if not exists new_mtcars as select * from mtcars order by mpg ,cyl\"\ndbSendQuery(con,sql)\n\n\n&lt;SQLiteResult&gt;\n  SQL  create table if not exists new_mtcars as select * from mtcars order by mpg ,cyl\n  ROWS Fetched: 0 [complete]\n       Changed: 0\n\n\nCode\ndbListTables(con)\n\n\n[1] \"iris\"       \"mtcars\"     \"new_mtcars\"",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#delete-table-in-database",
    "href": "data manipulation/6 SQL database.html#delete-table-in-database",
    "title": "SQL database with R",
    "section": "2.13 delete table in database",
    "text": "2.13 delete table in database\n\n\nCode\nsql=\"drop table if  exists  new_mtcars\"\ndbSendQuery(con,sql)\n\n\n&lt;SQLiteResult&gt;\n  SQL  drop table if  exists  new_mtcars\n  ROWS Fetched: 0 [complete]\n       Changed: 0\n\n\nCode\ndbListTables(con)\n\n\n[1] \"iris\"   \"mtcars\"",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#edit-table-in-database",
    "href": "data manipulation/6 SQL database.html#edit-table-in-database",
    "title": "SQL database with R",
    "section": "2.14 edit table in database",
    "text": "2.14 edit table in database",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/5 resample.html",
    "href": "data manipulation/5 resample.html",
    "title": "resample",
    "section": "",
    "text": "1 k-Fold Cross-Validation\n\n\n\nCode\nk_flod_resample&lt;- vfold_cv(data, v = 10)\nk_flod_resample\n\n\n\n\n2 MONTE CARLO CROSS-VALIDATION\nfor MCCV, this proportion of the data is randomly selected each time. This results in assessment sets that are not mutually exclusive\n\n\nCode\nmc_resample&lt;- mc_cv(data, prop = 9/10, times = 20)\nmc_resample\n\n\n\n\n3 The Bootstrap\nA bootstrap sample of the training set is a sample that is the same size as the training set but is drawn with replacement\n\n\n\nCode\nbootstraps_resample&lt;- bootstraps(data, times = 1000)\nbootstraps_resample\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "data manipulation",
      "resample"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html#reference",
    "href": "data manipulation/4 data table.html#reference",
    "title": "Data table",
    "section": "",
    "text": "https://gt.rstudio.com/",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html#pages-data",
    "href": "data manipulation/4 data table.html#pages-data",
    "title": "Data table",
    "section": "3.1 pages data",
    "text": "3.1 pages data\n\n\nCode\nlibrary(rmarkdown)\nmtcars %&gt;% paged_table()",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html#reference-1",
    "href": "data manipulation/4 data table.html#reference-1",
    "title": "Data table",
    "section": "2.1 reference:",
    "text": "2.1 reference:\nhttps://www.youtube.com/watch?v=E3ubwU5Uyqw",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html",
    "href": "data manipulation/2 data structure in R.html",
    "title": "Data structure in R",
    "section": "",
    "text": "Code\nlibrary(tidyverse)",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#download-table-from-internet",
    "href": "intro/1 basic R.html#download-table-from-internet",
    "title": "Basic R",
    "section": "1.9 download table from internet",
    "text": "1.9 download table from internet\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(janitor)\n\nnba_wiki_url='https://en.wikipedia.org/wiki/List_of_NBA_champions'\n  \nnba_wiki_data001=nba_wiki_url %&gt;% read_html() %&gt;% html_table()\n\nnba_wiki_data002=nba_wiki_data001[[2]] %&gt;% clean_names()\n\nnba_wiki_data003=nba_wiki_data002 %&gt;%filter(!row_number() %in% c(1, 5)) %&gt;% mutate(year=str_sub(year, 1, 4))\n\ntail(nba_wiki_data003)\n\n\n# A tibble: 6 × 8\n  year  western_champion      coach result eastern_champion coach_2 finals_mvp_a\n  &lt;chr&gt; &lt;chr&gt;                 &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;            &lt;chr&gt;   &lt;chr&gt;       \n1 2019  Golden State Warrior… Stev… 2–4    Toronto Raptors… Nick N… Kawhi Leona…\n2 2020  Los Angeles Lakers (… Fran… 4–2    Miami Heat (5) … Erik S… LeBron James\n3 2021  Phoenix Suns (2) (3,… Mont… 2–4    Milwaukee Bucks… Mike B… Giannis Ant…\n4 2022  Golden State Warrior… Stev… 4–2    Boston Celtics … Ime Ud… Stephen Cur…\n5 2023  Denver Nuggets (1) (… Mich… 4–1    Miami Heat (8) … Erik S… Nikola Jokić\n6 2024  Dallas Mavericks (5)… Jaso… 1–4    Boston Celtics … Joe Ma… Jaylen Brown\n# ℹ 1 more variable:\n#   mw_parser_output_tooltip_dotted_border_bottom_1px_dotted_cursor_help_ref &lt;chr&gt;",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html#reference-2",
    "href": "data manipulation/4 data table.html#reference-2",
    "title": "Data table",
    "section": "3.2 reference:",
    "text": "3.2 reference:\nhttps://rstudio.github.io/distill/tables.html",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html",
    "href": "Publish/4 email/1 email.html",
    "title": "Email",
    "section": "",
    "text": "Code\nlibrary(blastula)\nlibrary(keyring)\n\n\n\n\n\n\n\n\nCode\ncreate_smtp_creds_key(\n  id = \"gmail001_creds\",\n  provider = \"gmail\",\n  user = \"verykoala@gmail.com\",\n  overwrite = TRUE\n  )\n\n\n\n\n\n\n\nCode\n# create_smtp_creds_key(\n#   id = \"outlook001_creds\",\n#   provider = \"outlook\",\n#   user = \"jcpartner@outlook.com\",\n#   overwrite = TRUE\n#   )\n\ncreate_smtp_creds_file(file = \"ggnot_throwaway_creds\",\n                       user = \"jcpartner@outlook.com\",\n                       provider = \"outlook\")\n\n\n\n\nCode\n#delete_credential_key(\"gmail001_creds\")\n\n\n\n\nCode\nview_credential_keys()\n\n\n\n\n\n\n\n\nCode\nlibrary(blastula)\nmsg=compose_email(\n  body = md(\n  \"Hi there 👋,\n  \n  This is an email to let you now thatrunning job **finished**.\n\n  Best,&lt;br&gt;\n  Tony\"\n  )\n)\n\nmsg\n\n\n\n\n\n\n\n\n\nCode\nmsg %&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nlibrary(Microsoft365R)\noutl &lt;- get_personal_outlook()\n\n\n\n\nCode\n# list the most recent emails in your Inbox\n#outl$list_emails()\n\n\n\n\nCode\nem &lt;- outl$create_email(msg, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\n\n\n\n\nCode\nem$send()\n\n\n\n\n\n\n\n\nCode\nemail_obj=render_email('.quarto_email.Rmd')\n\n\n\n\nCode\nemail_obj\n\n\n\n\n\n\nCode\nemail_obj%&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nem &lt;- outl$create_email(email_obj, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\nem$send()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html",
    "href": "Publish/2 quarto/1 quarto tips.html",
    "title": "quarto tips",
    "section": "",
    "text": "https://quarto.org/docs/get-started/\n\n\n\n\n\nCode\ninstall.packages(\"quarto\")",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#install-quarto-cli",
    "href": "Publish/2 quarto/1 quarto tips.html#install-quarto-cli",
    "title": "quarto tips",
    "section": "",
    "text": "https://quarto.org/docs/get-started/",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#install-quarto-pacakge",
    "href": "Publish/2 quarto/1 quarto tips.html#install-quarto-pacakge",
    "title": "quarto tips",
    "section": "",
    "text": "Code\ninstall.packages(\"quarto\")",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-terminal",
    "href": "Publish/2 quarto/1 quarto tips.html#in-terminal",
    "title": "quarto tips",
    "section": "in Terminal",
    "text": "in Terminal\n\n\n\nCode\n\nTerminal\n\nquarto check",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-r",
    "href": "Publish/2 quarto/1 quarto tips.html#in-r",
    "title": "quarto tips",
    "section": "in R",
    "text": "in R\n\n\nCode\nlibrary(quarto)\nquarto_version()\n\n\n[1] '99.9.9'\n\n\nquarto location\n\n\nCode\nquarto_path()\n\n\n[1] \"/usr/local/bin/quarto\"",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#r",
    "href": "Publish/2 quarto/1 quarto tips.html#r",
    "title": "quarto tips",
    "section": "R",
    "text": "R\n```{R}\nversion\n```",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#python",
    "href": "Publish/2 quarto/1 quarto tips.html#python",
    "title": "quarto tips",
    "section": "Python",
    "text": "Python\n```{python}\nimport sys\nprint(sys.version)\n```",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#bath",
    "href": "Publish/2 quarto/1 quarto tips.html#bath",
    "title": "quarto tips",
    "section": "Bath",
    "text": "Bath\n```{bash}\necho \"foo\" \n```",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-yaml-header",
    "href": "Publish/2 quarto/1 quarto tips.html#in-yaml-header",
    "title": "quarto tips",
    "section": "in YAML header",
    "text": "in YAML header\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-code-chunk",
    "href": "Publish/2 quarto/1 quarto tips.html#in-code-chunk",
    "title": "quarto tips",
    "section": "in code chunk",
    "text": "in code chunk\n\n\nCode\n #| eval: false",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#embed-youtube",
    "href": "Publish/2 quarto/1 quarto tips.html#embed-youtube",
    "title": "quarto tips",
    "section": "embed youtube",
    "text": "embed youtube\n\n\nCode\n&lt;iframe width=\"640\" height=\"480\" src=\"https://www.youtube.com/embed/nku5zFMZAdU\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen&gt;\n&lt;/iframe&gt;",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#embed-local-video",
    "href": "Publish/2 quarto/1 quarto tips.html#embed-local-video",
    "title": "quarto tips",
    "section": "embed local video",
    "text": "embed local video\n\n\nCode\n{{&lt; video images/vv.mp4 height=\"600\" &gt;}}",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto tips"
    ]
  },
  {
    "objectID": "Publish/2 quarto/5 quarto extensions.html",
    "href": "Publish/2 quarto/5 quarto extensions.html",
    "title": "quarto Extensioins",
    "section": "",
    "text": "Extensions are a powerful way to modify and extend the behavior of Quarto. Quarto v1.2 Required for Quarto Extensions.\n\n1 quarto extension： lightbox\nAn extension that uses the GLightbox javascript library to add lightbox styling and behavior to images in your HTML documents.\n\n\n2 Installation:\n\n\n\nCode\n\nTerminal\n\nquarto install extension quarto-ext/lightbox\n\n\n\n\n\n3 Usage:\nThe Lightbox extension can automatically give images in your web page a lightbox treatment. You can enable this like:\nin header yaml:\n\n\nCode\n---\ntitle: Simple Lightbox Example\nfilters:\n   - lightbox\nlightbox: auto\n---\n\n\nIn addition to simply providing a lightbox treatment for individual images, you can also group images into a ‘gallery’. When the user activates the lightbox, they will be able to page through the images in the gallery without returning to the main document.\nin content:\n\n\nCode\n![](images/image-562149792.png){group=\"my-gallery\"\ndescription=\"its a picture\"}\n\n\n\n\n4 quarto extension lightbox example:\ncode:example.qmd\nwebsite:example.qmd.\n\n\n5 list quarto extension\ngo to folder which have added quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto list extensions\n\n\n\n\n\n\n6 update quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto update quarto-ext/fontawesome\n\n\n\n\n\n7 remove quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto remove quarto-ext/fontawesome\n\n\n\nIf you run the quarto remove extension command with no extension-id, you will be presented with a list of extensions that are present and you may select which extensions to remove.\n\n\n8 Reference\nhttps://quarto.org/docs/extensions/\nhttps://github.com/quarto-ext/lightbox\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto Extensioins"
    ]
  },
  {
    "objectID": "Publish/2 quarto/4 quarto presentation .html",
    "href": "Publish/2 quarto/4 quarto presentation .html",
    "title": "quarto presentation",
    "section": "",
    "text": "1 revealjs YAML\n\n\nCode\n---\ntitle: \"Habits\"\nauthor: \"John Doe\"\nformat: revealjs\n---\n\n\n\n\n2 pages\n\n\nCode\n# pages\n\n# In the morning\n\n## Getting up\n\n- Turn off alarm\n- Get out of bed\n\n## Breakfast\n\n- Eat eggs\n- Drink coffee\n\n\n\n\n3 YAML format setting\n\n\nCode\nformat:\n  revealjs:\n    controls: true\n    navigation-mode: vertical\n    height: 800\n    width: 1000    \n    fontsize: 20pt\n    page-layout: full\n    logo: images/logo.jpg\n    footer: \"This is footer(https://google.com/)\"\n    slide-number: c\n    show-slide-number: all\n    menu: false\n\n\n\n\n4 Main Title Slide Background YAML setting\n\n\nCode\n---\ntitle: My Slide Show\ntitle-slide-attributes:\n    data-background-image: /path/to/title_image.png\n    data-background-size: contain\n    data-background-opacity: \"0.5\"\n---\n\n\n\n\n5 Chalkboard YAML setting\n\n\nCode\n---\ntitle: \"Presentation\"\nformat:\n  revealjs:\n    chalkboard: true\n---\n\n\n\n\n6 center whole page\n\n\nCode\n# This will be centered {.center}\n\nThis text is moved as well\n\n\n\n\n7 reference:\nhttps://quarto.org/docs/presentations/revealjs/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto presentation"
    ]
  },
  {
    "objectID": "Publish/1 Shiny/3 China accident map.html",
    "href": "Publish/1 Shiny/3 China accident map.html",
    "title": "Shiny in R:China accident map",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/China_accident_map/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "1 Shiny",
      "Shiny in R:China accident map"
    ]
  },
  {
    "objectID": "Publish/1 Shiny/1 shiny weight tracking.html",
    "href": "Publish/1 Shiny/1 shiny weight tracking.html",
    "title": "Shiny in R:weight tracking",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/weightshiny/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "1 Shiny",
      "Shiny in R:weight tracking"
    ]
  },
  {
    "objectID": "Publish/3 dashboard/1 dashboard.html",
    "href": "Publish/3 dashboard/1 dashboard.html",
    "title": "Dashboard",
    "section": "",
    "text": "quarto dashboard\n\n\n\nCode\n\n_dashboard_r.qmd\n\n---\ntitle: \"First quarto dashboard\"\nformat: dashboard\n---\n\n```{r}\na=1\na\n```\n\n\n\n\n\nReference:\nhttps://www.youtube.com/watch?v=HW7QbqI4fH0\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "3 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "Publish/1 Shiny/2 shiny photo editor.html",
    "href": "Publish/1 Shiny/2 shiny photo editor.html",
    "title": "Shiny in R:photo editor",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/photo_editor/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "1 Shiny",
      "Shiny in R:photo editor"
    ]
  },
  {
    "objectID": "Publish/2 quarto/3 quarto website.html",
    "href": "Publish/2 quarto/3 quarto website.html",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub\n\n\n\n\n\n\n\n\n\n_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "href": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-github-page",
    "href": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-github-page",
    "title": "quarto website",
    "section": "",
    "text": "_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html",
    "href": "Publish/2 quarto/2 quarto blog.html",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---\n\n\n\n\n\n\n\nCode\n---\ndraft: true  \n  \n---\n\n\n\n\n\n\n\nCode\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true\n\n\n\n\n\n\n\nCode\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---\n\n\n\n\n\n\n\nCode\ndraft:true",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#blog-post",
    "href": "Publish/2 quarto/2 quarto blog.html#blog-post",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#hide-post-from-main-page",
    "href": "Publish/2 quarto/2 quarto blog.html#hide-post-from-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ndraft: true  \n  \n---",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#quarto.yml",
    "href": "Publish/2 quarto/2 quarto blog.html#quarto.yml",
    "title": "quarto blog",
    "section": "",
    "text": "Code\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#index.qmd",
    "href": "Publish/2 quarto/2 quarto blog.html#index.qmd",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "href": "Publish/2 quarto/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\ndraft:true",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/6 quarto parameters.html",
    "href": "Publish/2 quarto/6 quarto parameters.html",
    "title": "quarto parameters",
    "section": "",
    "text": "Code\nlibrary(quarto)\nquarto_render(\"_parameters in R.qmd\"\n,output_file='R.html'\n,execute_params = list(name='new me',key=9999))",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto parameters"
    ]
  },
  {
    "objectID": "Publish/2 quarto/6 quarto parameters.html#render-qmd-file-with-parameters-input",
    "href": "Publish/2 quarto/6 quarto parameters.html#render-qmd-file-with-parameters-input",
    "title": "quarto parameters",
    "section": "",
    "text": "Code\nlibrary(quarto)\nquarto_render(\"_parameters in R.qmd\"\n,output_file='R.html'\n,execute_params = list(name='new me',key=9999))",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto parameters"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#create-smtp-credentials",
    "href": "Publish/4 email/1 email.html#create-smtp-credentials",
    "title": "Email",
    "section": "",
    "text": "Code\ncreate_smtp_creds_key(\n  id = \"gmail001_creds\",\n  provider = \"gmail\",\n  user = \"verykoala@gmail.com\",\n  overwrite = TRUE\n  )\n\n\n\n\n\n\n\nCode\n# create_smtp_creds_key(\n#   id = \"outlook001_creds\",\n#   provider = \"outlook\",\n#   user = \"jcpartner@outlook.com\",\n#   overwrite = TRUE\n#   )\n\ncreate_smtp_creds_file(file = \"ggnot_throwaway_creds\",\n                       user = \"jcpartner@outlook.com\",\n                       provider = \"outlook\")\n\n\n\n\nCode\n#delete_credential_key(\"gmail001_creds\")\n\n\n\n\nCode\nview_credential_keys()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#email-content",
    "href": "Publish/4 email/1 email.html#email-content",
    "title": "Email",
    "section": "",
    "text": "Code\nlibrary(blastula)\nmsg=compose_email(\n  body = md(\n  \"Hi there 👋,\n  \n  This is an email to let you now thatrunning job **finished**.\n\n  Best,&lt;br&gt;\n  Tony\"\n  )\n)\n\nmsg",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#send-email",
    "href": "Publish/4 email/1 email.html#send-email",
    "title": "Email",
    "section": "",
    "text": "Code\nmsg %&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nlibrary(Microsoft365R)\noutl &lt;- get_personal_outlook()\n\n\n\n\nCode\n# list the most recent emails in your Inbox\n#outl$list_emails()\n\n\n\n\nCode\nem &lt;- outl$create_email(msg, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\n\n\n\n\nCode\nem$send()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#send-email-with-quarto-content",
    "href": "Publish/4 email/1 email.html#send-email-with-quarto-content",
    "title": "Email",
    "section": "",
    "text": "Code\nemail_obj=render_email('.quarto_email.Rmd')\n\n\n\n\nCode\nemail_obj\n\n\n\n\n\n\nCode\nemail_obj%&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nem &lt;- outl$create_email(email_obj, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\nem$send()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
>>>>>>> 034811f3eac1a90f3f85df84c1be595d29b7f8d6
  }
]