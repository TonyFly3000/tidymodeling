---
title: "ggplot2 in R"
author: "Tony Duan"

execute:
  warning: false
  error: false
format:
  html:
    toc: true
    toc-location: right
    code-fold: show
    code-tools: true
    number-sections: true
    code-block-bg: true
    code-block-border-left: "#31BAE9"
---

![](images/Screenshot 2023-07-08 at 5.03.46 PM.png){width="800"}

```{r}
library(tidyverse)
library(gapminder)
library(ggpubr)
library(ggthemr)

library(ggplot2)
packageVersion("ggplot2")
```


```{r}
library(reshape2)
tips=tips
head(tips)
```

```{r}
data001=gapminder
head(data001)
```


# Scatter Plot

```{r}
p=ggplot(tips, aes(tip, total_bill)) + geom_point()
p
```


## color by group

```{r}
p=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()
p
```

## size by group

```{r}

p=ggplot(tips, aes(tip, total_bill,colour = sex,size=size)) + geom_point()
p

```

## line Plot
```{r}
data002= data001 %>% group_by(continent,year) %>% summarise(pop=sum(pop))
```

```{r}
p=ggplot(data002 %>%filter(continent=='Asia'), aes(year, pop)) + geom_line()
p
```

## color by group


```{r}
p=ggplot(data002, aes(year, pop,colour = continent)) + geom_line()
p
```

# histogram

```{r}
data002= data001 %>% filter(year==1997,continent %in% c('Asia','Africa'))
```


```{r}
ggplot(data002, aes(gdpPercap)) + 
  geom_histogram()
```

## color by group

```{r}
ggplot(data002, aes(gdpPercap,,fill = continent)) +geom_histogram(position = 'dodge')
```

# bar chart

```{r}
data002= data001 %>% filter(year==1997) %>% group_by(continent) %>% summarise(pop=sum(pop))
```

```{r}
ggplot(data002, aes(x=continent, y=pop)) +
  geom_bar(stat="identity")+scale_y_continuous(labels = scales::comma)
```


# box plot

```{r}
p=ggplot(tips, aes(day,tip,fill=day)) + geom_boxplot()
p
```



## color by group


```{r}
p=ggplot(tips, aes(day,tip,fill=sex)) + geom_boxplot()
p
```


# strip plot


```{r}

p=ggplot(tips, aes(day,tip)) + geom_jitter()
p

```

## color by group

```{r}

p=ggplot(tips, aes(day,tip,color=sex)) + geom_jitter(position=position_jitterdodge())
p

```

# Facet plot

```{r}
p=ggplot(tips, aes(tip,total_bill,)) + geom_point(aes(color=sex)) + facet_wrap("day")
p


```
make 3 plot per row

```{r}
p=ggplot(tips, aes(tip,total_bill,)) + geom_point(aes(color=sex)) + facet_wrap("day",ncol = 3)
p


```



# title,size,x y name




## add title

```{r}
p=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle("tip by sex")
p
```





## adjust size



```{r}

p=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle("tip by sex")+theme(
  plot.margin = margin(2, 2, 5, 5, "cm"))
p
```



## change x y name


```{r}
p=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name="new x name")+ scale_y_continuous(name="new y name")
p
```
## x y break and scales




# applying themes

::: {.panel-tabset .nav-pills}


## theme_bw()
```{r}
p=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name="new x name")+ scale_y_continuous(name="new y name")
p+ theme_bw()
```

## theme_light()

```{r}
p+ theme_light()
```
## theme_economist()

```{r}
library("ggthemes")
p+ theme_economist()
```

:::


# Save plot

```{r}
p+ theme_economist()
ggsave("myplot.png")
```


# Animation plot

```{r}
#pak::pak('thomasp85/gganimate')
library(gganimate)


p=ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
  geom_point(alpha = 0.7, show.legend = FALSE) +
  scale_colour_manual(values = country_colors) +
  scale_size(range = c(2, 12)) +
  scale_x_log10() +
  # Here comes the gganimate specific bits
  labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy',colour = "country") +
  transition_time(year) +
  ease_aes('linear')

p
```




# reference:








