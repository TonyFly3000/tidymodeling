{
  "hash": "f948db0ed36fb8668edbc042b4c383e0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"ggplot2 in R\"\nauthor: \"Tony Duan\"\n\nexecute:\n  warning: false\n  error: false\nformat:\n  html:\n    toc: true\n    toc-location: right\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n---\n\n\n![](images/Screenshot 2023-07-08 at 5.03.46 PM.png){width=\"800\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(gapminder)\nlibrary(ggpubr)\nlibrary(ggthemr)\n\nlibrary(ggplot2)\npackageVersion(\"ggplot2\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] '3.5.0'\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(reshape2)\ntips=tips\nhead(tips)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  total_bill  tip    sex smoker day   time size\n1      16.99 1.01 Female     No Sun Dinner    2\n2      10.34 1.66   Male     No Sun Dinner    3\n3      21.01 3.50   Male     No Sun Dinner    3\n4      23.68 3.31   Male     No Sun Dinner    2\n5      24.59 3.61 Female     No Sun Dinner    4\n6      25.29 4.71   Male     No Sun Dinner    4\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata001=gapminder\nhead(data001)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 6\n  country     continent  year lifeExp      pop gdpPercap\n  <fct>       <fct>     <int>   <dbl>    <int>     <dbl>\n1 Afghanistan Asia       1952    28.8  8425333      779.\n2 Afghanistan Asia       1957    30.3  9240934      821.\n3 Afghanistan Asia       1962    32.0 10267083      853.\n4 Afghanistan Asia       1967    34.0 11537966      836.\n5 Afghanistan Asia       1972    36.1 13079460      740.\n6 Afghanistan Asia       1977    38.4 14880372      786.\n```\n\n\n:::\n:::\n\n\n\n# Scatter Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip, total_bill)) + geom_point()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n## color by group\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## size by group\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip, total_bill,colour = sex,size=size)) + geom_point()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## line Plot\n\n::: {.cell}\n\n```{.r .cell-code}\ndata002= data001 %>% group_by(continent,year) %>% summarise(pop=sum(pop))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(data002 %>%filter(continent=='Asia'), aes(year, pop)) + geom_line()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n### change line size\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(data002 %>%filter(continent=='Asia'), aes(year, pop)) + geom_line(size=5)\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n## color by group\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(data002, aes(year, pop,colour = continent)) + geom_line()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n# histogram\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata002= data001 %>% filter(year==1997,continent %in% c('Asia','Africa'))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(gdpPercap)) + \n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n## color by group\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(gdpPercap,,fill = continent)) +geom_histogram(position = 'dodge')\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n# bar chart\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata002= data001 %>% filter(year==1997) %>% group_by(continent) %>% summarise(pop=sum(pop))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x=continent, y=pop)) +\n  geom_bar(stat=\"identity\")+scale_y_continuous(labels = scales::comma)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n## add number\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x=continent, y=pop)) +\n  geom_bar(stat=\"identity\")+scale_y_continuous(labels = scales::comma)+geom_text(aes(label = pop), vjust = -0.2)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n# box plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(day,tip,fill=day)) + geom_boxplot()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n\n\n## color by group\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(day,tip,fill=sex)) + geom_boxplot()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n\n# strip plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(day,tip)) + geom_jitter()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n## color by group\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(day,tip,color=sex)) + geom_jitter(position=position_jitterdodge())\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n# Facet plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip,total_bill,)) + geom_point(aes(color=sex)) + facet_wrap(\"day\")\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\nmake 3 plot per row\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip,total_bill,)) + geom_point(aes(color=sex)) + facet_wrap(\"day\",ncol = 3)\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\n\n\n# title,size,x y name\n\n\n\n\n## add title\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\")\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\n## add footnote\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\")+labs(caption = \"this is footnote\")\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## adjust size\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\")+theme(\n  plot.margin = margin(2, 2, 5, 5, \"cm\"))\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\n\n\n## change x y name\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name=\"new x name\")+ scale_y_continuous(name=\"new y name\")\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n\n## add chinses\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(showtext)\nshowtext_auto()\n\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name=\"新的 x name\")+ scale_y_continuous(name=\"新的 y name\")\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## x y break and scales limit\n\n### x scales limit\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name=\"new x name\")+ scale_y_continuous(name=\"new y name\")\np+ xlim(min=0, 20)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n### y scales limit\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name=\"new x name\")+ scale_y_continuous(name=\"new y name\")\np+ ylim(0, 100)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-29-1.png){width=672}\n:::\n:::\n\n\n\n\n\n### adding second aix\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata002= data001%>% group_by(year,continent) %>% summarise(pop=sum(pop),lifeExp=mean(lifeExp))%>%filter(continent=='Asia')\n```\n:::\n\n\n\nremove scientific notation \n\n::: {.cell}\n\n```{.r .cell-code}\ncoeff=1/40000000\n\n\np=ggplot(data002, aes(year, pop)) + geom_col() +\n  geom_line(aes(year,lifeExp/ coeff),size=2, color = \"red\") +scale_y_continuous(\"pop\", sec.axis = sec_axis(~.*coeff, name = \"lifeExp\"),labels = scales::comma)\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n\n\n\n\n# applying themes\n\n::: {.panel-tabset .nav-pills}\n\n\n## theme_bw()\n\n::: {.cell}\n\n```{.r .cell-code}\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name=\"new x name\")+ scale_y_continuous(name=\"new y name\")\np+ theme_bw()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n\n## theme_light()\n\n\n::: {.cell}\n\n```{.r .cell-code}\np+ theme_light()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-33-1.png){width=672}\n:::\n:::\n\n## theme_economist()\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"ggthemes\")\np+ theme_economist()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-34-1.png){width=672}\n:::\n:::\n\n\n:::\n\n\n# Save plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\np+ theme_economist()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-35-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"myplot.png\")\n```\n:::\n\n\n\n# Animation plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#pak::pak('thomasp85/gganimate')\nlibrary(gganimate)\n\n\np=ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +\n  geom_point(alpha = 0.7, show.legend = FALSE) +\n  scale_colour_manual(values = country_colors) +\n  scale_size(range = c(2, 12)) +\n  scale_x_log10() +\n  # Here comes the gganimate specific bits\n  # labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy',colour = \"country\") +\n  labs(title ='Year: {as.integer(frame_time)}', x = 'GDP per capita', y = 'life expectancy',colour = \"country\") +\n  transition_time(year) +\n  ease_aes('linear')\n\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-36-1.gif)\n:::\n:::\n\n\n\n\n\n# reference:\n\n\n\n\n\n\n\n\n",
    "supporting": [
      "1-ggplot2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}