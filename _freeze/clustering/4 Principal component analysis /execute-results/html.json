{
  "hash": "4fdfdea768c96ab64a65f877dd9905cc",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Principal component analysis \"\nsubtitle: \"with Mall Customers Datase\"\nexecute:\n  warning: false\n  error: false\nformat:\n  html:\n    toc: true\n    toc-location: right\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n---\n\n\n\nPrincipal component analysis (PCA) is a method of reducing the dimensionality of data and is used to improve data visualization and speed up machine learning model training.\n\n\n\n\n\n\n# load package\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidymodels)\nlibrary(tidyverse)\n```\n:::\n\n\n\n\n# data\n\n## download data\n\nhttps://www.kaggle.com/datasets/shwetabh123/mall-customer\n\n\n\n\n## input data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurl = \"https://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data\"\n\n# load dataset into Pandas DataFrame\ndf = read_csv(url,col_names = c('sepal_length','sepal_width','petal_length','petal_width','target'))\n\n# Showing overview of the train dataset\nhead(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 5\n  sepal_length sepal_width petal_length petal_width target     \n         <dbl>       <dbl>        <dbl>       <dbl> <chr>      \n1          5.1         3.5          1.4         0.2 Iris-setosa\n2          4.9         3            1.4         0.2 Iris-setosa\n3          4.7         3.2          1.3         0.2 Iris-setosa\n4          4.6         3.1          1.5         0.2 Iris-setosa\n5          5           3.6          1.4         0.2 Iris-setosa\n6          5.4         3.9          1.7         0.4 Iris-setosa\n```\n\n\n:::\n:::\n\n\n\n## STANDARDIZE THE DATA\n\n\nPCA is affected by scale, so you need to scale the features in your data before applying PCA. Use StandardScaler to help you standardize the data set’s features onto unit scale (mean = 0 and variance = 1), which is a requirement for the optimal performance of many machine learning algorithms. If you don’t scale your data, it can have a negative effect on your algorithm. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnumerical_data=data.matrix(df[c('sepal_length','sepal_width','petal_length','petal_width')])\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_normalized <- scale(numerical_data)\nhead(data_normalized)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     sepal_length sepal_width petal_length petal_width\n[1,]   -0.8976739   1.0286113    -1.336794   -1.308593\n[2,]   -1.1392005  -0.1245404    -1.336794   -1.308593\n[3,]   -1.3807271   0.3367203    -1.393470   -1.308593\n[4,]   -1.5014904   0.1060900    -1.280118   -1.308593\n[5,]   -1.0184372   1.2592416    -1.336794   -1.308593\n[6,]   -0.5353840   1.9511326    -1.166767   -1.046525\n```\n\n\n:::\n:::\n\n\n\n## Before STANDARDIZE\n\n\n## After STANDARDIZE\n\n\n\n## inverse STANDARDIZE.for testing purpose only, have no impact on PCA.\n\nfor testing purpose only.\n\n\n\n# PCA PROJECTION TO 2D\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"FactoMineR\")\nres.pca <- PCA(data_normalized,scale.unit = TRUE, ncp = 2, graph = TRUE)\n```\n\n::: {.cell-output-display}\n![](4-Principal-component-analysis-_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](4-Principal-component-analysis-_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nres.pca\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n**Results for the Principal Component Analysis (PCA)**\nThe analysis was performed on 150 individuals, described by 4 variables\n*The results are available in the following objects:\n\n   name               description                          \n1  \"$eig\"             \"eigenvalues\"                        \n2  \"$var\"             \"results for the variables\"          \n3  \"$var$coord\"       \"coord. for the variables\"           \n4  \"$var$cor\"         \"correlations variables - dimensions\"\n5  \"$var$cos2\"        \"cos2 for the variables\"             \n6  \"$var$contrib\"     \"contributions of the variables\"     \n7  \"$ind\"             \"results for the individuals\"        \n8  \"$ind$coord\"       \"coord. for the individuals\"         \n9  \"$ind$cos2\"        \"cos2 for the individuals\"           \n10 \"$ind$contrib\"     \"contributions of the individuals\"   \n11 \"$call\"            \"summary statistics\"                 \n12 \"$call$centre\"     \"mean of the variables\"              \n13 \"$call$ecart.type\" \"standard error of the variables\"    \n14 \"$call$row.w\"      \"weights for the individuals\"        \n15 \"$call$col.w\"      \"weights for the variables\"          \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nresult=res.pca$ind$coord\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(result)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 150   2\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 150   5\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"factoextra\")\neig.val <- get_eigenvalue(res.pca)\neig.val\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n      eigenvalue variance.percent cumulative.variance.percent\nDim.1 2.91081808       72.7704521                    72.77045\nDim.2 0.92122093       23.0305233                    95.80098\nDim.3 0.14735328        3.6838320                    99.48481\nDim.4 0.02060771        0.5151927                   100.00000\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfviz_eig(res.pca, addlabels = TRUE, ylim = c(0, 50))\n```\n\n::: {.cell-output-display}\n![](4-Principal-component-analysis-_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvar <- get_pca_var(res.pca)\nvar\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPrincipal Component Analysis Results for variables\n ===================================================\n  Name       Description                                    \n1 \"$coord\"   \"Coordinates for the variables\"                \n2 \"$cor\"     \"Correlations between variables and dimensions\"\n3 \"$cos2\"    \"Cos2 for the variables\"                       \n4 \"$contrib\" \"contributions of the variables\"               \n```\n\n\n:::\n:::\n\n\n\n\n\n\n# reference:\n\nhttps://www.datacamp.com/tutorial/pca-analysis-r\n\n",
    "supporting": [
      "4-Principal-component-analysis-_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}