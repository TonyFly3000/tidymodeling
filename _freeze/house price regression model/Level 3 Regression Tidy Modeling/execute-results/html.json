{
  "hash": "2ccfb0f31e241ab7e823cfc980e48782",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Level 3 Regression Tidy Modeling\"\nsubtitle: \"with house price data\"\nexecute:\n  warning: false\n  error: false\nformat:\n  html:\n    toc: true\n    toc-location: right\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n---\n\n\n* using Recipe.\n* add resamples to estimate the performance of our two models\n\n# load package\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Load Pacakges & Set Options\"}\nlibrary(themis)\nlibrary(tidyverse)      \nlibrary(tidymodels)     \nlibrary(palmerpenguins) # penguin dataset\nlibrary(gt)             # better tables\nlibrary(bonsai)         # tree-based models\nlibrary(conflicted)     # function conflicts\nlibrary(vetiver)\nlibrary(Microsoft365R)\nlibrary(pins)\ntidymodels_prefer()     # handle conflicts\nconflict_prefer(\"penguins\", \"palmerpenguins\")\noptions(tidymodels.dark = TRUE) # dark mode\ntheme_set(theme_bw()) # set default ggplot2 theme\n```\n:::\n\n\n# data preparation\n\n## read data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\ntrain = read_csv(\"data/train.csv\")\n\ntest=read_csv(\"data/test.csv\")\n```\n:::\n\n\n\n## EDA\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(train)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,460\nColumns: 81\n$ Id            <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 1…\n$ MSSubClass    <dbl> 60, 20, 60, 70, 60, 50, 20, 60, 50, 190, 20, 60, 20, 20,…\n$ MSZoning      <chr> \"RL\", \"RL\", \"RL\", \"RL\", \"RL\", \"RL\", \"RL\", \"RL\", \"RM\", \"R…\n$ LotFrontage   <dbl> 65, 80, 68, 60, 84, 85, 75, NA, 51, 50, 70, 85, NA, 91, …\n$ LotArea       <dbl> 8450, 9600, 11250, 9550, 14260, 14115, 10084, 10382, 612…\n$ Street        <chr> \"Pave\", \"Pave\", \"Pave\", \"Pave\", \"Pave\", \"Pave\", \"Pave\", …\n$ Alley         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ LotShape      <chr> \"Reg\", \"Reg\", \"IR1\", \"IR1\", \"IR1\", \"IR1\", \"Reg\", \"IR1\", …\n$ LandContour   <chr> \"Lvl\", \"Lvl\", \"Lvl\", \"Lvl\", \"Lvl\", \"Lvl\", \"Lvl\", \"Lvl\", …\n$ Utilities     <chr> \"AllPub\", \"AllPub\", \"AllPub\", \"AllPub\", \"AllPub\", \"AllPu…\n$ LotConfig     <chr> \"Inside\", \"FR2\", \"Inside\", \"Corner\", \"FR2\", \"Inside\", \"I…\n$ LandSlope     <chr> \"Gtl\", \"Gtl\", \"Gtl\", \"Gtl\", \"Gtl\", \"Gtl\", \"Gtl\", \"Gtl\", …\n$ Neighborhood  <chr> \"CollgCr\", \"Veenker\", \"CollgCr\", \"Crawfor\", \"NoRidge\", \"…\n$ Condition1    <chr> \"Norm\", \"Feedr\", \"Norm\", \"Norm\", \"Norm\", \"Norm\", \"Norm\",…\n$ Condition2    <chr> \"Norm\", \"Norm\", \"Norm\", \"Norm\", \"Norm\", \"Norm\", \"Norm\", …\n$ BldgType      <chr> \"1Fam\", \"1Fam\", \"1Fam\", \"1Fam\", \"1Fam\", \"1Fam\", \"1Fam\", …\n$ HouseStyle    <chr> \"2Story\", \"1Story\", \"2Story\", \"2Story\", \"2Story\", \"1.5Fi…\n$ OverallQual   <dbl> 7, 6, 7, 7, 8, 5, 8, 7, 7, 5, 5, 9, 5, 7, 6, 7, 6, 4, 5,…\n$ OverallCond   <dbl> 5, 8, 5, 5, 5, 5, 5, 6, 5, 6, 5, 5, 6, 5, 5, 8, 7, 5, 5,…\n$ YearBuilt     <dbl> 2003, 1976, 2001, 1915, 2000, 1993, 2004, 1973, 1931, 19…\n$ YearRemodAdd  <dbl> 2003, 1976, 2002, 1970, 2000, 1995, 2005, 1973, 1950, 19…\n$ RoofStyle     <chr> \"Gable\", \"Gable\", \"Gable\", \"Gable\", \"Gable\", \"Gable\", \"G…\n$ RoofMatl      <chr> \"CompShg\", \"CompShg\", \"CompShg\", \"CompShg\", \"CompShg\", \"…\n$ Exterior1st   <chr> \"VinylSd\", \"MetalSd\", \"VinylSd\", \"Wd Sdng\", \"VinylSd\", \"…\n$ Exterior2nd   <chr> \"VinylSd\", \"MetalSd\", \"VinylSd\", \"Wd Shng\", \"VinylSd\", \"…\n$ MasVnrType    <chr> \"BrkFace\", \"None\", \"BrkFace\", \"None\", \"BrkFace\", \"None\",…\n$ MasVnrArea    <dbl> 196, 0, 162, 0, 350, 0, 186, 240, 0, 0, 0, 286, 0, 306, …\n$ ExterQual     <chr> \"Gd\", \"TA\", \"Gd\", \"TA\", \"Gd\", \"TA\", \"Gd\", \"TA\", \"TA\", \"T…\n$ ExterCond     <chr> \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"T…\n$ Foundation    <chr> \"PConc\", \"CBlock\", \"PConc\", \"BrkTil\", \"PConc\", \"Wood\", \"…\n$ BsmtQual      <chr> \"Gd\", \"Gd\", \"Gd\", \"TA\", \"Gd\", \"Gd\", \"Ex\", \"Gd\", \"TA\", \"T…\n$ BsmtCond      <chr> \"TA\", \"TA\", \"TA\", \"Gd\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"T…\n$ BsmtExposure  <chr> \"No\", \"Gd\", \"Mn\", \"No\", \"Av\", \"No\", \"Av\", \"Mn\", \"No\", \"N…\n$ BsmtFinType1  <chr> \"GLQ\", \"ALQ\", \"GLQ\", \"ALQ\", \"GLQ\", \"GLQ\", \"GLQ\", \"ALQ\", …\n$ BsmtFinSF1    <dbl> 706, 978, 486, 216, 655, 732, 1369, 859, 0, 851, 906, 99…\n$ BsmtFinType2  <chr> \"Unf\", \"Unf\", \"Unf\", \"Unf\", \"Unf\", \"Unf\", \"Unf\", \"BLQ\", …\n$ BsmtFinSF2    <dbl> 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ BsmtUnfSF     <dbl> 150, 284, 434, 540, 490, 64, 317, 216, 952, 140, 134, 17…\n$ TotalBsmtSF   <dbl> 856, 1262, 920, 756, 1145, 796, 1686, 1107, 952, 991, 10…\n$ Heating       <chr> \"GasA\", \"GasA\", \"GasA\", \"GasA\", \"GasA\", \"GasA\", \"GasA\", …\n$ HeatingQC     <chr> \"Ex\", \"Ex\", \"Ex\", \"Gd\", \"Ex\", \"Ex\", \"Ex\", \"Ex\", \"Gd\", \"E…\n$ CentralAir    <chr> \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"…\n$ Electrical    <chr> \"SBrkr\", \"SBrkr\", \"SBrkr\", \"SBrkr\", \"SBrkr\", \"SBrkr\", \"S…\n$ `1stFlrSF`    <dbl> 856, 1262, 920, 961, 1145, 796, 1694, 1107, 1022, 1077, …\n$ `2ndFlrSF`    <dbl> 854, 0, 866, 756, 1053, 566, 0, 983, 752, 0, 0, 1142, 0,…\n$ LowQualFinSF  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ GrLivArea     <dbl> 1710, 1262, 1786, 1717, 2198, 1362, 1694, 2090, 1774, 10…\n$ BsmtFullBath  <dbl> 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1,…\n$ BsmtHalfBath  <dbl> 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ FullBath      <dbl> 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 1, 3, 1, 2, 1, 1, 1, 2, 1,…\n$ HalfBath      <dbl> 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1,…\n$ BedroomAbvGr  <dbl> 3, 3, 3, 3, 4, 1, 3, 3, 2, 2, 3, 4, 2, 3, 2, 2, 2, 2, 3,…\n$ KitchenAbvGr  <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1,…\n$ KitchenQual   <chr> \"Gd\", \"TA\", \"Gd\", \"Gd\", \"Gd\", \"TA\", \"Gd\", \"TA\", \"TA\", \"T…\n$ TotRmsAbvGrd  <dbl> 8, 6, 6, 7, 9, 5, 7, 7, 8, 5, 5, 11, 4, 7, 5, 5, 5, 6, 6…\n$ Functional    <chr> \"Typ\", \"Typ\", \"Typ\", \"Typ\", \"Typ\", \"Typ\", \"Typ\", \"Typ\", …\n$ Fireplaces    <dbl> 0, 1, 1, 1, 1, 0, 1, 2, 2, 2, 0, 2, 0, 1, 1, 0, 1, 0, 0,…\n$ FireplaceQu   <chr> NA, \"TA\", \"TA\", \"Gd\", \"TA\", NA, \"Gd\", \"TA\", \"TA\", \"TA\", …\n$ GarageType    <chr> \"Attchd\", \"Attchd\", \"Attchd\", \"Detchd\", \"Attchd\", \"Attch…\n$ GarageYrBlt   <dbl> 2003, 1976, 2001, 1998, 2000, 1993, 2004, 1973, 1931, 19…\n$ GarageFinish  <chr> \"RFn\", \"RFn\", \"RFn\", \"Unf\", \"RFn\", \"Unf\", \"RFn\", \"RFn\", …\n$ GarageCars    <dbl> 2, 2, 2, 3, 3, 2, 2, 2, 2, 1, 1, 3, 1, 3, 1, 2, 2, 2, 2,…\n$ GarageArea    <dbl> 548, 460, 608, 642, 836, 480, 636, 484, 468, 205, 384, 7…\n$ GarageQual    <chr> \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"Fa\", \"G…\n$ GarageCond    <chr> \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"T…\n$ PavedDrive    <chr> \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"…\n$ WoodDeckSF    <dbl> 0, 298, 0, 0, 192, 40, 255, 235, 90, 0, 0, 147, 140, 160…\n$ OpenPorchSF   <dbl> 61, 0, 42, 35, 84, 30, 57, 204, 0, 4, 0, 21, 0, 33, 213,…\n$ EnclosedPorch <dbl> 0, 0, 0, 272, 0, 0, 0, 228, 205, 0, 0, 0, 0, 0, 176, 0, …\n$ `3SsnPorch`   <dbl> 0, 0, 0, 0, 0, 320, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ ScreenPorch   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 176, 0, 0, 0, 0, 0, …\n$ PoolArea      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ PoolQC        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ Fence         <chr> NA, NA, NA, NA, NA, \"MnPrv\", NA, NA, NA, NA, NA, NA, NA,…\n$ MiscFeature   <chr> NA, NA, NA, NA, NA, \"Shed\", NA, \"Shed\", NA, NA, NA, NA, …\n$ MiscVal       <dbl> 0, 0, 0, 0, 0, 700, 0, 350, 0, 0, 0, 0, 0, 0, 0, 0, 700,…\n$ MoSold        <dbl> 2, 5, 9, 2, 12, 10, 8, 11, 4, 1, 2, 7, 9, 8, 5, 7, 3, 10…\n$ YrSold        <dbl> 2008, 2007, 2008, 2006, 2008, 2009, 2007, 2009, 2008, 20…\n$ SaleType      <chr> \"WD\", \"WD\", \"WD\", \"WD\", \"WD\", \"WD\", \"WD\", \"WD\", \"WD\", \"W…\n$ SaleCondition <chr> \"Normal\", \"Normal\", \"Normal\", \"Abnorml\", \"Normal\", \"Norm…\n$ SalePrice     <dbl> 208500, 181500, 223500, 140000, 250000, 143000, 307000, …\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(test)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,459\nColumns: 80\n$ Id            <dbl> 1461, 1462, 1463, 1464, 1465, 1466, 1467, 1468, 1469, 14…\n$ MSSubClass    <dbl> 20, 20, 60, 60, 120, 60, 20, 60, 20, 20, 120, 160, 160, …\n$ MSZoning      <chr> \"RH\", \"RL\", \"RL\", \"RL\", \"RL\", \"RL\", \"RL\", \"RL\", \"RL\", \"R…\n$ LotFrontage   <dbl> 80, 81, 74, 78, 43, 75, NA, 63, 85, 70, 26, 21, 21, 24, …\n$ LotArea       <dbl> 11622, 14267, 13830, 9978, 5005, 10000, 7980, 8402, 1017…\n$ Street        <chr> \"Pave\", \"Pave\", \"Pave\", \"Pave\", \"Pave\", \"Pave\", \"Pave\", …\n$ Alley         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ LotShape      <chr> \"Reg\", \"IR1\", \"IR1\", \"IR1\", \"IR1\", \"IR1\", \"IR1\", \"IR1\", …\n$ LandContour   <chr> \"Lvl\", \"Lvl\", \"Lvl\", \"Lvl\", \"HLS\", \"Lvl\", \"Lvl\", \"Lvl\", …\n$ Utilities     <chr> \"AllPub\", \"AllPub\", \"AllPub\", \"AllPub\", \"AllPub\", \"AllPu…\n$ LotConfig     <chr> \"Inside\", \"Corner\", \"Inside\", \"Inside\", \"Inside\", \"Corne…\n$ LandSlope     <chr> \"Gtl\", \"Gtl\", \"Gtl\", \"Gtl\", \"Gtl\", \"Gtl\", \"Gtl\", \"Gtl\", …\n$ Neighborhood  <chr> \"NAmes\", \"NAmes\", \"Gilbert\", \"Gilbert\", \"StoneBr\", \"Gilb…\n$ Condition1    <chr> \"Feedr\", \"Norm\", \"Norm\", \"Norm\", \"Norm\", \"Norm\", \"Norm\",…\n$ Condition2    <chr> \"Norm\", \"Norm\", \"Norm\", \"Norm\", \"Norm\", \"Norm\", \"Norm\", …\n$ BldgType      <chr> \"1Fam\", \"1Fam\", \"1Fam\", \"1Fam\", \"TwnhsE\", \"1Fam\", \"1Fam\"…\n$ HouseStyle    <chr> \"1Story\", \"1Story\", \"2Story\", \"2Story\", \"1Story\", \"2Stor…\n$ OverallQual   <dbl> 5, 6, 5, 6, 8, 6, 6, 6, 7, 4, 7, 6, 5, 6, 7, 9, 8, 9, 8,…\n$ OverallCond   <dbl> 6, 6, 5, 6, 5, 5, 7, 5, 5, 5, 5, 5, 5, 6, 6, 5, 5, 5, 5,…\n$ YearBuilt     <dbl> 1961, 1958, 1997, 1998, 1992, 1993, 1992, 1998, 1990, 19…\n$ YearRemodAdd  <dbl> 1961, 1958, 1998, 1998, 1992, 1994, 2007, 1998, 1990, 19…\n$ RoofStyle     <chr> \"Gable\", \"Hip\", \"Gable\", \"Gable\", \"Gable\", \"Gable\", \"Gab…\n$ RoofMatl      <chr> \"CompShg\", \"CompShg\", \"CompShg\", \"CompShg\", \"CompShg\", \"…\n$ Exterior1st   <chr> \"VinylSd\", \"Wd Sdng\", \"VinylSd\", \"VinylSd\", \"HdBoard\", \"…\n$ Exterior2nd   <chr> \"VinylSd\", \"Wd Sdng\", \"VinylSd\", \"VinylSd\", \"HdBoard\", \"…\n$ MasVnrType    <chr> \"None\", \"BrkFace\", \"None\", \"BrkFace\", \"None\", \"None\", \"N…\n$ MasVnrArea    <dbl> 0, 108, 0, 20, 0, 0, 0, 0, 0, 0, 0, 504, 492, 0, 0, 162,…\n$ ExterQual     <chr> \"TA\", \"TA\", \"TA\", \"TA\", \"Gd\", \"TA\", \"TA\", \"TA\", \"TA\", \"T…\n$ ExterCond     <chr> \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"Gd\", \"TA\", \"TA\", \"T…\n$ Foundation    <chr> \"CBlock\", \"CBlock\", \"PConc\", \"PConc\", \"PConc\", \"PConc\", …\n$ BsmtQual      <chr> \"TA\", \"TA\", \"Gd\", \"TA\", \"Gd\", \"Gd\", \"Gd\", \"Gd\", \"Gd\", \"T…\n$ BsmtCond      <chr> \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"T…\n$ BsmtExposure  <chr> \"No\", \"No\", \"No\", \"No\", \"No\", \"No\", \"No\", \"No\", \"Gd\", \"N…\n$ BsmtFinType1  <chr> \"Rec\", \"ALQ\", \"GLQ\", \"GLQ\", \"ALQ\", \"Unf\", \"ALQ\", \"Unf\", …\n$ BsmtFinSF1    <dbl> 468, 923, 791, 602, 263, 0, 935, 0, 637, 804, 1051, 156,…\n$ BsmtFinType2  <chr> \"LwQ\", \"Unf\", \"Unf\", \"Unf\", \"Unf\", \"Unf\", \"Unf\", \"Unf\", …\n$ BsmtFinSF2    <dbl> 144, 0, 0, 0, 0, 0, 0, 0, 0, 78, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ BsmtUnfSF     <dbl> 270, 406, 137, 324, 1017, 763, 233, 789, 663, 0, 354, 32…\n$ TotalBsmtSF   <dbl> 882, 1329, 928, 926, 1280, 763, 1168, 789, 1300, 882, 14…\n$ Heating       <chr> \"GasA\", \"GasA\", \"GasA\", \"GasA\", \"GasA\", \"GasA\", \"GasA\", …\n$ HeatingQC     <chr> \"TA\", \"TA\", \"Gd\", \"Ex\", \"Ex\", \"Gd\", \"Ex\", \"Gd\", \"Gd\", \"T…\n$ CentralAir    <chr> \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"…\n$ Electrical    <chr> \"SBrkr\", \"SBrkr\", \"SBrkr\", \"SBrkr\", \"SBrkr\", \"SBrkr\", \"S…\n$ `1stFlrSF`    <dbl> 896, 1329, 928, 926, 1280, 763, 1187, 789, 1341, 882, 13…\n$ `2ndFlrSF`    <dbl> 0, 0, 701, 678, 0, 892, 0, 676, 0, 0, 0, 504, 567, 601, …\n$ LowQualFinSF  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ GrLivArea     <dbl> 896, 1329, 1629, 1604, 1280, 1655, 1187, 1465, 1341, 882…\n$ BsmtFullBath  <dbl> 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ BsmtHalfBath  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ FullBath      <dbl> 1, 1, 2, 2, 2, 2, 2, 2, 1, 1, 2, 1, 1, 2, 1, 2, 2, 2, 2,…\n$ HalfBath      <dbl> 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0,…\n$ BedroomAbvGr  <dbl> 2, 3, 3, 3, 2, 3, 3, 3, 2, 2, 2, 2, 3, 3, 2, 3, 3, 3, 3,…\n$ KitchenAbvGr  <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ KitchenQual   <chr> \"TA\", \"Gd\", \"TA\", \"Gd\", \"Gd\", \"TA\", \"TA\", \"TA\", \"Gd\", \"T…\n$ TotRmsAbvGrd  <dbl> 5, 6, 6, 7, 5, 7, 6, 7, 5, 4, 5, 5, 6, 6, 4, 10, 7, 7, 8…\n$ Functional    <chr> \"Typ\", \"Typ\", \"Typ\", \"Typ\", \"Typ\", \"Typ\", \"Typ\", \"Typ\", …\n$ Fireplaces    <dbl> 0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1,…\n$ FireplaceQu   <chr> NA, NA, \"TA\", \"Gd\", NA, \"TA\", NA, \"Gd\", \"Po\", NA, \"Fa\", …\n$ GarageType    <chr> \"Attchd\", \"Attchd\", \"Attchd\", \"Attchd\", \"Attchd\", \"Attch…\n$ GarageYrBlt   <dbl> 1961, 1958, 1997, 1998, 1992, 1993, 1992, 1998, 1990, 19…\n$ GarageFinish  <chr> \"Unf\", \"Unf\", \"Fin\", \"Fin\", \"RFn\", \"Fin\", \"Fin\", \"Fin\", …\n$ GarageCars    <dbl> 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 1, 3, 3, 3, 3,…\n$ GarageArea    <dbl> 730, 312, 482, 470, 506, 440, 420, 393, 506, 525, 511, 2…\n$ GarageQual    <chr> \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"T…\n$ GarageCond    <chr> \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"TA\", \"T…\n$ PavedDrive    <chr> \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"…\n$ WoodDeckSF    <dbl> 140, 393, 212, 360, 0, 157, 483, 0, 192, 240, 203, 275, …\n$ OpenPorchSF   <dbl> 0, 36, 34, 36, 82, 84, 21, 75, 0, 0, 68, 0, 0, 0, 30, 13…\n$ EnclosedPorch <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ `3SsnPorch`   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ ScreenPorch   <dbl> 120, 0, 0, 0, 144, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ PoolArea      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ PoolQC        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ Fence         <chr> \"MnPrv\", NA, \"MnPrv\", NA, NA, NA, \"GdPrv\", NA, NA, \"MnPr…\n$ MiscFeature   <chr> NA, \"Gar2\", NA, NA, NA, NA, \"Shed\", NA, NA, NA, NA, NA, …\n$ MiscVal       <dbl> 0, 12500, 0, 0, 0, 0, 500, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ MoSold        <dbl> 6, 6, 3, 6, 1, 4, 3, 5, 2, 4, 6, 2, 3, 6, 6, 1, 6, 6, 2,…\n$ YrSold        <dbl> 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 20…\n$ SaleType      <chr> \"WD\", \"WD\", \"WD\", \"WD\", \"WD\", \"WD\", \"WD\", \"WD\", \"WD\", \"W…\n$ SaleCondition <chr> \"Normal\", \"Normal\", \"Normal\", \"Normal\", \"Normal\", \"Norma…\n```\n\n\n:::\n:::\n\n\n\n\n\n## plotting\n\n\n::: {.cell}\n\n```{.r .cell-code}\noptions(scipen = 999)\nggplot(train, aes(SalePrice)) + \n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![](Level-3-Regression-Tidy-Modeling_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\n\nskim(train)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |      |\n|:------------------------|:-----|\n|Name                     |train |\n|Number of rows           |1460  |\n|Number of columns        |81    |\n|_______________________  |      |\n|Column type frequency:   |      |\n|character                |43    |\n|numeric                  |38    |\n|________________________ |      |\n|Group variables          |None  |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|MSZoning      |         0|          1.00|   2|   7|     0|        5|          0|\n|Street        |         0|          1.00|   4|   4|     0|        2|          0|\n|Alley         |      1369|          0.06|   4|   4|     0|        2|          0|\n|LotShape      |         0|          1.00|   3|   3|     0|        4|          0|\n|LandContour   |         0|          1.00|   3|   3|     0|        4|          0|\n|Utilities     |         0|          1.00|   6|   6|     0|        2|          0|\n|LotConfig     |         0|          1.00|   3|   7|     0|        5|          0|\n|LandSlope     |         0|          1.00|   3|   3|     0|        3|          0|\n|Neighborhood  |         0|          1.00|   5|   7|     0|       25|          0|\n|Condition1    |         0|          1.00|   4|   6|     0|        9|          0|\n|Condition2    |         0|          1.00|   4|   6|     0|        8|          0|\n|BldgType      |         0|          1.00|   4|   6|     0|        5|          0|\n|HouseStyle    |         0|          1.00|   4|   6|     0|        8|          0|\n|RoofStyle     |         0|          1.00|   3|   7|     0|        6|          0|\n|RoofMatl      |         0|          1.00|   4|   7|     0|        8|          0|\n|Exterior1st   |         0|          1.00|   5|   7|     0|       15|          0|\n|Exterior2nd   |         0|          1.00|   5|   7|     0|       16|          0|\n|MasVnrType    |         8|          0.99|   4|   7|     0|        4|          0|\n|ExterQual     |         0|          1.00|   2|   2|     0|        4|          0|\n|ExterCond     |         0|          1.00|   2|   2|     0|        5|          0|\n|Foundation    |         0|          1.00|   4|   6|     0|        6|          0|\n|BsmtQual      |        37|          0.97|   2|   2|     0|        4|          0|\n|BsmtCond      |        37|          0.97|   2|   2|     0|        4|          0|\n|BsmtExposure  |        38|          0.97|   2|   2|     0|        4|          0|\n|BsmtFinType1  |        37|          0.97|   3|   3|     0|        6|          0|\n|BsmtFinType2  |        38|          0.97|   3|   3|     0|        6|          0|\n|Heating       |         0|          1.00|   4|   5|     0|        6|          0|\n|HeatingQC     |         0|          1.00|   2|   2|     0|        5|          0|\n|CentralAir    |         0|          1.00|   1|   1|     0|        2|          0|\n|Electrical    |         1|          1.00|   3|   5|     0|        5|          0|\n|KitchenQual   |         0|          1.00|   2|   2|     0|        4|          0|\n|Functional    |         0|          1.00|   3|   4|     0|        7|          0|\n|FireplaceQu   |       690|          0.53|   2|   2|     0|        5|          0|\n|GarageType    |        81|          0.94|   6|   7|     0|        6|          0|\n|GarageFinish  |        81|          0.94|   3|   3|     0|        3|          0|\n|GarageQual    |        81|          0.94|   2|   2|     0|        5|          0|\n|GarageCond    |        81|          0.94|   2|   2|     0|        5|          0|\n|PavedDrive    |         0|          1.00|   1|   1|     0|        3|          0|\n|PoolQC        |      1453|          0.00|   2|   2|     0|        3|          0|\n|Fence         |      1179|          0.19|   4|   5|     0|        4|          0|\n|MiscFeature   |      1406|          0.04|   4|   4|     0|        4|          0|\n|SaleType      |         0|          1.00|   2|   5|     0|        9|          0|\n|SaleCondition |         0|          1.00|   6|   7|     0|        6|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|      mean|       sd|    p0|       p25|      p50|       p75|   p100|hist  |\n|:-------------|---------:|-------------:|---------:|--------:|-----:|---------:|--------:|---------:|------:|:-----|\n|Id            |         0|          1.00|    730.50|   421.61|     1|    365.75|    730.5|   1095.25|   1460|▇▇▇▇▇ |\n|MSSubClass    |         0|          1.00|     56.90|    42.30|    20|     20.00|     50.0|     70.00|    190|▇▅▂▁▁ |\n|LotFrontage   |       259|          0.82|     70.05|    24.28|    21|     59.00|     69.0|     80.00|    313|▇▃▁▁▁ |\n|LotArea       |         0|          1.00|  10516.83|  9981.26|  1300|   7553.50|   9478.5|  11601.50| 215245|▇▁▁▁▁ |\n|OverallQual   |         0|          1.00|      6.10|     1.38|     1|      5.00|      6.0|      7.00|     10|▁▂▇▅▁ |\n|OverallCond   |         0|          1.00|      5.58|     1.11|     1|      5.00|      5.0|      6.00|      9|▁▁▇▅▁ |\n|YearBuilt     |         0|          1.00|   1971.27|    30.20|  1872|   1954.00|   1973.0|   2000.00|   2010|▁▂▃▆▇ |\n|YearRemodAdd  |         0|          1.00|   1984.87|    20.65|  1950|   1967.00|   1994.0|   2004.00|   2010|▅▂▂▃▇ |\n|MasVnrArea    |         8|          0.99|    103.69|   181.07|     0|      0.00|      0.0|    166.00|   1600|▇▁▁▁▁ |\n|BsmtFinSF1    |         0|          1.00|    443.64|   456.10|     0|      0.00|    383.5|    712.25|   5644|▇▁▁▁▁ |\n|BsmtFinSF2    |         0|          1.00|     46.55|   161.32|     0|      0.00|      0.0|      0.00|   1474|▇▁▁▁▁ |\n|BsmtUnfSF     |         0|          1.00|    567.24|   441.87|     0|    223.00|    477.5|    808.00|   2336|▇▅▂▁▁ |\n|TotalBsmtSF   |         0|          1.00|   1057.43|   438.71|     0|    795.75|    991.5|   1298.25|   6110|▇▃▁▁▁ |\n|1stFlrSF      |         0|          1.00|   1162.63|   386.59|   334|    882.00|   1087.0|   1391.25|   4692|▇▅▁▁▁ |\n|2ndFlrSF      |         0|          1.00|    346.99|   436.53|     0|      0.00|      0.0|    728.00|   2065|▇▃▂▁▁ |\n|LowQualFinSF  |         0|          1.00|      5.84|    48.62|     0|      0.00|      0.0|      0.00|    572|▇▁▁▁▁ |\n|GrLivArea     |         0|          1.00|   1515.46|   525.48|   334|   1129.50|   1464.0|   1776.75|   5642|▇▇▁▁▁ |\n|BsmtFullBath  |         0|          1.00|      0.43|     0.52|     0|      0.00|      0.0|      1.00|      3|▇▆▁▁▁ |\n|BsmtHalfBath  |         0|          1.00|      0.06|     0.24|     0|      0.00|      0.0|      0.00|      2|▇▁▁▁▁ |\n|FullBath      |         0|          1.00|      1.57|     0.55|     0|      1.00|      2.0|      2.00|      3|▁▇▁▇▁ |\n|HalfBath      |         0|          1.00|      0.38|     0.50|     0|      0.00|      0.0|      1.00|      2|▇▁▅▁▁ |\n|BedroomAbvGr  |         0|          1.00|      2.87|     0.82|     0|      2.00|      3.0|      3.00|      8|▁▇▂▁▁ |\n|KitchenAbvGr  |         0|          1.00|      1.05|     0.22|     0|      1.00|      1.0|      1.00|      3|▁▇▁▁▁ |\n|TotRmsAbvGrd  |         0|          1.00|      6.52|     1.63|     2|      5.00|      6.0|      7.00|     14|▂▇▇▁▁ |\n|Fireplaces    |         0|          1.00|      0.61|     0.64|     0|      0.00|      1.0|      1.00|      3|▇▇▁▁▁ |\n|GarageYrBlt   |        81|          0.94|   1978.51|    24.69|  1900|   1961.00|   1980.0|   2002.00|   2010|▁▁▅▅▇ |\n|GarageCars    |         0|          1.00|      1.77|     0.75|     0|      1.00|      2.0|      2.00|      4|▁▃▇▂▁ |\n|GarageArea    |         0|          1.00|    472.98|   213.80|     0|    334.50|    480.0|    576.00|   1418|▂▇▃▁▁ |\n|WoodDeckSF    |         0|          1.00|     94.24|   125.34|     0|      0.00|      0.0|    168.00|    857|▇▂▁▁▁ |\n|OpenPorchSF   |         0|          1.00|     46.66|    66.26|     0|      0.00|     25.0|     68.00|    547|▇▁▁▁▁ |\n|EnclosedPorch |         0|          1.00|     21.95|    61.12|     0|      0.00|      0.0|      0.00|    552|▇▁▁▁▁ |\n|3SsnPorch     |         0|          1.00|      3.41|    29.32|     0|      0.00|      0.0|      0.00|    508|▇▁▁▁▁ |\n|ScreenPorch   |         0|          1.00|     15.06|    55.76|     0|      0.00|      0.0|      0.00|    480|▇▁▁▁▁ |\n|PoolArea      |         0|          1.00|      2.76|    40.18|     0|      0.00|      0.0|      0.00|    738|▇▁▁▁▁ |\n|MiscVal       |         0|          1.00|     43.49|   496.12|     0|      0.00|      0.0|      0.00|  15500|▇▁▁▁▁ |\n|MoSold        |         0|          1.00|      6.32|     2.70|     1|      5.00|      6.0|      8.00|     12|▃▆▇▃▃ |\n|YrSold        |         0|          1.00|   2007.82|     1.33|  2006|   2007.00|   2008.0|   2009.00|   2010|▇▇▇▇▅ |\n|SalePrice     |         0|          1.00| 180921.20| 79442.50| 34900| 129975.00| 163000.0| 214000.00| 755000|▇▅▁▁▁ |\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\n\nskim(train)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |      |\n|:------------------------|:-----|\n|Name                     |train |\n|Number of rows           |1460  |\n|Number of columns        |81    |\n|_______________________  |      |\n|Column type frequency:   |      |\n|character                |43    |\n|numeric                  |38    |\n|________________________ |      |\n|Group variables          |None  |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|MSZoning      |         0|          1.00|   2|   7|     0|        5|          0|\n|Street        |         0|          1.00|   4|   4|     0|        2|          0|\n|Alley         |      1369|          0.06|   4|   4|     0|        2|          0|\n|LotShape      |         0|          1.00|   3|   3|     0|        4|          0|\n|LandContour   |         0|          1.00|   3|   3|     0|        4|          0|\n|Utilities     |         0|          1.00|   6|   6|     0|        2|          0|\n|LotConfig     |         0|          1.00|   3|   7|     0|        5|          0|\n|LandSlope     |         0|          1.00|   3|   3|     0|        3|          0|\n|Neighborhood  |         0|          1.00|   5|   7|     0|       25|          0|\n|Condition1    |         0|          1.00|   4|   6|     0|        9|          0|\n|Condition2    |         0|          1.00|   4|   6|     0|        8|          0|\n|BldgType      |         0|          1.00|   4|   6|     0|        5|          0|\n|HouseStyle    |         0|          1.00|   4|   6|     0|        8|          0|\n|RoofStyle     |         0|          1.00|   3|   7|     0|        6|          0|\n|RoofMatl      |         0|          1.00|   4|   7|     0|        8|          0|\n|Exterior1st   |         0|          1.00|   5|   7|     0|       15|          0|\n|Exterior2nd   |         0|          1.00|   5|   7|     0|       16|          0|\n|MasVnrType    |         8|          0.99|   4|   7|     0|        4|          0|\n|ExterQual     |         0|          1.00|   2|   2|     0|        4|          0|\n|ExterCond     |         0|          1.00|   2|   2|     0|        5|          0|\n|Foundation    |         0|          1.00|   4|   6|     0|        6|          0|\n|BsmtQual      |        37|          0.97|   2|   2|     0|        4|          0|\n|BsmtCond      |        37|          0.97|   2|   2|     0|        4|          0|\n|BsmtExposure  |        38|          0.97|   2|   2|     0|        4|          0|\n|BsmtFinType1  |        37|          0.97|   3|   3|     0|        6|          0|\n|BsmtFinType2  |        38|          0.97|   3|   3|     0|        6|          0|\n|Heating       |         0|          1.00|   4|   5|     0|        6|          0|\n|HeatingQC     |         0|          1.00|   2|   2|     0|        5|          0|\n|CentralAir    |         0|          1.00|   1|   1|     0|        2|          0|\n|Electrical    |         1|          1.00|   3|   5|     0|        5|          0|\n|KitchenQual   |         0|          1.00|   2|   2|     0|        4|          0|\n|Functional    |         0|          1.00|   3|   4|     0|        7|          0|\n|FireplaceQu   |       690|          0.53|   2|   2|     0|        5|          0|\n|GarageType    |        81|          0.94|   6|   7|     0|        6|          0|\n|GarageFinish  |        81|          0.94|   3|   3|     0|        3|          0|\n|GarageQual    |        81|          0.94|   2|   2|     0|        5|          0|\n|GarageCond    |        81|          0.94|   2|   2|     0|        5|          0|\n|PavedDrive    |         0|          1.00|   1|   1|     0|        3|          0|\n|PoolQC        |      1453|          0.00|   2|   2|     0|        3|          0|\n|Fence         |      1179|          0.19|   4|   5|     0|        4|          0|\n|MiscFeature   |      1406|          0.04|   4|   4|     0|        4|          0|\n|SaleType      |         0|          1.00|   2|   5|     0|        9|          0|\n|SaleCondition |         0|          1.00|   6|   7|     0|        6|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|      mean|       sd|    p0|       p25|      p50|       p75|   p100|hist  |\n|:-------------|---------:|-------------:|---------:|--------:|-----:|---------:|--------:|---------:|------:|:-----|\n|Id            |         0|          1.00|    730.50|   421.61|     1|    365.75|    730.5|   1095.25|   1460|▇▇▇▇▇ |\n|MSSubClass    |         0|          1.00|     56.90|    42.30|    20|     20.00|     50.0|     70.00|    190|▇▅▂▁▁ |\n|LotFrontage   |       259|          0.82|     70.05|    24.28|    21|     59.00|     69.0|     80.00|    313|▇▃▁▁▁ |\n|LotArea       |         0|          1.00|  10516.83|  9981.26|  1300|   7553.50|   9478.5|  11601.50| 215245|▇▁▁▁▁ |\n|OverallQual   |         0|          1.00|      6.10|     1.38|     1|      5.00|      6.0|      7.00|     10|▁▂▇▅▁ |\n|OverallCond   |         0|          1.00|      5.58|     1.11|     1|      5.00|      5.0|      6.00|      9|▁▁▇▅▁ |\n|YearBuilt     |         0|          1.00|   1971.27|    30.20|  1872|   1954.00|   1973.0|   2000.00|   2010|▁▂▃▆▇ |\n|YearRemodAdd  |         0|          1.00|   1984.87|    20.65|  1950|   1967.00|   1994.0|   2004.00|   2010|▅▂▂▃▇ |\n|MasVnrArea    |         8|          0.99|    103.69|   181.07|     0|      0.00|      0.0|    166.00|   1600|▇▁▁▁▁ |\n|BsmtFinSF1    |         0|          1.00|    443.64|   456.10|     0|      0.00|    383.5|    712.25|   5644|▇▁▁▁▁ |\n|BsmtFinSF2    |         0|          1.00|     46.55|   161.32|     0|      0.00|      0.0|      0.00|   1474|▇▁▁▁▁ |\n|BsmtUnfSF     |         0|          1.00|    567.24|   441.87|     0|    223.00|    477.5|    808.00|   2336|▇▅▂▁▁ |\n|TotalBsmtSF   |         0|          1.00|   1057.43|   438.71|     0|    795.75|    991.5|   1298.25|   6110|▇▃▁▁▁ |\n|1stFlrSF      |         0|          1.00|   1162.63|   386.59|   334|    882.00|   1087.0|   1391.25|   4692|▇▅▁▁▁ |\n|2ndFlrSF      |         0|          1.00|    346.99|   436.53|     0|      0.00|      0.0|    728.00|   2065|▇▃▂▁▁ |\n|LowQualFinSF  |         0|          1.00|      5.84|    48.62|     0|      0.00|      0.0|      0.00|    572|▇▁▁▁▁ |\n|GrLivArea     |         0|          1.00|   1515.46|   525.48|   334|   1129.50|   1464.0|   1776.75|   5642|▇▇▁▁▁ |\n|BsmtFullBath  |         0|          1.00|      0.43|     0.52|     0|      0.00|      0.0|      1.00|      3|▇▆▁▁▁ |\n|BsmtHalfBath  |         0|          1.00|      0.06|     0.24|     0|      0.00|      0.0|      0.00|      2|▇▁▁▁▁ |\n|FullBath      |         0|          1.00|      1.57|     0.55|     0|      1.00|      2.0|      2.00|      3|▁▇▁▇▁ |\n|HalfBath      |         0|          1.00|      0.38|     0.50|     0|      0.00|      0.0|      1.00|      2|▇▁▅▁▁ |\n|BedroomAbvGr  |         0|          1.00|      2.87|     0.82|     0|      2.00|      3.0|      3.00|      8|▁▇▂▁▁ |\n|KitchenAbvGr  |         0|          1.00|      1.05|     0.22|     0|      1.00|      1.0|      1.00|      3|▁▇▁▁▁ |\n|TotRmsAbvGrd  |         0|          1.00|      6.52|     1.63|     2|      5.00|      6.0|      7.00|     14|▂▇▇▁▁ |\n|Fireplaces    |         0|          1.00|      0.61|     0.64|     0|      0.00|      1.0|      1.00|      3|▇▇▁▁▁ |\n|GarageYrBlt   |        81|          0.94|   1978.51|    24.69|  1900|   1961.00|   1980.0|   2002.00|   2010|▁▁▅▅▇ |\n|GarageCars    |         0|          1.00|      1.77|     0.75|     0|      1.00|      2.0|      2.00|      4|▁▃▇▂▁ |\n|GarageArea    |         0|          1.00|    472.98|   213.80|     0|    334.50|    480.0|    576.00|   1418|▂▇▃▁▁ |\n|WoodDeckSF    |         0|          1.00|     94.24|   125.34|     0|      0.00|      0.0|    168.00|    857|▇▂▁▁▁ |\n|OpenPorchSF   |         0|          1.00|     46.66|    66.26|     0|      0.00|     25.0|     68.00|    547|▇▁▁▁▁ |\n|EnclosedPorch |         0|          1.00|     21.95|    61.12|     0|      0.00|      0.0|      0.00|    552|▇▁▁▁▁ |\n|3SsnPorch     |         0|          1.00|      3.41|    29.32|     0|      0.00|      0.0|      0.00|    508|▇▁▁▁▁ |\n|ScreenPorch   |         0|          1.00|     15.06|    55.76|     0|      0.00|      0.0|      0.00|    480|▇▁▁▁▁ |\n|PoolArea      |         0|          1.00|      2.76|    40.18|     0|      0.00|      0.0|      0.00|    738|▇▁▁▁▁ |\n|MiscVal       |         0|          1.00|     43.49|   496.12|     0|      0.00|      0.0|      0.00|  15500|▇▁▁▁▁ |\n|MoSold        |         0|          1.00|      6.32|     2.70|     1|      5.00|      6.0|      8.00|     12|▃▆▇▃▃ |\n|YrSold        |         0|          1.00|   2007.82|     1.33|  2006|   2007.00|   2008.0|   2009.00|   2010|▇▇▇▇▅ |\n|SalePrice     |         0|          1.00| 180921.20| 79442.50| 34900| 129975.00| 163000.0| 214000.00| 755000|▇▅▁▁▁ |\n\n\n:::\n:::\n\n\n\n\n## data split\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Prepare & Split Data\"}\ntrain_df <- train  %>% select_if(is.numeric)%>% rename(target_variable=SalePrice)%>% replace(is.na(.), 0)\n\nglimpse(train_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,460\nColumns: 38\n$ Id              <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,…\n$ MSSubClass      <dbl> 60, 20, 60, 70, 60, 50, 20, 60, 50, 190, 20, 60, 20, 2…\n$ LotFrontage     <dbl> 65, 80, 68, 60, 84, 85, 75, 0, 51, 50, 70, 85, 0, 91, …\n$ LotArea         <dbl> 8450, 9600, 11250, 9550, 14260, 14115, 10084, 10382, 6…\n$ OverallQual     <dbl> 7, 6, 7, 7, 8, 5, 8, 7, 7, 5, 5, 9, 5, 7, 6, 7, 6, 4, …\n$ OverallCond     <dbl> 5, 8, 5, 5, 5, 5, 5, 6, 5, 6, 5, 5, 6, 5, 5, 8, 7, 5, …\n$ YearBuilt       <dbl> 2003, 1976, 2001, 1915, 2000, 1993, 2004, 1973, 1931, …\n$ YearRemodAdd    <dbl> 2003, 1976, 2002, 1970, 2000, 1995, 2005, 1973, 1950, …\n$ MasVnrArea      <dbl> 196, 0, 162, 0, 350, 0, 186, 240, 0, 0, 0, 286, 0, 306…\n$ BsmtFinSF1      <dbl> 706, 978, 486, 216, 655, 732, 1369, 859, 0, 851, 906, …\n$ BsmtFinSF2      <dbl> 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ BsmtUnfSF       <dbl> 150, 284, 434, 540, 490, 64, 317, 216, 952, 140, 134, …\n$ TotalBsmtSF     <dbl> 856, 1262, 920, 756, 1145, 796, 1686, 1107, 952, 991, …\n$ `1stFlrSF`      <dbl> 856, 1262, 920, 961, 1145, 796, 1694, 1107, 1022, 1077…\n$ `2ndFlrSF`      <dbl> 854, 0, 866, 756, 1053, 566, 0, 983, 752, 0, 0, 1142, …\n$ LowQualFinSF    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ GrLivArea       <dbl> 1710, 1262, 1786, 1717, 2198, 1362, 1694, 2090, 1774, …\n$ BsmtFullBath    <dbl> 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, …\n$ BsmtHalfBath    <dbl> 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ FullBath        <dbl> 2, 2, 2, 1, 2, 1, 2, 2, 2, 1, 1, 3, 1, 2, 1, 1, 1, 2, …\n$ HalfBath        <dbl> 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, …\n$ BedroomAbvGr    <dbl> 3, 3, 3, 3, 4, 1, 3, 3, 2, 2, 3, 4, 2, 3, 2, 2, 2, 2, …\n$ KitchenAbvGr    <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, …\n$ TotRmsAbvGrd    <dbl> 8, 6, 6, 7, 9, 5, 7, 7, 8, 5, 5, 11, 4, 7, 5, 5, 5, 6,…\n$ Fireplaces      <dbl> 0, 1, 1, 1, 1, 0, 1, 2, 2, 2, 0, 2, 0, 1, 1, 0, 1, 0, …\n$ GarageYrBlt     <dbl> 2003, 1976, 2001, 1998, 2000, 1993, 2004, 1973, 1931, …\n$ GarageCars      <dbl> 2, 2, 2, 3, 3, 2, 2, 2, 2, 1, 1, 3, 1, 3, 1, 2, 2, 2, …\n$ GarageArea      <dbl> 548, 460, 608, 642, 836, 480, 636, 484, 468, 205, 384,…\n$ WoodDeckSF      <dbl> 0, 298, 0, 0, 192, 40, 255, 235, 90, 0, 0, 147, 140, 1…\n$ OpenPorchSF     <dbl> 61, 0, 42, 35, 84, 30, 57, 204, 0, 4, 0, 21, 0, 33, 21…\n$ EnclosedPorch   <dbl> 0, 0, 0, 272, 0, 0, 0, 228, 205, 0, 0, 0, 0, 0, 176, 0…\n$ `3SsnPorch`     <dbl> 0, 0, 0, 0, 0, 320, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ ScreenPorch     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 176, 0, 0, 0, 0, 0…\n$ PoolArea        <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ MiscVal         <dbl> 0, 0, 0, 0, 0, 700, 0, 350, 0, 0, 0, 0, 0, 0, 0, 0, 70…\n$ MoSold          <dbl> 2, 5, 9, 2, 12, 10, 8, 11, 4, 1, 2, 7, 9, 8, 5, 7, 3, …\n$ YrSold          <dbl> 2008, 2007, 2008, 2006, 2008, 2009, 2007, 2009, 2008, …\n$ target_variable <dbl> 208500, 181500, 223500, 140000, 250000, 143000, 307000…\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\n\ndata_split <- initial_validation_split(data=train_df, prop = c(0.7,0.1))\n\ndata_train=training(data_split)  \n\ndata_test=testing(data_split)  \n\ndata_valid=validation(data_split)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(data_train)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1021   38\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(data_test)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 293  38\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(data_valid)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 146  38\n```\n\n\n:::\n:::\n\n\n\n# modeling\n\n\n## recipe\n\nbecasue the target class is not balance so using downsample\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_rec <- recipe(target_variable ~ ., data = data_train) %>%\n  #step_downsample(target_variable) %>%\n  step_dummy(all_nominal(), -all_outcomes()) %>%\n  step_zv(all_numeric()) %>%\n  step_normalize(all_numeric())\n```\n:::\n\n\n\n## prep the recipe\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_rec=data_rec %>% prep()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_rec\n```\n:::\n\n\n## bake the train data with preded recipe\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntrain_proc <- bake(data_rec, new_data = data_train)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntrain_juice <-juice(data_rec)\n```\n:::\n\n\n\n\n## bake the test data with preded recipe\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntest_proc <- bake(data_rec, new_data = data_test)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvalid_proc <- bake(data_rec, new_data = data_valid)\n```\n:::\n\n\n## model\n\n### linear regression using OLS\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm_spec <- linear_reg() %>%\n  set_engine(engine = \"lm\")\n\nlm_spec\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nLinear Regression Model Specification (regression)\n\nComputational engine: lm \n```\n\n\n:::\n:::\n\n### lasso regression \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlasso_spec <- linear_reg(penalty = 0.1, mixture = 1) %>%\n  set_engine(\"glmnet\")\n```\n:::\n\n\n\n\n### Random Forest Model\n\n::: {.cell}\n\n```{.r .cell-code}\nrf_spec <- rand_forest(mode = \"regression\") %>%\n  set_engine(\"ranger\")\n\nrf_spec\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRandom Forest Model Specification (regression)\n\nComputational engine: ranger \n```\n\n\n:::\n:::\n\n\n\n\n## trainning\n\n### train lm model\n\n::: {.cell}\n\n```{.r .cell-code}\nlm_fit <- lm_spec %>%\n  fit(target_variable ~ ., data = train_juice)\n\nlm_fit\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nparsnip model object\n\n\nCall:\nstats::lm(formula = target_variable ~ ., data = data)\n\nCoefficients:\n           (Intercept)                      Id              MSSubClass  \n 0.0000000000000005669   0.0095589527633998129  -0.1008163065951580561  \n           LotFrontage                 LotArea             OverallQual  \n 0.0112558960124603084   0.0199161921517722780   0.3254392970223898840  \n           OverallCond               YearBuilt            YearRemodAdd  \n 0.0625066526605341233   0.1114135400373266332   0.0314517227483324044  \n            MasVnrArea              BsmtFinSF1              BsmtFinSF2  \n 0.0706469783607659024   0.0826025838548820196   0.0175206839477781637  \n             BsmtUnfSF             TotalBsmtSF              `1stFlrSF`  \n 0.0357226308946359331                      NA   0.2243934385032195500  \n            `2ndFlrSF`            LowQualFinSF               GrLivArea  \n 0.2602946576812029678   0.0003588529518760496                      NA  \n          BsmtFullBath            BsmtHalfBath                FullBath  \n 0.0635154516762644061   0.0134462690465616021   0.0257110201765828918  \n              HalfBath            BedroomAbvGr            KitchenAbvGr  \n-0.0107843009859199656  -0.0925312755823642780  -0.0369910199720795418  \n          TotRmsAbvGrd              Fireplaces             GarageYrBlt  \n 0.0749009572329452367   0.0361963020981073622  -0.0930507733042237745  \n            GarageCars              GarageArea              WoodDeckSF  \n 0.1658157480175137810   0.0056652967226544547   0.0369949895067190823  \n           OpenPorchSF           EnclosedPorch             `3SsnPorch`  \n-0.0203119050505814192  -0.0036940659561410533   0.0150245692204957378  \n           ScreenPorch                PoolArea                 MiscVal  \n 0.0305229854473593985  -0.0255798755914268157  -0.0018172481477195020  \n                MoSold                  YrSold  \n-0.0080399989861298319  -0.0125951660298317357  \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlm_fit %>% tidy()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 38 × 5\n   term          estimate std.error statistic  p.value\n   <chr>            <dbl>     <dbl>     <dbl>    <dbl>\n 1 (Intercept)   5.67e-16    0.0143  3.96e-14 1.00e+ 0\n 2 Id            9.56e- 3    0.0145  6.59e- 1 5.10e- 1\n 3 MSSubClass   -1.01e- 1    0.0179 -5.63e+ 0 2.29e- 8\n 4 LotFrontage   1.13e- 2    0.0158  7.12e- 1 4.77e- 1\n 5 LotArea       1.99e- 2    0.0162  1.23e+ 0 2.18e- 1\n 6 OverallQual   3.25e- 1    0.0261  1.25e+ 1 2.69e-33\n 7 OverallCond   6.25e- 2    0.0182  3.44e+ 0 5.98e- 4\n 8 YearBuilt     1.11e- 1    0.0290  3.84e+ 0 1.30e- 4\n 9 YearRemodAdd  3.15e- 2    0.0217  1.45e+ 0 1.48e- 1\n10 MasVnrArea    7.06e- 2    0.0171  4.12e+ 0 4.02e- 5\n# ℹ 28 more rows\n```\n\n\n:::\n:::\n\n\n### train lasso  model\n\n::: {.cell}\n\n```{.r .cell-code}\nlasso_fit <- lasso_spec %>%\n  fit(target_variable ~ ., data = train_juice)\n\nlasso_fit\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nparsnip model object\n\n\nCall:  glmnet::glmnet(x = maybe_matrix(x), y = y, family = \"gaussian\",      alpha = ~1) \n\n   Df  %Dev  Lambda\n1   0  0.00 0.79070\n2   1 10.62 0.72040\n3   1 19.45 0.65640\n4   1 26.77 0.59810\n5   2 32.89 0.54500\n6   2 39.26 0.49660\n7   2 44.56 0.45250\n8   2 48.95 0.41230\n9   3 52.79 0.37560\n10  4 56.28 0.34230\n11  5 59.43 0.31190\n12  5 62.05 0.28420\n13  5 64.22 0.25890\n14  5 66.03 0.23590\n15  5 67.53 0.21500\n16  5 68.77 0.19590\n17  5 69.80 0.17850\n18  7 70.71 0.16260\n19  9 71.66 0.14820\n20 10 72.51 0.13500\n21 10 73.26 0.12300\n22 10 73.87 0.11210\n23 11 74.40 0.10210\n24 11 74.86 0.09305\n25 13 75.37 0.08478\n26 13 75.86 0.07725\n27 13 76.28 0.07039\n28 13 76.64 0.06413\n29 13 76.95 0.05844\n30 13 77.21 0.05325\n31 13 77.42 0.04852\n32 14 77.60 0.04421\n33 14 77.75 0.04028\n34 15 77.88 0.03670\n35 15 77.99 0.03344\n36 16 78.09 0.03047\n37 17 78.27 0.02776\n38 19 78.44 0.02530\n39 20 78.62 0.02305\n40 21 78.76 0.02100\n41 22 78.90 0.01914\n42 23 79.03 0.01744\n43 24 79.14 0.01589\n44 25 79.24 0.01448\n45 25 79.32 0.01319\n46 25 79.39 0.01202\n47 26 79.45 0.01095\n48 26 79.50 0.00998\n49 27 79.54 0.00909\n50 28 79.59 0.00828\n51 29 79.62 0.00755\n52 30 79.65 0.00688\n53 30 79.68 0.00627\n54 31 79.70 0.00571\n55 31 79.72 0.00520\n56 31 79.73 0.00474\n57 32 79.74 0.00432\n58 33 79.75 0.00394\n59 33 79.76 0.00359\n60 34 79.77 0.00327\n61 34 79.78 0.00298\n62 33 79.78 0.00271\n63 33 79.79 0.00247\n64 33 79.79 0.00225\n65 33 79.79 0.00205\n66 33 79.80 0.00187\n67 34 79.80 0.00170\n68 35 79.80 0.00155\n69 35 79.80 0.00141\n70 35 79.80 0.00129\n71 35 79.81 0.00117\n72 35 79.81 0.00107\n73 35 79.81 0.00097\n74 35 79.81 0.00089\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlasso_fit %>% tidy()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 38 × 3\n   term         estimate penalty\n   <chr>           <dbl>   <dbl>\n 1 (Intercept)  9.98e-17     0.1\n 2 Id           0            0.1\n 3 MSSubClass   0            0.1\n 4 LotFrontage  0            0.1\n 5 LotArea      0            0.1\n 6 OverallQual  3.79e- 1     0.1\n 7 OverallCond  0            0.1\n 8 YearBuilt    3.02e- 2     0.1\n 9 YearRemodAdd 2.31e- 2     0.1\n10 MasVnrArea   2.36e- 2     0.1\n# ℹ 28 more rows\n```\n\n\n:::\n:::\n\n\n\n\n### train random forest model\n\n::: {.cell}\n\n```{.r .cell-code}\nrf_fit <- rf_spec %>%\n  fit(target_variable ~ ., data = train_juice)\n\nrf_fit\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nparsnip model object\n\nRanger result\n\nCall:\n ranger::ranger(x = maybe_data_frame(x), y = y, num.threads = 1,      verbose = FALSE, seed = sample.int(10^5, 1)) \n\nType:                             Regression \nNumber of trees:                  500 \nSample size:                      1021 \nNumber of independent variables:  37 \nMtry:                             6 \nTarget node size:                 5 \nVariable importance mode:         none \nSplitrule:                        variance \nOOB prediction error (MSE):       0.1557719 \nR squared (OOB):                  0.8442281 \n```\n\n\n:::\n:::\n\n\n\n\n# model result\n\n## Evaluate\n\n\n::: {.cell}\n\n```{.r .cell-code}\nresults_train <- lm_fit %>%\n  predict(new_data = train_juice) %>%\n  mutate(\n    truth = train_juice$target_variable,\n    model = \"lm\"\n  ) %>%\n  bind_rows(rf_fit %>%\n    predict(new_data = train_juice) %>%\n    mutate(\n      truth = train_juice$target_variable,\n      model = \"rf\"\n    )) %>%\n  bind_rows(lasso_fit %>%\n    predict(new_data = train_juice) %>%\n    mutate(\n      truth = train_juice$target_variable,\n      model = \"lasso\"\n    ))\n\n\nresults_test <- lm_fit %>%\n  predict(new_data = test_proc) %>%\n  mutate(\n    truth = test_proc$target_variable,\n    model = \"lm\"\n  ) %>%\n  bind_rows(rf_fit %>%\n    predict(new_data = test_proc) %>%\n    mutate(\n      truth = test_proc$target_variable,\n      model = \"rf\"\n    ))%>%\n  bind_rows(lasso_fit %>%\n    predict(new_data = test_proc) %>%\n    mutate(\n      truth = test_proc$target_variable,\n      model = \"lasso\"\n    ))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nresults_train %>%\n  group_by(model) %>%\n  rmse(truth = truth, estimate = .pred)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 4\n  model .metric .estimator .estimate\n  <chr> <chr>   <chr>          <dbl>\n1 lasso rmse    standard       0.505\n2 lm    rmse    standard       0.449\n3 rf    rmse    standard       0.169\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nresults_test %>%\n  group_by(model) %>%\n  rmse(truth = truth, estimate = .pred)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 4\n  model .metric .estimator .estimate\n  <chr> <chr>   <chr>          <dbl>\n1 lasso rmse    standard       0.459\n2 lm    rmse    standard       0.388\n3 rf    rmse    standard       0.353\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nresults_test %>%\n  mutate(train = \"testing\") %>%\n  bind_rows(results_train %>%\n    mutate(train = \"training\")) %>%\n  ggplot(aes(truth, .pred, color = model)) +\n  geom_abline(lty = 2, color = \"gray80\", size = 1.5) +\n  geom_point(alpha = 0.5) +\n  facet_wrap(~train) +\n  labs(\n    x = \"Truth\",\n    y = \"Predicted attendance\",\n    color = \"Type of model\"\n  )\n```\n\n::: {.cell-output-display}\n![](Level-3-Regression-Tidy-Modeling_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n## resample with rf model\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\nfolds <- vfold_cv(data_train)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nrf_res <- rf_spec %>% fit_resamples(\n  target_variable ~ .,\n  folds,\n  control = control_resamples(save_pred = TRUE)\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nrf_res %>%\n  collect_metrics()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 6\n  .metric .estimator      mean     n   std_err .config             \n  <chr>   <chr>          <dbl> <int>     <dbl> <chr>               \n1 rmse    standard   30645.       10 2324.     Preprocessor1_Model1\n2 rsq     standard       0.859    10    0.0218 Preprocessor1_Model1\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlasso_res <- lasso_spec %>% fit_resamples(\n  target_variable ~ .,\n  folds,\n  control = control_resamples(save_pred = TRUE)\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlasso_res %>%\n  collect_metrics()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 6\n  .metric .estimator      mean     n   std_err .config             \n  <chr>   <chr>          <dbl> <int>     <dbl> <chr>               \n1 rmse    standard   39201.       10 4620.     Preprocessor1_Model1\n2 rsq     standard       0.769    10    0.0422 Preprocessor1_Model1\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlm_res <- lm_spec %>% fit_resamples(\n  target_variable ~ .,\n  folds,\n  control = control_resamples(save_pred = TRUE)\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlm_res %>%\n  collect_metrics()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 6\n  .metric .estimator      mean     n   std_err .config             \n  <chr>   <chr>          <dbl> <int>     <dbl> <chr>               \n1 rmse    standard   39279.       10 4626.     Preprocessor1_Model1\n2 rsq     standard       0.768    10    0.0422 Preprocessor1_Model1\n```\n\n\n:::\n:::\n\n\n\nShow all resample result:\n\n::: {.cell}\n\n```{.r .cell-code}\nrf_res %>%\n  unnest(.predictions) %>%\n  ggplot(aes(target_variable, .pred, color = id)) +\n  geom_abline(lty = 2, color = \"gray80\", size = 1.5) +\n  geom_point(alpha = 0.5) +\n  labs(\n    x = \"Truth\",\n    y = \"Prediction\",\n    color = NULL\n  )\n```\n\n::: {.cell-output-display}\n![](Level-3-Regression-Tidy-Modeling_files/figure-html/unnamed-chunk-39-1.png){width=672}\n:::\n:::\n\n\nShow each resample result:\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gganimate)\n\np=rf_res %>%\n  unnest(.predictions) %>%\n  ggplot(aes(target_variable, .pred, color = id)) +\n  geom_abline(lty = 2, color = \"gray80\", size = 1.5) +\n  geom_point(alpha = 0.5) +\n  labs(\n    x = \"Truth\",\n    y = \"Prediction\",\n    color = NULL\n  )+transition_states(id)\n\np\n```\n\n::: {.cell-output-display}\n![](Level-3-Regression-Tidy-Modeling_files/figure-html/unnamed-chunk-40-1.gif)\n:::\n:::\n\n\n\n\n\n# resouece\n\nhttps://www.youtube.com/watch?v=1LEW8APSOJo\n\n\n\n",
    "supporting": [
      "Level-3-Regression-Tidy-Modeling_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}