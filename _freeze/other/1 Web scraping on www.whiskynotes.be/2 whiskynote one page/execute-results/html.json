{
  "hash": "bed3dd439970756041ab3031ef0f6e69",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"One page reveiw\"\nsubtitle: \"with whiskynote.be data\"\nauthor: \"Tony Duan\"\n\nexecute:\n  warning: false\n  error: false\n\nformat:\n  html:\n    toc: true\n    toc-location: right\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(rvest)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npackageVersion(\"rvest\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] '1.0.4'\n```\n\n\n:::\n:::\n\n\nWeb scraping on www.whiskynotes.be\n\n# review page\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreview_url='https://www.whiskynotes.be/2024/ardbeg/spheric-spirits-springbank-blended-malt-islay-malt/'\n\n#review_url='https://www.whiskynotes.be/2011/port-ellen/port-ellen-10th-release-1978/'\n```\n:::\n\n\n\n![](images/clipboard-714698276.png){width=\"441\"}\n\n# read in html\n\n::: {.cell}\n\n```{.r .cell-code}\nreview_page <- read_html(review_url)\n```\n:::\n\n\n# bottle_name\n\n::: {.cell}\n\n```{.r .cell-code}\nbottle_name=review_page  %>% html_elements(\".entry-content h2\") %>% html_text2()\n# remove empty element\nbottle_name=bottle_name[nzchar(bottle_name)]\n# remove space element\nbottle_name=bottle_name[nchar(bottle_name)>2]\nbottle_name\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Blended Malt 44 yo 1978 (59,8%, Spheric Spirits 2023, refill sherry butt #6, 331 btl.)\"   \n[2] \"Springbank 27 yo 1994 (47,1%, Spheric Spirits 2022, refill sherry hogshead #95, 241 btl.)\"\n[3] \"Islay Malt 25 yo (48,4%, Spheric Spirits 2022, 407 btl.)\"                                 \n```\n\n\n:::\n:::\n\n# bottle_review\n\n::: {.cell}\n\n```{.r .cell-code}\nbottle_review=review_page  %>% html_elements(\"p\") %>% html_text2()\nbottle_review\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Spheric Spirits is a young indie bottler from Germany, started by Benedict and Claudio. They have a slightly edgy / flashy branding (check the website) – I like the vibrant colours on the labels but apparently not everything agrees. Besides whisky, they’re also looking at armagnac and destilado de agave. They’re not just bottlers, by the way, they like to get involved at the beginning of production.\"\n [2] \"First up is a Blended Malt 1978, which is probably old Long John blending stock. It ended up forgotten due to a change of brand ownership in 1981. If this is true, then the peated component is probably 1970s Laphroaig.\"                                                                                                                                                                                        \n [3] \" \"                                                                                                                                                                                                                                                                                                                                                                                                                 \n [4] \"Nose: indeed you get this old school faded peat mixed with tropical fruits. Yellow plums, papaya, dried pineapple slices, peach and drizzles of honey. There’s a good dose of polished wood and light coconut (giving it an American touch) as well as paraffin, pine needles, buttery cake dough, walnuts and hints of old Amontillado. Quite stunning so far, you don’t get this profile often.\"                 \n [5] \"Mouth: peatier now, and more woody. Hints of plums and melons, as well as tangerines and overripe bananas. Something of the 1960s Ben Nevis waxiness, coconut, and some bitter herbs. Then a grassy sharpness, some cinnamon and ginger, as well as butter cookies, hazelnuts and pipe tobacco. Slightly astringent at times, but still it’s an uncommon, intruiging profile including nicely medicinal smoke.\"    \n [6] \"Finish: long, honeyed but also spicy, with peppery notes and a little fruit tea. Caramelized nuts and wood until the very end.\"                                                                                                                                                                                                                                                                                    \n [7] \"I remember hesitating to buy a bottle of this blended malt – honestly I thought it was too expensive at € 800+. However after trying it, I’m hesitating again because it’s such a unique profile. Almost sold out, I believe, but still seen at Whisky-Maniac for instance.\"                                                                                                                                       \n [8] \" \"                                                                                                                                                                                                                                                                                                                                                                                                                 \n [9] \" \"                                                                                                                                                                                                                                                                                                                                                                                                                 \n[10] \"Nose: very mineral, you could almost think of mezcal here. Plenty of linseed or sunflower oil and waxed canvas, wax candles and some vegetal hints. Light orchard fruits in second row, maybe even a hint of green pineapple. Then a mossy note and a drop of seawater. Very clean, with virtually voiceless sherry (unless it was Fino).\"                                                                         \n[11] \"Mouth: a rather wonderful mix of minerals and waxes, with green fruits. Think kiwi and green apple. Then chalky notes and more vegetal oils, as well as grapefruit. Fresh herbs and a little eucalyptus. Light coastal touches. Just a hint of marshmallow sweetness in the background.\"                                                                                                                           \n[12] \"Finish: long, still lean and elegant, with lime and herbs, barley sweetness and aniseed.\"                                                                                                                                                                                                                                                                                                                          \n[13] \"Again, not a cheap whisky but very well chosen. Reminds me of the Whisky Sponge 60a, although this one is even more clean. Perhaps too clean for some. Still listed on the website of Hogshead Imports, but I believe we’ll be too late… Score: 91/100\"                                                                                                                                                            \n[14] \" \"                                                                                                                                                                                                                                                                                                                                                                                                                 \n[15] \"We end this (already impressive) session with a secret Islay Malt, a mix of the 1993 and 1994 vintages. Spheric Spirits tell us that this is one of the unusual batches produced on site in the early 1990s by the team of a neighbouring brand, just to keep the distillery operational. Isn’t that the time when Allied Distillers made Laphroaig at Ardbeg?\"                                                    \n[16] \"Medicinal peat smoke is well integrated into its otherwise fruity and citrusy nose. Even hints of tropical nuances are detectable. On the pallet sweet peat shows up more present with a salty tang. Lovely old school earthy medicinal peatiness, no bonfire smoke. The mouthfeel is incredibly oily and lingering.\"                                                                                              \n[17] \" \"                                                                                                                                                                                                                                                                                                                                                                                                                 \n[18] \"Nose: nice engine oil along with medicinal peat. Perhaps a little smokier / Laphroaigier than some other ‘Begs? Mentholated notes and subtle antiseptics. Then delicated earthy notes, big hints of lemons and just a hint of vanilla. Soft orange notes, malty sweetness and peaches. All in all quite mild.\"                                                                                                     \n[19] \"Mouth: more intensely peaty now, more clearly Ardbeg. Big medicinal notes, with some tar in the distance, as well as smoked meat. Then some lighter, fruitier notes, a little salt, and a hint of tea leaves. Towards the end it becomes more narrow again, with sour citrus and mineral notes that remind me of Caol Ila.\"                                                                                        \n[20] \"Finish: long, citrusy, with hints of charcoal, light pear and tarry ropes. Just a subtle touch of bitter herbs.\"                                                                                                                                                                                                                                                                                                   \n[21] \"Some beautiful old school notes in here again, although they may not be entirely Ardbeg if you know what I mean. Sold out. I apologize for not discovering Spheric Spirits sooner. Score: 90/100\"                                                                                                                                                                                                                  \n[22] \"Your email address will not be published. Required fields are marked *\"                                                                                                                                                                                                                                                                                                                                            \n[23] \"Comment *\"                                                                                                                                                                                                                                                                                                                                                                                                         \n[24] \"Name *\"                                                                                                                                                                                                                                                                                                                                                                                                            \n[25] \"Email *\"                                                                                                                                                                                                                                                                                                                                                                                                           \n[26] \"Website\"                                                                                                                                                                                                                                                                                                                                                                                                           \n[27] \"\"                                                                                                                                                                                                                                                                                                                                                                                                                  \n[28] \"\"                                                                                                                                                                                                                                                                                                                                                                                                                  \n[29] \"Δdocument.getElementById( \\\"ak_js_1\\\" ).setAttribute( \\\"value\\\", ( new Date() ).getTime() );\"                                                                                                                                                                                                                                                                                                                      \n[30] \"This site uses Akismet to reduce spam. Learn how your comment data is processed.\"                                                                                                                                                                                                                                                                                                                                  \n[31] \"Begin typing your search above and press return to search. Press Esc to cancel.\"                                                                                                                                                                                                                                                                                                                                   \n```\n\n\n:::\n:::\n\n\n# bottle_review_Nose\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbottle_review_Nose=bottle_review[bottle_review %>% str_detect('Nose:')]\nbottle_review_Nose\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Nose: indeed you get this old school faded peat mixed with tropical fruits. Yellow plums, papaya, dried pineapple slices, peach and drizzles of honey. There’s a good dose of polished wood and light coconut (giving it an American touch) as well as paraffin, pine needles, buttery cake dough, walnuts and hints of old Amontillado. Quite stunning so far, you don’t get this profile often.\"\n[2] \"Nose: very mineral, you could almost think of mezcal here. Plenty of linseed or sunflower oil and waxed canvas, wax candles and some vegetal hints. Light orchard fruits in second row, maybe even a hint of green pineapple. Then a mossy note and a drop of seawater. Very clean, with virtually voiceless sherry (unless it was Fino).\"                                                        \n[3] \"Nose: nice engine oil along with medicinal peat. Perhaps a little smokier / Laphroaigier than some other ‘Begs? Mentholated notes and subtle antiseptics. Then delicated earthy notes, big hints of lemons and just a hint of vanilla. Soft orange notes, malty sweetness and peaches. All in all quite mild.\"                                                                                    \n```\n\n\n:::\n:::\n\n\n# bottle_review_Mouth\n\n::: {.cell}\n\n```{.r .cell-code}\nbottle_review_Mouth=bottle_review[bottle_review %>% str_detect('Mouth:')]\nbottle_review_Mouth\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Mouth: peatier now, and more woody. Hints of plums and melons, as well as tangerines and overripe bananas. Something of the 1960s Ben Nevis waxiness, coconut, and some bitter herbs. Then a grassy sharpness, some cinnamon and ginger, as well as butter cookies, hazelnuts and pipe tobacco. Slightly astringent at times, but still it’s an uncommon, intruiging profile including nicely medicinal smoke.\"\n[2] \"Mouth: a rather wonderful mix of minerals and waxes, with green fruits. Think kiwi and green apple. Then chalky notes and more vegetal oils, as well as grapefruit. Fresh herbs and a little eucalyptus. Light coastal touches. Just a hint of marshmallow sweetness in the background.\"                                                                                                                       \n[3] \"Mouth: more intensely peaty now, more clearly Ardbeg. Big medicinal notes, with some tar in the distance, as well as smoked meat. Then some lighter, fruitier notes, a little salt, and a hint of tea leaves. Towards the end it becomes more narrow again, with sour citrus and mineral notes that remind me of Caol Ila.\"                                                                                    \n```\n\n\n:::\n:::\n\n\n# bottle_review_Finish\n\n::: {.cell}\n\n```{.r .cell-code}\nbottle_review_Finish=bottle_review[bottle_review %>% str_detect('Finish:')]\nbottle_review_Finish\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Finish: long, honeyed but also spicy, with peppery notes and a little fruit tea. Caramelized nuts and wood until the very end.\"\n[2] \"Finish: long, still lean and elegant, with lime and herbs, barley sweetness and aniseed.\"                                      \n[3] \"Finish: long, citrusy, with hints of charcoal, light pear and tarry ropes. Just a subtle touch of bitter herbs.\"               \n```\n\n\n:::\n:::\n\n\n# first score\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfirst_bottle_score=review_page  %>% html_elements(\".entry-score\") %>% html_text2()\nfirst_bottle_score=first_bottle_score %>% str_match('[0-9][0-9]') %>% as.data.frame() %>% filter(is.na(V1)==FALSE)\n```\n:::\n\n\n# all other score\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbottle_score=review_page  %>% html_elements(\"strong\") %>% html_text2()\n  \nbottle_score2=bottle_score %>% str_match('[0-9][0-9]/100') %>% as.data.frame() %>% filter(is.na(V1)==FALSE)\n\nbottle_score2=bottle_score2 %>% mutate(V1=str_replace(V1,'/100',''))\n```\n:::\n\n\n# combine all score\n\n::: {.cell}\n\n```{.r .cell-code}\n# move the last one to the first one\nif(identical(bottle_score, character(0))==TRUE|nrow(bottle_score2)==0){\n    all_page_score=first_bottle_score %>% tibble()%>% rename(all_page_score='.') \n  }else{\n  #bottle_score=bottle_score %>% str_match('[0-9][0-9]') %>% as.data.frame() %>% filter(is.na(V1)==FALSE)\n  all_page_score=rbind(first_bottle_score,bottle_score2) %>% rename(all_page_score=V1) \n  }\nall_page_score\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  all_page_score\n1             92\n2             91\n3             90\n```\n\n\n:::\n:::\n\n\n# page_published_date\n\n\n::: {.cell}\n\n```{.r .cell-code}\npage_published_date=review_page  %>% html_elements(\".published\") %>% html_text2()\npage_published_date\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"16 April 2024\"\n```\n\n\n:::\n:::\n\n\n# page_class\n\n\n::: {.cell}\n\n```{.r .cell-code}\npage_class=review_page  %>% html_elements(\".cat-links a\") %>% html_text2()\npage_class=str_flatten(page_class,collapse = \"--\")\npage_class\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"* Blends--Ardbeg--Springbank\"\n```\n\n\n:::\n:::\n\n\n# page_title\n\n\n::: {.cell}\n\n```{.r .cell-code}\npage_title=review_page  %>% html_elements(\".entry-title\") %>% html_text2()\npage_title\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Spheric Spirits: Springbank / Blended Malt / Islay Malt\"\n```\n\n\n:::\n:::\n\n\n# combine all one_page_review\n\n\n::: {.cell}\n\n```{.r .cell-code}\none_page_review=data_frame(bottle_name,bottle_review_Nose,bottle_review_Mouth,bottle_review_Finish,all_page_score,page_class,page_published_date,page_title,review_url)\none_page_review\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 9\n  bottle_name        bottle_review_Nose bottle_review_Mouth bottle_review_Finish\n  <chr>              <chr>              <chr>               <chr>               \n1 Blended Malt 44 y… Nose: indeed you … Mouth: peatier now… Finish: long, honey…\n2 Springbank 27 yo … Nose: very minera… Mouth: a rather wo… Finish: long, still…\n3 Islay Malt 25 yo … Nose: nice engine… Mouth: more intens… Finish: long, citru…\n# ℹ 5 more variables: all_page_score <chr>, page_class <chr>,\n#   page_published_date <chr>, page_title <chr>, review_url <chr>\n```\n\n\n:::\n:::\n\n\n# output\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(openxlsx)\nwrite.xlsx(one_page_review,'one_page_review.xlsx')\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}